(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var dw={exports:{}},ah={};var y_;function hD(){if(y_)return ah;y_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var d in i)d!=="key"&&(o[d]=i[d])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:o}}return ah.Fragment=e,ah.jsx=t,ah.jsxs=t,ah}var w_;function fD(){return w_||(w_=1,dw.exports=hD()),dw.exports}var g=fD(),hw={exports:{}},Ge={};var b_;function mD(){if(b_)return Ge;b_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=x&&V[x]||V["@@iterator"],typeof V=="function"?V:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,C={};function D(V,z,oe){this.props=V,this.context=z,this.refs=C,this.updater=oe||k}D.prototype.isReactComponent={},D.prototype.setState=function(V,z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,z,"setState")},D.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function F(){}F.prototype=D.prototype;function U(V,z,oe){this.props=V,this.context=z,this.refs=C,this.updater=oe||k}var $=U.prototype=new F;$.constructor=U,N($,D.prototype),$.isPureReactComponent=!0;var Y=Array.isArray;function te(){}var T={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function P(V,z,oe){var ae=oe.ref;return{$$typeof:n,type:V,key:z,ref:ae!==void 0?ae:null,props:oe}}function L(V,z){return P(V.type,z,V.props)}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function j(V){var z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(oe){return z[oe]})}var M=/\/+/g;function ye(V,z){return typeof V=="object"&&V!==null&&V.key!=null?j(""+V.key):z.toString(36)}function ee(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(te,te):(V.status="pending",V.then(function(z){V.status==="pending"&&(V.status="fulfilled",V.value=z)},function(z){V.status==="pending"&&(V.status="rejected",V.reason=z)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function G(V,z,oe,ae,we){var Re=typeof V;(Re==="undefined"||Re==="boolean")&&(V=null);var Te=!1;if(V===null)Te=!0;else switch(Re){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(V.$$typeof){case n:case e:Te=!0;break;case w:return Te=V._init,G(Te(V._payload),z,oe,ae,we)}}if(Te)return we=we(V),Te=ae===""?"."+ye(V,0):ae,Y(we)?(oe="",Te!=null&&(oe=Te.replace(M,"$&/")+"/"),G(we,z,oe,"",function(Bn){return Bn})):we!=null&&(B(we)&&(we=L(we,oe+(we.key==null||V&&V.key===we.key?"":(""+we.key).replace(M,"$&/")+"/")+Te)),z.push(we)),1;Te=0;var Ze=ae===""?".":ae+":";if(Y(V))for(var Le=0;Le<V.length;Le++)ae=V[Le],Re=Ze+ye(ae,Le),Te+=G(ae,z,oe,Re,we);else if(Le=S(V),typeof Le=="function")for(V=Le.call(V),Le=0;!(ae=V.next()).done;)ae=ae.value,Re=Ze+ye(ae,Le++),Te+=G(ae,z,oe,Re,we);else if(Re==="object"){if(typeof V.then=="function")return G(ee(V),z,oe,ae,we);throw z=String(V),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Te}function se(V,z,oe){if(V==null)return V;var ae=[],we=0;return G(V,ae,"","",function(Re){return z.call(oe,Re,we++)}),ae}function pe(V){if(V._status===-1){var z=V._result;z=z(),z.then(function(oe){(V._status===0||V._status===-1)&&(V._status=1,V._result=oe)},function(oe){(V._status===0||V._status===-1)&&(V._status=2,V._result=oe)}),V._status===-1&&(V._status=0,V._result=z)}if(V._status===1)return V._result.default;throw V._result}var ve=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},de={map:se,forEach:function(V,z,oe){se(V,function(){z.apply(this,arguments)},oe)},count:function(V){var z=0;return se(V,function(){z++}),z},toArray:function(V){return se(V,function(z){return z})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ge.Activity=b,Ge.Children=de,Ge.Component=D,Ge.Fragment=t,Ge.Profiler=i,Ge.PureComponent=U,Ge.StrictMode=r,Ge.Suspense=h,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(V){return T.H.useMemoCache(V)}},Ge.cache=function(V){return function(){return V.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(V,z,oe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ae=N({},V.props),we=V.key;if(z!=null)for(Re in z.key!==void 0&&(we=""+z.key),z)!_.call(z,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&z.ref===void 0||(ae[Re]=z[Re]);var Re=arguments.length-2;if(Re===1)ae.children=oe;else if(1<Re){for(var Te=Array(Re),Ze=0;Ze<Re;Ze++)Te[Ze]=arguments[Ze+2];ae.children=Te}return P(V.type,we,ae)},Ge.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},Ge.createElement=function(V,z,oe){var ae,we={},Re=null;if(z!=null)for(ae in z.key!==void 0&&(Re=""+z.key),z)_.call(z,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(we[ae]=z[ae]);var Te=arguments.length-2;if(Te===1)we.children=oe;else if(1<Te){for(var Ze=Array(Te),Le=0;Le<Te;Le++)Ze[Le]=arguments[Le+2];we.children=Ze}if(V&&V.defaultProps)for(ae in Te=V.defaultProps,Te)we[ae]===void 0&&(we[ae]=Te[ae]);return P(V,Re,we)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(V){return{$$typeof:d,render:V}},Ge.isValidElement=B,Ge.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:pe}},Ge.memo=function(V,z){return{$$typeof:m,type:V,compare:z===void 0?null:z}},Ge.startTransition=function(V){var z=T.T,oe={};T.T=oe;try{var ae=V(),we=T.S;we!==null&&we(oe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(te,ve)}catch(Re){ve(Re)}finally{z!==null&&oe.types!==null&&(z.types=oe.types),T.T=z}},Ge.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ge.use=function(V){return T.H.use(V)},Ge.useActionState=function(V,z,oe){return T.H.useActionState(V,z,oe)},Ge.useCallback=function(V,z){return T.H.useCallback(V,z)},Ge.useContext=function(V){return T.H.useContext(V)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(V,z){return T.H.useDeferredValue(V,z)},Ge.useEffect=function(V,z){return T.H.useEffect(V,z)},Ge.useEffectEvent=function(V){return T.H.useEffectEvent(V)},Ge.useId=function(){return T.H.useId()},Ge.useImperativeHandle=function(V,z,oe){return T.H.useImperativeHandle(V,z,oe)},Ge.useInsertionEffect=function(V,z){return T.H.useInsertionEffect(V,z)},Ge.useLayoutEffect=function(V,z){return T.H.useLayoutEffect(V,z)},Ge.useMemo=function(V,z){return T.H.useMemo(V,z)},Ge.useOptimistic=function(V,z){return T.H.useOptimistic(V,z)},Ge.useReducer=function(V,z,oe){return T.H.useReducer(V,z,oe)},Ge.useRef=function(V){return T.H.useRef(V)},Ge.useState=function(V){return T.H.useState(V)},Ge.useSyncExternalStore=function(V,z,oe){return T.H.useSyncExternalStore(V,z,oe)},Ge.useTransition=function(){return T.H.useTransition()},Ge.version="19.2.4",Ge}var v_;function lv(){return v_||(v_=1,hw.exports=mD()),hw.exports}var I=lv(),fw={exports:{}},oh={},mw={exports:{}},pw={};var x_;function pD(){return x_||(x_=1,(function(n){function e(G,se){var pe=G.length;G.push(se);e:for(;0<pe;){var ve=pe-1>>>1,de=G[ve];if(0<i(de,se))G[ve]=se,G[pe]=de,pe=ve;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var se=G[0],pe=G.pop();if(pe!==se){G[0]=pe;e:for(var ve=0,de=G.length,V=de>>>1;ve<V;){var z=2*(ve+1)-1,oe=G[z],ae=z+1,we=G[ae];if(0>i(oe,pe))ae<de&&0>i(we,oe)?(G[ve]=we,G[ae]=pe,ve=ae):(G[ve]=oe,G[z]=pe,ve=z);else if(ae<de&&0>i(we,pe))G[ve]=we,G[ae]=pe,ve=ae;else break e}}return se}function i(G,se){var pe=G.sortIndex-se.sortIndex;return pe!==0?pe:G.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],m=[],w=1,b=null,x=3,S=!1,k=!1,N=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function $(G){for(var se=t(m);se!==null;){if(se.callback===null)r(m);else if(se.startTime<=G)r(m),se.sortIndex=se.expirationTime,e(h,se);else break;se=t(m)}}function Y(G){if(N=!1,$(G),!k)if(t(h)!==null)k=!0,te||(te=!0,j());else{var se=t(m);se!==null&&ee(Y,se.startTime-G)}}var te=!1,T=-1,_=5,P=-1;function L(){return C?!0:!(n.unstable_now()-P<_)}function B(){if(C=!1,te){var G=n.unstable_now();P=G;var se=!0;try{e:{k=!1,N&&(N=!1,F(T),T=-1),S=!0;var pe=x;try{t:{for($(G),b=t(h);b!==null&&!(b.expirationTime>G&&L());){var ve=b.callback;if(typeof ve=="function"){b.callback=null,x=b.priorityLevel;var de=ve(b.expirationTime<=G);if(G=n.unstable_now(),typeof de=="function"){b.callback=de,$(G),se=!0;break t}b===t(h)&&r(h),$(G)}else r(h);b=t(h)}if(b!==null)se=!0;else{var V=t(m);V!==null&&ee(Y,V.startTime-G),se=!1}}break e}finally{b=null,x=pe,S=!1}se=void 0}}finally{se?j():te=!1}}}var j;if(typeof U=="function")j=function(){U(B)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ye=M.port2;M.port1.onmessage=B,j=function(){ye.postMessage(null)}}else j=function(){D(B,0)};function ee(G,se){T=D(function(){G(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(G){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var pe=x;x=se;try{return G()}finally{x=pe}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(G,se){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var pe=x;x=G;try{return se()}finally{x=pe}},n.unstable_scheduleCallback=function(G,se,pe){var ve=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ve+pe:ve):pe=ve,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=pe+de,G={id:w++,callback:se,priorityLevel:G,startTime:pe,expirationTime:de,sortIndex:-1},pe>ve?(G.sortIndex=pe,e(m,G),t(h)===null&&G===t(m)&&(N?(F(T),T=-1):N=!0,ee(Y,pe-ve))):(G.sortIndex=de,e(h,G),k||S||(k=!0,te||(te=!0,j()))),G},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(G){var se=x;return function(){var pe=x;x=se;try{return G.apply(this,arguments)}finally{x=pe}}}})(pw)),pw}var A_;function gD(){return A_||(A_=1,mw.exports=pD()),mw.exports}var gw={exports:{}},cr={};var E_;function yD(){if(E_)return cr;E_=1;var n=lv();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,m,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:h,containerInfo:m,implementation:w}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cr.createPortal=function(h,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(h,m,null,w)},cr.flushSync=function(h){var m=c.T,w=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=m,r.p=w,r.d.f()}},cr.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(h,m))},cr.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},cr.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var w=m.as,b=d(w,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;w==="style"?r.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:S}):w==="script"&&r.d.X(h,{crossOrigin:b,integrity:x,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},cr.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var w=d(m.as,m.crossOrigin);r.d.M(h,{crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(h)},cr.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var w=m.as,b=d(w,m.crossOrigin);r.d.L(h,w,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},cr.preloadModule=function(h,m){if(typeof h=="string")if(m){var w=d(m.as,m.crossOrigin);r.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(h)},cr.requestFormReset=function(h){r.d.r(h)},cr.unstable_batchedUpdates=function(h,m){return h(m)},cr.useFormState=function(h,m,w){return c.H.useFormState(h,m,w)},cr.useFormStatus=function(){return c.H.useHostTransitionStatus()},cr.version="19.2.4",cr}var __;function wD(){if(__)return gw.exports;__=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gw.exports=yD(),gw.exports}var T_;function bD(){if(T_)return oh;T_=1;var n=gD(),e=lv(),t=wD();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(r(188))}function m(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,u=a;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return h(p),s;if(y===u)return h(p),a;y=y.sibling}throw Error(r(188))}if(l.return!==u.return)l=p,u=y;else{for(var A=!1,R=p.child;R;){if(R===l){A=!0,l=p,u=y;break}if(R===u){A=!0,u=p,l=y;break}R=R.sibling}if(!A){for(R=y.child;R;){if(R===l){A=!0,l=y,u=p;break}if(R===u){A=!0,u=y,l=p;break}R=R.sibling}if(!A)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function w(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=w(s),a!==null)return a;s=s.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),U=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function j(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function ye(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case D:return"Profiler";case C:return"StrictMode";case Y:return"Suspense";case te:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case U:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case $:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case T:return a=s.displayName||null,a!==null?a:ye(s.type)||"Memo";case _:a=s._payload,s=s._init;try{return ye(s(a))}catch{}}return null}var ee=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ve=[],de=-1;function V(s){return{current:s}}function z(s){0>de||(s.current=ve[de],ve[de]=null,de--)}function oe(s,a){de++,ve[de]=s.current,s.current=a}var ae=V(null),we=V(null),Re=V(null),Te=V(null);function Ze(s,a){switch(oe(Re,a),oe(we,s),oe(ae,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?V2(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=V2(a),s=F2(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}z(ae),oe(ae,s)}function Le(){z(ae),z(we),z(Re)}function Bn(s){s.memoizedState!==null&&oe(Te,s);var a=ae.current,l=F2(a,s.type);a!==l&&(oe(we,s),oe(ae,l))}function Ps(s){we.current===s&&(z(ae),z(we)),Te.current===s&&(z(Te),nh._currentValue=pe)}var hn,ge;function Me(s){if(hn===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);hn=a&&a[1]||"",ge=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hn+s+ge}var Bt=!1;function et(s,a){if(!s||Bt)return"";Bt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var Z=re}Reflect.construct(s,[],he)}else{try{he.call()}catch(re){Z=re}s.call(he.prototype)}}else{try{throw Error()}catch(re){Z=re}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&Z&&typeof re.stack=="string")return[re.stack,Z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),A=y[0],R=y[1];if(A&&R){var H=A.split(`
`),X=R.split(`
`);for(p=u=0;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(u===H.length||p===X.length)for(u=H.length-1,p=X.length-1;1<=u&&0<=p&&H[u]!==X[p];)p--;for(;1<=u&&0<=p;u--,p--)if(H[u]!==X[p]){if(u!==1||p!==1)do if(u--,p--,0>p||H[u]!==X[p]){var le=`
`+H[u].replace(" at new "," at ");return s.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",s.displayName)),le}while(1<=u&&0<=p);break}}}finally{Bt=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Me(l):""}function an(s,a){switch(s.tag){case 26:case 27:case 5:return Me(s.type);case 16:return Me("Lazy");case 13:return s.child!==a&&a!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return et(s.type,!1);case 11:return et(s.type.render,!1);case 1:return et(s.type,!0);case 31:return Me("Activity");default:return""}}function kt(s){try{var a="",l=null;do a+=an(s,l),l=s,s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ze=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,Ee=n.unstable_cancelCallback,gt=n.unstable_shouldYield,on=n.unstable_requestPaint,St=n.unstable_now,jn=n.unstable_getCurrentPriorityLevel,nt=n.unstable_ImmediatePriority,jt=n.unstable_UserBlockingPriority,ar=n.unstable_NormalPriority,Os=n.unstable_LowPriority,Fi=n.unstable_IdlePriority,Ds=n.log,or=n.unstable_setDisableYieldValue,Un=null,fn=null;function pr(s){if(typeof Ds=="function"&&or(s),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(Un,s)}catch{}}var Zt=Math.clz32?Math.clz32:Ms,La=Math.log,Hi=Math.LN2;function Ms(s){return s>>>=0,s===0?32:31-(La(s)/Hi|0)|0}var lr=256,Ft=262144,En=4194304;function ai(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function oi(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var p=0,y=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var R=u&134217727;return R!==0?(u=R&~y,u!==0?p=ai(u):(A&=R,A!==0?p=ai(A):l||(l=R&~s,l!==0&&(p=ai(l))))):(R=u&~y,R!==0?p=ai(R):A!==0?p=ai(A):l||(l=u&~s,l!==0&&(p=ai(l)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:p}function Ls(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function py(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kf(){var s=En;return En<<=1,(En&62914560)===0&&(En=4194304),s}function li(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function Xo(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function gy(s,a,l,u,p,y){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,H=s.expirationTimes,X=s.hiddenUpdates;for(l=A&~l;0<l;){var le=31-Zt(l),he=1<<le;R[le]=0,H[le]=-1;var Z=X[le];if(Z!==null)for(X[le]=null,le=0;le<Z.length;le++){var re=Z[le];re!==null&&(re.lane&=-536870913)}l&=~he}u!==0&&Zo(s,u,0),y!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=y&~(A&~a))}function Zo(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-Zt(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&261930}function od(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-Zt(l),p=1<<u;p&a|s[u]&a&&(s[u]|=a),l&=~p}}function ld(s,a){var l=a&-a;return l=(l&42)!==0?1:el(l),(l&(s.suspendedLanes|a))!==0?0:l}function el(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function zi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Pf(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:u_(s.type))}function Bs(s,a){var l=se.p;try{return se.p=s,a()}finally{se.p=l}}var js=Math.random().toString(36).slice(2),_n="__reactFiber$"+js,Hn="__reactProps$"+js,ci="__reactContainer$"+js,gc="__reactEvents$"+js,yy="__reactListeners$"+js,Of="__reactHandles$"+js,Df="__reactResources$"+js,ui="__reactMarker$"+js;function yc(s){delete s[_n],delete s[Hn],delete s[gc],delete s[yy],delete s[Of]}function di(s){var a=s[_n];if(a)return a;for(var l=s.parentNode;l;){if(a=l[ci]||l[_n]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=$2(s);s!==null;){if(l=s[_n])return l;s=$2(s)}return a}s=l,l=s.parentNode}return null}function us(s){if(s=s[_n]||s[ci]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Gr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function hi(s){var a=s[Df];return a||(a=s[Df]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Tn(s){s[ui]=!0}var cd=new Set,ud={};function fi(s,a){mi(s,a),mi(s+"Capture",a)}function mi(s,a){for(ud[s]=a,s=0;s<a.length;s++)cd.add(a[s])}var dd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hd={},fd={};function Mf(s){return ze.call(fd,s)?!0:ze.call(hd,s)?!1:dd.test(s)?fd[s]=!0:(hd[s]=!0,!1)}function wc(s,a,l){if(Mf(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function qr(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Sn(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}function zn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ba(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function md(s,a,l){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,y.call(this,A)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Nt(s){if(!s._valueTracker){var a=Ba(s)?"checked":"value";s._valueTracker=md(s,a,""+s[a])}}function tl(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=Ba(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function pi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var nl=/[\n"\\]/g;function Sr(s){return s.replace(nl,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function bc(s,a,l,u,p,y,A,R){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+zn(a)):s.value!==""+zn(a)&&(s.value=""+zn(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?pd(s,A,zn(a)):l!=null?pd(s,A,zn(l)):u!=null&&s.removeAttribute("value"),p==null&&y!=null&&(s.defaultChecked=!!y),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+zn(R):s.removeAttribute("name")}function Lf(s,a,l,u,p,y,A,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){Nt(s);return}l=l!=null?""+zn(l):"",a=a!=null?""+zn(a):l,R||a===s.value||(s.value=a),s.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=R?s.checked:!!u,s.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),Nt(s)}function pd(s,a,l){a==="number"&&pi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function ja(s,a,l,u){if(s=s.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=a.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&u&&(s[l].defaultSelected=!0)}else{for(l=""+zn(l),a=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}a!==null||s[p].disabled||(a=s[p])}a!==null&&(a.selected=!0)}}function Bf(s,a,l){if(a!=null&&(a=""+zn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+zn(l):""}function Ua(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(r(92));if(ee(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=zn(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u),Nt(s)}function Nr(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gd(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||jf.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function yd(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&l[p]!==u&&gd(s,p,u)}else for(var y in a)a.hasOwnProperty(y)&&gd(s,y,a[y])}function vc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xc(s){return Va.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Us(){}var wd=null;function ds(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Fa=null,gi=null;function rl(s){var a=us(s);if(a&&(s=a.stateNode)){var l=s[Hn]||null;e:switch(s=a.stateNode,a.type){case"input":if(bc(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Sr(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var p=u[Hn]||null;if(!p)throw Error(r(90));bc(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&tl(u)}break e;case"textarea":Bf(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ja(s,!!l.multiple,a,!1)}}}var Ac=!1;function Ha(s,a,l){if(Ac)return s(a,l);Ac=!0;try{var u=s(a);return u}finally{if(Ac=!1,(Fa!==null||gi!==null)&&(Pm(),Fa&&(a=Fa,s=gi,gi=Fa=null,rl(a),s)))for(a=0;a<s.length;a++)rl(s[a])}}function Vs(s,a){var l=s.stateNode;if(l===null)return null;var u=l[Hn]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sl=!1;if(hs)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){sl=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch{sl=!1}var yi=null,bd=null,il=null;function vd(){if(il)return il;var s,a=bd,l=a.length,u,p="value"in yi?yi.value:yi.textContent,y=p.length;for(s=0;s<l&&a[s]===p[s];s++);var A=l-s;for(u=1;u<=A&&a[l-u]===p[y-u];u++);return il=p.slice(s,1<u?1-u:void 0)}function al(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Gi(){return!0}function Fs(){return!1}function Wn(s){function a(l,u,p,y,A){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Gi:Fs,this.isPropagationStopped=Fs,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),a}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=Wn(qi),za=b({},qi,{view:0,detail:0}),xd=Wn(za),Ga,Ec,bi,_c=b({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bi&&(bi&&s.type==="mousemove"?(Ga=s.screenX-bi.screenX,Ec=s.screenY-bi.screenY):Ec=Ga=0,bi=s),Ga)},movementY:function(s){return"movementY"in s?s.movementY:Ec}}),Ad=Wn(_c),ol=b({},_c,{dataTransfer:0}),Vf=Wn(ol),Ff=b({},za,{relatedTarget:0}),ll=Wn(Ff),Ed=b({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hf=Wn(Ed),Tc=b({},qi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zf=Wn(Tc),Gf=b({},qi,{data:0}),vi=Wn(Gf),qf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $f(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Kf[s])?!!a[s]:!1}function qa(){return $f}var gr=b({},za,{key:function(s){if(s.key){var a=qf[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=al(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Qf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(s){return s.type==="keypress"?al(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?al(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Yf=Wn(gr),Wf=b({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Wn(Wf),f=b({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),v=Wn(f),E=b({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),O=Wn(E),W=b({},_c,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=Wn(W),be=b({},qi,{newState:0,oldState:0}),Ke=Wn(be),mn=[9,13,27,32],vt=hs&&"CompositionEvent"in window,$t=null;hs&&"documentMode"in document&&($t=document.documentMode);var fs=hs&&"TextEvent"in window&&!$t,xi=hs&&(!vt||$t&&8<$t&&11>=$t),Hs=" ",zs=!1;function cl(s,a){switch(s){case"keyup":return mn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Nc=!1;function LP(s,a){switch(s){case"compositionend":return Sc(a);case"keypress":return a.which!==32?null:(zs=!0,Hs);case"textInput":return s=a.data,s===Hs&&zs?null:s;default:return null}}function BP(s,a){if(Nc)return s==="compositionend"||!vt&&cl(s,a)?(s=vd(),il=bd=yi=null,Nc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return xi&&a.locale!=="ko"?null:a.data;default:return null}}var jP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jx(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!jP[s.type]:a==="textarea"}function Xx(s,a,l,u){Fa?gi?gi.push(u):gi=[u]:Fa=u,a=Um(a,"onChange"),0<a.length&&(l=new wi("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var _d=null,Td=null;function UP(s){D2(s,0)}function Jf(s){var a=Gr(s);if(tl(a))return s}function Zx(s,a){if(s==="change")return a}var eA=!1;if(hs){var wy;if(hs){var by="oninput"in document;if(!by){var tA=document.createElement("div");tA.setAttribute("oninput","return;"),by=typeof tA.oninput=="function"}wy=by}else wy=!1;eA=wy&&(!document.documentMode||9<document.documentMode)}function nA(){_d&&(_d.detachEvent("onpropertychange",rA),Td=_d=null)}function rA(s){if(s.propertyName==="value"&&Jf(Td)){var a=[];Xx(a,Td,s,ds(s)),Ha(UP,a)}}function VP(s,a,l){s==="focusin"?(nA(),_d=a,Td=l,_d.attachEvent("onpropertychange",rA)):s==="focusout"&&nA()}function FP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Jf(Td)}function HP(s,a){if(s==="click")return Jf(a)}function zP(s,a){if(s==="input"||s==="change")return Jf(a)}function GP(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Qr=typeof Object.is=="function"?Object.is:GP;function Sd(s,a){if(Qr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!ze.call(a,p)||!Qr(s[p],a[p]))return!1}return!0}function sA(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function iA(s,a){var l=sA(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=sA(l)}}function aA(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?aA(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function oA(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=pi(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=pi(s.document)}return a}function vy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var qP=hs&&"documentMode"in document&&11>=document.documentMode,Cc=null,xy=null,Nd=null,Ay=!1;function lA(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ay||Cc==null||Cc!==pi(u)||(u=Cc,"selectionStart"in u&&vy(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Nd&&Sd(Nd,u)||(Nd=u,u=Um(xy,"onSelect"),0<u.length&&(a=new wi("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=Cc)))}function ul(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Ic={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionrun:ul("Transition","TransitionRun"),transitionstart:ul("Transition","TransitionStart"),transitioncancel:ul("Transition","TransitionCancel"),transitionend:ul("Transition","TransitionEnd")},Ey={},cA={};hs&&(cA=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function dl(s){if(Ey[s])return Ey[s];if(!Ic[s])return s;var a=Ic[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in cA)return Ey[s]=a[l];return s}var uA=dl("animationend"),dA=dl("animationiteration"),hA=dl("animationstart"),QP=dl("transitionrun"),KP=dl("transitionstart"),$P=dl("transitioncancel"),fA=dl("transitionend"),mA=new Map,_y="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_y.push("scrollEnd");function Gs(s,a){mA.set(s,a),fi(a,[s])}var Xf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ms=[],Rc=0,Ty=0;function Zf(){for(var s=Rc,a=Ty=Rc=0;a<s;){var l=ms[a];ms[a++]=null;var u=ms[a];ms[a++]=null;var p=ms[a];ms[a++]=null;var y=ms[a];if(ms[a++]=null,u!==null&&p!==null){var A=u.pending;A===null?p.next=p:(p.next=A.next,A.next=p),u.pending=p}y!==0&&pA(l,p,y)}}function em(s,a,l,u){ms[Rc++]=s,ms[Rc++]=a,ms[Rc++]=l,ms[Rc++]=u,Ty|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Sy(s,a,l,u){return em(s,a,l,u),tm(s)}function hl(s,a){return em(s,null,null,a),tm(s)}function pA(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var p=!1,y=s.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(p=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,p&&a!==null&&(p=31-Zt(l),s=y.hiddenUpdates,u=s[p],u===null?s[p]=[a]:u.push(a),a.lane=l|536870912),y):null}function tm(s){if(50<Yd)throw Yd=0,M0=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var kc={};function YP(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(s,a,l,u){return new YP(s,a,l,u)}function Ny(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ki(s,a){var l=s.alternate;return l===null?(l=Kr(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function gA(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function nm(s,a,l,u,p,y){var A=0;if(u=s,typeof s=="function")Ny(s)&&(A=1);else if(typeof s=="string")A=eD(s,l,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Kr(31,l,a,p),s.elementType=P,s.lanes=y,s;case N:return fl(l.children,p,y,a);case C:A=8,p|=24;break;case D:return s=Kr(12,l,a,p|2),s.elementType=D,s.lanes=y,s;case Y:return s=Kr(13,l,a,p),s.elementType=Y,s.lanes=y,s;case te:return s=Kr(19,l,a,p),s.elementType=te,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case U:A=10;break e;case F:A=9;break e;case $:A=11;break e;case T:A=14;break e;case _:A=16,u=null;break e}A=29,l=Error(r(130,s===null?"null":typeof s,"")),u=null}return a=Kr(A,l,a,p),a.elementType=s,a.type=u,a.lanes=y,a}function fl(s,a,l,u){return s=Kr(7,s,u,a),s.lanes=l,s}function Cy(s,a,l){return s=Kr(6,s,null,a),s.lanes=l,s}function yA(s){var a=Kr(18,null,null,0);return a.stateNode=s,a}function Iy(s,a,l){return a=Kr(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var wA=new WeakMap;function ps(s,a){if(typeof s=="object"&&s!==null){var l=wA.get(s);return l!==void 0?l:(a={value:s,source:a,stack:kt(a)},wA.set(s,a),a)}return{value:s,source:a,stack:kt(a)}}var Pc=[],Oc=0,rm=null,Cd=0,gs=[],ys=0,Qa=null,Ai=1,Ei="";function $i(s,a){Pc[Oc++]=Cd,Pc[Oc++]=rm,rm=s,Cd=a}function bA(s,a,l){gs[ys++]=Ai,gs[ys++]=Ei,gs[ys++]=Qa,Qa=s;var u=Ai;s=Ei;var p=32-Zt(u)-1;u&=~(1<<p),l+=1;var y=32-Zt(a)+p;if(30<y){var A=p-p%5;y=(u&(1<<A)-1).toString(32),u>>=A,p-=A,Ai=1<<32-Zt(a)+p|l<<p|u,Ei=y+s}else Ai=1<<y|l<<p|u,Ei=s}function Ry(s){s.return!==null&&($i(s,1),bA(s,1,0))}function ky(s){for(;s===rm;)rm=Pc[--Oc],Pc[Oc]=null,Cd=Pc[--Oc],Pc[Oc]=null;for(;s===Qa;)Qa=gs[--ys],gs[ys]=null,Ei=gs[--ys],gs[ys]=null,Ai=gs[--ys],gs[ys]=null}function vA(s,a){gs[ys++]=Ai,gs[ys++]=Ei,gs[ys++]=Qa,Ai=a.id,Ei=a.overflow,Qa=s}var Jn=null,Qt=null,ut=!1,Ka=null,ws=!1,Py=Error(r(519));function $a(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Id(ps(a,s)),Py}function xA(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[_n]=s,a[Hn]=u,l){case"dialog":st("cancel",a),st("close",a);break;case"iframe":case"object":case"embed":st("load",a);break;case"video":case"audio":for(l=0;l<Jd.length;l++)st(Jd[l],a);break;case"source":st("error",a);break;case"img":case"image":case"link":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"input":st("invalid",a),Lf(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":st("invalid",a);break;case"textarea":st("invalid",a),Ua(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||j2(a.textContent,l)?(u.popover!=null&&(st("beforetoggle",a),st("toggle",a)),u.onScroll!=null&&st("scroll",a),u.onScrollEnd!=null&&st("scrollend",a),u.onClick!=null&&(a.onclick=Us),a=!0):a=!1,a||$a(s,!0)}function AA(s){for(Jn=s.return;Jn;)switch(Jn.tag){case 5:case 31:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:Jn=Jn.return}}function Dc(s){if(s!==Jn)return!1;if(!ut)return AA(s),ut=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||W0(s.type,s.memoizedProps)),l=!l),l&&Qt&&$a(s),AA(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qt=K2(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qt=K2(s)}else a===27?(a=Qt,lo(s.type)?(s=tw,tw=null,Qt=s):Qt=a):Qt=Jn?vs(s.stateNode.nextSibling):null;return!0}function ml(){Qt=Jn=null,ut=!1}function Oy(){var s=Ka;return s!==null&&(kr===null?kr=s:kr.push.apply(kr,s),Ka=null),s}function Id(s){Ka===null?Ka=[s]:Ka.push(s)}var Dy=V(null),pl=null,Yi=null;function Ya(s,a,l){oe(Dy,a._currentValue),a._currentValue=l}function Wi(s){s._currentValue=Dy.current,z(Dy)}function My(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function Ly(s,a,l,u){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var y=p.dependencies;if(y!==null){var A=p.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=p;for(var H=0;H<a.length;H++)if(R.context===a[H]){y.lanes|=l,R=y.alternate,R!==null&&(R.lanes|=l),My(y.return,l,s),u||(A=null);break e}y=R.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(r(341));A.lanes|=l,y=A.alternate,y!==null&&(y.lanes|=l),My(A,l,s),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===s){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function Mc(s,a,l,u){s=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var R=p.type;Qr(p.pendingProps.value,A.value)||(s!==null?s.push(R):s=[R])}}else if(p===Te.current){if(A=p.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(nh):s=[nh])}p=p.return}s!==null&&Ly(a,s,l,u),a.flags|=262144}function sm(s){for(s=s.firstContext;s!==null;){if(!Qr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function gl(s){pl=s,Yi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Xn(s){return EA(pl,s)}function im(s,a){return pl===null&&gl(s),EA(s,a)}function EA(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Yi===null){if(s===null)throw Error(r(308));Yi=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Yi=Yi.next=a;return l}var WP=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},JP=n.unstable_scheduleCallback,XP=n.unstable_NormalPriority,Nn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function By(){return{controller:new WP,data:new Map,refCount:0}}function Rd(s){s.refCount--,s.refCount===0&&JP(XP,function(){s.controller.abort()})}var kd=null,jy=0,Lc=0,Bc=null;function ZP(s,a){if(kd===null){var l=kd=[];jy=0,Lc=F0(),Bc={status:"pending",value:void 0,then:function(u){l.push(u)}}}return jy++,a.then(_A,_A),a}function _A(){if(--jy===0&&kd!==null){Bc!==null&&(Bc.status="fulfilled");var s=kd;kd=null,Lc=0,Bc=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function eO(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var TA=G.S;G.S=function(s,a){l2=St(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ZP(s,a),TA!==null&&TA(s,a)};var yl=V(null);function Uy(){var s=yl.current;return s!==null?s:Ut.pooledCache}function am(s,a){a===null?oe(yl,yl.current):oe(yl,a.pool)}function SA(){var s=Uy();return s===null?null:{parent:Nn._currentValue,pool:s}}var jc=Error(r(460)),Vy=Error(r(474)),om=Error(r(542)),lm={then:function(){}};function NA(s){return s=s.status,s==="fulfilled"||s==="rejected"}function CA(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(Us,Us),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,RA(s),s;default:if(typeof a.status=="string")a.then(Us,Us);else{if(s=Ut,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,RA(s),s}throw bl=a,jc}}function wl(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(bl=l,jc):l}}var bl=null;function IA(){if(bl===null)throw Error(r(459));var s=bl;return bl=null,s}function RA(s){if(s===jc||s===om)throw Error(r(483))}var Uc=null,Pd=0;function cm(s){var a=Pd;return Pd+=1,Uc===null&&(Uc=[]),CA(Uc,s,a)}function Od(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function um(s,a){throw a.$$typeof===x?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function kA(s){function a(K,q){if(s){var J=K.deletions;J===null?(K.deletions=[q],K.flags|=16):J.push(q)}}function l(K,q){if(!s)return null;for(;q!==null;)a(K,q),q=q.sibling;return null}function u(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function p(K,q){return K=Ki(K,q),K.index=0,K.sibling=null,K}function y(K,q,J){return K.index=J,s?(J=K.alternate,J!==null?(J=J.index,J<q?(K.flags|=67108866,q):J):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function A(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function R(K,q,J,ce){return q===null||q.tag!==6?(q=Cy(J,K.mode,ce),q.return=K,q):(q=p(q,J),q.return=K,q)}function H(K,q,J,ce){var Oe=J.type;return Oe===N?le(K,q,J.props.children,ce,J.key):q!==null&&(q.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===_&&wl(Oe)===q.type)?(q=p(q,J.props),Od(q,J),q.return=K,q):(q=nm(J.type,J.key,J.props,null,K.mode,ce),Od(q,J),q.return=K,q)}function X(K,q,J,ce){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?(q=Iy(J,K.mode,ce),q.return=K,q):(q=p(q,J.children||[]),q.return=K,q)}function le(K,q,J,ce,Oe){return q===null||q.tag!==7?(q=fl(J,K.mode,ce,Oe),q.return=K,q):(q=p(q,J),q.return=K,q)}function he(K,q,J){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Cy(""+q,K.mode,J),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return J=nm(q.type,q.key,q.props,null,K.mode,J),Od(J,q),J.return=K,J;case k:return q=Iy(q,K.mode,J),q.return=K,q;case _:return q=wl(q),he(K,q,J)}if(ee(q)||j(q))return q=fl(q,K.mode,J,null),q.return=K,q;if(typeof q.then=="function")return he(K,cm(q),J);if(q.$$typeof===U)return he(K,im(K,q),J);um(K,q)}return null}function Z(K,q,J,ce){var Oe=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Oe!==null?null:R(K,q,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return J.key===Oe?H(K,q,J,ce):null;case k:return J.key===Oe?X(K,q,J,ce):null;case _:return J=wl(J),Z(K,q,J,ce)}if(ee(J)||j(J))return Oe!==null?null:le(K,q,J,ce,null);if(typeof J.then=="function")return Z(K,q,cm(J),ce);if(J.$$typeof===U)return Z(K,q,im(K,J),ce);um(K,J)}return null}function re(K,q,J,ce,Oe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(J)||null,R(q,K,""+ce,Oe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case S:return K=K.get(ce.key===null?J:ce.key)||null,H(q,K,ce,Oe);case k:return K=K.get(ce.key===null?J:ce.key)||null,X(q,K,ce,Oe);case _:return ce=wl(ce),re(K,q,J,ce,Oe)}if(ee(ce)||j(ce))return K=K.get(J)||null,le(q,K,ce,Oe,null);if(typeof ce.then=="function")return re(K,q,J,cm(ce),Oe);if(ce.$$typeof===U)return re(K,q,J,im(q,ce),Oe);um(q,ce)}return null}function Ie(K,q,J,ce){for(var Oe=null,yt=null,ke=q,We=q=0,at=null;ke!==null&&We<J.length;We++){ke.index>We?(at=ke,ke=null):at=ke.sibling;var wt=Z(K,ke,J[We],ce);if(wt===null){ke===null&&(ke=at);break}s&&ke&&wt.alternate===null&&a(K,ke),q=y(wt,q,We),yt===null?Oe=wt:yt.sibling=wt,yt=wt,ke=at}if(We===J.length)return l(K,ke),ut&&$i(K,We),Oe;if(ke===null){for(;We<J.length;We++)ke=he(K,J[We],ce),ke!==null&&(q=y(ke,q,We),yt===null?Oe=ke:yt.sibling=ke,yt=ke);return ut&&$i(K,We),Oe}for(ke=u(ke);We<J.length;We++)at=re(ke,K,We,J[We],ce),at!==null&&(s&&at.alternate!==null&&ke.delete(at.key===null?We:at.key),q=y(at,q,We),yt===null?Oe=at:yt.sibling=at,yt=at);return s&&ke.forEach(function(mo){return a(K,mo)}),ut&&$i(K,We),Oe}function Be(K,q,J,ce){if(J==null)throw Error(r(151));for(var Oe=null,yt=null,ke=q,We=q=0,at=null,wt=J.next();ke!==null&&!wt.done;We++,wt=J.next()){ke.index>We?(at=ke,ke=null):at=ke.sibling;var mo=Z(K,ke,wt.value,ce);if(mo===null){ke===null&&(ke=at);break}s&&ke&&mo.alternate===null&&a(K,ke),q=y(mo,q,We),yt===null?Oe=mo:yt.sibling=mo,yt=mo,ke=at}if(wt.done)return l(K,ke),ut&&$i(K,We),Oe;if(ke===null){for(;!wt.done;We++,wt=J.next())wt=he(K,wt.value,ce),wt!==null&&(q=y(wt,q,We),yt===null?Oe=wt:yt.sibling=wt,yt=wt);return ut&&$i(K,We),Oe}for(ke=u(ke);!wt.done;We++,wt=J.next())wt=re(ke,K,We,wt.value,ce),wt!==null&&(s&&wt.alternate!==null&&ke.delete(wt.key===null?We:wt.key),q=y(wt,q,We),yt===null?Oe=wt:yt.sibling=wt,yt=wt);return s&&ke.forEach(function(dD){return a(K,dD)}),ut&&$i(K,We),Oe}function Mt(K,q,J,ce){if(typeof J=="object"&&J!==null&&J.type===N&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case S:e:{for(var Oe=J.key;q!==null;){if(q.key===Oe){if(Oe=J.type,Oe===N){if(q.tag===7){l(K,q.sibling),ce=p(q,J.props.children),ce.return=K,K=ce;break e}}else if(q.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===_&&wl(Oe)===q.type){l(K,q.sibling),ce=p(q,J.props),Od(ce,J),ce.return=K,K=ce;break e}l(K,q);break}else a(K,q);q=q.sibling}J.type===N?(ce=fl(J.props.children,K.mode,ce,J.key),ce.return=K,K=ce):(ce=nm(J.type,J.key,J.props,null,K.mode,ce),Od(ce,J),ce.return=K,K=ce)}return A(K);case k:e:{for(Oe=J.key;q!==null;){if(q.key===Oe)if(q.tag===4&&q.stateNode.containerInfo===J.containerInfo&&q.stateNode.implementation===J.implementation){l(K,q.sibling),ce=p(q,J.children||[]),ce.return=K,K=ce;break e}else{l(K,q);break}else a(K,q);q=q.sibling}ce=Iy(J,K.mode,ce),ce.return=K,K=ce}return A(K);case _:return J=wl(J),Mt(K,q,J,ce)}if(ee(J))return Ie(K,q,J,ce);if(j(J)){if(Oe=j(J),typeof Oe!="function")throw Error(r(150));return J=Oe.call(J),Be(K,q,J,ce)}if(typeof J.then=="function")return Mt(K,q,cm(J),ce);if(J.$$typeof===U)return Mt(K,q,im(K,J),ce);um(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,q!==null&&q.tag===6?(l(K,q.sibling),ce=p(q,J),ce.return=K,K=ce):(l(K,q),ce=Cy(J,K.mode,ce),ce.return=K,K=ce),A(K)):l(K,q)}return function(K,q,J,ce){try{Pd=0;var Oe=Mt(K,q,J,ce);return Uc=null,Oe}catch(ke){if(ke===jc||ke===om)throw ke;var yt=Kr(29,ke,null,K.mode);return yt.lanes=ce,yt.return=K,yt}}}var vl=kA(!0),PA=kA(!1),Wa=!1;function Fy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hy(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ja(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Xa(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(xt&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=tm(s),pA(s,null,l),a}return em(s,u,a,l),tm(s)}function Dd(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,od(s,l)}}function zy(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=A:y=y.next=A,l=l.next}while(l!==null);y===null?p=y=a:y=y.next=a}else p=y=a;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Gy=!1;function Md(){if(Gy){var s=Bc;if(s!==null)throw s}}function Ld(s,a,l,u){Gy=!1;var p=s.updateQueue;Wa=!1;var y=p.firstBaseUpdate,A=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var H=R,X=H.next;H.next=null,A===null?y=X:A.next=X,A=H;var le=s.alternate;le!==null&&(le=le.updateQueue,R=le.lastBaseUpdate,R!==A&&(R===null?le.firstBaseUpdate=X:R.next=X,le.lastBaseUpdate=H))}if(y!==null){var he=p.baseState;A=0,le=X=H=null,R=y;do{var Z=R.lane&-536870913,re=Z!==R.lane;if(re?(it&Z)===Z:(u&Z)===Z){Z!==0&&Z===Lc&&(Gy=!0),le!==null&&(le=le.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ie=s,Be=R;Z=a;var Mt=l;switch(Be.tag){case 1:if(Ie=Be.payload,typeof Ie=="function"){he=Ie.call(Mt,he,Z);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Be.payload,Z=typeof Ie=="function"?Ie.call(Mt,he,Z):Ie,Z==null)break e;he=b({},he,Z);break e;case 2:Wa=!0}}Z=R.callback,Z!==null&&(s.flags|=64,re&&(s.flags|=8192),re=p.callbacks,re===null?p.callbacks=[Z]:re.push(Z))}else re={lane:Z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},le===null?(X=le=re,H=he):le=le.next=re,A|=Z;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;re=R,R=re.next,re.next=null,p.lastBaseUpdate=re,p.shared.pending=null}}while(!0);le===null&&(H=he),p.baseState=H,p.firstBaseUpdate=X,p.lastBaseUpdate=le,y===null&&(p.shared.lanes=0),ro|=A,s.lanes=A,s.memoizedState=he}}function OA(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function DA(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)OA(l[s],a)}var Vc=V(null),dm=V(0);function MA(s,a){s=ia,oe(dm,s),oe(Vc,a),ia=s|a.baseLanes}function qy(){oe(dm,ia),oe(Vc,Vc.current)}function Qy(){ia=dm.current,z(Vc),z(dm)}var $r=V(null),bs=null;function Za(s){var a=s.alternate;oe(pn,pn.current&1),oe($r,s),bs===null&&(a===null||Vc.current!==null||a.memoizedState!==null)&&(bs=s)}function Ky(s){oe(pn,pn.current),oe($r,s),bs===null&&(bs=s)}function LA(s){s.tag===22?(oe(pn,pn.current),oe($r,s),bs===null&&(bs=s)):eo()}function eo(){oe(pn,pn.current),oe($r,$r.current)}function Yr(s){z($r),bs===s&&(bs=null),z(pn)}var pn=V(0);function hm(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Z0(l)||ew(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ji=0,$e=null,Ot=null,Cn=null,fm=!1,Fc=!1,xl=!1,mm=0,Bd=0,Hc=null,tO=0;function ln(){throw Error(r(321))}function $y(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Qr(s[l],a[l]))return!1;return!0}function Yy(s,a,l,u,p,y){return Ji=y,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=s===null||s.memoizedState===null?bE:u0,xl=!1,y=l(u,p),xl=!1,Fc&&(y=jA(a,l,u,p)),BA(s),y}function BA(s){G.H=Vd;var a=Ot!==null&&Ot.next!==null;if(Ji=0,Cn=Ot=$e=null,fm=!1,Bd=0,Hc=null,a)throw Error(r(300));s===null||In||(s=s.dependencies,s!==null&&sm(s)&&(In=!0))}function jA(s,a,l,u){$e=s;var p=0;do{if(Fc&&(Hc=null),Bd=0,Fc=!1,25<=p)throw Error(r(301));if(p+=1,Cn=Ot=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=vE,y=a(l,u)}while(Fc);return y}function nO(){var s=G.H,a=s.useState()[0];return a=typeof a.then=="function"?jd(a):a,s=s.useState()[0],(Ot!==null?Ot.memoizedState:null)!==s&&($e.flags|=1024),a}function Wy(){var s=mm!==0;return mm=0,s}function Jy(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Xy(s){if(fm){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}fm=!1}Ji=0,Cn=Ot=$e=null,Fc=!1,Bd=mm=0,Hc=null}function yr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?$e.memoizedState=Cn=s:Cn=Cn.next=s,Cn}function gn(){if(Ot===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=Ot.next;var a=Cn===null?$e.memoizedState:Cn.next;if(a!==null)Cn=a,Ot=s;else{if(s===null)throw $e.alternate===null?Error(r(467)):Error(r(310));Ot=s,s={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Cn===null?$e.memoizedState=Cn=s:Cn=Cn.next=s}return Cn}function pm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jd(s){var a=Bd;return Bd+=1,Hc===null&&(Hc=[]),s=CA(Hc,s,a),a=$e,(Cn===null?a.memoizedState:Cn.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?bE:u0),s}function gm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return jd(s);if(s.$$typeof===U)return Xn(s)}throw Error(r(438,String(s)))}function Zy(s){var a=null,l=$e.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=$e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=pm(),$e.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=L;return a.index++,l}function Xi(s,a){return typeof a=="function"?a(s):a}function ym(s){var a=gn();return e0(a,Ot,s)}function e0(s,a,l){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var p=s.baseQueue,y=u.pending;if(y!==null){if(p!==null){var A=p.next;p.next=y.next,y.next=A}a.baseQueue=p=y,u.pending=null}if(y=s.baseState,p===null)s.memoizedState=y;else{a=p.next;var R=A=null,H=null,X=a,le=!1;do{var he=X.lane&-536870913;if(he!==X.lane?(it&he)===he:(Ji&he)===he){var Z=X.revertLane;if(Z===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),he===Lc&&(le=!0);else if((Ji&Z)===Z){X=X.next,Z===Lc&&(le=!0);continue}else he={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},H===null?(R=H=he,A=y):H=H.next=he,$e.lanes|=Z,ro|=Z;he=X.action,xl&&l(y,he),y=X.hasEagerState?X.eagerState:l(y,he)}else Z={lane:he,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},H===null?(R=H=Z,A=y):H=H.next=Z,$e.lanes|=he,ro|=he;X=X.next}while(X!==null&&X!==a);if(H===null?A=y:H.next=R,!Qr(y,s.memoizedState)&&(In=!0,le&&(l=Bc,l!==null)))throw l;s.memoizedState=y,s.baseState=A,s.baseQueue=H,u.lastRenderedState=y}return p===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function t0(s){var a=gn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var u=l.dispatch,p=l.pending,y=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do y=s(y,A.action),A=A.next;while(A!==p);Qr(y,a.memoizedState)||(In=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,u]}function UA(s,a,l){var u=$e,p=gn(),y=ut;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=a();var A=!Qr((Ot||p).memoizedState,l);if(A&&(p.memoizedState=l,In=!0),p=p.queue,s0(HA.bind(null,u,p,s),[s]),p.getSnapshot!==a||A||Cn!==null&&Cn.memoizedState.tag&1){if(u.flags|=2048,zc(9,{destroy:void 0},FA.bind(null,u,p,l,a),null),Ut===null)throw Error(r(349));y||(Ji&127)!==0||VA(u,a,l)}return l}function VA(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=$e.updateQueue,a===null?(a=pm(),$e.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function FA(s,a,l,u){a.value=l,a.getSnapshot=u,zA(a)&&GA(s)}function HA(s,a,l){return l(function(){zA(a)&&GA(s)})}function zA(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Qr(s,l)}catch{return!0}}function GA(s){var a=hl(s,2);a!==null&&Pr(a,s,2)}function n0(s){var a=yr();if(typeof s=="function"){var l=s;if(s=l(),xl){pr(!0);try{l()}finally{pr(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:s},a}function qA(s,a,l,u){return s.baseState=l,e0(s,Ot,typeof u=="function"?u:Xi)}function rO(s,a,l,u,p){if(vm(s))throw Error(r(485));if(s=a.action,s!==null){var y={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){y.listeners.push(A)}};G.T!==null?l(!0):y.isTransition=!1,u(y),l=a.pending,l===null?(y.next=a.pending=y,QA(a,y)):(y.next=l.next,a.pending=l.next=y)}}function QA(s,a){var l=a.action,u=a.payload,p=s.state;if(a.isTransition){var y=G.T,A={};G.T=A;try{var R=l(p,u),H=G.S;H!==null&&H(A,R),KA(s,a,R)}catch(X){r0(s,a,X)}finally{y!==null&&A.types!==null&&(y.types=A.types),G.T=y}}else try{y=l(p,u),KA(s,a,y)}catch(X){r0(s,a,X)}}function KA(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){$A(s,a,u)},function(u){return r0(s,a,u)}):$A(s,a,l)}function $A(s,a,l){a.status="fulfilled",a.value=l,YA(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,QA(s,l)))}function r0(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,YA(a),a=a.next;while(a!==u)}s.action=null}function YA(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function WA(s,a){return a}function JA(s,a){if(ut){var l=Ut.formState;if(l!==null){e:{var u=$e;if(ut){if(Qt){t:{for(var p=Qt,y=ws;p.nodeType!==8;){if(!y){p=null;break t}if(p=vs(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Qt=vs(p.nextSibling),u=p.data==="F!";break e}}$a(u)}u=!1}u&&(a=l[0])}}return l=yr(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WA,lastRenderedState:a},l.queue=u,l=gE.bind(null,$e,u),u.dispatch=l,u=n0(!1),y=c0.bind(null,$e,!1,u.queue),u=yr(),p={state:a,dispatch:null,action:s,pending:null},u.queue=p,l=rO.bind(null,$e,p,y,l),p.dispatch=l,u.memoizedState=s,[a,l,!1]}function XA(s){var a=gn();return ZA(a,Ot,s)}function ZA(s,a,l){if(a=e0(s,a,WA)[0],s=ym(Xi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=jd(a)}catch(A){throw A===jc?om:A}else u=a;a=gn();var p=a.queue,y=p.dispatch;return l!==a.memoizedState&&($e.flags|=2048,zc(9,{destroy:void 0},sO.bind(null,p,l),null)),[u,y,s]}function sO(s,a){s.action=a}function eE(s){var a=gn(),l=Ot;if(l!==null)return ZA(a,l,s);gn(),a=a.memoizedState,l=gn();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function zc(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=$e.updateQueue,a===null&&(a=pm(),$e.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function tE(){return gn().memoizedState}function wm(s,a,l,u){var p=yr();$e.flags|=s,p.memoizedState=zc(1|a,{destroy:void 0},l,u===void 0?null:u)}function bm(s,a,l,u){var p=gn();u=u===void 0?null:u;var y=p.memoizedState.inst;Ot!==null&&u!==null&&$y(u,Ot.memoizedState.deps)?p.memoizedState=zc(a,y,l,u):($e.flags|=s,p.memoizedState=zc(1|a,y,l,u))}function nE(s,a){wm(8390656,8,s,a)}function s0(s,a){bm(2048,8,s,a)}function iO(s){$e.flags|=4;var a=$e.updateQueue;if(a===null)a=pm(),$e.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function rE(s){var a=gn().memoizedState;return iO({ref:a,nextImpl:s}),function(){if((xt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function sE(s,a){return bm(4,2,s,a)}function iE(s,a){return bm(4,4,s,a)}function aE(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function oE(s,a,l){l=l!=null?l.concat([s]):null,bm(4,4,aE.bind(null,a,s),l)}function i0(){}function lE(s,a){var l=gn();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&$y(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function cE(s,a){var l=gn();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&$y(a,u[1]))return u[0];if(u=s(),xl){pr(!0);try{s()}finally{pr(!1)}}return l.memoizedState=[u,a],u}function a0(s,a,l){return l===void 0||(Ji&1073741824)!==0&&(it&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=u2(),$e.lanes|=s,ro|=s,l)}function uE(s,a,l,u){return Qr(l,a)?l:Vc.current!==null?(s=a0(s,l,u),Qr(s,a)||(In=!0),s):(Ji&42)===0||(Ji&1073741824)!==0&&(it&261930)===0?(In=!0,s.memoizedState=l):(s=u2(),$e.lanes|=s,ro|=s,a)}function dE(s,a,l,u,p){var y=se.p;se.p=y!==0&&8>y?y:8;var A=G.T,R={};G.T=R,c0(s,!1,a,l);try{var H=p(),X=G.S;if(X!==null&&X(R,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var le=eO(H,u);Ud(s,a,le,Xr(s))}else Ud(s,a,u,Xr(s))}catch(he){Ud(s,a,{then:function(){},status:"rejected",reason:he},Xr())}finally{se.p=y,A!==null&&R.types!==null&&(A.types=R.types),G.T=A}}function aO(){}function o0(s,a,l,u){if(s.tag!==5)throw Error(r(476));var p=hE(s).queue;dE(s,p,a,pe,l===null?aO:function(){return fE(s),l(u)})}function hE(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:pe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function fE(s){var a=hE(s);a.next===null&&(a=s.alternate.memoizedState),Ud(s,a.next.queue,{},Xr())}function l0(){return Xn(nh)}function mE(){return gn().memoizedState}function pE(){return gn().memoizedState}function oO(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Xr();s=Ja(l);var u=Xa(a,s,l);u!==null&&(Pr(u,a,l),Dd(u,a,l)),a={cache:By()},s.payload=a;return}a=a.return}}function lO(s,a,l){var u=Xr();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vm(s)?yE(a,l):(l=Sy(s,a,l,u),l!==null&&(Pr(l,s,u),wE(l,a,u)))}function gE(s,a,l){var u=Xr();Ud(s,a,l,u)}function Ud(s,a,l,u){var p={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(vm(s))yE(a,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var A=a.lastRenderedState,R=y(A,l);if(p.hasEagerState=!0,p.eagerState=R,Qr(R,A))return em(s,a,p,0),Ut===null&&Zf(),!1}catch{}if(l=Sy(s,a,p,u),l!==null)return Pr(l,s,u),wE(l,a,u),!0}return!1}function c0(s,a,l,u){if(u={lane:2,revertLane:F0(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},vm(s)){if(a)throw Error(r(479))}else a=Sy(s,l,u,2),a!==null&&Pr(a,s,2)}function vm(s){var a=s.alternate;return s===$e||a!==null&&a===$e}function yE(s,a){Fc=fm=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function wE(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,od(s,l)}}var Vd={readContext:Xn,use:gm,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};Vd.useEffectEvent=ln;var bE={readContext:Xn,use:gm,useCallback:function(s,a){return yr().memoizedState=[s,a===void 0?null:a],s},useContext:Xn,useEffect:nE,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,wm(4194308,4,aE.bind(null,a,s),l)},useLayoutEffect:function(s,a){return wm(4194308,4,s,a)},useInsertionEffect:function(s,a){wm(4,2,s,a)},useMemo:function(s,a){var l=yr();a=a===void 0?null:a;var u=s();if(xl){pr(!0);try{s()}finally{pr(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=yr();if(l!==void 0){var p=l(a);if(xl){pr(!0);try{l(a)}finally{pr(!1)}}}else p=a;return u.memoizedState=u.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},u.queue=s,s=s.dispatch=lO.bind(null,$e,s),[u.memoizedState,s]},useRef:function(s){var a=yr();return s={current:s},a.memoizedState=s},useState:function(s){s=n0(s);var a=s.queue,l=gE.bind(null,$e,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:i0,useDeferredValue:function(s,a){var l=yr();return a0(l,s,a)},useTransition:function(){var s=n0(!1);return s=dE.bind(null,$e,s.queue,!0,!1),yr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=$e,p=yr();if(ut){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Ut===null)throw Error(r(349));(it&127)!==0||VA(u,a,l)}p.memoizedState=l;var y={value:l,getSnapshot:a};return p.queue=y,nE(HA.bind(null,u,y,s),[s]),u.flags|=2048,zc(9,{destroy:void 0},FA.bind(null,u,y,l,a),null),l},useId:function(){var s=yr(),a=Ut.identifierPrefix;if(ut){var l=Ei,u=Ai;l=(u&~(1<<32-Zt(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=mm++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=tO++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:l0,useFormState:JA,useActionState:JA,useOptimistic:function(s){var a=yr();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=c0.bind(null,$e,!0,l),l.dispatch=a,[s,a]},useMemoCache:Zy,useCacheRefresh:function(){return yr().memoizedState=oO.bind(null,$e)},useEffectEvent:function(s){var a=yr(),l={impl:s};return a.memoizedState=l,function(){if((xt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},u0={readContext:Xn,use:gm,useCallback:lE,useContext:Xn,useEffect:s0,useImperativeHandle:oE,useInsertionEffect:sE,useLayoutEffect:iE,useMemo:cE,useReducer:ym,useRef:tE,useState:function(){return ym(Xi)},useDebugValue:i0,useDeferredValue:function(s,a){var l=gn();return uE(l,Ot.memoizedState,s,a)},useTransition:function(){var s=ym(Xi)[0],a=gn().memoizedState;return[typeof s=="boolean"?s:jd(s),a]},useSyncExternalStore:UA,useId:mE,useHostTransitionStatus:l0,useFormState:XA,useActionState:XA,useOptimistic:function(s,a){var l=gn();return qA(l,Ot,s,a)},useMemoCache:Zy,useCacheRefresh:pE};u0.useEffectEvent=rE;var vE={readContext:Xn,use:gm,useCallback:lE,useContext:Xn,useEffect:s0,useImperativeHandle:oE,useInsertionEffect:sE,useLayoutEffect:iE,useMemo:cE,useReducer:t0,useRef:tE,useState:function(){return t0(Xi)},useDebugValue:i0,useDeferredValue:function(s,a){var l=gn();return Ot===null?a0(l,s,a):uE(l,Ot.memoizedState,s,a)},useTransition:function(){var s=t0(Xi)[0],a=gn().memoizedState;return[typeof s=="boolean"?s:jd(s),a]},useSyncExternalStore:UA,useId:mE,useHostTransitionStatus:l0,useFormState:eE,useActionState:eE,useOptimistic:function(s,a){var l=gn();return Ot!==null?qA(l,Ot,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Zy,useCacheRefresh:pE};vE.useEffectEvent=rE;function d0(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:b({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var h0={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=Xr(),p=Ja(u);p.payload=a,l!=null&&(p.callback=l),a=Xa(s,p,u),a!==null&&(Pr(a,s,u),Dd(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=Xr(),p=Ja(u);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Xa(s,p,u),a!==null&&(Pr(a,s,u),Dd(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Xr(),u=Ja(l);u.tag=2,a!=null&&(u.callback=a),a=Xa(s,u,l),a!==null&&(Pr(a,s,l),Dd(a,s,l))}};function xE(s,a,l,u,p,y,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,A):a.prototype&&a.prototype.isPureReactComponent?!Sd(l,u)||!Sd(p,y):!0}function AE(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&h0.enqueueReplaceState(a,a.state,null)}function Al(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=b({},l));for(var p in s)l[p]===void 0&&(l[p]=s[p])}return l}function EE(s){Xf(s)}function _E(s){console.error(s)}function TE(s){Xf(s)}function xm(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function SE(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function f0(s,a,l){return l=Ja(l),l.tag=3,l.payload={element:null},l.callback=function(){xm(s,a)},l}function NE(s){return s=Ja(s),s.tag=3,s}function CE(s,a,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;s.payload=function(){return p(y)},s.callback=function(){SE(a,l,u)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){SE(a,l,u),typeof p!="function"&&(so===null?so=new Set([this]):so.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function cO(s,a,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Mc(a,l,p,!0),l=$r.current,l!==null){switch(l.tag){case 31:case 13:return bs===null?Om():l.alternate===null&&cn===0&&(cn=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===lm?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),j0(s,u,p)),!1;case 22:return l.flags|=65536,u===lm?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),j0(s,u,p)),!1}throw Error(r(435,l.tag))}return j0(s,u,p),Om(),!1}if(ut)return a=$r.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==Py&&(s=Error(r(422),{cause:u}),Id(ps(s,l)))):(u!==Py&&(a=Error(r(423),{cause:u}),Id(ps(a,l))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,u=ps(u,l),p=f0(s.stateNode,u,p),zy(s,p),cn!==4&&(cn=2)),!1;var y=Error(r(520),{cause:u});if(y=ps(y,l),$d===null?$d=[y]:$d.push(y),cn!==4&&(cn=2),a===null)return!0;u=ps(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=p&-p,l.lanes|=s,s=f0(l.stateNode,u,s),zy(l,s),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(so===null||!so.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=NE(p),CE(p,s,l,u),zy(l,p),!1}l=l.return}while(l!==null);return!1}var m0=Error(r(461)),In=!1;function Zn(s,a,l,u){a.child=s===null?PA(a,null,l,u):vl(a,s.child,l,u)}function IE(s,a,l,u,p){l=l.render;var y=a.ref;if("ref"in u){var A={};for(var R in u)R!=="ref"&&(A[R]=u[R])}else A=u;return gl(a),u=Yy(s,a,l,A,y,p),R=Wy(),s!==null&&!In?(Jy(s,a,p),Zi(s,a,p)):(ut&&R&&Ry(a),a.flags|=1,Zn(s,a,u,p),a.child)}function RE(s,a,l,u,p){if(s===null){var y=l.type;return typeof y=="function"&&!Ny(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,kE(s,a,y,u,p)):(s=nm(l.type,null,u,a,a.mode,p),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!A0(s,p)){var A=y.memoizedProps;if(l=l.compare,l=l!==null?l:Sd,l(A,u)&&s.ref===a.ref)return Zi(s,a,p)}return a.flags|=1,s=Ki(y,u),s.ref=a.ref,s.return=a,a.child=s}function kE(s,a,l,u,p){if(s!==null){var y=s.memoizedProps;if(Sd(y,u)&&s.ref===a.ref)if(In=!1,a.pendingProps=u=y,A0(s,p))(s.flags&131072)!==0&&(In=!0);else return a.lanes=s.lanes,Zi(s,a,p)}return p0(s,a,l,u,p)}function PE(s,a,l,u){var p=u.children,y=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,s!==null){for(u=a.child=s.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,a.child=null;return OE(s,a,y,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&am(a,y!==null?y.cachePool:null),y!==null?MA(a,y):qy(),LA(a);else return u=a.lanes=536870912,OE(s,a,y!==null?y.baseLanes|l:l,l,u)}else y!==null?(am(a,y.cachePool),MA(a,y),eo(),a.memoizedState=null):(s!==null&&am(a,null),qy(),eo());return Zn(s,a,p,l),a.child}function Fd(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function OE(s,a,l,u,p){var y=Uy();return y=y===null?null:{parent:Nn._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},s!==null&&am(a,null),qy(),LA(a),s!==null&&Mc(s,a,u,!0),a.childLanes=p,null}function Am(s,a){return a=_m({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function DE(s,a,l){return vl(a,s.child,null,l),s=Am(a,a.pendingProps),s.flags|=2,Yr(a),a.memoizedState=null,s}function uO(s,a,l){var u=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(ut){if(u.mode==="hidden")return s=Am(a,u),a.lanes=536870912,Fd(null,s);if(Ky(a),(s=Qt)?(s=Q2(s,ws),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Qa!==null?{id:Ai,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},l=yA(s),l.return=a,a.child=l,Jn=a,Qt=null)):s=null,s===null)throw $a(a);return a.lanes=536870912,null}return Am(a,u)}var y=s.memoizedState;if(y!==null){var A=y.dehydrated;if(Ky(a),p)if(a.flags&256)a.flags&=-257,a=DE(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(In||Mc(s,a,l,!1),p=(l&s.childLanes)!==0,In||p){if(u=Ut,u!==null&&(A=ld(u,l),A!==0&&A!==y.retryLane))throw y.retryLane=A,hl(s,A),Pr(u,s,A),m0;Om(),a=DE(s,a,l)}else s=y.treeContext,Qt=vs(A.nextSibling),Jn=a,ut=!0,Ka=null,ws=!1,s!==null&&vA(a,s),a=Am(a,u),a.flags|=4096;return a}return s=Ki(s.child,{mode:u.mode,children:u.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Em(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function p0(s,a,l,u,p){return gl(a),l=Yy(s,a,l,u,void 0,p),u=Wy(),s!==null&&!In?(Jy(s,a,p),Zi(s,a,p)):(ut&&u&&Ry(a),a.flags|=1,Zn(s,a,l,p),a.child)}function ME(s,a,l,u,p,y){return gl(a),a.updateQueue=null,l=jA(a,u,l,p),BA(s),u=Wy(),s!==null&&!In?(Jy(s,a,y),Zi(s,a,y)):(ut&&u&&Ry(a),a.flags|=1,Zn(s,a,l,y),a.child)}function LE(s,a,l,u,p){if(gl(a),a.stateNode===null){var y=kc,A=l.contextType;typeof A=="object"&&A!==null&&(y=Xn(A)),y=new l(u,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=h0,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=u,y.state=a.memoizedState,y.refs={},Fy(a),A=l.contextType,y.context=typeof A=="object"&&A!==null?Xn(A):kc,y.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(d0(a,l,A,u),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(A=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),A!==y.state&&h0.enqueueReplaceState(y,y.state,null),Ld(a,u,y,p),Md(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){y=a.stateNode;var R=a.memoizedProps,H=Al(l,R);y.props=H;var X=y.context,le=l.contextType;A=kc,typeof le=="object"&&le!==null&&(A=Xn(le));var he=l.getDerivedStateFromProps;le=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,le||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||X!==A)&&AE(a,y,u,A),Wa=!1;var Z=a.memoizedState;y.state=Z,Ld(a,u,y,p),Md(),X=a.memoizedState,R||Z!==X||Wa?(typeof he=="function"&&(d0(a,l,he,u),X=a.memoizedState),(H=Wa||xE(a,l,H,u,Z,X,A))?(le||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=X),y.props=u,y.state=X,y.context=A,u=H):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,Hy(s,a),A=a.memoizedProps,le=Al(l,A),y.props=le,he=a.pendingProps,Z=y.context,X=l.contextType,H=kc,typeof X=="object"&&X!==null&&(H=Xn(X)),R=l.getDerivedStateFromProps,(X=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A!==he||Z!==H)&&AE(a,y,u,H),Wa=!1,Z=a.memoizedState,y.state=Z,Ld(a,u,y,p),Md();var re=a.memoizedState;A!==he||Z!==re||Wa||s!==null&&s.dependencies!==null&&sm(s.dependencies)?(typeof R=="function"&&(d0(a,l,R,u),re=a.memoizedState),(le=Wa||xE(a,l,le,u,Z,re,H)||s!==null&&s.dependencies!==null&&sm(s.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,re,H),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,re,H)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||A===s.memoizedProps&&Z===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Z===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=re),y.props=u,y.state=re,y.context=H,u=le):(typeof y.componentDidUpdate!="function"||A===s.memoizedProps&&Z===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Z===s.memoizedState||(a.flags|=1024),u=!1)}return y=u,Em(s,a),u=(a.flags&128)!==0,y||u?(y=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&u?(a.child=vl(a,s.child,null,p),a.child=vl(a,null,l,p)):Zn(s,a,l,p),a.memoizedState=y.state,s=a.child):s=Zi(s,a,p),s}function BE(s,a,l,u){return ml(),a.flags|=256,Zn(s,a,l,u),a.child}var g0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function y0(s){return{baseLanes:s,cachePool:SA()}}function w0(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Jr),s}function jE(s,a,l){var u=a.pendingProps,p=!1,y=(a.flags&128)!==0,A;if((A=y)||(A=s!==null&&s.memoizedState===null?!1:(pn.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(ut){if(p?Za(a):eo(),(s=Qt)?(s=Q2(s,ws),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Qa!==null?{id:Ai,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},l=yA(s),l.return=a,a.child=l,Jn=a,Qt=null)):s=null,s===null)throw $a(a);return ew(s)?a.lanes=32:a.lanes=536870912,null}var R=u.children;return u=u.fallback,p?(eo(),p=a.mode,R=_m({mode:"hidden",children:R},p),u=fl(u,p,l,null),R.return=a,u.return=a,R.sibling=u,a.child=R,u=a.child,u.memoizedState=y0(l),u.childLanes=w0(s,A,l),a.memoizedState=g0,Fd(null,u)):(Za(a),b0(a,R))}var H=s.memoizedState;if(H!==null&&(R=H.dehydrated,R!==null)){if(y)a.flags&256?(Za(a),a.flags&=-257,a=v0(s,a,l)):a.memoizedState!==null?(eo(),a.child=s.child,a.flags|=128,a=null):(eo(),R=u.fallback,p=a.mode,u=_m({mode:"visible",children:u.children},p),R=fl(R,p,l,null),R.flags|=2,u.return=a,R.return=a,u.sibling=R,a.child=u,vl(a,s.child,null,l),u=a.child,u.memoizedState=y0(l),u.childLanes=w0(s,A,l),a.memoizedState=g0,a=Fd(null,u));else if(Za(a),ew(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var X=A.dgst;A=X,u=Error(r(419)),u.stack="",u.digest=A,Id({value:u,source:null,stack:null}),a=v0(s,a,l)}else if(In||Mc(s,a,l,!1),A=(l&s.childLanes)!==0,In||A){if(A=Ut,A!==null&&(u=ld(A,l),u!==0&&u!==H.retryLane))throw H.retryLane=u,hl(s,u),Pr(A,s,u),m0;Z0(R)||Om(),a=v0(s,a,l)}else Z0(R)?(a.flags|=192,a.child=s.child,a=null):(s=H.treeContext,Qt=vs(R.nextSibling),Jn=a,ut=!0,Ka=null,ws=!1,s!==null&&vA(a,s),a=b0(a,u.children),a.flags|=4096);return a}return p?(eo(),R=u.fallback,p=a.mode,H=s.child,X=H.sibling,u=Ki(H,{mode:"hidden",children:u.children}),u.subtreeFlags=H.subtreeFlags&65011712,X!==null?R=Ki(X,R):(R=fl(R,p,l,null),R.flags|=2),R.return=a,u.return=a,u.sibling=R,a.child=u,Fd(null,u),u=a.child,R=s.child.memoizedState,R===null?R=y0(l):(p=R.cachePool,p!==null?(H=Nn._currentValue,p=p.parent!==H?{parent:H,pool:H}:p):p=SA(),R={baseLanes:R.baseLanes|l,cachePool:p}),u.memoizedState=R,u.childLanes=w0(s,A,l),a.memoizedState=g0,Fd(s.child,u)):(Za(a),l=s.child,s=l.sibling,l=Ki(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=l,a.memoizedState=null,l)}function b0(s,a){return a=_m({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function _m(s,a){return s=Kr(22,s,null,a),s.lanes=0,s}function v0(s,a,l){return vl(a,s.child,null,l),s=b0(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function UE(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),My(s.return,a,l)}function x0(s,a,l,u,p,y){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p,treeForkCount:y}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=l,A.tailMode=p,A.treeForkCount=y)}function VE(s,a,l){var u=a.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var A=pn.current,R=(A&2)!==0;if(R?(A=A&1|2,a.flags|=128):A&=1,oe(pn,A),Zn(s,a,u,l),u=ut?Cd:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&UE(s,l,a);else if(s.tag===19)UE(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)s=l.alternate,s!==null&&hm(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),x0(a,!1,p,l,y,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(s=p.alternate,s!==null&&hm(s)===null){a.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}x0(a,!0,l,null,y,u);break;case"together":x0(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Zi(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),ro|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Mc(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=Ki(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Ki(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function A0(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&sm(s)))}function dO(s,a,l){switch(a.tag){case 3:Ze(a,a.stateNode.containerInfo),Ya(a,Nn,s.memoizedState.cache),ml();break;case 27:case 5:Bn(a);break;case 4:Ze(a,a.stateNode.containerInfo);break;case 10:Ya(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ky(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Za(a),a.flags|=128,null):(l&a.child.childLanes)!==0?jE(s,a,l):(Za(a),s=Zi(s,a,l),s!==null?s.sibling:null);Za(a);break;case 19:var p=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Mc(s,a,l,!1),u=(l&a.childLanes)!==0),p){if(u)return VE(s,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),oe(pn,pn.current),u)break;return null;case 22:return a.lanes=0,PE(s,a,l,a.pendingProps);case 24:Ya(a,Nn,s.memoizedState.cache)}return Zi(s,a,l)}function FE(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)In=!0;else{if(!A0(s,l)&&(a.flags&128)===0)return In=!1,dO(s,a,l);In=(s.flags&131072)!==0}else In=!1,ut&&(a.flags&1048576)!==0&&bA(a,Cd,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(s=wl(a.elementType),a.type=s,typeof s=="function")Ny(s)?(u=Al(s,u),a.tag=1,a=LE(null,a,s,u,l)):(a.tag=0,a=p0(null,a,s,u,l));else{if(s!=null){var p=s.$$typeof;if(p===$){a.tag=11,a=IE(null,a,s,u,l);break e}else if(p===T){a.tag=14,a=RE(null,a,s,u,l);break e}}throw a=ye(s)||s,Error(r(306,a,""))}}return a;case 0:return p0(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,p=Al(u,a.pendingProps),LE(s,a,u,p,l);case 3:e:{if(Ze(a,a.stateNode.containerInfo),s===null)throw Error(r(387));u=a.pendingProps;var y=a.memoizedState;p=y.element,Hy(s,a),Ld(a,u,null,l);var A=a.memoizedState;if(u=A.cache,Ya(a,Nn,u),u!==y.cache&&Ly(a,[Nn],l,!0),Md(),u=A.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=BE(s,a,u,l);break e}else if(u!==p){p=ps(Error(r(424)),a),Id(p),a=BE(s,a,u,l);break e}else for(s=a.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Qt=vs(s.firstChild),Jn=a,ut=!0,Ka=null,ws=!0,l=PA(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ml(),u===p){a=Zi(s,a,l);break e}Zn(s,a,u,l)}a=a.child}return a;case 26:return Em(s,a),s===null?(l=X2(a.type,null,a.pendingProps,null))?a.memoizedState=l:ut||(l=a.type,s=a.pendingProps,u=Vm(Re.current).createElement(l),u[_n]=a,u[Hn]=s,er(u,l,s),Tn(u),a.stateNode=u):a.memoizedState=X2(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Bn(a),s===null&&ut&&(u=a.stateNode=Y2(a.type,a.pendingProps,Re.current),Jn=a,ws=!0,p=Qt,lo(a.type)?(tw=p,Qt=vs(u.firstChild)):Qt=p),Zn(s,a,a.pendingProps.children,l),Em(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&ut&&((p=u=Qt)&&(u=FO(u,a.type,a.pendingProps,ws),u!==null?(a.stateNode=u,Jn=a,Qt=vs(u.firstChild),ws=!1,p=!0):p=!1),p||$a(a)),Bn(a),p=a.type,y=a.pendingProps,A=s!==null?s.memoizedProps:null,u=y.children,W0(p,y)?u=null:A!==null&&W0(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=Yy(s,a,nO,null,null,l),nh._currentValue=p),Em(s,a),Zn(s,a,u,l),a.child;case 6:return s===null&&ut&&((s=l=Qt)&&(l=HO(l,a.pendingProps,ws),l!==null?(a.stateNode=l,Jn=a,Qt=null,s=!0):s=!1),s||$a(a)),null;case 13:return jE(s,a,l);case 4:return Ze(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=vl(a,null,u,l):Zn(s,a,u,l),a.child;case 11:return IE(s,a,a.type,a.pendingProps,l);case 7:return Zn(s,a,a.pendingProps,l),a.child;case 8:return Zn(s,a,a.pendingProps.children,l),a.child;case 12:return Zn(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Ya(a,a.type,u.value),Zn(s,a,u.children,l),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,gl(a),p=Xn(p),u=u(p),a.flags|=1,Zn(s,a,u,l),a.child;case 14:return RE(s,a,a.type,a.pendingProps,l);case 15:return kE(s,a,a.type,a.pendingProps,l);case 19:return VE(s,a,l);case 31:return uO(s,a,l);case 22:return PE(s,a,l,a.pendingProps);case 24:return gl(a),u=Xn(Nn),s===null?(p=Uy(),p===null&&(p=Ut,y=By(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),a.memoizedState={parent:u,cache:p},Fy(a),Ya(a,Nn,p)):((s.lanes&l)!==0&&(Hy(s,a),Ld(a,null,null,l),Md()),p=s.memoizedState,y=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Ya(a,Nn,u)):(u=y.cache,Ya(a,Nn,u),u!==p.cache&&Ly(a,[Nn],l,!0))),Zn(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ea(s){s.flags|=4}function E0(s,a,l,u,p){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(m2())s.flags|=8192;else throw bl=lm,Vy}else s.flags&=-16777217}function HE(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!r_(a))if(m2())s.flags|=8192;else throw bl=lm,Vy}function Tm(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?kf():536870912,s.lanes|=a,Kc|=a)}function Hd(s,a){if(!ut)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Kt(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function hO(s,a,l){var u=a.pendingProps;switch(ky(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(a),null;case 1:return Kt(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Wi(Nn),Le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Dc(a)?ea(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Oy())),Kt(a),null;case 26:var p=a.type,y=a.memoizedState;return s===null?(ea(a),y!==null?(Kt(a),HE(a,y)):(Kt(a),E0(a,p,null,u,l))):y?y!==s.memoizedState?(ea(a),Kt(a),HE(a,y)):(Kt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==u&&ea(a),Kt(a),E0(a,p,s,u,l)),null;case 27:if(Ps(a),l=Re.current,p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&ea(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Kt(a),null}s=ae.current,Dc(a)?xA(a):(s=Y2(p,u,l),a.stateNode=s,ea(a))}return Kt(a),null;case 5:if(Ps(a),p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&ea(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Kt(a),null}if(y=ae.current,Dc(a))xA(a);else{var A=Vm(Re.current);switch(y){case 1:y=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=A.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?A.createElement(p,{is:u.is}):A.createElement(p)}}y[_n]=a,y[Hn]=u;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=y;e:switch(er(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ea(a)}}return Kt(a),E0(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&ea(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(s=Re.current,Dc(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,p=Jn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}s[_n]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||j2(s.nodeValue,l)),s||$a(a,!0)}else s=Vm(s).createTextNode(u),s[_n]=a,a.stateNode=s}return Kt(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(u=Dc(a),l!==null){if(s===null){if(!u)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[_n]=a}else ml(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),s=!1}else l=Oy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(Yr(a),a):(Yr(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Kt(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Dc(a),u!==null&&u.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[_n]=a}else ml(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),p=!1}else p=Oy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Yr(a),a):(Yr(a),null)}return Yr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,s=s!==null&&s.memoizedState!==null,l&&(u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Tm(a,a.updateQueue),Kt(a),null);case 4:return Le(),s===null&&q0(a.stateNode.containerInfo),Kt(a),null;case 10:return Wi(a.type),Kt(a),null;case 19:if(z(pn),u=a.memoizedState,u===null)return Kt(a),null;if(p=(a.flags&128)!==0,y=u.rendering,y===null)if(p)Hd(u,!1);else{if(cn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=hm(s),y!==null){for(a.flags|=128,Hd(u,!1),s=y.updateQueue,a.updateQueue=s,Tm(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)gA(l,s),l=l.sibling;return oe(pn,pn.current&1|2),ut&&$i(a,u.treeForkCount),a.child}s=s.sibling}u.tail!==null&&St()>Rm&&(a.flags|=128,p=!0,Hd(u,!1),a.lanes=4194304)}else{if(!p)if(s=hm(y),s!==null){if(a.flags|=128,p=!0,s=s.updateQueue,a.updateQueue=s,Tm(a,s),Hd(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!ut)return Kt(a),null}else 2*St()-u.renderingStartTime>Rm&&l!==536870912&&(a.flags|=128,p=!0,Hd(u,!1),a.lanes=4194304);u.isBackwards?(y.sibling=a.child,a.child=y):(s=u.last,s!==null?s.sibling=y:a.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=St(),s.sibling=null,l=pn.current,oe(pn,p?l&1|2:l&1),ut&&$i(a,u.treeForkCount),s):(Kt(a),null);case 22:case 23:return Yr(a),Qy(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(Kt(a),a.subtreeFlags&6&&(a.flags|=8192)):Kt(a),l=a.updateQueue,l!==null&&Tm(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&z(yl),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Wi(Nn),Kt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function fO(s,a){switch(ky(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Wi(Nn),Le(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ps(a),null;case 31:if(a.memoizedState!==null){if(Yr(a),a.alternate===null)throw Error(r(340));ml()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Yr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));ml()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return z(pn),null;case 4:return Le(),null;case 10:return Wi(a.type),null;case 22:case 23:return Yr(a),Qy(),s!==null&&z(yl),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Wi(Nn),null;case 25:return null;default:return null}}function zE(s,a){switch(ky(a),a.tag){case 3:Wi(Nn),Le();break;case 26:case 27:case 5:Ps(a);break;case 4:Le();break;case 31:a.memoizedState!==null&&Yr(a);break;case 13:Yr(a);break;case 19:z(pn);break;case 10:Wi(a.type);break;case 22:case 23:Yr(a),Qy(),s!==null&&z(yl);break;case 24:Wi(Nn)}}function zd(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&s)===s){u=void 0;var y=l.create,A=l.inst;u=y(),A.destroy=u}l=l.next}while(l!==p)}}catch(R){It(a,a.return,R)}}function to(s,a,l){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&s)===s){var A=u.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,p=a;var H=l,X=R;try{X()}catch(le){It(p,H,le)}}}u=u.next}while(u!==y)}}catch(le){It(a,a.return,le)}}function GE(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{DA(a,l)}catch(u){It(s,s.return,u)}}}function qE(s,a,l){l.props=Al(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){It(s,a,u)}}function Gd(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(p){It(s,a,p)}}function _i(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){It(s,a,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){It(s,a,p)}else l.current=null}function QE(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){It(s,s.return,p)}}function _0(s,a,l){try{var u=s.stateNode;MO(u,s.type,l,a),u[Hn]=a}catch(p){It(s,s.return,p)}}function KE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&lo(s.type)||s.tag===4}function T0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||KE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&lo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function S0(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Us));else if(u!==4&&(u===27&&lo(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(S0(s,a,l),s=s.sibling;s!==null;)S0(s,a,l),s=s.sibling}function Sm(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&lo(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Sm(s,a,l),s=s.sibling;s!==null;)Sm(s,a,l),s=s.sibling}function $E(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);er(a,u,l),a[_n]=s,a[Hn]=l}catch(y){It(s,s.return,y)}}var ta=!1,Rn=!1,N0=!1,YE=typeof WeakSet=="function"?WeakSet:Set,Gn=null;function mO(s,a){if(s=s.containerInfo,$0=Km,s=oA(s),vy(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var A=0,R=-1,H=-1,X=0,le=0,he=s,Z=null;t:for(;;){for(var re;he!==l||p!==0&&he.nodeType!==3||(R=A+p),he!==y||u!==0&&he.nodeType!==3||(H=A+u),he.nodeType===3&&(A+=he.nodeValue.length),(re=he.firstChild)!==null;)Z=he,he=re;for(;;){if(he===s)break t;if(Z===l&&++X===p&&(R=A),Z===y&&++le===u&&(H=A),(re=he.nextSibling)!==null)break;he=Z,Z=he.parentNode}he=re}l=R===-1||H===-1?null:{start:R,end:H}}else l=null}l=l||{start:0,end:0}}else l=null;for(Y0={focusedElem:s,selectionRange:l},Km=!1,Gn=a;Gn!==null;)if(a=Gn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Gn=s;else for(;Gn!==null;){switch(a=Gn,y=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)p=s[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,l=a,p=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var Ie=Al(l.type,p);s=u.getSnapshotBeforeUpdate(Ie,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Be){It(l,l.return,Be)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)X0(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":X0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Gn=s;break}Gn=a.return}}function WE(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ra(s,l),u&4&&zd(5,l);break;case 1:if(ra(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(A){It(l,l.return,A)}else{var p=Al(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(p,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){It(l,l.return,A)}}u&64&&GE(l),u&512&&Gd(l,l.return);break;case 3:if(ra(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{DA(s,a)}catch(A){It(l,l.return,A)}}break;case 27:a===null&&u&4&&$E(l);case 26:case 5:ra(s,l),a===null&&u&4&&QE(l),u&512&&Gd(l,l.return);break;case 12:ra(s,l);break;case 31:ra(s,l),u&4&&ZE(s,l);break;case 13:ra(s,l),u&4&&e2(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=EO.bind(null,l),zO(s,l))));break;case 22:if(u=l.memoizedState!==null||ta,!u){a=a!==null&&a.memoizedState!==null||Rn,p=ta;var y=Rn;ta=u,(Rn=a)&&!y?sa(s,l,(l.subtreeFlags&8772)!==0):ra(s,l),ta=p,Rn=y}break;case 30:break;default:ra(s,l)}}function JE(s){var a=s.alternate;a!==null&&(s.alternate=null,JE(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&yc(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Yt=null,Cr=!1;function na(s,a,l){for(l=l.child;l!==null;)XE(s,a,l),l=l.sibling}function XE(s,a,l){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Un,l)}catch{}switch(l.tag){case 26:Rn||_i(l,a),na(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Rn||_i(l,a);var u=Yt,p=Cr;lo(l.type)&&(Yt=l.stateNode,Cr=!1),na(s,a,l),Zd(l.stateNode),Yt=u,Cr=p;break;case 5:Rn||_i(l,a);case 6:if(u=Yt,p=Cr,Yt=null,na(s,a,l),Yt=u,Cr=p,Yt!==null)if(Cr)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(l.stateNode)}catch(y){It(l,a,y)}else try{Yt.removeChild(l.stateNode)}catch(y){It(l,a,y)}break;case 18:Yt!==null&&(Cr?(s=Yt,G2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),tu(s)):G2(Yt,l.stateNode));break;case 4:u=Yt,p=Cr,Yt=l.stateNode.containerInfo,Cr=!0,na(s,a,l),Yt=u,Cr=p;break;case 0:case 11:case 14:case 15:to(2,l,a),Rn||to(4,l,a),na(s,a,l);break;case 1:Rn||(_i(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&qE(l,a,u)),na(s,a,l);break;case 21:na(s,a,l);break;case 22:Rn=(u=Rn)||l.memoizedState!==null,na(s,a,l),Rn=u;break;default:na(s,a,l)}}function ZE(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{tu(s)}catch(l){It(a,a.return,l)}}}function e2(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{tu(s)}catch(l){It(a,a.return,l)}}function pO(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new YE),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new YE),a;default:throw Error(r(435,s.tag))}}function Nm(s,a){var l=pO(s);a.forEach(function(u){if(!l.has(u)){l.add(u);var p=_O.bind(null,s,u);u.then(p,p)}})}function Ir(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],y=s,A=a,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(lo(R.type)){Yt=R.stateNode,Cr=!1;break e}break;case 5:Yt=R.stateNode,Cr=!1;break e;case 3:case 4:Yt=R.stateNode.containerInfo,Cr=!0;break e}R=R.return}if(Yt===null)throw Error(r(160));XE(y,A,p),Yt=null,Cr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)t2(a,s),a=a.sibling}var qs=null;function t2(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ir(a,s),Rr(s),u&4&&(to(3,s,s.return),zd(3,s),to(5,s,s.return));break;case 1:Ir(a,s),Rr(s),u&512&&(Rn||l===null||_i(l,l.return)),u&64&&ta&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=qs;if(Ir(a,s),Rr(s),u&512&&(Rn||l===null||_i(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[ui]||y[_n]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),er(y,u,l),y[_n]=s,Tn(y),u=y;break e;case"link":var A=t_("link","href",p).get(u+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(y=A[R],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}y=p.createElement(u),er(y,u,l),p.head.appendChild(y);break;case"meta":if(A=t_("meta","content",p).get(u+(l.content||""))){for(R=0;R<A.length;R++)if(y=A[R],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}y=p.createElement(u),er(y,u,l),p.head.appendChild(y);break;default:throw Error(r(468,u))}y[_n]=s,Tn(y),u=y}s.stateNode=u}else n_(p,s.type,s.stateNode);else s.stateNode=e_(p,u,s.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?n_(p,s.type,s.stateNode):e_(p,u,s.memoizedProps)):u===null&&s.stateNode!==null&&_0(s,s.memoizedProps,l.memoizedProps)}break;case 27:Ir(a,s),Rr(s),u&512&&(Rn||l===null||_i(l,l.return)),l!==null&&u&4&&_0(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Ir(a,s),Rr(s),u&512&&(Rn||l===null||_i(l,l.return)),s.flags&32){p=s.stateNode;try{Nr(p,"")}catch(Ie){It(s,s.return,Ie)}}u&4&&s.stateNode!=null&&(p=s.memoizedProps,_0(s,p,l!==null?l.memoizedProps:p)),u&1024&&(N0=!0);break;case 6:if(Ir(a,s),Rr(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Ie){It(s,s.return,Ie)}}break;case 3:if(zm=null,p=qs,qs=Fm(a.containerInfo),Ir(a,s),qs=p,Rr(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{tu(a.containerInfo)}catch(Ie){It(s,s.return,Ie)}N0&&(N0=!1,n2(s));break;case 4:u=qs,qs=Fm(s.stateNode.containerInfo),Ir(a,s),Rr(s),qs=u;break;case 12:Ir(a,s),Rr(s);break;case 31:Ir(a,s),Rr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nm(s,u)));break;case 13:Ir(a,s),Rr(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Im=St()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nm(s,u)));break;case 22:p=s.memoizedState!==null;var H=l!==null&&l.memoizedState!==null,X=ta,le=Rn;if(ta=X||p,Rn=le||H,Ir(a,s),Rn=le,ta=X,Rr(s),u&8192)e:for(a=s.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||H||ta||Rn||El(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){H=l=a;try{if(y=H.stateNode,p)A=y.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=H.stateNode;var he=H.memoizedProps.style,Z=he!=null&&he.hasOwnProperty("display")?he.display:null;R.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ie){It(H,H.return,Ie)}}}else if(a.tag===6){if(l===null){H=a;try{H.stateNode.nodeValue=p?"":H.memoizedProps}catch(Ie){It(H,H.return,Ie)}}}else if(a.tag===18){if(l===null){H=a;try{var re=H.stateNode;p?q2(re,!0):q2(H.stateNode,!1)}catch(Ie){It(H,H.return,Ie)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Nm(s,l))));break;case 19:Ir(a,s),Rr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nm(s,u)));break;case 30:break;case 21:break;default:Ir(a,s),Rr(s)}}function Rr(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(KE(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var p=l.stateNode,y=T0(s);Sm(s,y,p);break;case 5:var A=l.stateNode;l.flags&32&&(Nr(A,""),l.flags&=-33);var R=T0(s);Sm(s,R,A);break;case 3:case 4:var H=l.stateNode.containerInfo,X=T0(s);S0(s,X,H);break;default:throw Error(r(161))}}catch(le){It(s,s.return,le)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function n2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;n2(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function ra(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)WE(s,a.alternate,a),a=a.sibling}function El(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:to(4,a,a.return),El(a);break;case 1:_i(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&qE(a,a.return,l),El(a);break;case 27:Zd(a.stateNode);case 26:case 5:_i(a,a.return),El(a);break;case 22:a.memoizedState===null&&El(a);break;case 30:El(a);break;default:El(a)}s=s.sibling}}function sa(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=s,y=a,A=y.flags;switch(y.tag){case 0:case 11:case 15:sa(p,y,l),zd(4,y);break;case 1:if(sa(p,y,l),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){It(u,u.return,X)}if(u=y,p=u.updateQueue,p!==null){var R=u.stateNode;try{var H=p.shared.hiddenCallbacks;if(H!==null)for(p.shared.hiddenCallbacks=null,p=0;p<H.length;p++)OA(H[p],R)}catch(X){It(u,u.return,X)}}l&&A&64&&GE(y),Gd(y,y.return);break;case 27:$E(y);case 26:case 5:sa(p,y,l),l&&u===null&&A&4&&QE(y),Gd(y,y.return);break;case 12:sa(p,y,l);break;case 31:sa(p,y,l),l&&A&4&&ZE(p,y);break;case 13:sa(p,y,l),l&&A&4&&e2(p,y);break;case 22:y.memoizedState===null&&sa(p,y,l),Gd(y,y.return);break;case 30:break;default:sa(p,y,l)}a=a.sibling}}function C0(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Rd(l))}function I0(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Rd(s))}function Qs(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)r2(s,a,l,u),a=a.sibling}function r2(s,a,l,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Qs(s,a,l,u),p&2048&&zd(9,a);break;case 1:Qs(s,a,l,u);break;case 3:Qs(s,a,l,u),p&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Rd(s)));break;case 12:if(p&2048){Qs(s,a,l,u),s=a.stateNode;try{var y=a.memoizedProps,A=y.id,R=y.onPostCommit;typeof R=="function"&&R(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(H){It(a,a.return,H)}}else Qs(s,a,l,u);break;case 31:Qs(s,a,l,u);break;case 13:Qs(s,a,l,u);break;case 23:break;case 22:y=a.stateNode,A=a.alternate,a.memoizedState!==null?y._visibility&2?Qs(s,a,l,u):qd(s,a):y._visibility&2?Qs(s,a,l,u):(y._visibility|=2,Gc(s,a,l,u,(a.subtreeFlags&10256)!==0||!1)),p&2048&&C0(A,a);break;case 24:Qs(s,a,l,u),p&2048&&I0(a.alternate,a);break;default:Qs(s,a,l,u)}}function Gc(s,a,l,u,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=s,A=a,R=l,H=u,X=A.flags;switch(A.tag){case 0:case 11:case 15:Gc(y,A,R,H,p),zd(8,A);break;case 23:break;case 22:var le=A.stateNode;A.memoizedState!==null?le._visibility&2?Gc(y,A,R,H,p):qd(y,A):(le._visibility|=2,Gc(y,A,R,H,p)),p&&X&2048&&C0(A.alternate,A);break;case 24:Gc(y,A,R,H,p),p&&X&2048&&I0(A.alternate,A);break;default:Gc(y,A,R,H,p)}a=a.sibling}}function qd(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,p=u.flags;switch(u.tag){case 22:qd(l,u),p&2048&&C0(u.alternate,u);break;case 24:qd(l,u),p&2048&&I0(u.alternate,u);break;default:qd(l,u)}a=a.sibling}}var Qd=8192;function qc(s,a,l){if(s.subtreeFlags&Qd)for(s=s.child;s!==null;)s2(s,a,l),s=s.sibling}function s2(s,a,l){switch(s.tag){case 26:qc(s,a,l),s.flags&Qd&&s.memoizedState!==null&&tD(l,qs,s.memoizedState,s.memoizedProps);break;case 5:qc(s,a,l);break;case 3:case 4:var u=qs;qs=Fm(s.stateNode.containerInfo),qc(s,a,l),qs=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=Qd,Qd=16777216,qc(s,a,l),Qd=u):qc(s,a,l));break;default:qc(s,a,l)}}function i2(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Kd(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Gn=u,o2(u,s)}i2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)a2(s),s=s.sibling}function a2(s){switch(s.tag){case 0:case 11:case 15:Kd(s),s.flags&2048&&to(9,s,s.return);break;case 3:Kd(s);break;case 12:Kd(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Cm(s)):Kd(s);break;default:Kd(s)}}function Cm(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Gn=u,o2(u,s)}i2(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:to(8,a,a.return),Cm(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Cm(a));break;default:Cm(a)}s=s.sibling}}function o2(s,a){for(;Gn!==null;){var l=Gn;switch(l.tag){case 0:case 11:case 15:to(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Rd(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Gn=u;else e:for(l=s;Gn!==null;){u=Gn;var p=u.sibling,y=u.return;if(JE(u),u===l){Gn=null;break e}if(p!==null){p.return=y,Gn=p;break e}Gn=y}}}var gO={getCacheForType:function(s){var a=Xn(Nn),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return Xn(Nn).controller.signal}},yO=typeof WeakMap=="function"?WeakMap:Map,xt=0,Ut=null,rt=null,it=0,Ct=0,Wr=null,no=!1,Qc=!1,R0=!1,ia=0,cn=0,ro=0,_l=0,k0=0,Jr=0,Kc=0,$d=null,kr=null,P0=!1,Im=0,l2=0,Rm=1/0,km=null,so=null,Vn=0,io=null,$c=null,aa=0,O0=0,D0=null,c2=null,Yd=0,M0=null;function Xr(){return(xt&2)!==0&&it!==0?it&-it:G.T!==null?F0():Pf()}function u2(){if(Jr===0)if((it&536870912)===0||ut){var s=Ft;Ft<<=1,(Ft&3932160)===0&&(Ft=262144),Jr=s}else Jr=536870912;return s=$r.current,s!==null&&(s.flags|=32),Jr}function Pr(s,a,l){(s===Ut&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)&&(Yc(s,0),ao(s,it,Jr,!1)),Xo(s,l),((xt&2)===0||s!==Ut)&&(s===Ut&&((xt&2)===0&&(_l|=l),cn===4&&ao(s,it,Jr,!1)),Ti(s))}function d2(s,a,l){if((xt&6)!==0)throw Error(r(327));var u=!l&&(a&127)===0&&(a&s.expiredLanes)===0||Ls(s,a),p=u?vO(s,a):B0(s,a,!0),y=u;do{if(p===0){Qc&&!u&&ao(s,a,0,!1);break}else{if(l=s.current.alternate,y&&!wO(l)){p=B0(s,a,!1),y=!1;continue}if(p===2){if(y=a,s.errorRecoveryDisabledLanes&y)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var R=s;p=$d;var H=R.current.memoizedState.isDehydrated;if(H&&(Yc(R,A).flags|=256),A=B0(R,A,!1),A!==2){if(R0&&!H){R.errorRecoveryDisabledLanes|=y,_l|=y,p=4;break e}y=kr,kr=p,y!==null&&(kr===null?kr=y:kr.push.apply(kr,y))}p=A}if(y=!1,p!==2)continue}}if(p===1){Yc(s,0),ao(s,a,0,!0);break}e:{switch(u=s,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ao(u,a,Jr,!no);break e;case 2:kr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Im+300-St(),10<p)){if(ao(u,a,Jr,!no),oi(u,0,!0)!==0)break e;aa=a,u.timeoutHandle=H2(h2.bind(null,u,l,kr,km,P0,a,Jr,_l,Kc,no,y,"Throttled",-0,0),p);break e}h2(u,l,kr,km,P0,a,Jr,_l,Kc,no,y,null,-0,0)}}break}while(!0);Ti(s)}function h2(s,a,l,u,p,y,A,R,H,X,le,he,Z,re){if(s.timeoutHandle=-1,he=a.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},s2(a,y,he);var Ie=(y&62914560)===y?Im-St():(y&4194048)===y?l2-St():0;if(Ie=nD(he,Ie),Ie!==null){aa=y,s.cancelPendingCommit=Ie(v2.bind(null,s,a,y,l,u,p,A,R,H,le,he,null,Z,re)),ao(s,y,A,!X);return}}v2(s,a,y,l,u,p,A,R,H)}function wO(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],y=p.getSnapshot;p=p.value;try{if(!Qr(y(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ao(s,a,l,u){a&=~k0,a&=~_l,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var p=a;0<p;){var y=31-Zt(p),A=1<<y;u[y]=-1,p&=~A}l!==0&&Zo(s,l,a)}function Pm(){return(xt&6)===0?(Wd(0),!1):!0}function L0(){if(rt!==null){if(Ct===0)var s=rt.return;else s=rt,Yi=pl=null,Xy(s),Uc=null,Pd=0,s=rt;for(;s!==null;)zE(s.alternate,s),s=s.return;rt=null}}function Yc(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,jO(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),aa=0,L0(),Ut=s,rt=l=Ki(s.current,null),it=a,Ct=0,Wr=null,no=!1,Qc=Ls(s,a),R0=!1,Kc=Jr=k0=_l=ro=cn=0,kr=$d=null,P0=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var p=31-Zt(u),y=1<<p;a|=s[p],u&=~y}return ia=a,Zf(),l}function f2(s,a){$e=null,G.H=Vd,a===jc||a===om?(a=IA(),Ct=3):a===Vy?(a=IA(),Ct=4):Ct=a===m0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wr=a,rt===null&&(cn=1,xm(s,ps(a,s.current)))}function m2(){var s=$r.current;return s===null?!0:(it&4194048)===it?bs===null:(it&62914560)===it||(it&536870912)!==0?s===bs:!1}function p2(){var s=G.H;return G.H=Vd,s===null?Vd:s}function g2(){var s=G.A;return G.A=gO,s}function Om(){cn=4,no||(it&4194048)!==it&&$r.current!==null||(Qc=!0),(ro&134217727)===0&&(_l&134217727)===0||Ut===null||ao(Ut,it,Jr,!1)}function B0(s,a,l){var u=xt;xt|=2;var p=p2(),y=g2();(Ut!==s||it!==a)&&(km=null,Yc(s,a)),a=!1;var A=cn;e:do try{if(Ct!==0&&rt!==null){var R=rt,H=Wr;switch(Ct){case 8:L0(),A=6;break e;case 3:case 2:case 9:case 6:$r.current===null&&(a=!0);var X=Ct;if(Ct=0,Wr=null,Wc(s,R,H,X),l&&Qc){A=0;break e}break;default:X=Ct,Ct=0,Wr=null,Wc(s,R,H,X)}}bO(),A=cn;break}catch(le){f2(s,le)}while(!0);return a&&s.shellSuspendCounter++,Yi=pl=null,xt=u,G.H=p,G.A=y,rt===null&&(Ut=null,it=0,Zf()),A}function bO(){for(;rt!==null;)y2(rt)}function vO(s,a){var l=xt;xt|=2;var u=p2(),p=g2();Ut!==s||it!==a?(km=null,Rm=St()+500,Yc(s,a)):Qc=Ls(s,a);e:do try{if(Ct!==0&&rt!==null){a=rt;var y=Wr;t:switch(Ct){case 1:Ct=0,Wr=null,Wc(s,a,y,1);break;case 2:case 9:if(NA(y)){Ct=0,Wr=null,w2(a);break}a=function(){Ct!==2&&Ct!==9||Ut!==s||(Ct=7),Ti(s)},y.then(a,a);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:NA(y)?(Ct=0,Wr=null,w2(a)):(Ct=0,Wr=null,Wc(s,a,y,7));break;case 5:var A=null;switch(rt.tag){case 26:A=rt.memoizedState;case 5:case 27:var R=rt;if(A?r_(A):R.stateNode.complete){Ct=0,Wr=null;var H=R.sibling;if(H!==null)rt=H;else{var X=R.return;X!==null?(rt=X,Dm(X)):rt=null}break t}}Ct=0,Wr=null,Wc(s,a,y,5);break;case 6:Ct=0,Wr=null,Wc(s,a,y,6);break;case 8:L0(),cn=6;break e;default:throw Error(r(462))}}xO();break}catch(le){f2(s,le)}while(!0);return Yi=pl=null,G.H=u,G.A=p,xt=l,rt!==null?0:(Ut=null,it=0,Zf(),cn)}function xO(){for(;rt!==null&&!gt();)y2(rt)}function y2(s){var a=FE(s.alternate,s,ia);s.memoizedProps=s.pendingProps,a===null?Dm(s):rt=a}function w2(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=ME(l,a,a.pendingProps,a.type,void 0,it);break;case 11:a=ME(l,a,a.pendingProps,a.type.render,a.ref,it);break;case 5:Xy(a);default:zE(l,a),a=rt=gA(a,ia),a=FE(l,a,ia)}s.memoizedProps=s.pendingProps,a===null?Dm(s):rt=a}function Wc(s,a,l,u){Yi=pl=null,Xy(a),Uc=null,Pd=0;var p=a.return;try{if(cO(s,p,a,l,it)){cn=1,xm(s,ps(l,s.current)),rt=null;return}}catch(y){if(p!==null)throw rt=p,y;cn=1,xm(s,ps(l,s.current)),rt=null;return}a.flags&32768?(ut||u===1?s=!0:Qc||(it&536870912)!==0?s=!1:(no=s=!0,(u===2||u===9||u===3||u===6)&&(u=$r.current,u!==null&&u.tag===13&&(u.flags|=16384))),b2(a,s)):Dm(a)}function Dm(s){var a=s;do{if((a.flags&32768)!==0){b2(a,no);return}s=a.return;var l=hO(a.alternate,a,ia);if(l!==null){rt=l;return}if(a=a.sibling,a!==null){rt=a;return}rt=a=s}while(a!==null);cn===0&&(cn=5)}function b2(s,a){do{var l=fO(s.alternate,s);if(l!==null){l.flags&=32767,rt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){rt=s;return}rt=s=l}while(s!==null);cn=6,rt=null}function v2(s,a,l,u,p,y,A,R,H){s.cancelPendingCommit=null;do Mm();while(Vn!==0);if((xt&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=Ty,gy(s,l,y,A,R,H),s===Ut&&(rt=Ut=null,it=0),$c=a,io=s,aa=l,O0=y,D0=p,c2=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,TO(ar,function(){return T2(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,p=se.p,se.p=2,A=xt,xt|=4;try{mO(s,a,l)}finally{xt=A,se.p=p,G.T=u}}Vn=1,x2(),A2(),E2()}}function x2(){if(Vn===1){Vn=0;var s=io,a=$c,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=G.T,G.T=null;var u=se.p;se.p=2;var p=xt;xt|=4;try{t2(a,s);var y=Y0,A=oA(s.containerInfo),R=y.focusedElem,H=y.selectionRange;if(A!==R&&R&&R.ownerDocument&&aA(R.ownerDocument.documentElement,R)){if(H!==null&&vy(R)){var X=H.start,le=H.end;if(le===void 0&&(le=X),"selectionStart"in R)R.selectionStart=X,R.selectionEnd=Math.min(le,R.value.length);else{var he=R.ownerDocument||document,Z=he&&he.defaultView||window;if(Z.getSelection){var re=Z.getSelection(),Ie=R.textContent.length,Be=Math.min(H.start,Ie),Mt=H.end===void 0?Be:Math.min(H.end,Ie);!re.extend&&Be>Mt&&(A=Mt,Mt=Be,Be=A);var K=iA(R,Be),q=iA(R,Mt);if(K&&q&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==q.node||re.focusOffset!==q.offset)){var J=he.createRange();J.setStart(K.node,K.offset),re.removeAllRanges(),Be>Mt?(re.addRange(J),re.extend(q.node,q.offset)):(J.setEnd(q.node,q.offset),re.addRange(J))}}}}for(he=[],re=R;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<he.length;R++){var ce=he[R];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Km=!!$0,Y0=$0=null}finally{xt=p,se.p=u,G.T=l}}s.current=a,Vn=2}}function A2(){if(Vn===2){Vn=0;var s=io,a=$c,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=G.T,G.T=null;var u=se.p;se.p=2;var p=xt;xt|=4;try{WE(s,a.alternate,a)}finally{xt=p,se.p=u,G.T=l}}Vn=3}}function E2(){if(Vn===4||Vn===3){Vn=0,on();var s=io,a=$c,l=aa,u=c2;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Vn=5:(Vn=0,$c=io=null,_2(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(so=null),zi(l),a=a.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Un,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=G.T,p=se.p,se.p=2,G.T=null;try{for(var y=s.onRecoverableError,A=0;A<u.length;A++){var R=u[A];y(R.value,{componentStack:R.stack})}}finally{G.T=a,se.p=p}}(aa&3)!==0&&Mm(),Ti(s),p=s.pendingLanes,(l&261930)!==0&&(p&42)!==0?s===M0?Yd++:(Yd=0,M0=s):Yd=0,Wd(0)}}function _2(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Rd(a)))}function Mm(){return x2(),A2(),E2(),T2()}function T2(){if(Vn!==5)return!1;var s=io,a=O0;O0=0;var l=zi(aa),u=G.T,p=se.p;try{se.p=32>l?32:l,G.T=null,l=D0,D0=null;var y=io,A=aa;if(Vn=0,$c=io=null,aa=0,(xt&6)!==0)throw Error(r(331));var R=xt;if(xt|=4,a2(y.current),r2(y,y.current,A,l),xt=R,Wd(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Un,y)}catch{}return!0}finally{se.p=p,G.T=u,_2(s,a)}}function S2(s,a,l){a=ps(l,a),a=f0(s.stateNode,a,2),s=Xa(s,a,2),s!==null&&(Xo(s,2),Ti(s))}function It(s,a,l){if(s.tag===3)S2(s,s,l);else for(;a!==null;){if(a.tag===3){S2(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(so===null||!so.has(u))){s=ps(l,s),l=NE(2),u=Xa(a,l,2),u!==null&&(CE(l,u,a,s),Xo(u,2),Ti(u));break}}a=a.return}}function j0(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new yO;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(l)||(R0=!0,p.add(l),s=AO.bind(null,s,a,l),a.then(s,s))}function AO(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,Ut===s&&(it&l)===l&&(cn===4||cn===3&&(it&62914560)===it&&300>St()-Im?(xt&2)===0&&Yc(s,0):k0|=l,Kc===it&&(Kc=0)),Ti(s)}function N2(s,a){a===0&&(a=kf()),s=hl(s,a),s!==null&&(Xo(s,a),Ti(s))}function EO(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),N2(s,l)}function _O(s,a){var l=0;switch(s.tag){case 31:case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),N2(s,l)}function TO(s,a){return Fe(s,a)}var Lm=null,Jc=null,U0=!1,Bm=!1,V0=!1,oo=0;function Ti(s){s!==Jc&&s.next===null&&(Jc===null?Lm=Jc=s:Jc=Jc.next=s),Bm=!0,U0||(U0=!0,NO())}function Wd(s,a){if(!V0&&Bm){V0=!0;do for(var l=!1,u=Lm;u!==null;){if(s!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var A=u.suspendedLanes,R=u.pingedLanes;y=(1<<31-Zt(42|s)+1)-1,y&=p&~(A&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,k2(u,y))}else y=it,y=oi(u,u===Ut?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Ls(u,y)||(l=!0,k2(u,y));u=u.next}while(l);V0=!1}}function SO(){C2()}function C2(){Bm=U0=!1;var s=0;oo!==0&&BO()&&(s=oo);for(var a=St(),l=null,u=Lm;u!==null;){var p=u.next,y=I2(u,a);y===0?(u.next=null,l===null?Lm=p:l.next=p,p===null&&(Jc=l)):(l=u,(s!==0||(y&3)!==0)&&(Bm=!0)),u=p}Vn!==0&&Vn!==5||Wd(s),oo!==0&&(oo=0)}function I2(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var A=31-Zt(y),R=1<<A,H=p[A];H===-1?((R&l)===0||(R&u)!==0)&&(p[A]=py(R,a)):H<=a&&(s.expiredLanes|=R),y&=~R}if(a=Ut,l=it,l=oi(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Ee(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Ls(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&Ee(u),zi(l)){case 2:case 8:l=jt;break;case 32:l=ar;break;case 268435456:l=Fi;break;default:l=ar}return u=R2.bind(null,s),l=Fe(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&Ee(u),s.callbackPriority=2,s.callbackNode=null,2}function R2(s,a){if(Vn!==0&&Vn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Mm()&&s.callbackNode!==l)return null;var u=it;return u=oi(s,s===Ut?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(d2(s,u,a),I2(s,St()),s.callbackNode!=null&&s.callbackNode===l?R2.bind(null,s):null)}function k2(s,a){if(Mm())return null;d2(s,a,!0)}function NO(){UO(function(){(xt&6)!==0?Fe(nt,SO):C2()})}function F0(){if(oo===0){var s=Lc;s===0&&(s=lr,lr<<=1,(lr&261888)===0&&(lr=256)),oo=s}return oo}function P2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:xc(""+s)}function O2(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function CO(s,a,l,u,p){if(a==="submit"&&l&&l.stateNode===p){var y=P2((p[Hn]||null).action),A=u.submitter;A&&(a=(a=A[Hn]||null)?P2(a.formAction):A.getAttribute("formAction"),a!==null&&(y=a,A=null));var R=new wi("action","action",null,u,p);s.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(oo!==0){var H=A?O2(p,A):new FormData(p);o0(l,{pending:!0,data:H,method:p.method,action:y},null,H)}}else typeof y=="function"&&(R.preventDefault(),H=A?O2(p,A):new FormData(p),o0(l,{pending:!0,data:H,method:p.method,action:y},y,H))},currentTarget:p}]})}}for(var H0=0;H0<_y.length;H0++){var z0=_y[H0],IO=z0.toLowerCase(),RO=z0[0].toUpperCase()+z0.slice(1);Gs(IO,"on"+RO)}Gs(uA,"onAnimationEnd"),Gs(dA,"onAnimationIteration"),Gs(hA,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(QP,"onTransitionRun"),Gs(KP,"onTransitionStart"),Gs($P,"onTransitionCancel"),Gs(fA,"onTransitionEnd"),mi("onMouseEnter",["mouseout","mouseover"]),mi("onMouseLeave",["mouseout","mouseover"]),mi("onPointerEnter",["pointerout","pointerover"]),mi("onPointerLeave",["pointerout","pointerover"]),fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jd));function D2(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],p=u.event;u=u.listeners;e:{var y=void 0;if(a)for(var A=u.length-1;0<=A;A--){var R=u[A],H=R.instance,X=R.currentTarget;if(R=R.listener,H!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=X;try{y(p)}catch(le){Xf(le)}p.currentTarget=null,y=H}else for(A=0;A<u.length;A++){if(R=u[A],H=R.instance,X=R.currentTarget,R=R.listener,H!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=X;try{y(p)}catch(le){Xf(le)}p.currentTarget=null,y=H}}}}function st(s,a){var l=a[gc];l===void 0&&(l=a[gc]=new Set);var u=s+"__bubble";l.has(u)||(M2(a,s,2,!1),l.add(u))}function G0(s,a,l){var u=0;a&&(u|=4),M2(l,s,u,a)}var jm="_reactListening"+Math.random().toString(36).slice(2);function q0(s){if(!s[jm]){s[jm]=!0,cd.forEach(function(l){l!=="selectionchange"&&(kO.has(l)||G0(l,!1,s),G0(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[jm]||(a[jm]=!0,G0("selectionchange",!1,a))}}function M2(s,a,l,u){switch(u_(a)){case 2:var p=iD;break;case 8:p=aD;break;default:p=aw}l=p.bind(null,a,l,s),p=void 0,!sl||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(a,l,{capture:!0,passive:p}):s.addEventListener(a,l,!0):p!==void 0?s.addEventListener(a,l,{passive:p}):s.addEventListener(a,l,!1)}function Q0(s,a,l,u,p){var y=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var R=u.stateNode.containerInfo;if(R===p)break;if(A===4)for(A=u.return;A!==null;){var H=A.tag;if((H===3||H===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;R!==null;){if(A=di(R),A===null)return;if(H=A.tag,H===5||H===6||H===26||H===27){u=y=A;continue e}R=R.parentNode}}u=u.return}Ha(function(){var X=y,le=ds(l),he=[];e:{var Z=mA.get(s);if(Z!==void 0){var re=wi,Ie=s;switch(s){case"keypress":if(al(l)===0)break e;case"keydown":case"keyup":re=Yf;break;case"focusin":Ie="focus",re=ll;break;case"focusout":Ie="blur",re=ll;break;case"beforeblur":case"afterblur":re=ll;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=v;break;case uA:case dA:case hA:re=Hf;break;case fA:re=O;break;case"scroll":case"scrollend":re=xd;break;case"wheel":re=ne;break;case"copy":case"cut":case"paste":re=zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Qi;break;case"toggle":case"beforetoggle":re=Ke}var Be=(a&4)!==0,Mt=!Be&&(s==="scroll"||s==="scrollend"),K=Be?Z!==null?Z+"Capture":null:Z;Be=[];for(var q=X,J;q!==null;){var ce=q;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||K===null||(ce=Vs(q,K),ce!=null&&Be.push(Xd(q,ce,J))),Mt)break;q=q.return}0<Be.length&&(Z=new re(Z,Ie,null,l,le),he.push({event:Z,listeners:Be}))}}if((a&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",re=s==="mouseout"||s==="pointerout",Z&&l!==wd&&(Ie=l.relatedTarget||l.fromElement)&&(di(Ie)||Ie[ci]))break e;if((re||Z)&&(Z=le.window===le?le:(Z=le.ownerDocument)?Z.defaultView||Z.parentWindow:window,re?(Ie=l.relatedTarget||l.toElement,re=X,Ie=Ie?di(Ie):null,Ie!==null&&(Mt=o(Ie),Be=Ie.tag,Ie!==Mt||Be!==5&&Be!==27&&Be!==6)&&(Ie=null)):(re=null,Ie=X),re!==Ie)){if(Be=Ad,ce="onMouseLeave",K="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Be=Qi,ce="onPointerLeave",K="onPointerEnter",q="pointer"),Mt=re==null?Z:Gr(re),J=Ie==null?Z:Gr(Ie),Z=new Be(ce,q+"leave",re,l,le),Z.target=Mt,Z.relatedTarget=J,ce=null,di(le)===X&&(Be=new Be(K,q+"enter",Ie,l,le),Be.target=J,Be.relatedTarget=Mt,ce=Be),Mt=ce,re&&Ie)t:{for(Be=PO,K=re,q=Ie,J=0,ce=K;ce;ce=Be(ce))J++;ce=0;for(var Oe=q;Oe;Oe=Be(Oe))ce++;for(;0<J-ce;)K=Be(K),J--;for(;0<ce-J;)q=Be(q),ce--;for(;J--;){if(K===q||q!==null&&K===q.alternate){Be=K;break t}K=Be(K),q=Be(q)}Be=null}else Be=null;re!==null&&L2(he,Z,re,Be,!1),Ie!==null&&Mt!==null&&L2(he,Mt,Ie,Be,!0)}}e:{if(Z=X?Gr(X):window,re=Z.nodeName&&Z.nodeName.toLowerCase(),re==="select"||re==="input"&&Z.type==="file")var yt=Zx;else if(Jx(Z))if(eA)yt=zP;else{yt=FP;var ke=VP}else re=Z.nodeName,!re||re.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&vc(X.elementType)&&(yt=Zx):yt=HP;if(yt&&(yt=yt(s,X))){Xx(he,yt,l,le);break e}ke&&ke(s,Z,X),s==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&pd(Z,"number",Z.value)}switch(ke=X?Gr(X):window,s){case"focusin":(Jx(ke)||ke.contentEditable==="true")&&(Cc=ke,xy=X,Nd=null);break;case"focusout":Nd=xy=Cc=null;break;case"mousedown":Ay=!0;break;case"contextmenu":case"mouseup":case"dragend":Ay=!1,lA(he,l,le);break;case"selectionchange":if(qP)break;case"keydown":case"keyup":lA(he,l,le)}var We;if(vt)e:{switch(s){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Nc?cl(s,l)&&(at="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(at="onCompositionStart");at&&(xi&&l.locale!=="ko"&&(Nc||at!=="onCompositionStart"?at==="onCompositionEnd"&&Nc&&(We=vd()):(yi=le,bd="value"in yi?yi.value:yi.textContent,Nc=!0)),ke=Um(X,at),0<ke.length&&(at=new vi(at,s,null,l,le),he.push({event:at,listeners:ke}),We?at.data=We:(We=Sc(l),We!==null&&(at.data=We)))),(We=fs?LP(s,l):BP(s,l))&&(at=Um(X,"onBeforeInput"),0<at.length&&(ke=new vi("onBeforeInput","beforeinput",null,l,le),he.push({event:ke,listeners:at}),ke.data=We)),CO(he,s,X,l,le)}D2(he,a)})}function Xd(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Um(s,a){for(var l=a+"Capture",u=[];s!==null;){var p=s,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Vs(s,l),p!=null&&u.unshift(Xd(s,p,y)),p=Vs(s,a),p!=null&&u.push(Xd(s,p,y))),s.tag===3)return u;s=s.return}return[]}function PO(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function L2(s,a,l,u,p){for(var y=a._reactName,A=[];l!==null&&l!==u;){var R=l,H=R.alternate,X=R.stateNode;if(R=R.tag,H!==null&&H===u)break;R!==5&&R!==26&&R!==27||X===null||(H=X,p?(X=Vs(l,y),X!=null&&A.unshift(Xd(l,X,H))):p||(X=Vs(l,y),X!=null&&A.push(Xd(l,X,H)))),l=l.return}A.length!==0&&s.push({event:a,listeners:A})}var OO=/\r\n?/g,DO=/\u0000|\uFFFD/g;function B2(s){return(typeof s=="string"?s:""+s).replace(OO,`
`).replace(DO,"")}function j2(s,a){return a=B2(a),B2(s)===a}function Dt(s,a,l,u,p,y){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Nr(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Nr(s,""+u);break;case"className":qr(s,"class",u);break;case"tabIndex":qr(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":qr(s,l,u);break;case"style":yd(s,u,y);break;case"data":if(a!=="object"){qr(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=xc(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&Dt(s,a,"name",p.name,p,null),Dt(s,a,"formEncType",p.formEncType,p,null),Dt(s,a,"formMethod",p.formMethod,p,null),Dt(s,a,"formTarget",p.formTarget,p,null)):(Dt(s,a,"encType",p.encType,p,null),Dt(s,a,"method",p.method,p,null),Dt(s,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=xc(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Us);break;case"onScroll":u!=null&&st("scroll",s);break;case"onScrollEnd":u!=null&&st("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=xc(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":st("beforetoggle",s),st("toggle",s),wc(s,"popover",u);break;case"xlinkActuate":Sn(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Sn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Sn(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Sn(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Sn(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Sn(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":wc(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Uf.get(l)||l,wc(s,l,u))}}function K0(s,a,l,u,p,y){switch(l){case"style":yd(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Nr(s,u):(typeof u=="number"||typeof u=="bigint")&&Nr(s,""+u);break;case"onScroll":u!=null&&st("scroll",s);break;case"onScrollEnd":u!=null&&st("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ud.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),y=s[Hn]||null,y=y!=null?y[l]:null,typeof y=="function"&&s.removeEventListener(a,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,p);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):wc(s,l,u)}}}function er(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",s),st("load",s);var u=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var A=l[y];if(A!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Dt(s,a,y,A,l,null)}}p&&Dt(s,a,"srcSet",l.srcSet,l,null),u&&Dt(s,a,"src",l.src,l,null);return;case"input":st("invalid",s);var R=y=A=p=null,H=null,X=null;for(u in l)if(l.hasOwnProperty(u)){var le=l[u];if(le!=null)switch(u){case"name":p=le;break;case"type":A=le;break;case"checked":H=le;break;case"defaultChecked":X=le;break;case"value":y=le;break;case"defaultValue":R=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,a));break;default:Dt(s,a,u,le,l,null)}}Lf(s,y,R,H,X,A,p,!1);return;case"select":st("invalid",s),u=A=y=null;for(p in l)if(l.hasOwnProperty(p)&&(R=l[p],R!=null))switch(p){case"value":y=R;break;case"defaultValue":A=R;break;case"multiple":u=R;default:Dt(s,a,p,R,l,null)}a=y,l=A,s.multiple=!!u,a!=null?ja(s,!!u,a,!1):l!=null&&ja(s,!!u,l,!0);return;case"textarea":st("invalid",s),y=p=u=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":u=R;break;case"defaultValue":p=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:Dt(s,a,A,R,l,null)}Ua(s,u,p,y);return;case"option":for(H in l)l.hasOwnProperty(H)&&(u=l[H],u!=null)&&(H==="selected"?s.selected=u&&typeof u!="function"&&typeof u!="symbol":Dt(s,a,H,u,l,null));return;case"dialog":st("beforetoggle",s),st("toggle",s),st("cancel",s),st("close",s);break;case"iframe":case"object":st("load",s);break;case"video":case"audio":for(u=0;u<Jd.length;u++)st(Jd[u],s);break;case"image":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"embed":case"source":case"link":st("error",s),st("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(u=l[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Dt(s,a,X,u,l,null)}return;default:if(vc(a)){for(le in l)l.hasOwnProperty(le)&&(u=l[le],u!==void 0&&K0(s,a,le,u,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(u=l[R],u!=null&&Dt(s,a,R,u,l,null))}function MO(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,A=null,R=null,H=null,X=null,le=null;for(re in l){var he=l[re];if(l.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":H=he;default:u.hasOwnProperty(re)||Dt(s,a,re,null,u,he)}}for(var Z in u){var re=u[Z];if(he=l[Z],u.hasOwnProperty(Z)&&(re!=null||he!=null))switch(Z){case"type":y=re;break;case"name":p=re;break;case"checked":X=re;break;case"defaultChecked":le=re;break;case"value":A=re;break;case"defaultValue":R=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,a));break;default:re!==he&&Dt(s,a,Z,re,u,he)}}bc(s,A,R,H,X,le,y,p);return;case"select":re=A=R=Z=null;for(y in l)if(H=l[y],l.hasOwnProperty(y)&&H!=null)switch(y){case"value":break;case"multiple":re=H;default:u.hasOwnProperty(y)||Dt(s,a,y,null,u,H)}for(p in u)if(y=u[p],H=l[p],u.hasOwnProperty(p)&&(y!=null||H!=null))switch(p){case"value":Z=y;break;case"defaultValue":R=y;break;case"multiple":A=y;default:y!==H&&Dt(s,a,p,y,u,H)}a=R,l=A,u=re,Z!=null?ja(s,!!l,Z,!1):!!u!=!!l&&(a!=null?ja(s,!!l,a,!0):ja(s,!!l,l?[]:"",!1));return;case"textarea":re=Z=null;for(R in l)if(p=l[R],l.hasOwnProperty(R)&&p!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Dt(s,a,R,null,u,p)}for(A in u)if(p=u[A],y=l[A],u.hasOwnProperty(A)&&(p!=null||y!=null))switch(A){case"value":Z=p;break;case"defaultValue":re=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Dt(s,a,A,p,u,y)}Bf(s,Z,re);return;case"option":for(var Ie in l)Z=l[Ie],l.hasOwnProperty(Ie)&&Z!=null&&!u.hasOwnProperty(Ie)&&(Ie==="selected"?s.selected=!1:Dt(s,a,Ie,null,u,Z));for(H in u)Z=u[H],re=l[H],u.hasOwnProperty(H)&&Z!==re&&(Z!=null||re!=null)&&(H==="selected"?s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":Dt(s,a,H,Z,u,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in l)Z=l[Be],l.hasOwnProperty(Be)&&Z!=null&&!u.hasOwnProperty(Be)&&Dt(s,a,Be,null,u,Z);for(X in u)if(Z=u[X],re=l[X],u.hasOwnProperty(X)&&Z!==re&&(Z!=null||re!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:Dt(s,a,X,Z,u,re)}return;default:if(vc(a)){for(var Mt in l)Z=l[Mt],l.hasOwnProperty(Mt)&&Z!==void 0&&!u.hasOwnProperty(Mt)&&K0(s,a,Mt,void 0,u,Z);for(le in u)Z=u[le],re=l[le],!u.hasOwnProperty(le)||Z===re||Z===void 0&&re===void 0||K0(s,a,le,Z,u,re);return}}for(var K in l)Z=l[K],l.hasOwnProperty(K)&&Z!=null&&!u.hasOwnProperty(K)&&Dt(s,a,K,null,u,Z);for(he in u)Z=u[he],re=l[he],!u.hasOwnProperty(he)||Z===re||Z==null&&re==null||Dt(s,a,he,Z,u,re)}function U2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LO(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var p=l[u],y=p.transferSize,A=p.initiatorType,R=p.duration;if(y&&R&&U2(A)){for(A=0,R=p.responseEnd,u+=1;u<l.length;u++){var H=l[u],X=H.startTime;if(X>R)break;var le=H.transferSize,he=H.initiatorType;le&&U2(he)&&(H=H.responseEnd,A+=le*(H<R?1:(R-X)/(H-X)))}if(--u,a+=8*(y+A)/(p.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var $0=null,Y0=null;function Vm(s){return s.nodeType===9?s:s.ownerDocument}function V2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F2(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function W0(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var J0=null;function BO(){var s=window.event;return s&&s.type==="popstate"?s===J0?!1:(J0=s,!0):(J0=null,!1)}var H2=typeof setTimeout=="function"?setTimeout:void 0,jO=typeof clearTimeout=="function"?clearTimeout:void 0,z2=typeof Promise=="function"?Promise:void 0,UO=typeof queueMicrotask=="function"?queueMicrotask:typeof z2<"u"?function(s){return z2.resolve(null).then(s).catch(VO)}:H2;function VO(s){setTimeout(function(){throw s})}function lo(s){return s==="head"}function G2(s,a){var l=a,u=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(u===0){s.removeChild(p),tu(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Zd(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Zd(l);for(var y=l.firstChild;y;){var A=y.nextSibling,R=y.nodeName;y[ui]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=A}}else l==="body"&&Zd(s.ownerDocument.body);l=p}while(l);tu(a)}function q2(s,a){var l=s;s=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=u}while(l)}function X0(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":X0(l),yc(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function FO(s,a,l,u){for(;s.nodeType===1;){var p=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[ui])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=vs(s.nextSibling),s===null)break}return null}function HO(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=vs(s.nextSibling),s===null))return null;return s}function Q2(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=vs(s.nextSibling),s===null))return null;return s}function Z0(s){return s.data==="$?"||s.data==="$~"}function ew(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function zO(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function vs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var tw=null;function K2(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return vs(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function $2(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function Y2(s,a,l){switch(a=Vm(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Zd(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);yc(s)}var xs=new Map,W2=new Set;function Fm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var oa=se.d;se.d={f:GO,r:qO,D:QO,C:KO,L:$O,m:YO,X:JO,S:WO,M:XO};function GO(){var s=oa.f(),a=Pm();return s||a}function qO(s){var a=us(s);a!==null&&a.tag===5&&a.type==="form"?fE(a):oa.r(s)}var Xc=typeof document>"u"?null:document;function J2(s,a,l){var u=Xc;if(u&&typeof a=="string"&&a){var p=Sr(a);p='link[rel="'+s+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),W2.has(p)||(W2.add(p),s={rel:s,crossOrigin:l,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),er(a,"link",s),Tn(a),u.head.appendChild(a)))}}function QO(s){oa.D(s),J2("dns-prefetch",s,null)}function KO(s,a){oa.C(s,a),J2("preconnect",s,a)}function $O(s,a,l){oa.L(s,a,l);var u=Xc;if(u&&s&&a){var p='link[rel="preload"][as="'+Sr(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Sr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Sr(l.imageSizes)+'"]')):p+='[href="'+Sr(s)+'"]';var y=p;switch(a){case"style":y=Zc(s);break;case"script":y=eu(s)}xs.has(y)||(s=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),xs.set(y,s),u.querySelector(p)!==null||a==="style"&&u.querySelector(eh(y))||a==="script"&&u.querySelector(th(y))||(a=u.createElement("link"),er(a,"link",s),Tn(a),u.head.appendChild(a)))}}function YO(s,a){oa.m(s,a);var l=Xc;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Sr(u)+'"][href="'+Sr(s)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=eu(s)}if(!xs.has(y)&&(s=b({rel:"modulepreload",href:s},a),xs.set(y,s),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(th(y)))return}u=l.createElement("link"),er(u,"link",s),Tn(u),l.head.appendChild(u)}}}function WO(s,a,l){oa.S(s,a,l);var u=Xc;if(u&&s){var p=hi(u).hoistableStyles,y=Zc(s);a=a||"default";var A=p.get(y);if(!A){var R={loading:0,preload:null};if(A=u.querySelector(eh(y)))R.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":a},l),(l=xs.get(y))&&nw(s,l);var H=A=u.createElement("link");Tn(H),er(H,"link",s),H._p=new Promise(function(X,le){H.onload=X,H.onerror=le}),H.addEventListener("load",function(){R.loading|=1}),H.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Hm(A,a,u)}A={type:"stylesheet",instance:A,count:1,state:R},p.set(y,A)}}}function JO(s,a){oa.X(s,a);var l=Xc;if(l&&s){var u=hi(l).hoistableScripts,p=eu(s),y=u.get(p);y||(y=l.querySelector(th(p)),y||(s=b({src:s,async:!0},a),(a=xs.get(p))&&rw(s,a),y=l.createElement("script"),Tn(y),er(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function XO(s,a){oa.M(s,a);var l=Xc;if(l&&s){var u=hi(l).hoistableScripts,p=eu(s),y=u.get(p);y||(y=l.querySelector(th(p)),y||(s=b({src:s,async:!0,type:"module"},a),(a=xs.get(p))&&rw(s,a),y=l.createElement("script"),Tn(y),er(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function X2(s,a,l,u){var p=(p=Re.current)?Fm(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Zc(l.href),l=hi(p).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Zc(l.href);var y=hi(p).hoistableStyles,A=y.get(s);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,A),(y=p.querySelector(eh(s)))&&!y._p&&(A.instance=y,A.state.loading=5),xs.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},xs.set(s,l),y||ZO(p,s,l,A.state))),a&&u===null)throw Error(r(528,""));return A}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=eu(l),l=hi(p).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Zc(s){return'href="'+Sr(s)+'"'}function eh(s){return'link[rel="stylesheet"]['+s+"]"}function Z2(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function ZO(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),er(a,"link",l),Tn(a),s.head.appendChild(a))}function eu(s){return'[src="'+Sr(s)+'"]'}function th(s){return"script[async]"+s}function e_(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+Sr(l.href)+'"]');if(u)return a.instance=u,Tn(u),u;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Tn(u),er(u,"style",p),Hm(u,l.precedence,s),a.instance=u;case"stylesheet":p=Zc(l.href);var y=s.querySelector(eh(p));if(y)return a.state.loading|=4,a.instance=y,Tn(y),y;u=Z2(l),(p=xs.get(p))&&nw(u,p),y=(s.ownerDocument||s).createElement("link"),Tn(y);var A=y;return A._p=new Promise(function(R,H){A.onload=R,A.onerror=H}),er(y,"link",u),a.state.loading|=4,Hm(y,l.precedence,s),a.instance=y;case"script":return y=eu(l.src),(p=s.querySelector(th(y)))?(a.instance=p,Tn(p),p):(u=l,(p=xs.get(y))&&(u=b({},l),rw(u,p)),s=s.ownerDocument||s,p=s.createElement("script"),Tn(p),er(p,"link",u),s.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Hm(u,l.precedence,s));return a.instance}function Hm(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,A=0;A<u.length;A++){var R=u[A];if(R.dataset.precedence===a)y=R;else if(y!==p)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function nw(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function rw(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var zm=null;function t_(s,a,l){if(zm===null){var u=new Map,p=zm=new Map;p.set(l,u)}else p=zm,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),p=0;p<l.length;p++){var y=l[p];if(!(y[ui]||y[_n]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var A=y.getAttribute(a)||"";A=s+A;var R=u.get(A);R?R.push(y):u.set(A,[y])}}return u}function n_(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function eD(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(s=a.disabled,typeof a.precedence=="string"&&s==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function r_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function tD(s,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Zc(u.href),y=a.querySelector(eh(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Gm.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=y,Tn(y);return}y=a.ownerDocument||a,u=Z2(u),(p=xs.get(p))&&nw(u,p),y=y.createElement("link"),Tn(y);var A=y;A._p=new Promise(function(R,H){A.onload=R,A.onerror=H}),er(y,"link",u),l.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Gm.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var sw=0;function nD(s,a){return s.stylesheets&&s.count===0&&Qm(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var u=setTimeout(function(){if(s.stylesheets&&Qm(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+a);0<s.imgBytes&&sw===0&&(sw=62500*LO());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Qm(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>sw?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Gm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var qm=null;function Qm(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,qm=new Map,a.forEach(rD,s),qm=null,Gm.call(s))}function rD(s,a){if(!(a.state.loading&4)){var l=qm.get(s);if(l)var u=l.get(null);else{l=new Map,qm.set(s,l);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var A=p[y];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),u=A)}u&&l.set(null,u)}p=a.instance,A=p.getAttribute("data-precedence"),y=l.get(A)||u,y===u&&l.set(null,p),l.set(A,p),this.count++,u=Gm.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),a.state.loading|=4}}var nh={$$typeof:U,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function sD(s,a,l,u,p,y,A,R,H){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=li(0),this.hiddenUpdates=li(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function s_(s,a,l,u,p,y,A,R,H,X,le,he){return s=new sD(s,a,l,A,H,X,le,he,R),a=1,y===!0&&(a|=24),y=Kr(3,null,null,a),s.current=y,y.stateNode=s,a=By(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:a},Fy(y),s}function i_(s){return s?(s=kc,s):kc}function a_(s,a,l,u,p,y){p=i_(p),u.context===null?u.context=p:u.pendingContext=p,u=Ja(a),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Xa(s,u,a),l!==null&&(Pr(l,s,a),Dd(l,s,a))}function o_(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function iw(s,a){o_(s,a),(s=s.alternate)&&o_(s,a)}function l_(s){if(s.tag===13||s.tag===31){var a=hl(s,67108864);a!==null&&Pr(a,s,67108864),iw(s,67108864)}}function c_(s){if(s.tag===13||s.tag===31){var a=Xr();a=el(a);var l=hl(s,a);l!==null&&Pr(l,s,a),iw(s,a)}}var Km=!0;function iD(s,a,l,u){var p=G.T;G.T=null;var y=se.p;try{se.p=2,aw(s,a,l,u)}finally{se.p=y,G.T=p}}function aD(s,a,l,u){var p=G.T;G.T=null;var y=se.p;try{se.p=8,aw(s,a,l,u)}finally{se.p=y,G.T=p}}function aw(s,a,l,u){if(Km){var p=ow(u);if(p===null)Q0(s,a,u,$m,l),d_(s,u);else if(lD(p,s,a,l,u))u.stopPropagation();else if(d_(s,u),a&4&&-1<oD.indexOf(s)){for(;p!==null;){var y=us(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var A=ai(y.pendingLanes);if(A!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var H=1<<31-Zt(A);R.entanglements[1]|=H,A&=~H}Ti(y),(xt&6)===0&&(Rm=St()+500,Wd(0))}}break;case 31:case 13:R=hl(y,2),R!==null&&Pr(R,y,2),Pm(),iw(y,2)}if(y=ow(u),y===null&&Q0(s,a,u,$m,l),y===p)break;p=y}p!==null&&u.stopPropagation()}else Q0(s,a,u,null,l)}}function ow(s){return s=ds(s),lw(s)}var $m=null;function lw(s){if($m=null,s=di(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===31){if(s=d(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return $m=s,null}function u_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jn()){case nt:return 2;case jt:return 8;case ar:case Os:return 32;case Fi:return 268435456;default:return 32}default:return 32}}var cw=!1,co=null,uo=null,ho=null,rh=new Map,sh=new Map,fo=[],oD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d_(s,a){switch(s){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":rh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":sh.delete(a.pointerId)}}function ih(s,a,l,u,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},a!==null&&(a=us(a),a!==null&&l_(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),s)}function lD(s,a,l,u,p){switch(a){case"focusin":return co=ih(co,s,a,l,u,p),!0;case"dragenter":return uo=ih(uo,s,a,l,u,p),!0;case"mouseover":return ho=ih(ho,s,a,l,u,p),!0;case"pointerover":var y=p.pointerId;return rh.set(y,ih(rh.get(y)||null,s,a,l,u,p)),!0;case"gotpointercapture":return y=p.pointerId,sh.set(y,ih(sh.get(y)||null,s,a,l,u,p)),!0}return!1}function h_(s){var a=di(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,Bs(s.priority,function(){c_(l)});return}}else if(a===31){if(a=d(l),a!==null){s.blockedOn=a,Bs(s.priority,function(){c_(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ym(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=ow(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);wd=u,l.target.dispatchEvent(u),wd=null}else return a=us(l),a!==null&&l_(a),s.blockedOn=l,!1;a.shift()}return!0}function f_(s,a,l){Ym(s)&&l.delete(a)}function cD(){cw=!1,co!==null&&Ym(co)&&(co=null),uo!==null&&Ym(uo)&&(uo=null),ho!==null&&Ym(ho)&&(ho=null),rh.forEach(f_),sh.forEach(f_)}function Wm(s,a){s.blockedOn===a&&(s.blockedOn=null,cw||(cw=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cD)))}var Jm=null;function m_(s){Jm!==s&&(Jm=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jm===s&&(Jm=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],p=s[a+2];if(typeof u!="function"){if(lw(u||l)===null)continue;break}var y=us(l);y!==null&&(s.splice(a,3),a-=3,o0(y,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function tu(s){function a(H){return Wm(H,s)}co!==null&&Wm(co,s),uo!==null&&Wm(uo,s),ho!==null&&Wm(ho,s),rh.forEach(a),sh.forEach(a);for(var l=0;l<fo.length;l++){var u=fo[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<fo.length&&(l=fo[0],l.blockedOn===null);)h_(l),l.blockedOn===null&&fo.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],y=l[u+1],A=p[Hn]||null;if(typeof y=="function")A||m_(l);else if(A){var R=null;if(y&&y.hasAttribute("formAction")){if(p=y,A=y[Hn]||null)R=A.formAction;else if(lw(p)!==null)continue}else R=A.action;typeof R=="function"?l[u+1]=R:(l.splice(u,3),u-=3),m_(l)}}}function p_(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function uw(s){this._internalRoot=s}Xm.prototype.render=uw.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,u=Xr();a_(l,u,s,a,null,null)},Xm.prototype.unmount=uw.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;a_(s.current,2,null,s,null,null),Pm(),a[ci]=null}};function Xm(s){this._internalRoot=s}Xm.prototype.unstable_scheduleHydration=function(s){if(s){var a=Pf();s={blockedOn:null,target:s,priority:a};for(var l=0;l<fo.length&&a!==0&&a<fo[l].priority;l++);fo.splice(l,0,s),l===0&&h_(s)}};var g_=e.version;if(g_!=="19.2.4")throw Error(r(527,g_,"19.2.4"));se.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=m(a),s=s!==null?w(s):null,s=s===null?null:s.stateNode,s};var uD={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zm.isDisabled&&Zm.supportsFiber)try{Un=Zm.inject(uD),fn=Zm}catch{}}return oh.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,u="",p=EE,y=_E,A=TE;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=s_(s,1,!1,null,null,l,u,null,p,y,A,p_),s[ci]=a.current,q0(s),new uw(a)},oh.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var u=!1,p="",y=EE,A=_E,R=TE,H=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(H=l.formState)),a=s_(s,1,!0,a,l??null,u,p,H,y,A,R,p_),a.context=i_(null),l=a.current,u=Xr(),u=el(u),p=Ja(u),p.callback=null,Xa(l,p,u),l=u,a.current.lanes=l,Xo(a,l),Ti(a),s[ci]=a.current,q0(s),new Xm(a)},oh.version="19.2.4",oh}var S_;function vD(){if(S_)return fw.exports;S_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fw.exports=bD(),fw.exports}var xD=vD();var N_="popstate";function C_(n){return typeof n=="object"&&n!=null&&"pathname"in n&&"search"in n&&"hash"in n&&"state"in n&&"key"in n}function AD(n={}){function e(i,o){let{pathname:c="/",search:d="",hash:h=""}=oc(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ob("",{pathname:c,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let c=i.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=i.location.href,m=h.indexOf("#");d=m===-1?h:h.slice(0,m)}return d+"#"+(typeof o=="string"?o:Ih(o))}function r(i,o){Ss(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return _D(e,t,r,n)}function Jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ss(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ED(){return Math.random().toString(36).substring(2,10)}function I_(n,e){return{usr:n.state,key:n.key,idx:e,masked:n.unstable_mask?{pathname:n.pathname,search:n.search,hash:n.hash}:void 0}}function ob(n,e,t=null,r,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?oc(e):e,state:t,key:e&&e.key||r||ED(),unstable_mask:i}}function Ih({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function oc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function _D(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,d="POP",h=null,m=w();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function w(){return(c.state||{idx:null}).idx}function b(){d="POP";let C=w(),D=C==null?null:C-m;m=C,h&&h({action:d,location:N.location,delta:D})}function x(C,D){d="PUSH";let F=C_(C)?C:ob(N.location,C,D);t&&t(F,C),m=w()+1;let U=I_(F,m),$=N.createHref(F.unstable_mask||F);try{c.pushState(U,"",$)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign($)}o&&h&&h({action:d,location:N.location,delta:1})}function S(C,D){d="REPLACE";let F=C_(C)?C:ob(N.location,C,D);t&&t(F,C),m=w();let U=I_(F,m),$=N.createHref(F.unstable_mask||F);c.replaceState(U,"",$),o&&h&&h({action:d,location:N.location,delta:0})}function k(C){return TD(C)}let N={get action(){return d},get location(){return n(i,c)},listen(C){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(N_,b),h=C,()=>{i.removeEventListener(N_,b),h=null}},createHref(C){return e(i,C)},createURL:k,encodeLocation(C){let D=k(C);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:x,replace:S,go(C){return c.go(C)}};return N}function TD(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ih(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function BS(n,e,t="/"){return SD(n,e,t,!1)}function SD(n,e,t,r){let i=typeof e=="string"?oc(e):e,o=Sa(i.pathname||"/",t);if(o==null)return null;let c=jS(n);ND(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let m=jD(o);d=LD(c[h],m,r)}return d}function jS(n,e=[],t=[],r="",i=!1){let o=(c,d,h=i,m)=>{let w={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(r)&&h)return;Jt(w.relativePath.startsWith(r),`Absolute route path "${w.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(r.length)}let b=Pi([r,w.relativePath]),x=t.concat(w);c.children&&c.children.length>0&&(Jt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),jS(c.children,e,x,b,h)),!(c.path==null&&!c.index)&&e.push({path:b,score:DD(b,c.index),routesMeta:x})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let h of US(c.path))o(c,d,!0,h)}),e}function US(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=US(r.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),i&&d.push(...c),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function ND(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:MD(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var CD=/^:[\w-]+$/,ID=3,RD=2,kD=1,PD=10,OD=-2,R_=n=>n==="*";function DD(n,e){let t=n.split("/"),r=t.length;return t.some(R_)&&(r+=OD),e&&(r+=RD),t.filter(i=>!R_(i)).reduce((i,o)=>i+(CD.test(o)?ID:o===""?kD:PD),r)}function MD(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function LD(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],m=d===r.length-1,w=o==="/"?e:e.slice(o.length)||"/",b=Bp({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},w),x=h.route;if(!b&&m&&t&&!r[r.length-1].route.index&&(b=Bp({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},w)),!b)return null;Object.assign(i,b.params),c.push({params:i,pathname:Pi([o,b.pathname]),pathnameBase:HD(Pi([o,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(o=Pi([o,b.pathnameBase]))}return c}function Bp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=BD(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((m,{paramName:w,isOptional:b},x)=>{if(w==="*"){let k=d[x]||"";c=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const S=d[x];return b&&!S?m[w]=void 0:m[w]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:n}}function BD(n,e=!1,t=!0){Ss(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h,m,w)=>{if(r.push({paramName:d,isOptional:h!=null}),h){let b=w.charAt(m+c.length);return b&&b!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function jD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ss(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Sa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var UD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function VD(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?oc(n):n,o;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?o=k_(t.substring(1),"/"):o=k_(t,e)):o=e,{pathname:o,search:zD(r),hash:GD(i)}}function k_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function yw(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FD(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cv(n){let e=FD(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function xg(n,e,t,r=!1){let i;typeof n=="string"?i=oc(n):(i={...n},Jt(!i.pathname||!i.pathname.includes("?"),yw("?","pathname","search",i)),Jt(!i.pathname||!i.pathname.includes("#"),yw("#","pathname","hash",i)),Jt(!i.search||!i.search.includes("#"),yw("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,d;if(c==null)d=t;else{let b=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),b-=1;i.pathname=x.join("/")}d=b>=0?e[b]:"/"}let h=VD(i,d),m=c&&c!=="/"&&c.endsWith("/"),w=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||w)&&(h.pathname+="/"),h}var Pi=n=>n.join("/").replace(/\/\/+/g,"/"),HD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,GD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,qD=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function QD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function KD(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var VS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function FS(n,e){let t=n;if(typeof t!="string"||!UD.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,i=!1;if(VS)try{let o=new URL(window.location.href),c=t.startsWith("//")?new URL(o.protocol+t):new URL(t),d=Sa(c.pathname,e);c.origin===o.origin&&d!=null?t=d+c.search+c.hash:i=!0}catch{Ss(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var HS=["POST","PUT","PATCH","DELETE"];new Set(HS);var $D=["GET",...HS];new Set($D);var Hu=I.createContext(null);Hu.displayName="DataRouter";var Ag=I.createContext(null);Ag.displayName="DataRouterState";var YD=I.createContext(!1),zS=I.createContext({isTransitioning:!1});zS.displayName="ViewTransition";var WD=I.createContext(new Map);WD.displayName="Fetchers";var JD=I.createContext(null);JD.displayName="Await";var as=I.createContext(null);as.displayName="Navigation";var Jh=I.createContext(null);Jh.displayName="Location";var Rs=I.createContext({outlet:null,matches:[],isDataRoute:!1});Rs.displayName="Route";var uv=I.createContext(null);uv.displayName="RouteError";var GS="REACT_ROUTER_ERROR",XD="REDIRECT",ZD="ROUTE_ERROR_RESPONSE";function e3(n){if(n.startsWith(`${GS}:${XD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function t3(n){if(n.startsWith(`${GS}:${ZD}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new qD(e.status,e.statusText,e.data)}catch{}}function n3(n,{relative:e}={}){Jt(zu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=I.useContext(as),{hash:i,pathname:o,search:c}=Xh(n,{relative:e}),d=o;return t!=="/"&&(d=o==="/"?t:Pi([t,o])),r.createHref({pathname:d,search:c,hash:i})}function zu(){return I.useContext(Jh)!=null}function ks(){return Jt(zu(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Jh).location}var qS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QS(n){I.useContext(as).static||I.useLayoutEffect(n)}function zo(){let{isDataRoute:n}=I.useContext(Rs);return n?y3():r3()}function r3(){Jt(zu(),"useNavigate() may be used only in the context of a <Router> component.");let n=I.useContext(Hu),{basename:e,navigator:t}=I.useContext(as),{matches:r}=I.useContext(Rs),{pathname:i}=ks(),o=JSON.stringify(cv(r)),c=I.useRef(!1);return QS(()=>{c.current=!0}),I.useCallback((h,m={})=>{if(Ss(c.current,qS),!c.current)return;if(typeof h=="number"){t.go(h);return}let w=xg(h,JSON.parse(o),i,m.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Pi([e,w.pathname])),(m.replace?t.replace:t.push)(w,m.state,m)},[e,t,o,i,n])}var s3=I.createContext(null);function i3(n){let e=I.useContext(Rs).outlet;return I.useMemo(()=>e&&I.createElement(s3.Provider,{value:n},e),[e,n])}function Vi(){let{matches:n}=I.useContext(Rs),e=n[n.length-1];return e?e.params:{}}function Xh(n,{relative:e}={}){let{matches:t}=I.useContext(Rs),{pathname:r}=ks(),i=JSON.stringify(cv(t));return I.useMemo(()=>xg(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function a3(n,e){return KS(n,e)}function KS(n,e,t){Jt(zu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=I.useContext(as),{matches:i}=I.useContext(Rs),o=i[i.length-1],c=o?o.params:{},d=o?o.pathname:"/",h=o?o.pathnameBase:"/",m=o&&o.route;{let C=m&&m.path||"";YS(d,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let w=ks(),b;if(e){let C=typeof e=="string"?oc(e):e;Jt(h==="/"||C.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=w;let x=b.pathname||"/",S=x;if(h!=="/"){let C=h.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=BS(n,{pathname:S});Ss(m||k!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ss(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=d3(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Pi([h,r.encodeLocation?r.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:Pi([h,r.encodeLocation?r.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),i,t);return e&&N?I.createElement(Jh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...b},navigationType:"POP"}},N):N}function o3(){let n=g3(),e=QD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:i},t):null,c)}var l3=I.createElement(o3,null),$S=class extends I.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=t3(n.digest);t&&(n=t)}let e=n!==void 0?I.createElement(Rs.Provider,{value:this.props.routeContext},I.createElement(uv.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?I.createElement(c3,{error:n},e):e}};$S.contextType=YD;var ww=new WeakMap;function c3({children:n,error:e}){let{basename:t}=I.useContext(as);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=e3(e.digest);if(r){let i=ww.get(e);if(i)throw i;let o=FS(r.location,t);if(VS&&!ww.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw ww.set(e,c),c}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function u3({routeContext:n,match:e,children:t}){let r=I.useContext(Hu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Rs.Provider,{value:n},t)}function d3(n,e=[],t){let r=t?.state;if(n==null){if(!r)return null;if(r.errors)n=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let i=n,o=r?.errors;if(o!=null){let w=i.findIndex(b=>b.route.id&&o?.[b.route.id]!==void 0);Jt(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,w+1))}let c=!1,d=-1;if(t&&r){c=r.renderFallback;for(let w=0;w<i.length;w++){let b=i[w];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(d=w),b.route.id){let{loaderData:x,errors:S}=r,k=b.route.loader&&!x.hasOwnProperty(b.route.id)&&(!S||S[b.route.id]===void 0);if(b.route.lazy||k){t.isStatic&&(c=!0),d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}}let h=t?.onError,m=r&&h?(w,b)=>{h(w,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:KD(r.matches),errorInfo:b})}:void 0;return i.reduceRight((w,b,x)=>{let S,k=!1,N=null,C=null;r&&(S=o&&b.route.id?o[b.route.id]:void 0,N=b.route.errorElement||l3,c&&(d<0&&x===0?(YS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,C=null):d===x&&(k=!0,C=b.route.hydrateFallbackElement||null)));let D=e.concat(i.slice(0,x+1)),F=()=>{let U;return S?U=N:k?U=C:b.route.Component?U=I.createElement(b.route.Component,null):b.route.element?U=b.route.element:U=w,I.createElement(u3,{match:b,routeContext:{outlet:w,matches:D,isDataRoute:r!=null},children:U})};return r&&(b.route.ErrorBoundary||b.route.errorElement||x===0)?I.createElement($S,{location:r.location,revalidation:r.revalidation,component:N,error:S,children:F(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:m}):F()},null)}function dv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h3(n){let e=I.useContext(Hu);return Jt(e,dv(n)),e}function f3(n){let e=I.useContext(Ag);return Jt(e,dv(n)),e}function m3(n){let e=I.useContext(Rs);return Jt(e,dv(n)),e}function hv(n){let e=m3(n),t=e.matches[e.matches.length-1];return Jt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function p3(){return hv("useRouteId")}function g3(){let n=I.useContext(uv),e=f3("useRouteError"),t=hv("useRouteError");return n!==void 0?n:e.errors?.[t]}function y3(){let{router:n}=h3("useNavigate"),e=hv("useNavigate"),t=I.useRef(!1);return QS(()=>{t.current=!0}),I.useCallback(async(i,o={})=>{Ss(t.current,qS),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var P_={};function YS(n,e,t){!e&&!P_[n]&&(P_[n]=!0,Ss(!1,t))}I.memo(w3);function w3({routes:n,future:e,state:t,isStatic:r,onError:i}){return KS(n,void 0,{state:t,isStatic:r,onError:i})}function jp({to:n,replace:e,state:t,relative:r}){Jt(zu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=I.useContext(as);Ss(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext(Rs),{pathname:c}=ks(),d=zo(),h=xg(n,cv(o),c,r==="path"),m=JSON.stringify(h);return I.useEffect(()=>{d(JSON.parse(m),{replace:e,state:t,relative:r})},[d,m,r,e,t]),null}function b3(n){return i3(n.context)}function en(n){Jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function v3({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:c}){Jt(!zu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),h=I.useMemo(()=>({basename:d,navigator:i,static:o,unstable_useTransitions:c,future:{}}),[d,i,o,c]);typeof t=="string"&&(t=oc(t));let{pathname:m="/",search:w="",hash:b="",state:x=null,key:S="default",unstable_mask:k}=t,N=I.useMemo(()=>{let C=Sa(m,d);return C==null?null:{location:{pathname:C,search:w,hash:b,state:x,key:S,unstable_mask:k},navigationType:r}},[d,m,w,b,x,S,r,k]);return Ss(N!=null,`<Router basename="${d}"> is not able to match the URL "${m}${w}${b}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:I.createElement(as.Provider,{value:h},I.createElement(Jh.Provider,{children:e,value:N}))}function x3({children:n,location:e}){return a3(lb(n),e)}function lb(n,e=[]){let t=[];return I.Children.forEach(n,(r,i)=>{if(!I.isValidElement(r))return;let o=[...e,i];if(r.type===I.Fragment){t.push.apply(t,lb(r.props.children,o));return}Jt(r.type===en,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=lb(r.props.children,o)),t.push(c)}),t}var wp="get",bp="application/x-www-form-urlencoded";function Eg(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function A3(n){return Eg(n)&&n.tagName.toLowerCase()==="button"}function E3(n){return Eg(n)&&n.tagName.toLowerCase()==="form"}function _3(n){return Eg(n)&&n.tagName.toLowerCase()==="input"}function T3(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function S3(n,e){return n.button===0&&(!e||e==="_self")&&!T3(n)}var ep=null;function N3(){if(ep===null)try{new FormData(document.createElement("form"),0),ep=!1}catch{ep=!0}return ep}var C3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bw(n){return n!=null&&!C3.has(n)?(Ss(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bp}"`),null):n}function I3(n,e){let t,r,i,o,c;if(E3(n)){let d=n.getAttribute("action");r=d?Sa(d,e):null,t=n.getAttribute("method")||wp,i=bw(n.getAttribute("enctype"))||bp,o=new FormData(n)}else if(A3(n)||_3(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(r=h?Sa(h,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||wp,i=bw(n.getAttribute("formenctype"))||bw(d.getAttribute("enctype"))||bp,o=new FormData(d,n),!N3()){let{name:m,type:w,value:b}=n;if(w==="image"){let x=m?`${m}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else m&&o.append(m,b)}}else{if(Eg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=wp,r=null,i=bp,c=n}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function R3(n,e,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Sa(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function k3(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P3(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function O3(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await k3(o,t);return c.links?c.links():[]}return[]}));return B3(r.flat(1).filter(P3).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function O_(n,e,t,r,i,o){let c=(h,m)=>t[m]?h.route.id!==t[m].route.id:!0,d=(h,m)=>t[m].pathname!==h.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,m)=>c(h,m)||d(h,m)):o==="data"?e.filter((h,m)=>{let w=r.routes[h.route.id];if(!w||!w.hasLoader)return!1;if(c(h,m)||d(h,m))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function D3(n,e,{includeHydrateFallback:t}={}){return M3(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function M3(n){return[...new Set(n)]}function L3(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function B3(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(L3(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function WS(){let n=I.useContext(Hu);return fv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function j3(){let n=I.useContext(Ag);return fv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var mv=I.createContext(void 0);mv.displayName="FrameworkContext";function JS(){let n=I.useContext(mv);return fv(n,"You must render this element inside a <HydratedRouter> element"),n}function U3(n,e){let t=I.useContext(mv),[r,i]=I.useState(!1),[o,c]=I.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:m,onMouseLeave:w,onTouchStart:b}=e,x=I.useRef(null);I.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let N=D=>{D.forEach(F=>{c(F.isIntersecting)})},C=new IntersectionObserver(N,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[n]),I.useEffect(()=>{if(r){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[r]);let S=()=>{i(!0)},k=()=>{i(!1),c(!1)};return t?n!=="intent"?[o,x,{}]:[o,x,{onFocus:lh(d,S),onBlur:lh(h,k),onMouseEnter:lh(m,S),onMouseLeave:lh(w,k),onTouchStart:lh(b,S)}]:[!1,x,{}]}function lh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function V3({page:n,...e}){let{router:t}=WS(),r=I.useMemo(()=>BS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?I.createElement(H3,{page:n,matches:r,...e}):null}function F3(n){let{manifest:e,routeModules:t}=JS(),[r,i]=I.useState([]);return I.useEffect(()=>{let o=!1;return O3(n,e,t).then(c=>{o||i(c)}),()=>{o=!0}},[n,e,t]),r}function H3({page:n,matches:e,...t}){let r=ks(),{future:i,manifest:o,routeModules:c}=JS(),{basename:d}=WS(),{loaderData:h,matches:m}=j3(),w=I.useMemo(()=>O_(n,e,m,o,r,"data"),[n,e,m,o,r]),b=I.useMemo(()=>O_(n,e,m,o,r,"assets"),[n,e,m,o,r]),x=I.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let N=new Set,C=!1;if(e.forEach(F=>{let U=o.routes[F.route.id];!U||!U.hasLoader||(!w.some($=>$.route.id===F.route.id)&&F.route.id in h&&c[F.route.id]?.shouldRevalidate||U.hasClientLoader?C=!0:N.add(F.route.id))}),N.size===0)return[];let D=R3(n,d,i.unstable_trailingSlashAwareDataRequests,"data");return C&&N.size>0&&D.searchParams.set("_routes",e.filter(F=>N.has(F.route.id)).map(F=>F.route.id).join(",")),[D.pathname+D.search]},[d,i.unstable_trailingSlashAwareDataRequests,h,r,o,w,e,n,c]),S=I.useMemo(()=>D3(b,o),[b,o]),k=F3(b);return I.createElement(I.Fragment,null,x.map(N=>I.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),S.map(N=>I.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),k.map(({key:N,link:C})=>I.createElement("link",{key:N,nonce:t.nonce,...C,crossOrigin:C.crossOrigin??t.crossOrigin})))}function z3(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var G3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G3&&(window.__reactRouterVersion="7.13.1")}catch{}function q3({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=I.useRef();i.current==null&&(i.current=AD({window:r,v5Compat:!0}));let o=i.current,[c,d]=I.useState({action:o.action,location:o.location}),h=I.useCallback(m=>{t===!1?d(m):I.startTransition(()=>d(m))},[t]);return I.useLayoutEffect(()=>o.listen(h),[o,h]),I.createElement(v3,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t})}var XS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qe=I.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,unstable_mask:d,state:h,target:m,to:w,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:S,...k},N){let{basename:C,navigator:D,unstable_useTransitions:F}=I.useContext(as),U=typeof w=="string"&&XS.test(w),$=FS(w,C);w=$.to;let Y=n3(w,{relative:i}),te=ks(),T=null;if(d){let ee=xg(d,[],te.unstable_mask?te.unstable_mask.pathname:"/",!0);C!=="/"&&(ee.pathname=ee.pathname==="/"?C:Pi([C,ee.pathname])),T=D.createHref(ee)}let[_,P,L]=U3(r,k),B=Y3(w,{replace:c,unstable_mask:d,state:h,target:m,preventScrollReset:b,relative:i,viewTransition:x,unstable_defaultShouldRevalidate:S,unstable_useTransitions:F});function j(ee){e&&e(ee),ee.defaultPrevented||B(ee)}let M=!($.isExternal||o),ye=I.createElement("a",{...k,...L,href:(M?T:void 0)||$.absoluteURL||Y,onClick:M?j:e,ref:z3(N,P),target:m,"data-discover":!U&&t==="render"?"true":void 0});return _&&!U?I.createElement(I.Fragment,null,ye,I.createElement(V3,{page:Y})):ye});qe.displayName="Link";var Q3=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:d,children:h,...m},w){let b=Xh(c,{relative:m.relative}),x=ks(),S=I.useContext(Ag),{navigator:k,basename:N}=I.useContext(as),C=S!=null&&e4(b)&&d===!0,D=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,F=x.pathname,U=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(F=F.toLowerCase(),U=U?U.toLowerCase():null,D=D.toLowerCase()),U&&N&&(U=Sa(U,N)||U);const $=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let Y=F===D||!i&&F.startsWith(D)&&F.charAt($)==="/",te=U!=null&&(U===D||!i&&U.startsWith(D)&&U.charAt(D.length)==="/"),T={isActive:Y,isPending:te,isTransitioning:C},_=Y?e:void 0,P;typeof r=="function"?P=r(T):P=[r,Y?"active":null,te?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(T):o;return I.createElement(qe,{...m,"aria-current":_,className:P,ref:w,style:L,to:c,viewTransition:d},typeof h=="function"?h(T):h)});Q3.displayName="NavLink";var K3=I.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:c=wp,action:d,onSubmit:h,relative:m,preventScrollReset:w,viewTransition:b,unstable_defaultShouldRevalidate:x,...S},k)=>{let{unstable_useTransitions:N}=I.useContext(as),C=X3(),D=Z3(d,{relative:m}),F=c.toLowerCase()==="get"?"get":"post",U=typeof d=="string"&&XS.test(d),$=Y=>{if(h&&h(Y),Y.defaultPrevented)return;Y.preventDefault();let te=Y.nativeEvent.submitter,T=te?.getAttribute("formmethod")||c,_=()=>C(te||Y.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:i,state:o,relative:m,preventScrollReset:w,viewTransition:b,unstable_defaultShouldRevalidate:x});N&&t!==!1?I.startTransition(()=>_()):_()};return I.createElement("form",{ref:k,method:F,action:D,onSubmit:r?h:$,...S,"data-discover":!U&&n==="render"?"true":void 0})});K3.displayName="Form";function $3(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZS(n){let e=I.useContext(Hu);return Jt(e,$3(n)),e}function Y3(n,{target:e,replace:t,unstable_mask:r,state:i,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:h,unstable_useTransitions:m}={}){let w=zo(),b=ks(),x=Xh(n,{relative:c});return I.useCallback(S=>{if(S3(S,e)){S.preventDefault();let k=t!==void 0?t:Ih(b)===Ih(x),N=()=>w(n,{replace:k,unstable_mask:r,state:i,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:h});m?I.startTransition(()=>N()):N()}},[b,w,x,t,r,i,e,n,o,c,d,h,m])}var W3=0,J3=()=>`__${String(++W3)}__`;function X3(){let{router:n}=ZS("useSubmit"),{basename:e}=I.useContext(as),t=p3(),r=n.fetch,i=n.navigate;return I.useCallback(async(o,c={})=>{let{action:d,method:h,encType:m,formData:w,body:b}=I3(o,e);if(c.navigate===!1){let x=c.fetcherKey||J3();await r(x,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:w,body:b,formMethod:c.method||h,formEncType:c.encType||m,flushSync:c.flushSync})}else await i(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:w,body:b,formMethod:c.method||h,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,i,e,t])}function Z3(n,{relative:e}={}){let{basename:t}=I.useContext(as),r=I.useContext(Rs);Jt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Xh(n||".",{relative:e})},c=ks();if(n==null){o.search=c.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(w=>w==="")){d.delete("index"),h.filter(b=>b).forEach(b=>d.append("index",b));let w=d.toString();o.search=w?`?${w}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Pi([t,o.pathname])),Ih(o)}function e4(n,{relative:e}={}){let t=I.useContext(zS);Jt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ZS("useViewTransitionState"),i=Xh(n,{relative:e});if(!t.isTransitioning)return!1;let o=Sa(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Sa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Bp(i.pathname,c)!=null||Bp(i.pathname,o)!=null}const t4=()=>{};var D_={};const eN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},n4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],c=n[t++],d=n[t++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},tN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,d=c?n[i+1]:0,h=i+2<n.length,m=h?n[i+2]:0,w=o>>2,b=(o&3)<<4|d>>4;let x=(d&15)<<2|m>>6,S=m&63;h||(S=64,c||(x=64)),r.push(t[w],t[b],t[x],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):n4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const b=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||d==null||m==null||b==null)throw new r4;const x=o<<2|d>>4;if(r.push(x),m!==64){const S=d<<4&240|m>>2;if(r.push(S),b!==64){const k=m<<6&192|b;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class r4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s4=function(n){const e=eN(n);return tN.encodeByteArray(e,!0)},Up=function(n){return s4(n).replace(/\./g,"")},nN=function(n){try{return tN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function i4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const a4=()=>i4().__FIREBASE_DEFAULTS__,o4=()=>{if(typeof process>"u"||typeof D_>"u")return;const n=D_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nN(n[1]);return e&&JSON.parse(e)},_g=()=>{try{return t4()||a4()||o4()||l4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rN=n=>_g()?.emulatorHosts?.[n],c4=n=>{const e=rN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sN=()=>_g()?.config,iN=n=>_g()?.[`_${n}`];class u4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Gu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aN(n){return(await fetch(n,{credentials:"include"})).ok}function d4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Up(JSON.stringify(t)),Up(JSON.stringify(c)),""].join(".")}const xh={};function h4(){const n={prod:[],emulator:[]};for(const e of Object.keys(xh))xh[e]?n.emulator.push(e):n.prod.push(e);return n}function f4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let M_=!1;function oN(n,e){if(typeof window>"u"||typeof document>"u"||!Gu(window.location.host)||xh[n]===e||xh[n]||M_)return;xh[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=h4().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function h(x,S){x.setAttribute("width","24"),x.setAttribute("id",S),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{M_=!0,c()},x}function w(x,S){x.setAttribute("id",S),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=f4(r),S=t("text"),k=document.getElementById(S)||document.createElement("span"),N=t("learnmore"),C=document.getElementById(N)||document.createElement("a"),D=t("preprendIcon"),F=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const U=x.element;d(U),w(C,N);const $=m();h(F,D),U.append(F,k,C,$),document.body.appendChild(U)}o?(k.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function p4(){const n=_g()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function w4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b4(){const n=fr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function v4(){return!p4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x4(){try{return typeof indexedDB=="object"}catch{return!1}}function A4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const E4="FirebaseError";class Da extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=E4,Object.setPrototypeOf(this,Da.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zh.prototype.create)}}class Zh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?_4(o,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Da(i,d,r)}}function _4(n,e){return n.replace(T4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const T4=/\{\$([^}]+)}/g;function S4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Kl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],c=e[i];if(L_(o)&&L_(c)){if(!Kl(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function L_(n){return n!==null&&typeof n=="object"}function ef(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function mh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function N4(n,e){const t=new C4(n,e);return t.subscribe.bind(t)}class C4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");I4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=vw),i.error===void 0&&(i.error=vw),i.complete===void 0&&(i.complete=vw);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vw(){}function Ln(n){return n&&n._delegate?n._delegate:n}class $l{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rl="[DEFAULT]";class R4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new u4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P4(e))try{this.getOrInitializeService({instanceIdentifier:Rl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Rl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rl){return this.instances.has(e)}getOptions(e=Rl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:k4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rl){return this.component?this.component.multipleInstances?e:Rl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k4(n){return n===Rl?void 0:n}function P4(n){return n.instantiationMode==="EAGER"}class O4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const D4={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},M4=ot.INFO,L4={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},B4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=L4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pv{constructor(e){this.name=e,this._logLevel=M4,this._logHandler=B4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const j4=(n,e)=>e.some(t=>n instanceof t);let B_,j_;function U4(){return B_||(B_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V4(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lN=new WeakMap,cb=new WeakMap,cN=new WeakMap,xw=new WeakMap,gv=new WeakMap;function F4(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Io(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&lN.set(t,n)}).catch(()=>{}),gv.set(e,n),e}function H4(n){if(cb.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});cb.set(n,e)}let ub={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Io(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function z4(n){ub=n(ub)}function G4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Aw(this),e,...t);return cN.set(r,e.sort?e.sort():[e]),Io(r)}:V4().includes(n)?function(...e){return n.apply(Aw(this),e),Io(lN.get(this))}:function(...e){return Io(n.apply(Aw(this),e))}}function q4(n){return typeof n=="function"?G4(n):(n instanceof IDBTransaction&&H4(n),j4(n,U4())?new Proxy(n,ub):n)}function Io(n){if(n instanceof IDBRequest)return F4(n);if(xw.has(n))return xw.get(n);const e=q4(n);return e!==n&&(xw.set(n,e),gv.set(e,n)),e}const Aw=n=>gv.get(n);function Q4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),d=Io(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Io(c.result),h.oldVersion,h.newVersion,Io(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const K4=["get","getKey","getAll","getAllKeys","count"],$4=["put","add","delete","clear"],Ew=new Map;function U_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ew.get(e))return Ew.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=$4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||K4.includes(t)))return;const o=async function(c,...d){const h=this.transaction(c,i?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&h.done]))[0]};return Ew.set(e,o),o}z4(n=>({...n,get:(e,t,r)=>U_(e,t)||n.get(e,t,r),has:(e,t)=>!!U_(e,t)||n.has(e,t)}));class Y4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(W4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function W4(n){return n.getComponent()?.type==="VERSION"}const db="@firebase/app",V_="0.14.8";const Na=new pv("@firebase/app"),J4="@firebase/app-compat",X4="@firebase/analytics-compat",Z4="@firebase/analytics",eM="@firebase/app-check-compat",tM="@firebase/app-check",nM="@firebase/auth",rM="@firebase/auth-compat",sM="@firebase/database",iM="@firebase/data-connect",aM="@firebase/database-compat",oM="@firebase/functions",lM="@firebase/functions-compat",cM="@firebase/installations",uM="@firebase/installations-compat",dM="@firebase/messaging",hM="@firebase/messaging-compat",fM="@firebase/performance",mM="@firebase/performance-compat",pM="@firebase/remote-config",gM="@firebase/remote-config-compat",yM="@firebase/storage",wM="@firebase/storage-compat",bM="@firebase/firestore",vM="@firebase/ai",xM="@firebase/firestore-compat",AM="firebase",EM="12.9.0";const hb="[DEFAULT]",_M={[db]:"fire-core",[J4]:"fire-core-compat",[Z4]:"fire-analytics",[X4]:"fire-analytics-compat",[tM]:"fire-app-check",[eM]:"fire-app-check-compat",[nM]:"fire-auth",[rM]:"fire-auth-compat",[sM]:"fire-rtdb",[iM]:"fire-data-connect",[aM]:"fire-rtdb-compat",[oM]:"fire-fn",[lM]:"fire-fn-compat",[cM]:"fire-iid",[uM]:"fire-iid-compat",[dM]:"fire-fcm",[hM]:"fire-fcm-compat",[fM]:"fire-perf",[mM]:"fire-perf-compat",[pM]:"fire-rc",[gM]:"fire-rc-compat",[yM]:"fire-gcs",[wM]:"fire-gcs-compat",[bM]:"fire-fst",[xM]:"fire-fst-compat",[vM]:"fire-vertex","fire-js":"fire-js",[AM]:"fire-js-all"};const Vp=new Map,TM=new Map,fb=new Map;function F_(n,e){try{n.container.addComponent(e)}catch(t){Na.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _u(n){const e=n.name;if(fb.has(e))return Na.debug(`There were multiple attempts to register component ${e}.`),!1;fb.set(e,n);for(const t of Vp.values())F_(t,n);for(const t of TM.values())F_(t,n);return!0}function yv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ns(n){return n==null?!1:n.settings!==void 0}const SM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ro=new Zh("app","Firebase",SM);class NM{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $l("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ro.create("app-deleted",{appName:this._name})}}const qu=EM;function uN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:hb,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ro.create("bad-app-name",{appName:String(i)});if(t||(t=sN()),!t)throw Ro.create("no-options");const o=Vp.get(i);if(o){if(Kl(t,o.options)&&Kl(r,o.config))return o;throw Ro.create("duplicate-app",{appName:i})}const c=new O4(i);for(const h of fb.values())c.addComponent(h);const d=new NM(t,r,c);return Vp.set(i,d),d}function dN(n=hb){const e=Vp.get(n);if(!e&&n===hb&&sN())return uN();if(!e)throw Ro.create("no-app",{appName:n});return e}function ko(n,e,t){let r=_M[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Na.warn(c.join(" "));return}_u(new $l(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const CM="firebase-heartbeat-database",IM=1,Rh="firebase-heartbeat-store";let _w=null;function hN(){return _w||(_w=Q4(CM,IM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ro.create("idb-open",{originalErrorMessage:n.message})})),_w}async function RM(n){try{const t=(await hN()).transaction(Rh),r=await t.objectStore(Rh).get(fN(n));return await t.done,r}catch(e){if(e instanceof Da)Na.warn(e.message);else{const t=Ro.create("idb-get",{originalErrorMessage:e?.message});Na.warn(t.message)}}}async function H_(n,e){try{const r=(await hN()).transaction(Rh,"readwrite");await r.objectStore(Rh).put(e,fN(n)),await r.done}catch(t){if(t instanceof Da)Na.warn(t.message);else{const r=Ro.create("idb-set",{originalErrorMessage:t?.message});Na.warn(r.message)}}}function fN(n){return`${n.name}!${n.options.appId}`}const kM=1024,PM=30;class OM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new MM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>PM){const i=LM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Na.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=z_(),{heartbeatsToSend:t,unsentEntries:r}=DM(this._heartbeatsCache.heartbeats),i=Up(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Na.warn(e),""}}}function z_(){return new Date().toISOString().substring(0,10)}function DM(n,e=kM){const t=[];let r=n.slice();for(const i of n){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),G_(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),G_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class MM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x4()?A4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return H_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return H_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function G_(n){return Up(JSON.stringify({version:2,heartbeats:n})).length}function LM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function BM(n){_u(new $l("platform-logger",e=>new Y4(e),"PRIVATE")),_u(new $l("heartbeat",e=>new OM(e),"PRIVATE")),ko(db,V_,n),ko(db,V_,"esm2020"),ko("fire-js","")}BM("");function mN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jM=mN,pN=new Zh("auth","Firebase",mN());const Fp=new pv("@firebase/auth");function UM(n,...e){Fp.logLevel<=ot.WARN&&Fp.warn(`Auth (${qu}): ${n}`,...e)}function vp(n,...e){Fp.logLevel<=ot.ERROR&&Fp.error(`Auth (${qu}): ${n}`,...e)}function Ns(n,...e){throw bv(n,...e)}function ei(n,...e){return bv(n,...e)}function wv(n,e,t){const r={...jM(),[e]:t};return new Zh("auth","Firebase",r).create(e,{appName:n.name})}function ba(n){return wv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VM(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ns(n,"argument-error"),wv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return pN.create(n,...e)}function Ue(n,e,...t){if(!n)throw bv(e,...t)}function pa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vp(e),new Error(e)}function Ca(n,e){n||pa(e)}function mb(){return typeof self<"u"&&self.location?.href||""}function FM(){return q_()==="http:"||q_()==="https:"}function q_(){return typeof self<"u"&&self.location?.protocol||null}function HM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FM()||y4()||"connection"in navigator)?navigator.onLine:!0}function zM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class tf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ca(t>e,"Short delay should be less than long delay!"),this.isMobile=m4()||w4()}get(){return HM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vv(n,e){Ca(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class gN{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const GM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const qM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QM=new tf(3e4,6e4);function Go(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function qo(n,e,t,r,i={}){return yN(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const d=ef({key:n.config.apiKey,...c}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:h,...o};return g4()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Gu(n.emulatorConfig.host)&&(m.credentials="include"),gN.fetch()(await wN(n,n.config.apiHost,t,d),m)})}async function yN(n,e,t){n._canInitEmulator=!1;const r={...GM,...e};try{const i=new $M(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw tp(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[h,m]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw tp(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw tp(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw tp(n,"user-disabled",c);const w=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw wv(n,w,m);Ns(n,w)}}catch(i){if(i instanceof Da)throw i;Ns(n,"network-request-failed",{message:String(i)})}}async function nf(n,e,t,r,i={}){const o=await qo(n,e,t,r,i);return"mfaPendingCredential"in o&&Ns(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function wN(n,e,t,r){const i=`${e}${t}?${r}`,o=n,c=o.config.emulator?vv(n.config,i):`${n.config.apiScheme}://${i}`;return qM.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function KM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $M{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ei(this.auth,"network-request-failed")),QM.get())})}}function tp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ei(n,e,r);return i.customData._tokenResponse=t,i}function Q_(n){return n!==void 0&&n.enterprise!==void 0}class YM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WM(n,e){return qo(n,"GET","/v2/recaptchaConfig",Go(n,e))}async function JM(n,e){return qo(n,"POST","/v1/accounts:delete",e)}async function Hp(n,e){return qo(n,"POST","/v1/accounts:lookup",e)}function Ah(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XM(n,e=!1){const t=Ln(n),r=await t.getIdToken(e),i=xv(r);Ue(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:Ah(Tw(i.auth_time)),issuedAtTime:Ah(Tw(i.iat)),expirationTime:Ah(Tw(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Tw(n){return Number(n)*1e3}function xv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vp("JWT malformed, contained fewer than 3 sections"),null;try{const i=nN(t);return i?JSON.parse(i):(vp("Failed to decode base64 JWT payload"),null)}catch(i){return vp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function K_(n){const e=xv(n);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function kh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Da&&ZM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ZM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class eL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class pb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ah(this.lastLoginAt),this.creationTime=Ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function zp(n){const e=n.auth,t=await n.getIdToken(),r=await kh(n,Hp(e,{idToken:t}));Ue(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?bN(i.providerUserInfo):[],c=nL(n.providerData,o),d=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!c?.length,m=d?h:!1,w={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new pb(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,w)}async function tL(n){const e=Ln(n);await zp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nL(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function rL(n,e){const t=await yN(n,{},async()=>{const r=ef({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await wN(n,i,"/v1/token",`key=${o}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return n.emulatorConfig&&Gu(n.emulatorConfig.host)&&(h.credentials="include"),gN.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sL(n,e){return qo(n,"POST","/v2/accounts:revokeToken",Go(n,e))}class hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=K_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await rL(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new hu;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Ue(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(Ue(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hu,this.toJSON())}_performRefresh(){return pa("not implemented")}}function po(n,e){Ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zs{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new eL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await kh(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XM(this,e)}reload(){return tL(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(ba(this.auth));const e=await this.getIdToken();return await kh(this,JM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,m=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:x,isAnonymous:S,providerData:k,stsTokenManager:N}=t;Ue(b&&N,e,"internal-error");const C=hu.fromJSON(this.name,N);Ue(typeof b=="string",e,"internal-error"),po(r,e.name),po(i,e.name),Ue(typeof x=="boolean",e,"internal-error"),Ue(typeof S=="boolean",e,"internal-error"),po(o,e.name),po(c,e.name),po(d,e.name),po(h,e.name),po(m,e.name),po(w,e.name);const D=new Zs({uid:b,auth:e,email:i,emailVerified:x,displayName:r,isAnonymous:S,photoURL:c,phoneNumber:o,tenantId:d,stsTokenManager:C,createdAt:m,lastLoginAt:w});return k&&Array.isArray(k)&&(D.providerData=k.map(F=>({...F}))),h&&(D._redirectEventId=h),D}static async _fromIdTokenResponse(e,t,r=!1){const i=new hu;i.updateFromServerResponse(t);const o=new Zs({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zp(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ue(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?bN(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!o?.length,d=new hu;d.updateFromIdToken(r);const h=new Zs({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new pb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,m),h}}const $_=new Map;function ga(n){Ca(n instanceof Function,"Expected a class definition");let e=$_.get(n);return e?(Ca(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$_.set(n,e),e)}class vN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vN.type="NONE";const Y_=vN;function xp(n,e,t){return`firebase:${n}:${e}:${t}`}class fu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=xp(this.userKey,i.apiKey,o),this.fullPersistenceKey=xp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Hp(this.auth,{idToken:e}).catch(()=>{});return t?Zs._fromGetAccountInfoResponse(this.auth,t,e):null}return Zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new fu(ga(Y_),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=i[0]||ga(Y_);const c=xp(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const w=await m._get(c);if(w){let b;if(typeof w=="string"){const x=await Hp(e,{idToken:w}).catch(()=>{});if(!x)break;b=await Zs._fromGetAccountInfoResponse(e,x,w)}else b=Zs._fromJSON(e,w);m!==o&&(d=b),o=m;break}}catch{}const h=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new fu(o,e,r):(o=h[0],d&&await o._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new fu(o,e,r))}}function W_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_N(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SN(e))return"Blackberry";if(NN(e))return"Webos";if(AN(e))return"Safari";if((e.includes("chrome/")||EN(e))&&!e.includes("edge/"))return"Chrome";if(TN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function xN(n=fr()){return/firefox\//i.test(n)}function AN(n=fr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EN(n=fr()){return/crios\//i.test(n)}function _N(n=fr()){return/iemobile/i.test(n)}function TN(n=fr()){return/android/i.test(n)}function SN(n=fr()){return/blackberry/i.test(n)}function NN(n=fr()){return/webos/i.test(n)}function Av(n=fr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function iL(n=fr()){return Av(n)&&!!window.navigator?.standalone}function aL(){return b4()&&document.documentMode===10}function CN(n=fr()){return Av(n)||TN(n)||NN(n)||SN(n)||/windows phone/i.test(n)||_N(n)}function IN(n,e=[]){let t;switch(n){case"Browser":t=W_(fr());break;case"Worker":t=`${W_(fr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qu}/${r}`}class oL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,d)=>{try{const h=e(o);c(h)}catch(h){d(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function lL(n,e={}){return qo(n,"GET","/v2/passwordPolicy",Go(n,e))}const cL=6;class uL{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??cL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class dL{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J_(this),this.idTokenSubscription=new J_(this),this.beforeStateQueue=new oL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ga(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Hp(this,{idToken:e}),r=await Zs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ns(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(ba(this));const t=e?Ln(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ga(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lL(this),t=new uL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await sL(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ga(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await fu.create(this,[ga(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&UM(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qo(n){return Ln(n)}class J_{constructor(e){this.auth=e,this.observer=null,this.addObserver=N4(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Tg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hL(n){Tg=n}function RN(n){return Tg.loadJS(n)}function fL(){return Tg.recaptchaEnterpriseScript}function mL(){return Tg.gapiScript}function pL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class gL{constructor(){this.enterprise=new yL}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yL{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const wL="recaptcha-enterprise",kN="NO_RECAPTCHA";class bL{constructor(e){this.type=wL,this.auth=Qo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{WM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new YM(h);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(h=>{d(h)})})}function i(o,c,d){const h=window.grecaptcha;Q_(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(m=>{c(m)}).catch(()=>{c(kN)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gL().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(d=>{if(!t&&Q_(window.grecaptcha))i(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=fL();h.length!==0&&(h+=d),RN(h).then(()=>{i(d,o,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function X_(n,e,t,r=!1,i=!1){const o=new bL(n);let c;if(i)c=kN;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function gb(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await X_(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await X_(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)})}function vL(n,e){const t=yv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Kl(o,e??{}))return i;Ns(i,"already-initialized")}return t.initialize({options:e})}function xL(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ga);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function AL(n,e,t){const r=Qo(n);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=PN(e),{host:c,port:d}=EL(e),h=d===null?"":`:${d}`,m={url:`${o}//${c}${h}/`},w=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(Kl(m,r.config.emulator)&&Kl(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,Gu(c)?(aN(`${o}//${c}${h}`),oN("Auth",!0)):_L()}function PN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function EL(n){const e=PN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Z_(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:Z_(c)}}}function Z_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function _L(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Ev{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pa("not implemented")}_getIdTokenResponse(e){return pa("not implemented")}_linkToIdToken(e,t){return pa("not implemented")}_getReauthenticationResolver(e){return pa("not implemented")}}async function TL(n,e){return qo(n,"POST","/v1/accounts:signUp",e)}async function SL(n,e){return nf(n,"POST","/v1/accounts:signInWithPassword",Go(n,e))}async function NL(n,e){return nf(n,"POST","/v1/accounts:signInWithEmailLink",Go(n,e))}async function CL(n,e){return nf(n,"POST","/v1/accounts:signInWithEmailLink",Go(n,e))}class Ph extends Ev{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ph(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ph(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gb(e,t,"signInWithPassword",SL);case"emailLink":return NL(e,{email:this._email,oobCode:this._password});default:Ns(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gb(e,r,"signUpPassword",TL);case"emailLink":return CL(e,{idToken:t,email:this._email,oobCode:this._password});default:Ns(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mu(n,e){return nf(n,"POST","/v1/accounts:signInWithIdp",Go(n,e))}const IL="http://localhost";class Yl extends Ev{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ns("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const c=new Yl(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return mu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,mu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mu(e,t)}buildRequest(){const e={requestUri:IL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ef(t)}return e}}function RL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kL(n){const e=fh(mh(n)).link,t=e?fh(mh(e)).deep_link_id:null,r=fh(mh(n)).deep_link_id;return(r?fh(mh(r)).link:null)||r||t||e||n}class _v{constructor(e){const t=fh(mh(e)),r=t.apiKey??null,i=t.oobCode??null,o=RL(t.mode??null);Ue(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=kL(e);try{return new _v(t)}catch{return null}}}class Qu{constructor(){this.providerId=Qu.PROVIDER_ID}static credential(e,t){return Ph._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=_v.parseLink(t);return Ue(r,"argument-error"),Ph._fromEmailAndCode(e,r.code,r.tenantId)}}Qu.PROVIDER_ID="password";Qu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rf extends Tv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xo extends rf{constructor(){super("facebook.com")}static credential(e){return Yl._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xo.credential(e.oauthAccessToken)}catch{return null}}}xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";xo.PROVIDER_ID="facebook.com";class da extends rf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yl._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return da.credential(t,r)}catch{return null}}}da.GOOGLE_SIGN_IN_METHOD="google.com";da.PROVIDER_ID="google.com";class Ao extends rf{constructor(){super("github.com")}static credential(e){return Yl._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ao.credential(e.oauthAccessToken)}catch{return null}}}Ao.GITHUB_SIGN_IN_METHOD="github.com";Ao.PROVIDER_ID="github.com";class Eo extends rf{constructor(){super("twitter.com")}static credential(e,t){return Yl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Eo.credential(t,r)}catch{return null}}}Eo.TWITTER_SIGN_IN_METHOD="twitter.com";Eo.PROVIDER_ID="twitter.com";async function PL(n,e){return nf(n,"POST","/v1/accounts:signUp",Go(n,e))}class Wl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Zs._fromIdTokenResponse(e,r,i),c=e1(r);return new Wl({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=e1(r);return new Wl({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function e1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Gp extends Da{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Gp(e,t,r,i)}}function ON(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Gp._fromErrorAndOperation(n,o,e,r):o})}async function OL(n,e,t=!1){const r=await kh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wl._forOperation(n,"link",r)}async function DL(n,e,t=!1){const{auth:r}=n;if(ns(r.app))return Promise.reject(ba(r));const i="reauthenticate";try{const o=await kh(n,ON(r,i,e,n),t);Ue(o.idToken,r,"internal-error");const c=xv(o.idToken);Ue(c,r,"internal-error");const{sub:d}=c;return Ue(n.uid===d,r,"user-mismatch"),Wl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ns(r,"user-mismatch"),o}}async function DN(n,e,t=!1){if(ns(n.app))return Promise.reject(ba(n));const r="signIn",i=await ON(n,r,e),o=await Wl._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function ML(n,e){return DN(Qo(n),e)}async function MN(n){const e=Qo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LL(n,e,t){if(ns(n.app))return Promise.reject(ba(n));const r=Qo(n),c=await gb(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PL).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&MN(n),h}),d=await Wl._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function BL(n,e,t){return ns(n.app)?Promise.reject(ba(n)):ML(Ln(n),Qu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MN(n),r})}function jL(n,e,t,r){return Ln(n).onIdTokenChanged(e,t,r)}function UL(n,e,t){return Ln(n).beforeAuthStateChanged(e,t)}function VL(n,e,t,r){return Ln(n).onAuthStateChanged(e,t,r)}function FL(n){return Ln(n).signOut()}const qp="__sak";class LN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qp,"1"),this.storage.removeItem(qp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const HL=1e3,zL=10;class BN extends LN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);aL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zL):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},HL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BN.type="LOCAL";const GL=BN;class jN extends LN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jN.type="SESSION";const UN=jN;function qL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Sg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Sg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async m=>m(t.origin,o)),h=await qL(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sg.receivers=[];function Sv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class QL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((d,h)=>{const m=Sv("",20);i.port1.start();const w=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(b){const x=b;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(w),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(x.data.response);break;default:clearTimeout(w),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Oi(){return window}function KL(n){Oi().location.href=n}function VN(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function $L(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YL(){return navigator?.serviceWorker?.controller||null}function WL(){return VN()?self:null}const FN="firebaseLocalStorageDb",JL=1,Qp="firebaseLocalStorage",HN="fbase_key";class sf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ng(n,e){return n.transaction([Qp],e?"readwrite":"readonly").objectStore(Qp)}function XL(){const n=indexedDB.deleteDatabase(FN);return new sf(n).toPromise()}function yb(){const n=indexedDB.open(FN,JL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Qp,{keyPath:HN})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Qp)?e(r):(r.close(),await XL(),e(await yb()))})})}async function t1(n,e,t){const r=Ng(n,!0).put({[HN]:e,value:t});return new sf(r).toPromise()}async function ZL(n,e){const t=Ng(n,!1).get(e),r=await new sf(t).toPromise();return r===void 0?null:r.value}function n1(n,e){const t=Ng(n,!0).delete(e);return new sf(t).toPromise()}const eB=800,tB=3;class zN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>tB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sg._getInstance(WL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $L(),!this.activeServiceWorker)return;this.sender=new QL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yb();return await t1(e,qp,"1"),await n1(e,qp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>t1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ZL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>n1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Ng(i,!1).getAll();return new sf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zN.type="LOCAL";const nB=zN;new tf(3e4,6e4);function GN(n,e){return e?ga(e):(Ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Nv extends Ev{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rB(n){return DN(n.auth,new Nv(n),n.bypassAuthState)}function sB(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),DL(t,new Nv(n),n.bypassAuthState)}async function iB(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),OL(t,new Nv(n),n.bypassAuthState)}class qN{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rB;case"linkViaPopup":case"linkViaRedirect":return iB;case"reauthViaPopup":case"reauthViaRedirect":return sB;default:Ns(this.auth,"internal-error")}}resolve(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aB=new tf(2e3,1e4);async function oB(n,e,t){if(ns(n.app))return Promise.reject(ei(n,"operation-not-supported-in-this-environment"));const r=Qo(n);VM(n,e,Tv);const i=GN(r,t);return new Ll(r,"signInViaPopup",e,i).executeNotNull()}class Ll extends qN{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Ca(this.filter.length===1,"Popup operations only handle one event");const e=Sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aB.get())};e()}}Ll.currentPopupAction=null;const lB="pendingRedirect",Ap=new Map;class cB extends qN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ap.get(this.auth._key());if(!e){try{const r=await uB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ap.set(this.auth._key(),e)}return this.bypassAuthState||Ap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uB(n,e){const t=fB(e),r=hB(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function dB(n,e){Ap.set(n._key(),e)}function hB(n){return ga(n._redirectPersistence)}function fB(n){return xp(lB,n.config.apiKey,n.name)}async function mB(n,e,t=!1){if(ns(n.app))return Promise.reject(ba(n));const r=Qo(n),i=GN(r,e),c=await new cB(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const pB=600*1e3;class gB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yB(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!QN(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ei(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pB&&this.cachedEventUids.clear(),this.cachedEventUids.has(r1(e))}saveEventToCache(e){this.cachedEventUids.add(r1(e)),this.lastProcessedEventTime=Date.now()}}function r1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function yB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QN(n);default:return!1}}async function wB(n,e={}){return qo(n,"GET","/v1/projects",e)}const bB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vB=/^https?/;async function xB(n){if(n.config.emulator)return;const{authorizedDomains:e}=await wB(n);for(const t of e)try{if(AB(t))return}catch{}Ns(n,"unauthorized-domain")}function AB(n){const e=mb(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!vB.test(t))return!1;if(bB.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const EB=new tf(3e4,6e4);function s1(){const n=Oi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _B(n){return new Promise((e,t)=>{function r(){s1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s1(),t(ei(n,"network-request-failed"))},timeout:EB.get()})}if(Oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oi().gapi?.load)r();else{const i=pL("iframefcb");return Oi()[i]=()=>{gapi.load?r():t(ei(n,"network-request-failed"))},RN(`${mL()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Ep=null,e})}let Ep=null;function TB(n){return Ep=Ep||_B(n),Ep}const SB=new tf(5e3,15e3),NB="__/auth/iframe",CB="emulator/auth/iframe",IB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kB(n){const e=n.config;Ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?vv(e,CB):`https://${n.config.authDomain}/${NB}`,r={apiKey:e.apiKey,appName:n.name,v:qu},i=RB.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ef(r).slice(1)}`}async function PB(n){const e=await TB(n),t=Oi().gapi;return Ue(t,n,"internal-error"),e.open({where:document.body,url:kB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IB,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=ei(n,"network-request-failed"),d=Oi().setTimeout(()=>{o(c)},SB.get());function h(){Oi().clearTimeout(d),i(r)}r.ping(h).then(h,()=>{o(c)})}))}const OB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DB=500,MB=600,LB="_blank",BB="http://localhost";class i1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jB(n,e,t,r=DB,i=MB){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h={...OB,width:r.toString(),height:i.toString(),top:o,left:c},m=fr().toLowerCase();t&&(d=EN(m)?LB:t),xN(m)&&(e=e||BB,h.scrollbars="yes");const w=Object.entries(h).reduce((x,[S,k])=>`${x}${S}=${k},`,"");if(iL(m)&&d!=="_self")return UB(e||"",d),new i1(null);const b=window.open(e||"",d,w);Ue(b,n,"popup-blocked");try{b.focus()}catch{}return new i1(b)}function UB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const VB="__/auth/handler",FB="emulator/auth/handler",HB=encodeURIComponent("fac");async function a1(n,e,t,r,i,o){Ue(n.config.authDomain,n,"auth-domain-config-required"),Ue(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qu,eventId:i};if(e instanceof Tv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",S4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))c[w]=b}if(e instanceof rf){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const w of Object.keys(d))d[w]===void 0&&delete d[w];const h=await n._getAppCheckToken(),m=h?`#${HB}=${encodeURIComponent(h)}`:"";return`${zB(n)}?${ef(d).slice(1)}${m}`}function zB({config:n}){return n.emulator?vv(n,FB):`https://${n.authDomain}/${VB}`}const Sw="webStorageSupport";class GB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UN,this._completeRedirectFn=mB,this._overrideRedirectResult=dB}async _openPopup(e,t,r,i){Ca(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await a1(e,t,r,mb(),i);return jB(e,o,Sv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await a1(e,t,r,mb(),i);return KL(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ca(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await PB(e),r=new gB(e);return t.register("authEvent",i=>(Ue(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sw,{type:Sw},i=>{const o=i?.[0]?.[Sw];o!==void 0&&t(!!o),Ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CN()||AN()||Av()}}const qB=GB;var o1="@firebase/auth",l1="1.12.0";class QB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function KB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $B(n){_u(new $l("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ue(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IN(n)},m=new dL(r,i,o,h);return xL(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_u(new $l("auth-internal",e=>{const t=Qo(e.getProvider("auth").getImmediate());return(r=>new QB(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ko(o1,l1,KB(n)),ko(o1,l1,"esm2020")}const YB=300,WB=iN("authIdTokenMaxAge")||YB;let c1=null;const JB=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>WB)return;const i=t?.token;c1!==i&&(c1=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function XB(n=dN()){const e=yv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vL(n,{popupRedirectResolver:qB,persistence:[nB,GL,UN]}),r=iN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=JB(o.toString());UL(t,c,()=>c(t.currentUser)),jL(t,d=>c(d))}}const i=rN("auth");return i&&AL(t,`http://${i}`),t}function ZB(){return document.getElementsByTagName("head")?.[0]??document}hL({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=ei("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",ZB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$B("Browser");var u1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Po,KN;(function(){var n;function e(T,_){function P(){}P.prototype=_.prototype,T.F=_.prototype,T.prototype=new P,T.prototype.constructor=T,T.D=function(L,B,j){for(var M=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)M[ye-2]=arguments[ye];return _.prototype[B].apply(L,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,P){P||(P=0);const L=Array(16);if(typeof _=="string")for(var B=0;B<16;++B)L[B]=_.charCodeAt(P++)|_.charCodeAt(P++)<<8|_.charCodeAt(P++)<<16|_.charCodeAt(P++)<<24;else for(B=0;B<16;++B)L[B]=_[P++]|_[P++]<<8|_[P++]<<16|_[P++]<<24;_=T.g[0],P=T.g[1],B=T.g[2];let j=T.g[3],M;M=_+(j^P&(B^j))+L[0]+3614090360&4294967295,_=P+(M<<7&4294967295|M>>>25),M=j+(B^_&(P^B))+L[1]+3905402710&4294967295,j=_+(M<<12&4294967295|M>>>20),M=B+(P^j&(_^P))+L[2]+606105819&4294967295,B=j+(M<<17&4294967295|M>>>15),M=P+(_^B&(j^_))+L[3]+3250441966&4294967295,P=B+(M<<22&4294967295|M>>>10),M=_+(j^P&(B^j))+L[4]+4118548399&4294967295,_=P+(M<<7&4294967295|M>>>25),M=j+(B^_&(P^B))+L[5]+1200080426&4294967295,j=_+(M<<12&4294967295|M>>>20),M=B+(P^j&(_^P))+L[6]+2821735955&4294967295,B=j+(M<<17&4294967295|M>>>15),M=P+(_^B&(j^_))+L[7]+4249261313&4294967295,P=B+(M<<22&4294967295|M>>>10),M=_+(j^P&(B^j))+L[8]+1770035416&4294967295,_=P+(M<<7&4294967295|M>>>25),M=j+(B^_&(P^B))+L[9]+2336552879&4294967295,j=_+(M<<12&4294967295|M>>>20),M=B+(P^j&(_^P))+L[10]+4294925233&4294967295,B=j+(M<<17&4294967295|M>>>15),M=P+(_^B&(j^_))+L[11]+2304563134&4294967295,P=B+(M<<22&4294967295|M>>>10),M=_+(j^P&(B^j))+L[12]+1804603682&4294967295,_=P+(M<<7&4294967295|M>>>25),M=j+(B^_&(P^B))+L[13]+4254626195&4294967295,j=_+(M<<12&4294967295|M>>>20),M=B+(P^j&(_^P))+L[14]+2792965006&4294967295,B=j+(M<<17&4294967295|M>>>15),M=P+(_^B&(j^_))+L[15]+1236535329&4294967295,P=B+(M<<22&4294967295|M>>>10),M=_+(B^j&(P^B))+L[1]+4129170786&4294967295,_=P+(M<<5&4294967295|M>>>27),M=j+(P^B&(_^P))+L[6]+3225465664&4294967295,j=_+(M<<9&4294967295|M>>>23),M=B+(_^P&(j^_))+L[11]+643717713&4294967295,B=j+(M<<14&4294967295|M>>>18),M=P+(j^_&(B^j))+L[0]+3921069994&4294967295,P=B+(M<<20&4294967295|M>>>12),M=_+(B^j&(P^B))+L[5]+3593408605&4294967295,_=P+(M<<5&4294967295|M>>>27),M=j+(P^B&(_^P))+L[10]+38016083&4294967295,j=_+(M<<9&4294967295|M>>>23),M=B+(_^P&(j^_))+L[15]+3634488961&4294967295,B=j+(M<<14&4294967295|M>>>18),M=P+(j^_&(B^j))+L[4]+3889429448&4294967295,P=B+(M<<20&4294967295|M>>>12),M=_+(B^j&(P^B))+L[9]+568446438&4294967295,_=P+(M<<5&4294967295|M>>>27),M=j+(P^B&(_^P))+L[14]+3275163606&4294967295,j=_+(M<<9&4294967295|M>>>23),M=B+(_^P&(j^_))+L[3]+4107603335&4294967295,B=j+(M<<14&4294967295|M>>>18),M=P+(j^_&(B^j))+L[8]+1163531501&4294967295,P=B+(M<<20&4294967295|M>>>12),M=_+(B^j&(P^B))+L[13]+2850285829&4294967295,_=P+(M<<5&4294967295|M>>>27),M=j+(P^B&(_^P))+L[2]+4243563512&4294967295,j=_+(M<<9&4294967295|M>>>23),M=B+(_^P&(j^_))+L[7]+1735328473&4294967295,B=j+(M<<14&4294967295|M>>>18),M=P+(j^_&(B^j))+L[12]+2368359562&4294967295,P=B+(M<<20&4294967295|M>>>12),M=_+(P^B^j)+L[5]+4294588738&4294967295,_=P+(M<<4&4294967295|M>>>28),M=j+(_^P^B)+L[8]+2272392833&4294967295,j=_+(M<<11&4294967295|M>>>21),M=B+(j^_^P)+L[11]+1839030562&4294967295,B=j+(M<<16&4294967295|M>>>16),M=P+(B^j^_)+L[14]+4259657740&4294967295,P=B+(M<<23&4294967295|M>>>9),M=_+(P^B^j)+L[1]+2763975236&4294967295,_=P+(M<<4&4294967295|M>>>28),M=j+(_^P^B)+L[4]+1272893353&4294967295,j=_+(M<<11&4294967295|M>>>21),M=B+(j^_^P)+L[7]+4139469664&4294967295,B=j+(M<<16&4294967295|M>>>16),M=P+(B^j^_)+L[10]+3200236656&4294967295,P=B+(M<<23&4294967295|M>>>9),M=_+(P^B^j)+L[13]+681279174&4294967295,_=P+(M<<4&4294967295|M>>>28),M=j+(_^P^B)+L[0]+3936430074&4294967295,j=_+(M<<11&4294967295|M>>>21),M=B+(j^_^P)+L[3]+3572445317&4294967295,B=j+(M<<16&4294967295|M>>>16),M=P+(B^j^_)+L[6]+76029189&4294967295,P=B+(M<<23&4294967295|M>>>9),M=_+(P^B^j)+L[9]+3654602809&4294967295,_=P+(M<<4&4294967295|M>>>28),M=j+(_^P^B)+L[12]+3873151461&4294967295,j=_+(M<<11&4294967295|M>>>21),M=B+(j^_^P)+L[15]+530742520&4294967295,B=j+(M<<16&4294967295|M>>>16),M=P+(B^j^_)+L[2]+3299628645&4294967295,P=B+(M<<23&4294967295|M>>>9),M=_+(B^(P|~j))+L[0]+4096336452&4294967295,_=P+(M<<6&4294967295|M>>>26),M=j+(P^(_|~B))+L[7]+1126891415&4294967295,j=_+(M<<10&4294967295|M>>>22),M=B+(_^(j|~P))+L[14]+2878612391&4294967295,B=j+(M<<15&4294967295|M>>>17),M=P+(j^(B|~_))+L[5]+4237533241&4294967295,P=B+(M<<21&4294967295|M>>>11),M=_+(B^(P|~j))+L[12]+1700485571&4294967295,_=P+(M<<6&4294967295|M>>>26),M=j+(P^(_|~B))+L[3]+2399980690&4294967295,j=_+(M<<10&4294967295|M>>>22),M=B+(_^(j|~P))+L[10]+4293915773&4294967295,B=j+(M<<15&4294967295|M>>>17),M=P+(j^(B|~_))+L[1]+2240044497&4294967295,P=B+(M<<21&4294967295|M>>>11),M=_+(B^(P|~j))+L[8]+1873313359&4294967295,_=P+(M<<6&4294967295|M>>>26),M=j+(P^(_|~B))+L[15]+4264355552&4294967295,j=_+(M<<10&4294967295|M>>>22),M=B+(_^(j|~P))+L[6]+2734768916&4294967295,B=j+(M<<15&4294967295|M>>>17),M=P+(j^(B|~_))+L[13]+1309151649&4294967295,P=B+(M<<21&4294967295|M>>>11),M=_+(B^(P|~j))+L[4]+4149444226&4294967295,_=P+(M<<6&4294967295|M>>>26),M=j+(P^(_|~B))+L[11]+3174756917&4294967295,j=_+(M<<10&4294967295|M>>>22),M=B+(_^(j|~P))+L[2]+718787259&4294967295,B=j+(M<<15&4294967295|M>>>17),M=P+(j^(B|~_))+L[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(B+(M<<21&4294967295|M>>>11))&4294967295,T.g[2]=T.g[2]+B&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.v=function(T,_){_===void 0&&(_=T.length);const P=_-this.blockSize,L=this.C;let B=this.h,j=0;for(;j<_;){if(B==0)for(;j<=P;)i(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<_;)if(L[B++]=T.charCodeAt(j++),B==this.blockSize){i(this,L),B=0;break}}else for(;j<_;)if(L[B++]=T[j++],B==this.blockSize){i(this,L),B=0;break}}this.h=B,this.o+=_},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var P=T.length-8;P<T.length;++P)T[P]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,P=0;P<4;++P)for(let L=0;L<32;L+=8)T[_++]=this.g[P]>>>L&255;return T};function o(T,_){var P=d;return Object.prototype.hasOwnProperty.call(P,T)?P[T]:P[T]=_(T)}function c(T,_){this.h=_;const P=[];let L=!0;for(let B=T.length-1;B>=0;B--){const j=T[B]|0;L&&j==_||(P[B]=j,L=!1)}this.g=P}var d={};function h(T){return-128<=T&&T<128?o(T,function(_){return new c([_|0],_<0?-1:0)}):new c([T|0],T<0?-1:0)}function m(T){if(isNaN(T)||!isFinite(T))return b;if(T<0)return C(m(-T));const _=[];let P=1;for(let L=0;T>=P;L++)_[L]=T/P|0,P*=4294967296;return new c(_,0)}function w(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return C(w(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=m(Math.pow(_,8));let L=b;for(let j=0;j<T.length;j+=8){var B=Math.min(8,T.length-j);const M=parseInt(T.substring(j,j+B),_);B<8?(B=m(Math.pow(_,B)),L=L.j(B).add(m(M))):(L=L.j(P),L=L.add(m(M)))}return L}var b=h(0),x=h(1),S=h(16777216);n=c.prototype,n.m=function(){if(N(this))return-C(this).m();let T=0,_=1;for(let P=0;P<this.g.length;P++){const L=this.i(P);T+=(L>=0?L:4294967296+L)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(N(this))return"-"+C(this).toString(T);const _=m(Math.pow(T,6));var P=this;let L="";for(;;){const B=$(P,_).g;P=D(P,B.j(_));let j=((P.g.length>0?P.g[0]:P.h)>>>0).toString(T);if(P=B,k(P))return j+L;for(;j.length<6;)j="0"+j;L=j+L}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=D(this,T),N(T)?-1:k(T)?0:1};function C(T){const _=T.g.length,P=[];for(let L=0;L<_;L++)P[L]=~T.g[L];return new c(P,~T.h).add(x)}n.abs=function(){return N(this)?C(this):this},n.add=function(T){const _=Math.max(this.g.length,T.g.length),P=[];let L=0;for(let B=0;B<=_;B++){let j=L+(this.i(B)&65535)+(T.i(B)&65535),M=(j>>>16)+(this.i(B)>>>16)+(T.i(B)>>>16);L=M>>>16,j&=65535,M&=65535,P[B]=M<<16|j}return new c(P,P[P.length-1]&-2147483648?-1:0)};function D(T,_){return T.add(C(_))}n.j=function(T){if(k(this)||k(T))return b;if(N(this))return N(T)?C(this).j(C(T)):C(C(this).j(T));if(N(T))return C(this.j(C(T)));if(this.l(S)<0&&T.l(S)<0)return m(this.m()*T.m());const _=this.g.length+T.g.length,P=[];for(var L=0;L<2*_;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(let B=0;B<T.g.length;B++){const j=this.i(L)>>>16,M=this.i(L)&65535,ye=T.i(B)>>>16,ee=T.i(B)&65535;P[2*L+2*B]+=M*ee,F(P,2*L+2*B),P[2*L+2*B+1]+=j*ee,F(P,2*L+2*B+1),P[2*L+2*B+1]+=M*ye,F(P,2*L+2*B+1),P[2*L+2*B+2]+=j*ye,F(P,2*L+2*B+2)}for(T=0;T<_;T++)P[T]=P[2*T+1]<<16|P[2*T];for(T=_;T<2*_;T++)P[T]=0;return new c(P,0)};function F(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function U(T,_){this.g=T,this.h=_}function $(T,_){if(k(_))throw Error("division by zero");if(k(T))return new U(b,b);if(N(T))return _=$(C(T),_),new U(C(_.g),C(_.h));if(N(_))return _=$(T,C(_)),new U(C(_.g),_.h);if(T.g.length>30){if(N(T)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var P=x,L=_;L.l(T)<=0;)P=Y(P),L=Y(L);var B=te(P,1),j=te(L,1);for(L=te(L,2),P=te(P,2);!k(L);){var M=j.add(L);M.l(T)<=0&&(B=B.add(P),j=M),L=te(L,1),P=te(P,1)}return _=D(T,B.j(_)),new U(B,_)}for(B=b;T.l(_)>=0;){for(P=Math.max(1,Math.floor(T.m()/_.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),j=m(P),M=j.j(_);N(M)||M.l(T)>0;)P-=L,j=m(P),M=j.j(_);k(j)&&(j=x),B=B.add(j),T=D(T,M)}return new U(B,T)}n.B=function(T){return $(this,T).h},n.and=function(T){const _=Math.max(this.g.length,T.g.length),P=[];for(let L=0;L<_;L++)P[L]=this.i(L)&T.i(L);return new c(P,this.h&T.h)},n.or=function(T){const _=Math.max(this.g.length,T.g.length),P=[];for(let L=0;L<_;L++)P[L]=this.i(L)|T.i(L);return new c(P,this.h|T.h)},n.xor=function(T){const _=Math.max(this.g.length,T.g.length),P=[];for(let L=0;L<_;L++)P[L]=this.i(L)^T.i(L);return new c(P,this.h^T.h)};function Y(T){const _=T.g.length+1,P=[];for(let L=0;L<_;L++)P[L]=T.i(L)<<1|T.i(L-1)>>>31;return new c(P,T.h)}function te(T,_){const P=_>>5;_%=32;const L=T.g.length-P,B=[];for(let j=0;j<L;j++)B[j]=_>0?T.i(j+P)>>>_|T.i(j+P+1)<<32-_:T.i(j+P);return new c(B,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,KN=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=w,Po=c}).apply(typeof u1<"u"?u1:typeof self<"u"?self:typeof window<"u"?window:{});var np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $N,ph,YN,_p,wb,WN,JN,XN;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof np=="object"&&np];for(var v=0;v<f.length;++v){var E=f[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(f,v){if(v)e:{var E=r;f=f.split(".");for(var O=0;O<f.length-1;O++){var W=f[O];if(!(W in E))break e;E=E[W]}f=f[f.length-1],O=E[f],v=v(O),v!=O&&v!=null&&e(E,f,{configurable:!0,writable:!0,value:v})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(v){var E=[],O;for(O in v)Object.prototype.hasOwnProperty.call(v,O)&&E.push([O,v[O]]);return E}});var o=o||{},c=this||self;function d(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function h(f,v,E){return f.call.apply(f.bind,arguments)}function m(f,v,E){return m=h,m.apply(null,arguments)}function w(f,v){var E=Array.prototype.slice.call(arguments,1);return function(){var O=E.slice();return O.push.apply(O,arguments),f.apply(this,O)}}function b(f,v){function E(){}E.prototype=v.prototype,f.Z=v.prototype,f.prototype=new E,f.prototype.constructor=f,f.Ob=function(O,W,ne){for(var be=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)be[Ke-2]=arguments[Ke];return v.prototype[W].apply(O,be)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function S(f){const v=f.length;if(v>0){const E=Array(v);for(let O=0;O<v;O++)E[O]=f[O];return E}return[]}function k(f,v){for(let O=1;O<arguments.length;O++){const W=arguments[O];var E=typeof W;if(E=E!="object"?E:W?Array.isArray(W)?"array":E:"null",E=="array"||E=="object"&&typeof W.length=="number"){E=f.length||0;const ne=W.length||0;f.length=E+ne;for(let be=0;be<ne;be++)f[E+be]=W[be]}else f.push(W)}}class N{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function C(f){c.setTimeout(()=>{throw f},0)}function D(){var f=T;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class F{constructor(){this.h=this.g=null}add(v,E){const O=U.get();O.set(v,E),this.h?this.h.next=O:this.g=O,this.h=O}}var U=new N(()=>new $,f=>f.reset());class ${constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,te=!1,T=new F,_=()=>{const f=Promise.resolve(void 0);Y=()=>{f.then(P)}};function P(){for(var f;f=D();){try{f.h.call(f.g)}catch(E){C(E)}var v=U;v.j(f),v.h<100&&(v.h++,f.next=v.g,v.g=f)}te=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};c.addEventListener("test",E,v),c.removeEventListener("test",E,v)}catch{}return f})();function M(f){return/^[\s\xa0]*$/.test(f)}function ye(f,v){B.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,v)}b(ye,B),ye.prototype.init=function(f,v){const E=this.type=f.type,O=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget,v||(E=="mouseover"?v=f.fromElement:E=="mouseout"&&(v=f.toElement)),this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),G=0;function se(f,v,E,O,W){this.listener=f,this.proxy=null,this.src=v,this.type=E,this.capture=!!O,this.ha=W,this.key=++G,this.da=this.fa=!1}function pe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ve(f,v,E){for(const O in f)v.call(E,f[O],O,f)}function de(f,v){for(const E in f)v.call(void 0,f[E],E,f)}function V(f){const v={};for(const E in f)v[E]=f[E];return v}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(f,v){let E,O;for(let W=1;W<arguments.length;W++){O=arguments[W];for(E in O)f[E]=O[E];for(let ne=0;ne<z.length;ne++)E=z[ne],Object.prototype.hasOwnProperty.call(O,E)&&(f[E]=O[E])}}function ae(f){this.src=f,this.g={},this.h=0}ae.prototype.add=function(f,v,E,O,W){const ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);const be=Re(f,v,O,W);return be>-1?(v=f[be],E||(v.fa=!1)):(v=new se(v,this.src,ne,!!O,W),v.fa=E,f.push(v)),v};function we(f,v){const E=v.type;if(E in f.g){var O=f.g[E],W=Array.prototype.indexOf.call(O,v,void 0),ne;(ne=W>=0)&&Array.prototype.splice.call(O,W,1),ne&&(pe(v),f.g[E].length==0&&(delete f.g[E],f.h--))}}function Re(f,v,E,O){for(let W=0;W<f.length;++W){const ne=f[W];if(!ne.da&&ne.listener==v&&ne.capture==!!E&&ne.ha==O)return W}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),Ze={};function Le(f,v,E,O,W){if(Array.isArray(v)){for(let ne=0;ne<v.length;ne++)Le(f,v[ne],E,O,W);return null}return E=kt(E),f&&f[ee]?f.J(v,E,d(O)?!!O.capture:!1,W):Bn(f,v,E,!1,O,W)}function Bn(f,v,E,O,W,ne){if(!v)throw Error("Invalid event type");const be=d(W)?!!W.capture:!!W;let Ke=et(f);if(Ke||(f[Te]=Ke=new ae(f)),E=Ke.add(v,E,O,be,ne),E.proxy)return E;if(O=Ps(),E.proxy=O,O.src=f,O.listener=E,f.addEventListener)j||(W=be),W===void 0&&(W=!1),f.addEventListener(v.toString(),O,W);else if(f.attachEvent)f.attachEvent(Me(v.toString()),O);else if(f.addListener&&f.removeListener)f.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ps(){function f(E){return v.call(f.src,f.listener,E)}const v=Bt;return f}function hn(f,v,E,O,W){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)hn(f,v[ne],E,O,W);else O=d(O)?!!O.capture:!!O,E=kt(E),f&&f[ee]?(f=f.i,ne=String(v).toString(),ne in f.g&&(v=f.g[ne],E=Re(v,E,O,W),E>-1&&(pe(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete f.g[ne],f.h--)))):f&&(f=et(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Re(v,E,O,W)),(E=f>-1?v[f]:null)&&ge(E))}function ge(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[ee])we(v.i,f);else{var E=f.type,O=f.proxy;v.removeEventListener?v.removeEventListener(E,O,f.capture):v.detachEvent?v.detachEvent(Me(E),O):v.addListener&&v.removeListener&&v.removeListener(O),(E=et(v))?(we(E,f),E.h==0&&(E.src=null,v[Te]=null)):pe(f)}}}function Me(f){return f in Ze?Ze[f]:Ze[f]="on"+f}function Bt(f,v){if(f.da)f=!0;else{v=new ye(v,this);const E=f.listener,O=f.ha||f.src;f.fa&&ge(f),f=E.call(O,v)}return f}function et(f){return f=f[Te],f instanceof ae?f:null}var an="__closure_events_fn_"+(Math.random()*1e9>>>0);function kt(f){return typeof f=="function"?f:(f[an]||(f[an]=function(v){return f.handleEvent(v)}),f[an])}function ze(){L.call(this),this.i=new ae(this),this.M=this,this.G=null}b(ze,L),ze.prototype[ee]=!0,ze.prototype.removeEventListener=function(f,v,E,O){hn(this,f,v,E,O)};function Fe(f,v){var E,O=f.G;if(O)for(E=[];O;O=O.G)E.push(O);if(f=f.M,O=v.type||v,typeof v=="string")v=new B(v,f);else if(v instanceof B)v.target=v.target||f;else{var W=v;v=new B(O,f),oe(v,W)}W=!0;let ne,be;if(E)for(be=E.length-1;be>=0;be--)ne=v.g=E[be],W=Ee(ne,O,!0,v)&&W;if(ne=v.g=f,W=Ee(ne,O,!0,v)&&W,W=Ee(ne,O,!1,v)&&W,E)for(be=0;be<E.length;be++)ne=v.g=E[be],W=Ee(ne,O,!1,v)&&W}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var f=this.i;for(const v in f.g){const E=f.g[v];for(let O=0;O<E.length;O++)pe(E[O]);delete f.g[v],f.h--}}this.G=null},ze.prototype.J=function(f,v,E,O){return this.i.add(String(f),v,!1,E,O)},ze.prototype.K=function(f,v,E,O){return this.i.add(String(f),v,!0,E,O)};function Ee(f,v,E,O){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();let W=!0;for(let ne=0;ne<v.length;++ne){const be=v[ne];if(be&&!be.da&&be.capture==E){const Ke=be.listener,mn=be.ha||be.src;be.fa&&we(f.i,be),W=Ke.call(mn,O)!==!1&&W}}return W&&!O.defaultPrevented}function gt(f,v){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(f,v||0)}function on(f){f.g=gt(()=>{f.g=null,f.i&&(f.i=!1,on(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class St extends L{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:on(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jn(f){L.call(this),this.h=f,this.g={}}b(jn,L);var nt=[];function jt(f){ve(f.g,function(v,E){this.g.hasOwnProperty(E)&&ge(v)},f),f.g={}}jn.prototype.N=function(){jn.Z.N.call(this),jt(this)},jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=c.JSON.stringify,Os=c.JSON.parse,Fi=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Ds(){}function or(){}var Un={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fn(){B.call(this,"d")}b(fn,B);function pr(){B.call(this,"c")}b(pr,B);var Zt={},La=null;function Hi(){return La=La||new ze}Zt.Ia="serverreachability";function Ms(f){B.call(this,Zt.Ia,f)}b(Ms,B);function lr(f){const v=Hi();Fe(v,new Ms(v))}Zt.STAT_EVENT="statevent";function Ft(f,v){B.call(this,Zt.STAT_EVENT,f),this.stat=v}b(Ft,B);function En(f){const v=Hi();Fe(v,new Ft(v,f))}Zt.Ja="timingevent";function ai(f,v){B.call(this,Zt.Ja,f),this.size=v}b(ai,B);function oi(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},v)}function Ls(){this.g=!0}Ls.prototype.ua=function(){this.g=!1};function py(f,v,E,O,W,ne){f.info(function(){if(f.g)if(ne){var be="",Ke=ne.split("&");for(let vt=0;vt<Ke.length;vt++){var mn=Ke[vt].split("=");if(mn.length>1){const $t=mn[0];mn=mn[1];const fs=$t.split("_");be=fs.length>=2&&fs[1]=="type"?be+($t+"="+mn+"&"):be+($t+"=redacted&")}}}else be=null;else be=ne;return"XMLHTTP REQ ("+O+") [attempt "+W+"]: "+v+`
`+E+`
`+be})}function kf(f,v,E,O,W,ne,be){f.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+W+"]: "+v+`
`+E+`
`+ne+" "+be})}function li(f,v,E,O){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+gy(f,E)+(O?" "+O:"")})}function Xo(f,v){f.info(function(){return"TIMEOUT: "+v})}Ls.prototype.info=function(){};function gy(f,v){if(!f.g)return v;if(!v)return null;try{const ne=JSON.parse(v);if(ne){for(f=0;f<ne.length;f++)if(Array.isArray(ne[f])){var E=ne[f];if(!(E.length<2)){var O=E[1];if(Array.isArray(O)&&!(O.length<1)){var W=O[0];if(W!="noop"&&W!="stop"&&W!="close")for(let be=1;be<O.length;be++)O[be]=""}}}}return ar(ne)}catch{return v}}var Zo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},od={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ld;function el(){}b(el,Ds),el.prototype.g=function(){return new XMLHttpRequest},ld=new el;function zi(f){return encodeURIComponent(String(f))}function Pf(f){var v=1;f=f.split(":");const E=[];for(;v>0&&f.length;)E.push(f.shift()),v--;return f.length&&E.push(f.join(":")),E}function Bs(f,v,E,O){this.j=f,this.i=v,this.l=E,this.S=O||1,this.V=new jn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new js}function js(){this.i=null,this.g="",this.h=!1}var _n={},Hn={};function ci(f,v,E){f.M=1,f.A=tl(Sn(v)),f.u=E,f.R=!0,gc(f,null)}function gc(f,v){f.F=Date.now(),ui(f),f.B=Sn(f.A);var E=f.B,O=f.S;Array.isArray(O)||(O=[String(O)]),vc(E.i,"t",O),f.C=0,E=f.j.L,f.h=new js,f.g=Kf(f.j,E?v:null,!f.u),f.P>0&&(f.O=new St(m(f.Y,f,f.g),f.P)),v=f.V,E=f.g,O=f.ba;var W="readystatechange";Array.isArray(W)||(W&&(nt[0]=W.toString()),W=nt);for(let ne=0;ne<W.length;ne++){const be=Le(E,W[ne],O||v.handleEvent,!1,v.h||v);if(!be)break;v.g[be.key]=be}v=f.J?V(f.J):{},f.u?(f.v||(f.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,v)):(f.v="GET",f.g.ea(f.B,f.v,null,v)),lr(),py(f.i,f.v,f.B,f.l,f.S,f.u)}Bs.prototype.ba=function(f){f=f.target;const v=this.O;v&&Fs(f)==3?v.j():this.Y(f)},Bs.prototype.Y=function(f){try{if(f==this.g)e:{const Ke=Fs(this.g),mn=this.g.ya(),vt=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||Wn(this.g)))){this.K||Ke!=4||mn==7||(mn==8||vt<=0?lr(3):lr(2)),di(this);var v=this.g.ca();this.X=v;var E=yy(this);if(this.o=v==200,kf(this.i,this.v,this.B,this.l,this.S,Ke,v),this.o){if(this.U&&!this.L){t:{if(this.g){var O,W=this.g;if((O=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(O)){var ne=O;break t}}ne=null}if(f=ne)li(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hi(this,f);else{this.o=!1,this.m=3,En(12),Gr(this),us(this);break e}}if(this.R){f=!0;let $t;for(;!this.K&&this.C<E.length;)if($t=Df(this,E),$t==Hn){Ke==4&&(this.m=4,En(14),f=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if($t==_n){this.m=4,En(15),li(this.i,this.l,E,"[Invalid Chunk]"),f=!1;break}else li(this.i,this.l,$t,null),hi(this,$t);if(Of(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||E.length!=0||this.h.h||(this.m=1,En(16),f=!1),this.o=this.o&&f,!f)li(this.i,this.l,E,"[Invalid Chunked Response]"),Gr(this),us(this);else if(E.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ed(be),be.P=!0,En(11))}}else li(this.i,this.l,E,null),hi(this,E);Ke==4&&Gr(this),this.o&&!this.K&&(Ke==4?zf(this.j,this):(this.o=!1,ui(this)))}else qi(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,En(12)):(this.m=0,En(13)),Gr(this),us(this)}}}catch{}};function yy(f){if(!Of(f))return f.g.la();const v=Wn(f.g);if(v==="")return"";let E="";const O=v.length,W=Fs(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Gr(f),us(f),"";f.h.i=new c.TextDecoder}for(let ne=0;ne<O;ne++)f.h.h=!0,E+=f.h.i.decode(v[ne],{stream:!(W&&ne==O-1)});return v.length=0,f.h.g+=E,f.C=0,f.h.g}function Of(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Df(f,v){var E=f.C,O=v.indexOf(`
`,E);return O==-1?Hn:(E=Number(v.substring(E,O)),isNaN(E)?_n:(O+=1,O+E>v.length?Hn:(v=v.slice(O,O+E),f.C=O+E,v)))}Bs.prototype.cancel=function(){this.K=!0,Gr(this)};function ui(f){f.T=Date.now()+f.H,yc(f,f.H)}function yc(f,v){if(f.D!=null)throw Error("WatchDog timer not null");f.D=oi(m(f.aa,f),v)}function di(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Bs.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Xo(this.i,this.B),this.M!=2&&(lr(),En(17)),Gr(this),this.m=2,us(this)):yc(this,this.T-f)};function us(f){f.j.I==0||f.K||zf(f.j,f)}function Gr(f){di(f);var v=f.O;v&&typeof v.dispose=="function"&&v.dispose(),f.O=null,jt(f.V),f.g&&(v=f.g,f.g=null,v.abort(),v.dispose())}function hi(f,v){try{var E=f.j;if(E.I!=0&&(E.g==f||mi(E.h,f))){if(!f.L&&mi(E.h,f)&&E.I==3){try{var O=E.Ba.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var W=O;if(W[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<f.F)Tc(E),Ga(E);else break e;ll(E),En(18)}}else E.xa=W[1],0<E.xa-E.K&&W[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=oi(m(E.Va,E),6e3));fi(E.h)<=1&&E.ta&&(E.ta=void 0)}else vi(E,11)}else if((f.L||E.g==f)&&Tc(E),!M(v))for(W=E.Ba.g.parse(v),v=0;v<W.length;v++){let vt=W[v];const $t=vt[0];if(!($t<=E.K))if(E.K=$t,vt=vt[1],E.I==2)if(vt[0]=="c"){E.M=vt[1],E.ba=vt[2];const fs=vt[3];fs!=null&&(E.ka=fs,E.j.info("VER="+E.ka));const xi=vt[4];xi!=null&&(E.za=xi,E.j.info("SVER="+E.za));const Hs=vt[5];Hs!=null&&typeof Hs=="number"&&Hs>0&&(O=1.5*Hs,E.O=O,E.j.info("backChannelRequestTimeoutMs_="+O)),O=E;const zs=f.g;if(zs){const cl=zs.g?zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var ne=O.h;ne.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(dd(ne,ne.h),ne.h=null))}if(O.G){const Sc=zs.g?zs.g.getResponseHeader("X-HTTP-Session-Id"):null;Sc&&(O.wa=Sc,Nt(O.J,O.G,Sc))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-f.F,E.j.info("Handshake RTT: "+E.T+"ms")),O=E;var be=f;if(O.na=Qf(O,O.L?O.ba:null,O.W),be.L){hd(O.h,be);var Ke=be,mn=O.O;mn&&(Ke.H=mn),Ke.D&&(di(Ke),ui(Ke)),O.g=be}else Ff(O);E.i.length>0&&bi(E)}else vt[0]!="stop"&&vt[0]!="close"||vi(E,7);else E.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?vi(E,7):xd(E):vt[0]!="noop"&&E.l&&E.l.qa(vt),E.A=0)}}lr(4)}catch{}}var Tn=class{constructor(f,v){this.g=f,this.map=v}};function cd(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ud(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function fi(f){return f.h?1:f.g?f.g.size:0}function mi(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function dd(f,v){f.g?f.g.add(v):f.h=v}function hd(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}cd.prototype.cancel=function(){if(this.i=fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function fd(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const E of f.g.values())v=v.concat(E.G);return v}return S(f.i)}var Mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wc(f,v){if(f){f=f.split("&");for(let E=0;E<f.length;E++){const O=f[E].indexOf("=");let W,ne=null;O>=0?(W=f[E].substring(0,O),ne=f[E].substring(O+1)):W=f[E],v(W,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function qr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;f instanceof qr?(this.l=f.l,zn(this,f.j),this.o=f.o,this.g=f.g,Ba(this,f.u),this.h=f.h,md(this,Uf(f.i)),this.m=f.m):f&&(v=String(f).match(Mf))?(this.l=!1,zn(this,v[1]||"",!0),this.o=pi(v[2]||""),this.g=pi(v[3]||"",!0),Ba(this,v[4]),this.h=pi(v[5]||"",!0),md(this,v[6]||"",!0),this.m=pi(v[7]||"")):(this.l=!1,this.i=new Ua(null,this.l))}qr.prototype.toString=function(){const f=[];var v=this.j;v&&f.push(nl(v,bc,!0),":");var E=this.g;return(E||v=="file")&&(f.push("//"),(v=this.o)&&f.push(nl(v,bc,!0),"@"),f.push(zi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&f.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(nl(E,E.charAt(0)=="/"?pd:Lf,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",nl(E,Bf)),f.join("")},qr.prototype.resolve=function(f){const v=Sn(this);let E=!!f.j;E?zn(v,f.j):E=!!f.o,E?v.o=f.o:E=!!f.g,E?v.g=f.g:E=f.u!=null;var O=f.h;if(E)Ba(v,f.u);else if(E=!!f.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var W=v.h.lastIndexOf("/");W!=-1&&(O=v.h.slice(0,W+1)+O)}if(W=O,W==".."||W==".")O="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){O=W.lastIndexOf("/",0)==0,W=W.split("/");const ne=[];for(let be=0;be<W.length;){const Ke=W[be++];Ke=="."?O&&be==W.length&&ne.push(""):Ke==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),O&&be==W.length&&ne.push("")):(ne.push(Ke),O=!0)}O=ne.join("/")}else O=W}return E?v.h=O:E=f.i.toString()!=="",E?md(v,Uf(f.i)):E=!!f.m,E&&(v.m=f.m),v};function Sn(f){return new qr(f)}function zn(f,v,E){f.j=E?pi(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function Ba(f,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);f.u=v}else f.u=null}function md(f,v,E){v instanceof Ua?(f.i=v,xc(f.i,f.l)):(E||(v=nl(v,ja)),f.i=new Ua(v,f.l))}function Nt(f,v,E){f.i.set(v,E)}function tl(f){return Nt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function pi(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function nl(f,v,E){return typeof f=="string"?(f=encodeURI(f).replace(v,Sr),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Sr(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var bc=/[#\/\?@]/g,Lf=/[#\?:]/g,pd=/[#\?]/g,ja=/[#\?@]/g,Bf=/#/g;function Ua(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Nr(f){f.g||(f.g=new Map,f.h=0,f.i&&wc(f.i,function(v,E){f.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=Ua.prototype,n.add=function(f,v){Nr(this),this.i=null,f=Va(this,f);let E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(v),this.h+=1,this};function jf(f,v){Nr(f),v=Va(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function gd(f,v){return Nr(f),v=Va(f,v),f.g.has(v)}n.forEach=function(f,v){Nr(this),this.g.forEach(function(E,O){E.forEach(function(W){f.call(v,W,O,this)},this)},this)};function yd(f,v){Nr(f);let E=[];if(typeof v=="string")gd(f,v)&&(E=E.concat(f.g.get(Va(f,v))));else for(f=Array.from(f.g.values()),v=0;v<f.length;v++)E=E.concat(f[v]);return E}n.set=function(f,v){return Nr(this),this.i=null,f=Va(this,f),gd(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},n.get=function(f,v){return f?(f=yd(this,f),f.length>0?String(f[0]):v):v};function vc(f,v,E){jf(f,v),E.length>0&&(f.i=null,f.g.set(Va(f,v),S(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(let O=0;O<v.length;O++){var E=v[O];const W=zi(E);E=yd(this,E);for(let ne=0;ne<E.length;ne++){let be=W;E[ne]!==""&&(be+="="+zi(E[ne])),f.push(be)}}return this.i=f.join("&")};function Uf(f){const v=new Ua;return v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),v}function Va(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function xc(f,v){v&&!f.j&&(Nr(f),f.i=null,f.g.forEach(function(E,O){const W=O.toLowerCase();O!=W&&(jf(this,O),vc(this,W,E))},f)),f.j=v}function Us(f,v){const E=new Ls;if(c.Image){const O=new Image;O.onload=w(ds,E,"TestLoadImage: loaded",!0,v,O),O.onerror=w(ds,E,"TestLoadImage: error",!1,v,O),O.onabort=w(ds,E,"TestLoadImage: abort",!1,v,O),O.ontimeout=w(ds,E,"TestLoadImage: timeout",!1,v,O),c.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=f}else v(!1)}function wd(f,v){const E=new Ls,O=new AbortController,W=setTimeout(()=>{O.abort(),ds(E,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:O.signal}).then(ne=>{clearTimeout(W),ne.ok?ds(E,"TestPingServer: ok",!0,v):ds(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),ds(E,"TestPingServer: error",!1,v)})}function ds(f,v,E,O,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),O(E)}catch{}}function Fa(){this.g=new Fi}function gi(f){this.i=f.Sb||null,this.h=f.ab||!1}b(gi,Ds),gi.prototype.g=function(){return new rl(this.i,this.h)};function rl(f,v){ze.call(this),this.H=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(rl,ze),n=rl.prototype,n.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=v,this.readyState=1,Vs(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(v.body=f),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ac(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ac(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Ha(this):Vs(this),this.readyState==3&&Ac(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Ha(this))},n.Na=function(f){this.g&&(this.response=f,Ha(this))},n.ga=function(){this.g&&Ha(this)};function Ha(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Vs(f)}n.setRequestHeader=function(f,v){this.A.append(f,v)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=v.next();return f.join(`\r
`)};function Vs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function hs(f){let v="";return ve(f,function(E,O){v+=O,v+=":",v+=E,v+=`\r
`}),v}function sl(f,v,E){e:{for(O in E){var O=!1;break e}O=!0}O||(E=hs(E),typeof f=="string"?E!=null&&zi(E):Nt(f,v,E))}function Pt(f){ze.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Pt,ze);var yi=/^https?$/i,bd=["POST","PUT"];n=Pt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,v,E,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ld.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(ne){il(this,ne);return}if(f=E||"",E=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var W in O)E.set(W,O[W]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const ne of O.keys())E.set(ne,O.get(ne));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(E.keys()).find(ne=>ne.toLowerCase()=="content-type"),W=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(bd,v,void 0)>=0)||O||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,be]of E)this.g.setRequestHeader(ne,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ne){il(this,ne)}};function il(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.o=5,vd(f),Gi(f)}function vd(f){f.A||(f.A=!0,Fe(f,"complete"),Fe(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Fe(this,"complete"),Fe(this,"abort"),Gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Pt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?al(this):this.Xa())},n.Xa=function(){al(this)};function al(f){if(f.h&&typeof o<"u"){if(f.v&&Fs(f)==4)setTimeout(f.Ca.bind(f),0);else if(Fe(f,"readystatechange"),Fs(f)==4){f.h=!1;try{const ne=f.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var O;if(O=ne===0){let be=String(f.D).match(Mf)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),O=!yi.test(be?be.toLowerCase():"")}E=O}if(E)Fe(f,"complete"),Fe(f,"success");else{f.o=6;try{var W=Fs(f)>2?f.g.statusText:""}catch{W=""}f.l=W+" ["+f.ca()+"]",vd(f)}}finally{Gi(f)}}}}function Gi(f,v){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const E=f.g;f.g=null,v||Fe(f,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Fs(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Fs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),Os(v)}};function Wn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(f){const v={};f=(f.g&&Fs(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<f.length;O++){if(M(f[O]))continue;var E=Pf(f[O]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ne=v[W]||[];v[W]=ne,ne.push(E)}de(v,function(O){return O.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(f,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||v}function za(f){this.za=0,this.i=[],this.j=new Ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,f),this.Za=wi("retryDelaySeedMs",1e4,f),this.Ta=wi("forwardChannelMaxRetries",2,f),this.va=wi("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new cd(f&&f.concurrentRequestLimit),this.Ba=new Fa,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=za.prototype,n.ka=8,n.I=1,n.connect=function(f,v,E,O){En(0),this.W=f,this.H=v||{},E&&O!==void 0&&(this.H.OSID=E,this.H.OAID=O),this.F=this.X,this.J=Qf(this,null,this.W),bi(this)};function xd(f){if(Ec(f),f.I==3){var v=f.V++,E=Sn(f.J);if(Nt(E,"SID",f.M),Nt(E,"RID",v),Nt(E,"TYPE","terminate"),ol(f,E),v=new Bs(f,f.j,v),v.M=2,v.A=tl(Sn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=v.A,E=!0),E||(v.g=Kf(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ui(v)}qf(f)}function Ga(f){f.g&&(Ed(f),f.g.cancel(),f.g=null)}function Ec(f){Ga(f),f.v&&(c.clearTimeout(f.v),f.v=null),Tc(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function bi(f){if(!ud(f.h)&&!f.m){f.m=!0;var v=f.Ea;Y||_(),te||(Y(),te=!0),T.add(v,f),f.D=0}}function _c(f,v){return fi(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=v.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=oi(m(f.Ea,f,v),Gf(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const W=new Bs(this,this.j,f);let ne=this.o;if(this.U&&(ne?(ne=V(ne),oe(ne,this.U)):ne=this.U),this.u!==null||this.R||(W.J=ne,ne=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var O=this.i[E];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Vf(this,W,v),E=Sn(this.J),Nt(E,"RID",f),Nt(E,"CVER",22),this.G&&Nt(E,"X-HTTP-Session-Id",this.G),ol(this,E),ne&&(this.R?v="headers="+zi(hs(ne))+"&"+v:this.u&&sl(E,this.u,ne)),dd(this.h,W),this.Ra&&Nt(E,"TYPE","init"),this.S?(Nt(E,"$req",v),Nt(E,"SID","null"),W.U=!0,ci(W,E,null)):ci(W,E,v),this.I=2}}else this.I==3&&(f?Ad(this,f):this.i.length==0||ud(this.h)||Ad(this))};function Ad(f,v){var E;v?E=v.l:E=f.V++;const O=Sn(f.J);Nt(O,"SID",f.M),Nt(O,"RID",E),Nt(O,"AID",f.K),ol(f,O),f.u&&f.o&&sl(O,f.u,f.o),E=new Bs(f,f.j,E,f.D+1),f.u===null&&(E.J=f.o),v&&(f.i=v.G.concat(f.i)),v=Vf(f,E,1e3),E.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),dd(f.h,E),ci(E,O,v)}function ol(f,v){f.H&&ve(f.H,function(E,O){Nt(v,O,E)}),f.l&&ve({},function(E,O){Nt(v,O,E)})}function Vf(f,v,E){E=Math.min(f.i.length,E);const O=f.l?m(f.l.Ka,f.l,f):null;e:{var W=f.i;let Ke=-1;for(;;){const mn=["count="+E];Ke==-1?E>0?(Ke=W[0].g,mn.push("ofs="+Ke)):Ke=0:mn.push("ofs="+Ke);let vt=!0;for(let $t=0;$t<E;$t++){var ne=W[$t].g;const fs=W[$t].map;if(ne-=Ke,ne<0)Ke=Math.max(0,W[$t].g-100),vt=!1;else try{ne="req"+ne+"_"||"";try{var be=fs instanceof Map?fs:Object.entries(fs);for(const[xi,Hs]of be){let zs=Hs;d(Hs)&&(zs=ar(Hs)),mn.push(ne+xi+"="+encodeURIComponent(zs))}}catch(xi){throw mn.push(ne+"type="+encodeURIComponent("_badmap")),xi}}catch{O&&O(fs)}}if(vt){be=mn.join("&");break e}}be=void 0}return f=f.i.splice(0,E),v.G=f,be}function Ff(f){if(!f.g&&!f.v){f.Y=1;var v=f.Da;Y||_(),te||(Y(),te=!0),T.add(v,f),f.A=0}}function ll(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=oi(m(f.Da,f),Gf(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Hf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=oi(m(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,En(10),Ga(this),Hf(this))};function Ed(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function Hf(f){f.g=new Bs(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var v=Sn(f.na);Nt(v,"RID","rpc"),Nt(v,"SID",f.M),Nt(v,"AID",f.K),Nt(v,"CI",f.F?"0":"1"),!f.F&&f.ia&&Nt(v,"TO",f.ia),Nt(v,"TYPE","xmlhttp"),ol(f,v),f.u&&f.o&&sl(v,f.u,f.o),f.O&&(f.g.H=f.O);var E=f.g;f=f.ba,E.M=1,E.A=tl(Sn(v)),E.u=null,E.R=!0,gc(E,f)}n.Va=function(){this.C!=null&&(this.C=null,Ga(this),ll(this),En(19))};function Tc(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function zf(f,v){var E=null;if(f.g==v){Tc(f),Ed(f),f.g=null;var O=2}else if(mi(f.h,v))E=v.G,hd(f.h,v),O=1;else return;if(f.I!=0){if(v.o)if(O==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var W=f.D;O=Hi(),Fe(O,new ai(O,E)),bi(f)}else Ff(f);else if(W=v.m,W==3||W==0&&v.X>0||!(O==1&&_c(f,v)||O==2&&ll(f)))switch(E&&E.length>0&&(v=f.h,v.i=v.i.concat(E)),W){case 1:vi(f,5);break;case 4:vi(f,10);break;case 3:vi(f,6);break;default:vi(f,2)}}}function Gf(f,v){let E=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(E*=2),E*v}function vi(f,v){if(f.j.info("Error code "+v),v==2){var E=m(f.bb,f),O=f.Ua;const W=!O;O=new qr(O||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||zn(O,"https"),tl(O),W?Us(O.toString(),E):wd(O.toString(),E)}else En(2);f.I=0,f.l&&f.l.pa(v),qf(f),Ec(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function qf(f){if(f.I=0,f.ja=[],f.l){const v=fd(f.h);(v.length!=0||f.i.length!=0)&&(k(f.ja,v),k(f.ja,f.i),f.h.i.length=0,S(f.i),f.i.length=0),f.l.oa()}}function Qf(f,v,E){var O=E instanceof qr?Sn(E):new qr(E);if(O.g!="")v&&(O.g=v+"."+O.g),Ba(O,O.u);else{var W=c.location;O=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;const ne=new qr(null);O&&zn(ne,O),v&&(ne.g=v),W&&Ba(ne,W),E&&(ne.h=E),O=ne}return E=f.G,v=f.wa,E&&v&&Nt(O,E,v),Nt(O,"VER",f.ka),ol(f,O),O}function Kf(f,v,E){if(v&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Aa&&!f.ma?new Pt(new gi({ab:E})):new Pt(f.ma),v.Fa(f.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $f(){}n=$f.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function qa(){}qa.prototype.g=function(f,v){return new gr(f,v)};function gr(f,v){ze.call(this),this.g=new za(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(f?f["X-WebChannel-Client-Profile"]=v.sa:f={"X-WebChannel-Client-Profile":v.sa}),this.g.U=f,(f=v&&v.Qb)&&!M(f)&&(this.g.u=f),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!M(v)&&(this.g.G=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new Qi(this)}b(gr,ze),gr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gr.prototype.close=function(){xd(this.g)},gr.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.v&&(E={},E.__data__=ar(f),f=E);v.i.push(new Tn(v.Ya++,f)),v.I==3&&bi(v)},gr.prototype.N=function(){this.g.l=null,delete this.j,xd(this.g),delete this.g,gr.Z.N.call(this)};function Yf(f){fn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const E in v){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}b(Yf,fn);function Wf(){pr.call(this),this.status=1}b(Wf,pr);function Qi(f){this.g=f}b(Qi,$f),Qi.prototype.ra=function(){Fe(this.g,"a")},Qi.prototype.qa=function(f){Fe(this.g,new Yf(f))},Qi.prototype.pa=function(f){Fe(this.g,new Wf)},Qi.prototype.oa=function(){Fe(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,gr.prototype.send=gr.prototype.o,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,XN=function(){return new qa},JN=function(){return Hi()},WN=Zt,wb={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zo.NO_ERROR=0,Zo.TIMEOUT=8,Zo.HTTP_ERROR=6,_p=Zo,od.COMPLETE="complete",YN=od,or.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",ze.prototype.listen=ze.prototype.J,ph=or,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,$N=Pt}).apply(typeof np<"u"?np:typeof self<"u"?self:typeof window<"u"?window:{});class dr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");let Ku="12.9.0";function ej(n){Ku=n}const Jl=new pv("@firebase/firestore");function su(){return Jl.logLevel}function _e(n,...e){if(Jl.logLevel<=ot.DEBUG){const t=e.map(Cv);Jl.debug(`Firestore (${Ku}): ${n}`,...t)}}function Ia(n,...e){if(Jl.logLevel<=ot.ERROR){const t=e.map(Cv);Jl.error(`Firestore (${Ku}): ${n}`,...t)}}function Xl(n,...e){if(Jl.logLevel<=ot.WARN){const t=e.map(Cv);Jl.warn(`Firestore (${Ku}): ${n}`,...t)}}function Cv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ve(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,ZN(n,r,t)}function ZN(n,e,t){let r=`FIRESTORE (${Ku}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ia(r),new Error(r)}function Tt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||ZN(e,i,r)}function Qe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Da{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class va{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class eC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dr.UNAUTHENTICATED)))}shutdown(){}}class nj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rj{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new va;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new va,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},d=h=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new va)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new eC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new dr(e)}}class sj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ij{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class d1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const r=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new d1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new d1(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function oj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Iv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=oj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function bb(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Nw(i)===Nw(o)?lt(i,o):Nw(i)?1:-1}return lt(n.length,e.length)}const lj=55296,cj=57343;function Nw(n){const e=n.charCodeAt(0);return e>=lj&&e<=cj}function Tu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const h1="__name__";class Ci{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Ci.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return lt(e.length,t.length)}static compareSegments(e,t){const r=Ci.isNumericId(e),i=Ci.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ci.extractNumericId(e).compare(Ci.extractNumericId(t)):bb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class zt extends Ci{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new zt(t)}static emptyPath(){return new zt([])}}const uj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends Ci{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return uj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h1}static keyField(){return new rr([h1])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new xe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new xe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new xe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(o(),i++)}if(o(),c)throw new xe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(zt.fromString(e))}static fromName(e){return new De(zt.fromString(e).popFirst(5))}static empty(){return new De(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new zt(e.slice()))}}function tC(n,e,t){if(!t)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dj(n,e,t,r){if(e===!0&&r===!0)throw new xe(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function f1(n){if(!De.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function m1(n){if(De.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ve(12329,{type:typeof n})}function ni(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cg(n);throw new xe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Dn(n,e){const t={typeString:n};return e&&(t.value=e),t}function af(n,e){if(!nC(n))throw new xe(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new xe(ue.INVALID_ARGUMENT,t);return!0}const p1=-62135596800,g1=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*g1);return new Gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<p1)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g1}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(af(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-p1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:Dn("string",Gt._jsonSchemaVersion),seconds:Dn("number"),nanoseconds:Dn("number")};class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Gt(0,0))}static max(){return new He(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Oh=-1;function hj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=He.fromTimestamp(r===1e9?new Gt(t+1,0):new Gt(t,r));return new Mo(i,De.empty(),e)}function fj(n){return new Mo(n.readTime,n.key,Oh)}class Mo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Mo(He.min(),De.empty(),Oh)}static max(){return new Mo(He.max(),De.empty(),Oh)}}function mj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}const pj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $u(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==pj)throw n;_e("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,r)=>{t(e)}))}static reject(e){return new fe(((t,r)=>{r(e)}))}static waitFor(e){return new fe(((t,r)=>{let i=0,o=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++o,c&&o===i&&t()}),(h=>r(h)))})),c=!0,o===i&&t()}))}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next((i=>i?fe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new fe(((r,i)=>{const o=e.length,c=new Array(o);let d=0;for(let h=0;h<o;h++){const m=h;t(e[m]).next((w=>{c[m]=w,++d,d===o&&r(c)}),(w=>i(w)))}}))}static doWhile(e,t){return new fe(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}function yj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yu(n){return n.name==="IndexedDbTransactionError"}class Ig{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ig.ce=-1;const Rv=-1;function Rg(n){return n==null}function Kp(n){return n===0&&1/n==-1/0}function wj(n){return typeof n=="number"&&Number.isInteger(n)&&!Kp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const rC="";function bj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y1(e)),e=vj(n.get(t),e);return y1(e)}function vj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case rC:t+="";break;default:t+=o}}return t}function y1(n){return n+rC+""}function w1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ko(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sn{constructor(e,t){this.comparator=e,this.root=t||tr.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rp(this.root,e,this.comparator,!1)}getReverseIterator(){return new rp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rp(this.root,e,this.comparator,!0)}}class rp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tr{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??tr.RED,this.left=i??tr.EMPTY,this.right=o??tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new tr(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return tr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new tr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b1(this.data.getIterator())}getIteratorFrom(e){return new b1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class b1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rs{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new rs([])}unionWith(e){let t=new Fn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class iC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iC("Invalid base64 string: "+o):o}})(e);return new ir(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const xj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lo(n){if(Tt(!!n,39018),typeof n=="string"){let e=0;const t=xj.exec(n);if(Tt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(n.seconds),nanos:wn(n.nanos)}}function wn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bo(n){return typeof n=="string"?ir.fromBase64String(n):ir.fromUint8Array(n)}const aC="server_timestamp",oC="__type__",lC="__previous_value__",cC="__local_write_time__";function kv(n){return(n?.mapValue?.fields||{})[oC]?.stringValue===aC}function kg(n){const e=n.mapValue.fields[lC];return kv(e)?kg(e):e}function Dh(n){const e=Lo(n.mapValue.fields[cC].timestampValue);return new Gt(e.seconds,e.nanos)}class Aj{constructor(e,t,r,i,o,c,d,h,m,w,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=w,this.apiKey=b}}const $p="(default)";class Mh{constructor(e,t){this.projectId=e,this.database=t||$p}static empty(){return new Mh("","")}get isDefaultDatabase(){return this.database===$p}isEqual(e){return e instanceof Mh&&e.projectId===this.projectId&&e.database===this.database}}function Ej(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new xe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(n.options.projectId,e)}const uC="__type__",_j="__max__",sp={mapValue:{}},dC="__vector__",Yp="value";function jo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kv(n)?4:Sj(n)?9007199254740991:Tj(n)?10:11:Ve(28295,{value:n})}function Bi(n,e){if(n===e)return!0;const t=jo(n);if(t!==jo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dh(n).isEqual(Dh(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Lo(i.timestampValue),d=Lo(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Bo(i.bytesValue).isEqual(Bo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return wn(i.geoPointValue.latitude)===wn(o.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return wn(i.integerValue)===wn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=wn(i.doubleValue),d=wn(o.doubleValue);return c===d?Kp(c)===Kp(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Tu(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(i,o){const c=i.mapValue.fields||{},d=o.mapValue.fields||{};if(w1(c)!==w1(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Bi(c[h],d[h])))return!1;return!0})(n,e);default:return Ve(52216,{left:n})}}function Lh(n,e){return(n.values||[]).find((t=>Bi(t,e)))!==void 0}function Su(n,e){if(n===e)return 0;const t=jo(n),r=jo(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const d=wn(o.integerValue||o.doubleValue),h=wn(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return v1(n.timestampValue,e.timestampValue);case 4:return v1(Dh(n),Dh(e));case 5:return bb(n.stringValue,e.stringValue);case 6:return(function(o,c){const d=Bo(o),h=Bo(c);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const d=o.split("/"),h=c.split("/");for(let m=0;m<d.length&&m<h.length;m++){const w=lt(d[m],h[m]);if(w!==0)return w}return lt(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const d=lt(wn(o.latitude),wn(c.latitude));return d!==0?d:lt(wn(o.longitude),wn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return x1(n.arrayValue,e.arrayValue);case 10:return(function(o,c){const d=o.fields||{},h=c.fields||{},m=d[Yp]?.arrayValue,w=h[Yp]?.arrayValue,b=lt(m?.values?.length||0,w?.values?.length||0);return b!==0?b:x1(m,w)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===sp.mapValue&&c===sp.mapValue)return 0;if(o===sp.mapValue)return 1;if(c===sp.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),m=c.fields||{},w=Object.keys(m);h.sort(),w.sort();for(let b=0;b<h.length&&b<w.length;++b){const x=bb(h[b],w[b]);if(x!==0)return x;const S=Su(d[h[b]],m[w[b]]);if(S!==0)return S}return lt(h.length,w.length)})(n.mapValue,e.mapValue);default:throw Ve(23264,{he:t})}}function v1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=Lo(n),r=Lo(e),i=lt(t.seconds,r.seconds);return i!==0?i:lt(t.nanos,r.nanos)}function x1(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Su(t[i],r[i]);if(o)return o}return lt(t.length,r.length)}function Nu(n){return vb(n)}function vb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Lo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return De.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=vb(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${vb(t.fields[c])}`;return i+"}"})(n.mapValue):Ve(61005,{value:n})}function Tp(n){switch(jo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kg(n);return e?16+Tp(e):16;case 5:return 2*n.stringValue.length;case 6:return Bo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Tp(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ko(r.fields,((o,c)=>{i+=o.length+Tp(c)})),i})(n.mapValue);default:throw Ve(13486,{value:n})}}function A1(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xb(n){return!!n&&"integerValue"in n}function Pv(n){return!!n&&"arrayValue"in n}function E1(n){return!!n&&"nullValue"in n}function _1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sp(n){return!!n&&"mapValue"in n}function Tj(n){return(n?.mapValue?.fields||{})[uC]?.stringValue===dC}function Eh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ko(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Eh(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eh(n.arrayValue.values[t]);return e}return{...n}}function Sj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_j}class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eh(t)}setAll(e){let t=rr.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=Eh(c):i.push(d.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ko(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new jr(Eh(this.value))}}function hC(n){const e=[];return Ko(n.fields,((t,r)=>{const i=new rr([t]);if(Sp(r)){const o=hC(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)})),new rs(e)}class hr{constructor(e,t,r,i,o,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new hr(e,0,He.min(),He.min(),He.min(),jr.empty(),0)}static newFoundDocument(e,t,r,i){return new hr(e,1,t,He.min(),r,i,0)}static newNoDocument(e,t){return new hr(e,2,t,He.min(),He.min(),jr.empty(),0)}static newUnknownDocument(e,t){return new hr(e,3,t,He.min(),He.min(),jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wp{constructor(e,t){this.position=e,this.inclusive=t}}function T1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(o.field.isKeyField()?r=De.comparator(De.fromName(c.referenceValue),t.key):r=Su(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function S1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}class Bh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Nj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fC{}class Pn extends fC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ij(e,t,r):t==="array-contains"?new Pj(e,r):t==="in"?new Oj(e,r):t==="not-in"?new Dj(e,r):t==="array-contains-any"?new Mj(e,r):new Pn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Rj(e,r):new kj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Su(t,this.value)):t!==null&&jo(this.value)===jo(t)&&this.matchesComparison(Su(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends fC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ri(e,t)}matches(e){return mC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mC(n){return n.op==="and"}function pC(n){return Cj(n)&&mC(n)}function Cj(n){for(const e of n.filters)if(e instanceof ri)return!1;return!0}function Ab(n){if(n instanceof Pn)return n.field.canonicalString()+n.op.toString()+Nu(n.value);if(pC(n))return n.filters.map((e=>Ab(e))).join(",");{const e=n.filters.map((t=>Ab(t))).join(",");return`${n.op}(${e})`}}function gC(n,e){return n instanceof Pn?(function(r,i){return i instanceof Pn&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)})(n,e):n instanceof ri?(function(r,i){return i instanceof ri&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,c,d)=>o&&gC(c,i.filters[d])),!0):!1})(n,e):void Ve(19439)}function yC(n){return n instanceof Pn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nu(t.value)}`})(n):n instanceof ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(yC).join(" ,")+"}"})(n):"Filter"}class Ij extends Pn{constructor(e,t,r){super(e,t,r),this.key=De.fromName(r.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class Rj extends Pn{constructor(e,t){super(e,"in",t),this.keys=wC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kj extends Pn{constructor(e,t){super(e,"not-in",t),this.keys=wC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wC(n,e){return(e.arrayValue?.values||[]).map((t=>De.fromName(t.referenceValue)))}class Pj extends Pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pv(t)&&Lh(t.arrayValue,this.value)}}class Oj extends Pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lh(this.value.arrayValue,t)}}class Dj extends Pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lh(this.value.arrayValue,t)}}class Mj extends Pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Lh(this.value.arrayValue,r)))}}class Lj{constructor(e,t=null,r=[],i=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=d,this.Te=null}}function N1(n,e=null,t=[],r=[],i=null,o=null,c=null){return new Lj(n,e,t,r,i,o,c)}function Ov(n){const e=Qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ab(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Rg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Nu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Nu(r))).join(",")),e.Te=t}return e.Te}function Dv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Nj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!S1(n.startAt,e.startAt)&&S1(n.endAt,e.endAt)}function Eb(n){return De.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Wu{constructor(e,t=null,r=[],i=[],o=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Bj(n,e,t,r,i,o,c,d){return new Wu(n,e,t,r,i,o,c,d)}function Mv(n){return new Wu(n)}function C1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jj(n){return De.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function bC(n){return n.collectionGroup!==null}function _h(n){const e=Qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Fn(rr.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Bh(o,r))})),t.has(rr.keyField().canonicalString())||e.Ie.push(new Bh(rr.keyField(),r))}return e.Ie}function Di(n){const e=Qe(n);return e.Ee||(e.Ee=Uj(e,_h(n))),e.Ee}function Uj(n,e){if(n.limitType==="F")return N1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Bh(i.field,o)}));const t=n.endAt?new Wp(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wp(n.startAt.position,n.startAt.inclusive):null;return N1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _b(n,e){const t=n.filters.concat([e]);return new Wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vj(n,e){const t=n.explicitOrderBy.concat([e]);return new Wu(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Tb(n,e,t){return new Wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pg(n,e){return Dv(Di(n),Di(e))&&n.limitType===e.limitType}function vC(n){return`${Ov(Di(n))}|lt:${n.limitType}`}function iu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>yC(i))).join(", ")}]`),Rg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Nu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Nu(i))).join(",")),`Target(${r})`})(Di(n))}; limitType=${n.limitType})`}function Og(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):De.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of _h(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,h){const m=T1(c,d,h);return c.inclusive?m<=0:m<0})(r.startAt,_h(r),i)||r.endAt&&!(function(c,d,h){const m=T1(c,d,h);return c.inclusive?m>=0:m>0})(r.endAt,_h(r),i))})(n,e)}function Fj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xC(n){return(e,t)=>{let r=!1;for(const i of _h(n)){const o=Hj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Hj(n,e,t){const r=n.field.isKeyField()?De.comparator(e.key,t.key):(function(o,c,d){const h=c.data.field(o),m=d.data.field(o);return h!==null&&m!==null?Su(h,m):Ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:n.dir})}}class lc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return sC(this.inner)}size(){return this.innerSize}}const zj=new sn(De.comparator);function Ra(){return zj}const AC=new sn(De.comparator);function gh(...n){let e=AC;for(const t of n)e=e.insert(t.key,t);return e}function EC(n){let e=AC;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Bl(){return Th()}function _C(){return Th()}function Th(){return new lc((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Gj=new sn(De.comparator),qj=new Fn(De.comparator);function ct(...n){let e=qj;for(const t of n)e=e.add(t);return e}const Qj=new Fn(lt);function Kj(){return Qj}function Lv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kp(e)?"-0":e}}function TC(n){return{integerValue:""+n}}function SC(n,e){return wj(e)?TC(e):Lv(n,e)}class Dg{constructor(){this._=void 0}}function $j(n,e,t){return n instanceof jh?(function(i,o){const c={fields:{[oC]:{stringValue:aC},[cC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kv(o)&&(o=kg(o)),o&&(c.fields[lC]=o),{mapValue:c}})(t,e):n instanceof Uh?CC(n,e):n instanceof Vh?IC(n,e):(function(i,o){const c=NC(i,o),d=I1(c)+I1(i.Ae);return xb(c)&&xb(i.Ae)?TC(d):Lv(i.serializer,d)})(n,e)}function Yj(n,e,t){return n instanceof Uh?CC(n,e):n instanceof Vh?IC(n,e):t}function NC(n,e){return n instanceof Fh?(function(r){return xb(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class jh extends Dg{}class Uh extends Dg{constructor(e){super(),this.elements=e}}function CC(n,e){const t=RC(e);for(const r of n.elements)t.some((i=>Bi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Vh extends Dg{constructor(e){super(),this.elements=e}}function IC(n,e){let t=RC(e);for(const r of n.elements)t=t.filter((i=>!Bi(i,r)));return{arrayValue:{values:t}}}class Fh extends Dg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function I1(n){return wn(n.integerValue||n.doubleValue)}function RC(n){return Pv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class kC{constructor(e,t){this.field=e,this.transform=t}}function Wj(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Uh&&i instanceof Uh||r instanceof Vh&&i instanceof Vh?Tu(r.elements,i.elements,Bi):r instanceof Fh&&i instanceof Fh?Bi(r.Ae,i.Ae):r instanceof jh&&i instanceof jh})(n.transform,e.transform)}class Jj{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Np(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mg{}function PC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bv(n.key,Fr.none()):new of(n.key,n.data,Fr.none());{const t=n.data,r=jr.empty();let i=new Fn(rr.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new $o(n.key,r,new rs(i.toArray()),Fr.none())}}function Xj(n,e,t){n instanceof of?(function(i,o,c){const d=i.value.clone(),h=k1(i.fieldTransforms,o,c.transformResults);d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof $o?(function(i,o,c){if(!Np(i.precondition,o))return void o.convertToUnknownDocument(c.version);const d=k1(i.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(OC(i)),h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Sh(n,e,t,r){return n instanceof of?(function(o,c,d,h){if(!Np(o.precondition,c))return d;const m=o.value.clone(),w=P1(o.fieldTransforms,h,c);return m.setAll(w),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof $o?(function(o,c,d,h){if(!Np(o.precondition,c))return d;const m=P1(o.fieldTransforms,h,c),w=c.data;return w.setAll(OC(o)),w.setAll(m),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(o,c,d){return Np(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function Zj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=NC(r.transform,i||null);o!=null&&(t===null&&(t=jr.empty()),t.set(r.field,o))}return t||null}function R1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tu(r,i,((o,c)=>Wj(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class of extends Mg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $o extends Mg{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function OC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function k1(n,e,t){const r=new Map;Tt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,d=e.data.field(o.field);r.set(o.field,Yj(c,d,t[i]))}return r}function P1(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,$j(o,c,e))}return r}class Bv extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eU extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tU{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Xj(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Sh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_C();return this.mutations.forEach((i=>{const o=e.get(i.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=t.has(i.key)?null:d;const h=PC(c,d);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ct())}isEqual(e){return this.batchId===e.batchId&&Tu(this.mutations,e.mutations,((t,r)=>R1(t,r)))&&Tu(this.baseMutations,e.baseMutations,((t,r)=>R1(t,r)))}}class jv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Gj})();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new jv(e,t,r,i)}}class nU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class rU{constructor(e,t){this.count=e,this.unchangedNames=t}}var kn,mt;function sU(n){switch(n){case ue.OK:return Ve(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ve(15467,{code:n})}}function DC(n){if(n===void 0)return Ia("GRPC error has no .code"),ue.UNKNOWN;switch(n){case kn.OK:return ue.OK;case kn.CANCELLED:return ue.CANCELLED;case kn.UNKNOWN:return ue.UNKNOWN;case kn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case kn.INTERNAL:return ue.INTERNAL;case kn.UNAVAILABLE:return ue.UNAVAILABLE;case kn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case kn.NOT_FOUND:return ue.NOT_FOUND;case kn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case kn.ABORTED:return ue.ABORTED;case kn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case kn.DATA_LOSS:return ue.DATA_LOSS;default:return Ve(39323,{code:n})}}(mt=kn||(kn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";function iU(){return new TextEncoder}const aU=new Po([4294967295,4294967295],0);function O1(n){const e=iU().encode(n),t=new KN;return t.update(e),new Uint8Array(t.digest())}function D1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Po([t,r],0),new Po([i,o],0)]}class Uv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yh(`Invalid padding: ${t}`);if(r<0)throw new yh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new yh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Po.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Po.fromNumber(r)));return i.compare(aU)===1&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=O1(e),[r,i]=D1(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Uv(o,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=O1(e),[r,i]=D1(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Lg{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,lf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lg(He.min(),i,new sn(lt),Ra(),ct())}}class lf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new lf(r,t,ct(),ct(),ct())}}class Cp{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}}class MC{constructor(e,t){this.targetId=e,this.Ce=t}}class LC{constructor(e,t,r=ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class M1{constructor(){this.ve=0,this.Fe=L1(),this.Me=ir.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),t=ct(),r=ct();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ve(38017,{changeType:o})}})),new lf(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=L1()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class oU{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ra(),this.He=ip(),this.Je=ip(),this.Ze=new sn(lt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Eb(o))if(r===0){const c=new De(o.path);this.et(t,c,hr.newNoDocument(c,He.min()))}else Tt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let c,d;try{c=Bo(r).toUint8Array()}catch(h){if(h instanceof iC)return Xl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new Uv(c,i,o)}catch(h){return Xl(h instanceof yh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const d=this.ot(c);if(d){if(o.current&&Eb(d.target)){const h=new De(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,hr.newNoDocument(h,e))}o.Be&&(t.set(c,o.ke()),o.Ke())}}));let r=ct();this.Je.forEach(((o,c)=>{let d=!0;c.forEachWhile((h=>{const m=this.ot(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const i=new Lg(e,t,this.Ze,this.je,r);return this.je=Ra(),this.He=ip(),this.Je=ip(),this.Ze=new sn(lt),i}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new M1,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Fn(lt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Fn(lt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new M1),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ip(){return new sn(De.comparator)}function L1(){return new sn(De.comparator)}const lU={asc:"ASCENDING",desc:"DESCENDING"},cU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uU={and:"AND",or:"OR"};class dU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sb(n,e){return n.useProto3Json||Rg(e)?e:{value:e}}function Jp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hU(n,e){return Jp(n,e.toTimestamp())}function Mi(n){return Tt(!!n,49232),He.fromTimestamp((function(t){const r=Lo(t);return new Gt(r.seconds,r.nanos)})(n))}function Vv(n,e){return Nb(n,e).canonicalString()}function Nb(n,e){const t=(function(i){return new zt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jC(n){const e=zt.fromString(n);return Tt(zC(e),10190,{key:e.toString()}),e}function Cb(n,e){return Vv(n.databaseId,e.path)}function Cw(n,e){const t=jC(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new De(VC(t))}function UC(n,e){return Vv(n.databaseId,e)}function fU(n){const e=jC(n);return e.length===4?zt.emptyPath():VC(e)}function Ib(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VC(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function B1(n,e,t){return{name:Cb(n,e),fields:t.value.mapValue.fields}}function mU(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ve(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(m,w){return m.useProto3Json?(Tt(w===void 0||typeof w=="string",58123),ir.fromBase64String(w||"")):(Tt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),ir.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const w=m.code===void 0?ue.UNKNOWN:DC(m.code);return new xe(w,m.message||"")})(c);t=new LC(r,i,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cw(n,r.document.name),o=Mi(r.document.updateTime),c=r.document.createTime?Mi(r.document.createTime):He.min(),d=new jr({mapValue:{fields:r.document.fields}}),h=hr.newFoundDocument(i,o,c,d),m=r.targetIds||[],w=r.removedTargetIds||[];t=new Cp(m,w,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Cw(n,r.document),o=r.readTime?Mi(r.readTime):He.min(),c=hr.newNoDocument(i,o),d=r.removedTargetIds||[];t=new Cp([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Cw(n,r.document),o=r.removedTargetIds||[];t=new Cp([],o,i,null)}else{if(!("filter"in e))return Ve(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new rU(i,o),d=r.targetId;t=new MC(d,c)}}return t}function pU(n,e){let t;if(e instanceof of)t={update:B1(n,e.key,e.value)};else if(e instanceof Bv)t={delete:Cb(n,e.key)};else if(e instanceof $o)t={update:B1(n,e.key,e.data),updateMask:_U(e.fieldMask)};else{if(!(e instanceof eU))return Ve(16599,{dt:e.type});t={verify:Cb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,c){const d=c.transform;if(d instanceof jh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Uh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Vh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Fh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ve(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:hU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve(27497)})(n,e.precondition)),t}function gU(n,e){return n&&n.length>0?(Tt(e!==void 0,14353),n.map((t=>(function(i,o){let c=i.updateTime?Mi(i.updateTime):Mi(o);return c.isEqual(He.min())&&(c=Mi(o)),new Jj(c,i.transformResults||[])})(t,e)))):[]}function yU(n,e){return{documents:[UC(n,e.path)]}}function wU(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=UC(n,i);const o=(function(m){if(m.length!==0)return HC(ri.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(m){if(m.length!==0)return m.map((w=>(function(x){return{field:au(x.field),direction:xU(x.dir)}})(w)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Sb(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function bU(n){let e=fU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(r===1,65062);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let o=[];t.where&&(o=(function(b){const x=FC(b);return x instanceof ri&&pC(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((x=>(function(k){return new Bh(ou(k.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let x;return x=typeof b=="object"?b.value:b,Rg(x)?null:x})(t.limit));let h=null;t.startAt&&(h=(function(b){const x=!!b.before,S=b.values||[];return new Wp(S,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(b){const x=!b.before,S=b.values||[];return new Wp(S,x)})(t.endAt)),Bj(e,i,c,o,d,"F",h,m)}function vU(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ou(t.unaryFilter.field);return Pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ou(t.unaryFilter.field);return Pn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ou(t.unaryFilter.field);return Pn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ou(t.unaryFilter.field);return Pn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pn.create(ou(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ri.create(t.compositeFilter.filters.map((r=>FC(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(t.compositeFilter.op))})(n):Ve(30097,{filter:n})}function xU(n){return lU[n]}function AU(n){return cU[n]}function EU(n){return uU[n]}function au(n){return{fieldPath:n.canonicalString()}}function ou(n){return rr.fromServerFormat(n.fieldPath)}function HC(n){return n instanceof Pn?(function(t){if(t.op==="=="){if(_1(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NAN"}};if(E1(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_1(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NOT_NAN"}};if(E1(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:au(t.field),op:AU(t.op),value:t.value}}})(n):n instanceof ri?(function(t){const r=t.getFilters().map((i=>HC(i)));return r.length===1?r[0]:{compositeFilter:{op:EU(t.op),filters:r}}})(n):Ve(54877,{filter:n})}function _U(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function GC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class To{constructor(e,t,r,i,o=He.min(),c=He.min(),d=ir.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new To(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class TU{constructor(e){this.yt=e}}function SU(n){const e=bU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tb(e,e.limit,"L"):e}class NU{constructor(){this.Sn=new CU}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Mo.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class CU{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fn(zt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fn(zt.comparator)).toArray()}}const j1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qC=41943040;class Mr{static withCacheSize(e){return new Mr(e,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(qC,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);class Cu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Cu(0)}static ar(){return new Cu(-1)}}const U1="LruGarbageCollector",IU=1048576;function V1([n,e],[t,r]){const i=lt(n,t);return i===0?lt(e,r):i}class RU{constructor(e){this.Pr=e,this.buffer=new Fn(V1),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();V1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){_e(U1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yu(t)?_e(U1,"Ignoring IndexedDB error during garbage collection: ",t):await $u(t)}await this.Ar(3e5)}))}}class PU{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(Ig.ce);const r=new RU(t);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(j1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j1):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,c,d,h,m;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,c=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(r=b,d=Date.now(),this.removeTargets(e,r,t)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(m=Date.now(),su()<=ot.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${b} documents in `+(m-h)+`ms
Total Duration: ${m-w}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:b}))))}}function OU(n,e){return new PU(n,e)}class DU{constructor(){this.changes=new lc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class LU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Sh(r.mutation,i,rs.empty(),Gt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ct()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ct()){const i=Bl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let c=gh();return o.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Bl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ct())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let o=Ra();const c=Th(),d=(function(){return Th()})();return t.forEach(((h,m)=>{const w=r.get(m.key);i.has(m.key)&&(w===void 0||w.mutation instanceof $o)?o=o.insert(m.key,m):w!==void 0?(c.set(m.key,w.mutation.getFieldMask()),Sh(w.mutation,m,w.mutation.getFieldMask(),Gt.now())):c.set(m.key,rs.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((m,w)=>c.set(m,w))),t.forEach(((m,w)=>d.set(m,new MU(w,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Th();let i=new sn(((c,d)=>c-d)),o=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((h=>{const m=t.get(h);if(m===null)return;let w=r.get(h)||rs.empty();w=d.applyToLocalView(m,w),r.set(h,w);const b=(i.get(d.batchId)||ct()).add(h);i=i.insert(d.batchId,b)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),m=h.key,w=h.value,b=_C();w.forEach((x=>{if(!o.has(x)){const S=PC(t.get(x),r.get(x));S!==null&&b.set(x,S),o=o.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,b))}return fe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return jj(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):fe.resolve(Bl());let d=Oh,h=o;return c.next((m=>fe.forEach(m,((w,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(w)?fe.resolve():this.remoteDocumentCache.getEntry(e,w).next((x=>{h=h.insert(w,x)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,h,m,ct()))).next((w=>({batchId:d,changes:EC(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((r=>{let i=gh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let c=gh();return this.indexManager.getCollectionParents(e,o).next((d=>fe.forEach(d,(h=>{const m=(function(b,x){return new Wu(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((w=>{w.forEach(((b,x)=>{c=c.insert(b,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((c=>{o.forEach(((h,m)=>{const w=m.getKey();c.get(w)===null&&(c=c.insert(w,hr.newInvalidDocument(w)))}));let d=gh();return c.forEach(((h,m)=>{const w=o.get(h);w!==void 0&&Sh(w.mutation,m,rs.empty(),Gt.now()),Og(t,m)&&(d=d.insert(h,m))})),d}))}}class BU{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Mi(i.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:SU(i.bundledQuery),readTime:Mi(i.readTime)}})(t)),fe.resolve()}}class jU{constructor(){this.overlays=new sn(De.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Bl();return fe.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.bt(e,t,o)})),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=Bl(),o=t.length+1,c=new De(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new sn(((m,w)=>m-w));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let w=o.get(m.largestBatchId);w===null&&(w=Bl(),o=o.insert(m.largestBatchId,w)),w.set(m.getKey(),m)}}const d=Bl(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((m,w)=>d.set(m,w))),!(d.size()>=i)););return fe.resolve(d)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new nU(t,r));let o=this.Lr.get(t);o===void 0&&(o=ct(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}}class UU{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class Fv{constructor(){this.kr=new Fn(qn.Kr),this.qr=new Fn(qn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new qn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new qn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new De(new zt([])),r=new qn(t,e),i=new qn(t,e+1),o=[];return this.qr.forEachInRange([r,i],(c=>{this.Wr(c),o.push(c.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new De(new zt([])),r=new qn(t,e),i=new qn(t,e+1);let o=ct();return this.qr.forEachInRange([r,i],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new qn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return De.comparator(e.key,t.key)||lt(e.Hr,t.Hr)}static Ur(e,t){return lt(e.Hr,t.Hr)||De.comparator(e.key,t.key)}}class VU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Fn(qn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new tU(o,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Jr=this.Jr.add(new qn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),o=i<0?0:i;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Rv:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qn(t,0),i=new qn(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],(c=>{const d=this.Zr(c.Hr);o.push(d)})),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(lt);return t.forEach((i=>{const o=new qn(i,0),c=new qn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,c],(d=>{r=r.add(d.Hr)}))})),fe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;De.isDocumentKey(o)||(o=o.child(""));const c=new qn(new De(o),0);let d=new Fn(lt);return this.Jr.forEachWhile((h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(h.Hr)),!0)}),c),fe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Tt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return fe.forEach(t.mutations,(i=>{const o=new qn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new qn(t,0),i=this.Jr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class FU{constructor(e){this.ti=e,this.docs=(function(){return new sn(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=Ra();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():hr.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ra();const c=t.path,d=new De(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||mj(fj(w),r)<=0||(i.has(w.key)||Og(t,w))&&(o=o.insert(w.key,w.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ve(9500)}ni(e,t){return fe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new HU(this)}getSize(e){return fe.resolve(this.size)}}class HU extends DU{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class zU{constructor(e){this.persistence=e,this.ri=new lc((t=>Ov(t)),Dv),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.ii=0,this.si=new Fv,this.targetCount=0,this.oi=Cu._r()}forEachTarget(e,t){return this.ri.forEach(((r,i)=>t(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Cu(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ri.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),fe.waitFor(o).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((c=>{o.push(i.markPotentiallyOrphaned(e,c))})),fe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}class QC{constructor(e,t){this._i={},this.overlays={},this.ai=new Ig(0),this.ui=!1,this.ui=!0,this.ci=new UU,this.referenceDelegate=e(this),this.li=new zU(this),this.indexManager=new NU,this.remoteDocumentCache=(function(i){return new FU(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new TU(t),this.Pi=new BU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new VU(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const i=new GU(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((o=>this.referenceDelegate.Ii(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ei(e,t){return fe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class GU extends gj{constructor(e){super(),this.currentSequenceNumber=e}}class Hv{constructor(e){this.persistence=e,this.Ri=new Fv,this.Ai=null}static Vi(e){return new Hv(e)}get di(){if(this.Ai)return this.Ai;throw Ve(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.di.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(r=>{const i=De.fromPath(r);return this.mi(e,i).next((o=>{o||t.removeEntry(i,He.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Xp{constructor(e,t){this.persistence=e,this.fi=new lc((r=>bj(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=OU(this,t)}static Vi(e,t){return new Xp(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((o=>o?fe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(r++,o.removeEntry(c,He.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tp(e.data.value)),t}wr(e,t,r){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class zv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=ct(),i=ct();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new zv(e,t.fromCache,r,i)}}class qU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QU{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return v4()?8:yj(fr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.gs(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ps(e,t,i,r).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new qU;return this.ys(e,t,c).next((d=>{if(o.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>o.result))}ws(e,t,r,i){return r.documentReadCount<this.Vs?(su()<=ot.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",iu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(su()<=ot.DEBUG&&_e("QueryEngine","Query:",iu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(su()<=ot.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",iu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(t))):fe.resolve())}gs(e,t){if(C1(t))return fe.resolve(null);let r=Di(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Tb(t,null,"F"),r=Di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const c=ct(...o);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((h=>{const m=this.bs(t,d);return this.Ss(t,m,c,h.readTime)?this.gs(e,Tb(t,null,"F")):this.Ds(e,m,t,h)}))))})))))}ps(e,t,r,i){return C1(t)||i.isEqual(He.min())?fe.resolve(null):this.fs.getDocuments(e,r).next((o=>{const c=this.bs(t,o);return this.Ss(t,c,r,i)?fe.resolve(null):(su()<=ot.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),iu(t)),this.Ds(e,c,t,hj(i,Oh)).next((d=>d)))}))}bs(e,t){let r=new Fn(xC(e));return t.forEach(((i,o)=>{Og(e,o)&&(r=r.add(o))})),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return su()<=ot.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",iu(t)),this.fs.getDocumentsMatchingQuery(e,t,Mo.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const Gv="LocalStore",KU=3e8;class $U{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new sn(lt),this.Fs=new lc((o=>Ov(o)),Dv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LU(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function YU(n,e,t,r){return new $U(n,e,t,r)}async function KC(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const c=[],d=[];let h=ct();for(const m of i){c.push(m.batchId);for(const w of m.mutations)h=h.add(w.key)}for(const m of o){d.push(m.batchId);for(const w of m.mutations)h=h.add(w.key)}return t.localDocuments.getDocuments(r,h).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function WU(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,h,m,w){const b=m.batch,x=b.keys();let S=fe.resolve();return x.forEach((k=>{S=S.next((()=>w.getEntry(h,k))).next((N=>{const C=m.docVersions.get(k);Tt(C!==null,48541),N.version.compareTo(C)<0&&(b.applyToRemoteDocument(N,m),N.isValidDocument()&&(N.setReadTime(m.commitVersion),w.addEntry(N)))}))})),S.next((()=>d.mutationQueue.removeMutationBatch(h,b)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let h=ct();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(h=h.add(d.batch.mutations[m].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function $C(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function JU(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const d=[];e.targetChanges.forEach(((w,b)=>{const x=i.get(b);if(!x)return;d.push(t.li.removeMatchingKeys(o,w.removedDocuments,b).next((()=>t.li.addMatchingKeys(o,w.addedDocuments,b))));let S=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?S=S.withResumeToken(ir.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):w.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(w.resumeToken,r)),i=i.insert(b,S),(function(N,C,D){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=KU?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(x,S,w)&&d.push(t.li.updateTargetData(o,S))}));let h=Ra(),m=ct();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,w))})),d.push(XU(o,c,e.documentUpdates).next((w=>{h=w.Bs,m=w.Ls}))),!r.isEqual(He.min())){const w=t.li.getLastRemoteSnapshotVersion(o).next((b=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(w)}return fe.waitFor(d).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,m))).next((()=>h))})).then((o=>(t.vs=i,o)))}function XU(n,e,t){let r=ct(),i=ct();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let c=Ra();return t.forEach(((d,h)=>{const m=o.get(d);h.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(He.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):_e(Gv,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",h.version)})),{Bs:c,Ls:i}}))}function ZU(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Rv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function e6(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.li.getTargetData(r,e).next((o=>o?(i=o,fe.resolve(i)):t.li.allocateTargetId(r).next((c=>(i=new To(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Rb(n,e,t){const r=Qe(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Yu(c))throw c;_e(Gv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function F1(n,e,t){const r=Qe(n);let i=He.min(),o=ct();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,m,w){const b=Qe(h),x=b.Fs.get(w);return x!==void 0?fe.resolve(b.vs.get(x)):b.li.getTargetData(m,w)})(r,c,Di(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,d.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?i:He.min(),t?o:ct()))).next((d=>(t6(r,Fj(e),d),{documents:d,ks:o})))))}function t6(n,e,t){let r=n.Ms.get(e)||He.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Ms.set(e,r)}class H1{constructor(){this.activeTargetIds=Kj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n6{constructor(){this.vo=new H1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new H1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class r6{Mo(e){}shutdown(){}}const z1="ConnectivityMonitor";class G1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){_e(z1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){_e(z1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ap=null;function kb(){return ap===null?ap=(function(){return 268435456+Math.round(2147483648*Math.random())})():ap++,"0x"+ap.toString(16)}const Iw="RestConnection",s6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class i6{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===$p?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){const c=kb(),d=this.Qo(e,t.toUriEncodedString());_e(Iw,`Sending RPC '${e}' ${c}:`,d,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,o);const{host:m}=new URL(d),w=Gu(m);return this.zo(e,d,h,r,w).then((b=>(_e(Iw,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Xl(Iw,`RPC '${e}' ${c} failed with error: `,b,"url: ",d,"request:",r),b}))}jo(e,t,r,i,o,c){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ku})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}Qo(e,t){const r=s6[e];let i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class a6{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ur="WebChannelConnection",ch=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class pu extends i6{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!pu.c_){const e=JN();ch(e,WN.STAT_EVENT,(t=>{t.stat===wb.PROXY?_e(ur,"STAT_EVENT: detected buffering proxy"):t.stat===wb.NOPROXY&&_e(ur,"STAT_EVENT: detected no buffering proxy")})),pu.c_=!0}}zo(e,t,r,i,o){const c=kb();return new Promise(((d,h)=>{const m=new $N;m.setWithCredentials(!0),m.listenOnce(YN.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case _p.NO_ERROR:const b=m.getResponseJson();_e(ur,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),d(b);break;case _p.TIMEOUT:_e(ur,`RPC '${e}' ${c} timed out`),h(new xe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case _p.HTTP_ERROR:const x=m.getStatus();if(_e(ur,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const k=S?.error;if(k&&k.status&&k.message){const N=(function(D){const F=D.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(F)>=0?F:ue.UNKNOWN})(k.status);h(new xe(N,k.message))}else h(new xe(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new xe(ue.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{_e(ur,`RPC '${e}' ${c} completed.`)}}));const w=JSON.stringify(i);_e(ur,`RPC '${e}' ${c} sending request:`,i),m.send(t,"POST",w,r,15)}))}T_(e,t,r){const i=kb(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");_e(ur,`Creating RPC '${e}' stream ${i}: ${m}`,d);const w=c.createWebChannel(m,d);this.I_(w);let b=!1,x=!1;const S=new a6({Ho:k=>{x?_e(ur,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(b||(_e(ur,`Opening RPC '${e}' stream ${i} transport.`),w.open(),b=!0),_e(ur,`RPC '${e}' stream ${i} sending:`,k),w.send(k))},Jo:()=>w.close()});return ch(w,ph.EventType.OPEN,(()=>{x||(_e(ur,`RPC '${e}' stream ${i} transport opened.`),S.i_())})),ch(w,ph.EventType.CLOSE,(()=>{x||(x=!0,_e(ur,`RPC '${e}' stream ${i} transport closed`),S.o_(),this.E_(w))})),ch(w,ph.EventType.ERROR,(k=>{x||(x=!0,Xl(ur,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),S.o_(new xe(ue.UNAVAILABLE,"The operation could not be completed")))})),ch(w,ph.EventType.MESSAGE,(k=>{if(!x){const N=k.data[0];Tt(!!N,16349);const C=N,D=C?.error||C[0]?.error;if(D){_e(ur,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let U=(function(te){const T=kn[te];if(T!==void 0)return DC(T)})(F),$=D.message;F==="NOT_FOUND"&&$.includes("database")&&$.includes("does not exist")&&$.includes(this.databaseId.database)&&Xl(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),U===void 0&&(U=ue.INTERNAL,$="Unknown error status: "+F+" with message "+D.message),x=!0,S.o_(new xe(U,$)),w.close()}else _e(ur,`RPC '${e}' stream ${i} received:`,N),S.__(N)}})),pu.u_(),setTimeout((()=>{S.s_()}),0),S}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return XN()}}function o6(n){return new pu(n)}function Rw(){return typeof document<"u"?document:null}function Bg(n){return new dU(n,!0)}pu.c_=!1;class YC{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const q1="PersistentStream";class WC{constructor(e,t,r,i,o,c,d,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ia(t.toString()),Ia("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new xe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(q1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(_e(q1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class l6 extends WC{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=mU(this.serializer,e),r=(function(o){if(!("targetChange"in o))return He.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?He.min():c.readTime?Mi(c.readTime):He.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Ib(this.serializer),t.addTarget=(function(o,c){let d;const h=c.target;if(d=Eb(h)?{documents:yU(o,h)}:{query:wU(o,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=BC(o,c.resumeToken);const m=Sb(o,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(He.min())>0){d.readTime=Jp(o,c.snapshotVersion.toTimestamp());const m=Sb(o,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=vU(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Ib(this.serializer),t.removeTarget=e,this.K_(t)}}class c6 extends WC{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=gU(e.writeResults,e.commitTime),r=Mi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Ib(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>pU(this.serializer,r)))};this.K_(t)}}class u6{}class d6 extends u6{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Wo(e,Nb(t,r),i,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ue.UNKNOWN,o.toString())}))}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Nb(t,r),i,c,d,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function h6(n,e,t,r){return new d6(n,e,t,r)}class f6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ia(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zl="RemoteStore";class m6{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{cc(this)&&(_e(Zl,"Restarting streams for network reachability change."),await(async function(h){const m=Qe(h);m.Ea.add(4),await cf(m),m.Va.set("Unknown"),m.Ea.delete(4),await jg(m)})(this))}))})),this.Va=new f6(r,i)}}async function jg(n){if(cc(n))for(const e of n.Ra)await e(!0)}async function cf(n){for(const e of n.Ra)await e(!1)}function JC(n,e){const t=Qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$v(t)?Kv(t):Ju(t).O_()&&Qv(t,e))}function qv(n,e){const t=Qe(n),r=Ju(t);t.Ia.delete(e),r.O_()&&XC(t,e),t.Ia.size===0&&(r.O_()?r.L_():cc(t)&&t.Va.set("Unknown"))}function Qv(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ju(n).Z_(e)}function XC(n,e){n.da.$e(e),Ju(n).X_(e)}function Kv(n){n.da=new oU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ju(n).start(),n.Va.ua()}function $v(n){return cc(n)&&!Ju(n).x_()&&n.Ia.size>0}function cc(n){return Qe(n).Ea.size===0}function ZC(n){n.da=void 0}async function p6(n){n.Va.set("Online")}async function g6(n){n.Ia.forEach(((e,t)=>{Qv(n,e)}))}async function y6(n,e){ZC(n),$v(n)?(n.Va.ha(e),Kv(n)):n.Va.set("Unknown")}async function w6(n,e,t){if(n.Va.set("Online"),e instanceof LC&&e.state===2&&e.cause)try{await(async function(i,o){const c=o.cause;for(const d of o.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ia.delete(d),i.da.removeTarget(d))})(n,e)}catch(r){_e(Zl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zp(n,r)}else if(e instanceof Cp?n.da.Xe(e):e instanceof MC?n.da.st(e):n.da.tt(e),!t.isEqual(He.min()))try{const r=await $C(n.localStore);t.compareTo(r)>=0&&await(function(o,c){const d=o.da.Tt(c);return d.targetChanges.forEach(((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const w=o.Ia.get(m);w&&o.Ia.set(m,w.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,m)=>{const w=o.Ia.get(h);if(!w)return;o.Ia.set(h,w.withResumeToken(ir.EMPTY_BYTE_STRING,w.snapshotVersion)),XC(o,h);const b=new To(w.target,h,m,w.sequenceNumber);Qv(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){_e(Zl,"Failed to raise snapshot:",r),await Zp(n,r)}}async function Zp(n,e,t){if(!Yu(e))throw e;n.Ea.add(1),await cf(n),n.Va.set("Offline"),t||(t=()=>$C(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{_e(Zl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await jg(n)}))}function eI(n,e){return e().catch((t=>Zp(n,t,e)))}async function Ug(n){const e=Qe(n),t=Uo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Rv;for(;b6(e);)try{const i=await ZU(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,v6(e,i)}catch(i){await Zp(e,i)}tI(e)&&nI(e)}function b6(n){return cc(n)&&n.Ta.length<10}function v6(n,e){n.Ta.push(e);const t=Uo(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function tI(n){return cc(n)&&!Uo(n).x_()&&n.Ta.length>0}function nI(n){Uo(n).start()}async function x6(n){Uo(n).ra()}async function A6(n){const e=Uo(n);for(const t of n.Ta)e.ea(t.mutations)}async function E6(n,e,t){const r=n.Ta.shift(),i=jv.from(r,e,t);await eI(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Ug(n)}async function _6(n,e){e&&Uo(n).Y_&&await(async function(r,i){if((function(c){return sU(c)&&c!==ue.ABORTED})(i.code)){const o=r.Ta.shift();Uo(r).B_(),await eI(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Ug(r)}})(n,e),tI(n)&&nI(n)}async function Q1(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),_e(Zl,"RemoteStore received new credentials");const r=cc(t);t.Ea.add(3),await cf(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jg(t)}async function T6(n,e){const t=Qe(n);e?(t.Ea.delete(2),await jg(t)):e||(t.Ea.add(2),await cf(t),t.Va.set("Unknown"))}function Ju(n){return n.ma||(n.ma=(function(t,r,i){const o=Qe(t);return o.sa(),new l6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:p6.bind(null,n),Yo:g6.bind(null,n),t_:y6.bind(null,n),J_:w6.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),$v(n)?Kv(n):n.Va.set("Unknown")):(await n.ma.stop(),ZC(n))}))),n.ma}function Uo(n){return n.fa||(n.fa=(function(t,r,i){const o=Qe(t);return o.sa(),new c6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:x6.bind(null,n),t_:_6.bind(null,n),ta:A6.bind(null,n),na:E6.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Ug(n)):(await n.fa.stop(),n.Ta.length>0&&(_e(Zl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Yv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,d=new Yv(e,t,c,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wv(n,e){if(Ia("AsyncQueue",`${e}: ${n}`),Yu(n))return new xe(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class gu{static emptySet(e){return new gu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||De.comparator(t.key,r.key):(t,r)=>De.comparator(t.key,r.key),this.keyedMap=gh(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new gu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class K1{constructor(){this.ga=new sn(De.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ve(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Iu{constructor(e,t,r,i,o,c,d,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Iu(e,t,gu.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class S6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class N6{constructor(){this.queries=$1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Qe(t),o=i.queries;i.queries=$1(),o.forEach(((c,d)=>{for(const h of d.ba)h.onError(r)}))})(this,new xe(ue.ABORTED,"Firestore shutting down"))}}function $1(){return new lc((n=>vC(n)),Pg)}async function rI(n,e){const t=Qe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new S6,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=Wv(c,`Initialization of query '${iu(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Jv(t)}async function sI(n,e){const t=Qe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const c=o.ba.indexOf(e);c>=0&&(o.ba.splice(c,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function C6(n,e){const t=Qe(n);let r=!1;for(const i of e){const o=i.query,c=t.queries.get(o);if(c){for(const d of c.ba)d.Fa(i)&&(r=!0);c.wa=i}}r&&Jv(t)}function I6(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const o of i.ba)o.onError(t);r.queries.delete(e)}function Jv(n){n.Ca.forEach((e=>{e.next()}))}var Pb,Y1;(Y1=Pb||(Pb={})).Ma="default",Y1.Cache="cache";class iI{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Iu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pb.Cache}}class aI{constructor(e){this.key=e}}class oI{constructor(e){this.key=e}}class R6{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ct(),this.mutatedKeys=ct(),this.eu=xC(e),this.tu=new gu(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new K1,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((w,b)=>{const x=i.get(w),S=Og(this.query,b)?b:null,k=!!x&&this.mutatedKeys.has(x.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let C=!1;x&&S?x.data.isEqual(S.data)?k!==N&&(r.track({type:3,doc:S}),C=!0):this.su(x,S)||(r.track({type:2,doc:S}),C=!0,(h&&this.eu(S,h)>0||m&&this.eu(S,m)<0)&&(d=!0)):!x&&S?(r.track({type:0,doc:S}),C=!0):x&&!S&&(r.track({type:1,doc:x}),C=!0,(h||m)&&(d=!0)),C&&(S?(c=c.add(S),o=N?o.add(w):o.delete(w)):(c=c.delete(w),o=o.delete(w)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{tu:c,iu:r,Ss:d,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((w,b)=>(function(S,k){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Vt:C})}};return N(S)-N(k)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,m=h!==this.Xa;return this.Xa=h,c.length!==0||m?{snapshot:new Iu(this.query,e.tu,o,c,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new K1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ct(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new oI(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new aI(r))})),t}cu(e){this.Za=e.ks,this.Ya=ct();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Iu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xv="SyncEngine";class k6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P6{constructor(e){this.key=e,this.hu=!1}}class O6{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new lc((d=>vC(d)),Pg),this.Iu=new Map,this.Eu=new Set,this.Ru=new sn(De.comparator),this.Au=new Map,this.Vu=new Fv,this.du={},this.mu=new Map,this.fu=Cu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function D6(n,e,t=!0){const r=fI(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await lI(r,e,t,!0),i}async function M6(n,e){const t=fI(n);await lI(t,e,!0,!1)}async function lI(n,e,t,r){const i=await e6(n.localStore,Di(e)),o=i.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let d;return r&&(d=await L6(n,e,o,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&JC(n.remoteStore,i),d}async function L6(n,e,t,r,i){n.pu=(b,x,S)=>(async function(N,C,D,F){let U=C.view.ru(D);U.Ss&&(U=await F1(N.localStore,C.query,!1).then((({documents:T})=>C.view.ru(T,U))));const $=F&&F.targetChanges.get(C.targetId),Y=F&&F.targetMismatches.get(C.targetId)!=null,te=C.view.applyChanges(U,N.isPrimaryClient,$,Y);return J1(N,C.targetId,te.au),te.snapshot})(n,b,x,S);const o=await F1(n.localStore,e,!0),c=new R6(e,o.ks),d=c.ru(o.documents),h=lf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=c.applyChanges(d,n.isPrimaryClient,h);J1(n,t,m.au);const w=new k6(e,t,c);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function B6(n,e,t){const r=Qe(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((c=>!Pg(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rb(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&qv(r.remoteStore,i.targetId),Ob(r,i.targetId)})).catch($u)):(Ob(r,i.targetId),await Rb(r.localStore,i.targetId,!0))}async function j6(n,e){const t=Qe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qv(t.remoteStore,r.targetId))}async function U6(n,e,t){const r=Q6(n);try{const i=await(function(c,d){const h=Qe(c),m=Gt.now(),w=d.reduce(((S,k)=>S.add(k.key)),ct());let b,x;return h.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let k=Ra(),N=ct();return h.xs.getEntries(S,w).next((C=>{k=C,k.forEach(((D,F)=>{F.isValidDocument()||(N=N.add(D))}))})).next((()=>h.localDocuments.getOverlayedDocuments(S,k))).next((C=>{b=C;const D=[];for(const F of d){const U=Zj(F,b.get(F.key).overlayedDocument);U!=null&&D.push(new $o(F.key,U,hC(U.value.mapValue),Fr.exists(!0)))}return h.mutationQueue.addMutationBatch(S,m,D,d)})).next((C=>{x=C;const D=C.applyToLocalDocumentSet(b,N);return h.documentOverlayCache.saveOverlays(S,C.batchId,D)}))})).then((()=>({batchId:x.batchId,changes:EC(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,h){let m=c.du[c.currentUser.toKey()];m||(m=new sn(lt)),m=m.insert(d,h),c.du[c.currentUser.toKey()]=m})(r,i.batchId,t),await uf(r,i.changes),await Ug(r.remoteStore)}catch(i){const o=Wv(i,"Failed to persist write");t.reject(o)}}async function cI(n,e){const t=Qe(n);try{const r=await JU(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const c=t.Au.get(o);c&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Tt(c.hu,14607):i.removedDocuments.size>0&&(Tt(c.hu,42227),c.hu=!1))})),await uf(t,r,e)}catch(r){await $u(r)}}function W1(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const h=Qe(c);h.onlineState=d;let m=!1;h.queries.forEach(((w,b)=>{for(const x of b.ba)x.va(d)&&(m=!0)})),m&&Jv(h)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function V6(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new sn(De.comparator);c=c.insert(o,hr.newNoDocument(o,He.min()));const d=ct().add(o),h=new Lg(He.min(),new Map,new sn(lt),c,d);await cI(r,h),r.Ru=r.Ru.remove(o),r.Au.delete(e),Zv(r)}else await Rb(r.localStore,e,!1).then((()=>Ob(r,e,t))).catch($u)}async function F6(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=await WU(t.localStore,e);dI(t,r,null),uI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await uf(t,i)}catch(i){await $u(i)}}async function H6(n,e,t){const r=Qe(n);try{const i=await(function(c,d){const h=Qe(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let w;return h.mutationQueue.lookupMutationBatch(m,d).next((b=>(Tt(b!==null,37113),w=b.keys(),h.mutationQueue.removeMutationBatch(m,b)))).next((()=>h.mutationQueue.performConsistencyCheck(m))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(m,w,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w))).next((()=>h.localDocuments.getDocuments(m,w)))}))})(r.localStore,e);dI(r,e,t),uI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await uf(r,i)}catch(i){await $u(i)}}function uI(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function dI(n,e,t){const r=Qe(n);let i=r.du[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Ob(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||hI(n,r)}))}function hI(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(qv(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Zv(n))}function J1(n,e,t){for(const r of t)r instanceof aI?(n.Vu.addReference(r.key,e),z6(n,r)):r instanceof oI?(_e(Xv,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||hI(n,r.key)):Ve(19791,{wu:r})}function z6(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(_e(Xv,"New document in limbo: "+t),n.Eu.add(r),Zv(n))}function Zv(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new De(zt.fromString(e)),r=n.fu.next();n.Au.set(r,new P6(t)),n.Ru=n.Ru.insert(t,r),JC(n.remoteStore,new To(Di(Mv(t.path)),r,"TargetPurposeLimboResolution",Ig.ce))}}async function uf(n,e,t){const r=Qe(n),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,h)=>{c.push(r.pu(h,e,t).then((m=>{if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,w?"current":"not-current")}if(m){i.push(m);const w=zv.Es(h.targetId,m);o.push(w)}})))})),await Promise.all(c),r.Pu.J_(i),await(async function(h,m){const w=Qe(h);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>fe.forEach(m,(x=>fe.forEach(x.Ts,(S=>w.persistence.referenceDelegate.addReference(b,x.targetId,S))).next((()=>fe.forEach(x.Is,(S=>w.persistence.referenceDelegate.removeReference(b,x.targetId,S)))))))))}catch(b){if(!Yu(b))throw b;_e(Gv,"Failed to update sequence numbers: "+b)}for(const b of m){const x=b.targetId;if(!b.fromCache){const S=w.vs.get(x),k=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(k);w.vs=w.vs.insert(x,N)}}})(r.localStore,o))}async function G6(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){_e(Xv,"User change. New user:",e.toKey());const r=await KC(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((d=>{d.forEach((h=>{h.reject(new xe(ue.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uf(t,r.Ns)}}function q6(n,e){const t=Qe(n),r=t.Au.get(e);if(r&&r.hu)return ct().add(r.key);{let i=ct();const o=t.Iu.get(e);if(!o)return i;for(const c of o){const d=t.Tu.get(c);i=i.unionWith(d.view.nu)}return i}}function fI(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V6.bind(null,e),e.Pu.J_=C6.bind(null,e.eventManager),e.Pu.yu=I6.bind(null,e.eventManager),e}function Q6(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H6.bind(null,e),e}class eg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return YU(this.persistence,new QU,e.initialUser,this.serializer)}Cu(e){return new QC(Hv.Vi,this.serializer)}Du(e){return new n6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eg.provider={build:()=>new eg};class K6 extends eg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Tt(this.persistence.referenceDelegate instanceof Xp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kU(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new QC((r=>Xp.Vi(r,t)),this.serializer)}}class Db{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>W1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G6.bind(null,this.syncEngine),await T6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new N6})()}createDatastore(e){const t=Bg(e.databaseInfo.databaseId),r=o6(e.databaseInfo);return h6(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,c,d){return new m6(r,i,o,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>W1(this.syncEngine,t,0)),(function(){return G1.v()?new G1:new r6})())}createSyncEngine(e,t){return(function(i,o,c,d,h,m,w){const b=new O6(i,o,c,d,h,m);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Qe(t);_e(Zl,"RemoteStore shutting down."),r.Ea.add(5),await cf(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Db.provider={build:()=>new Db};class mI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ia("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Vo="FirestoreClient";class $6{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=dr.UNAUTHENTICATED,this.clientId=Iv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async c=>{_e(Vo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(_e(Vo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Wv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function kw(n,e){n.asyncQueue.verifyOperationInProgress(),_e(Vo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await KC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function X1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Y6(n);_e(Vo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Q1(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Q1(e.remoteStore,i))),n._onlineComponents=e}async function Y6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(Vo,"Using user provided OfflineComponentProvider");try{await kw(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Xl("Error using user provided cache. Falling back to memory cache: "+t),await kw(n,new eg)}}else _e(Vo,"Using default OfflineComponentProvider"),await kw(n,new K6(void 0));return n._offlineComponents}async function pI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(Vo,"Using user provided OnlineComponentProvider"),await X1(n,n._uninitializedComponentsProvider._online)):(_e(Vo,"Using default OnlineComponentProvider"),await X1(n,new Db))),n._onlineComponents}function W6(n){return pI(n).then((e=>e.syncEngine))}async function gI(n){const e=await pI(n),t=e.eventManager;return t.onListen=D6.bind(null,e.syncEngine),t.onUnlisten=B6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=M6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j6.bind(null,e.syncEngine),t}function J6(n,e,t={}){const r=new va;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,m){const w=new mI({next:x=>{w.Nu(),c.enqueueAndForget((()=>sI(o,b)));const S=x.docs.has(d);!S&&x.fromCache?m.reject(new xe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&x.fromCache&&h&&h.source==="server"?m.reject(new xe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),b=new iI(Mv(d.path),w,{includeMetadataChanges:!0,Ka:!0});return rI(o,b)})(await gI(n),n.asyncQueue,e,t,r))),r.promise}function X6(n,e,t={}){const r=new va;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,m){const w=new mI({next:x=>{w.Nu(),c.enqueueAndForget((()=>sI(o,b))),x.fromCache&&h.source==="server"?m.reject(new xe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),b=new iI(d,w,{includeMetadataChanges:!0,Ka:!0});return rI(o,b)})(await gI(n),n.asyncQueue,e,t,r))),r.promise}function Z6(n,e){const t=new va;return n.asyncQueue.enqueueAndForget((async()=>U6(await W6(n),e,t))),t.promise}function yI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const e5="ComponentProvider",Z1=new Map;function t5(n,e,t,r,i){return new Aj(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,yI(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const wI="firestore.googleapis.com",eT=!0;class tT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wI,this.ssl=eT}else this.host=e.host,this.ssl=e.ssl??eT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IU)throw new xe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tj;switch(r.type){case"firstParty":return new ij(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Z1.get(t);r&&(_e(e5,"Removing Datastore"),Z1.delete(t),r.terminate())})(this),Promise.resolve()}}function n5(n,e,t,r={}){n=ni(n,Vg);const i=Gu(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(aN(`https://${d}`),oN("Firestore",!0)),o.host!==wI&&o.host!==d&&Xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:d,ssl:i,emulatorOptions:r};if(!Kl(h,c)&&(n._setSettings(h),r.mockUserToken)){let m,w;if(typeof r.mockUserToken=="string")m=r.mockUserToken,w=dr.MOCK_USER;else{m=d4(r.mockUserToken,n._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new xe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new dr(b)}n._authCredentials=new nj(new eC(m,w))}}class uc{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new uc(this.firestore,e,this._query)}}class xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}toJSON(){return{type:xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(af(t,xn._jsonSchema))return new xn(e,r||null,new De(zt.fromString(t.referencePath)))}}xn._jsonSchemaVersion="firestore/documentReference/1.0",xn._jsonSchema={type:Dn("string",xn._jsonSchemaVersion),referencePath:Dn("string")};class Oo extends uc{constructor(e,t,r){super(e,t,Mv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new De(e))}withConverter(e){return new Oo(this.firestore,e,this._path)}}function tt(n,e,...t){if(n=Ln(n),tC("collection","path",e),n instanceof Vg){const r=zt.fromString(e,...t);return m1(r),new Oo(n,null,r)}{if(!(n instanceof xn||n instanceof Oo))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return m1(r),new Oo(n.firestore,null,r)}}function pt(n,e,...t){if(n=Ln(n),arguments.length===1&&(e=Iv.newId()),tC("doc","path",e),n instanceof Vg){const r=zt.fromString(e,...t);return f1(r),new xn(n,null,new De(r))}{if(!(n instanceof xn||n instanceof Oo))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return f1(r),new xn(n.firestore,n instanceof Oo?n.converter:null,new De(r))}}const nT="AsyncQueue";class rT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YC(this,"async_queue_retry"),this._c=()=>{const r=Rw();r&&_e(nT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Rw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new va;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Yu(e))throw e;_e(nT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ia("INTERNAL UNHANDLED ERROR: ",sT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Yv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ve(47125,{Pc:sT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class dc extends Vg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rT(e),this._firestoreClient=void 0,await e}}}function r5(n,e){const t=typeof n=="object"?n:dN(),r=typeof n=="string"?n:$p,i=yv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=c4("firestore");o&&n5(i,...o)}return i}function Fg(n){if(n._terminated)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||s5(n),n._firestoreClient}function s5(n){const e=n._freezeSettings(),t=t5(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new $6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}class _s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _s(ir.fromBase64String(e))}catch(t){throw new xe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _s(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_s._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(af(e,_s._jsonSchema))return _s.fromBase64String(e.bytes)}}_s._jsonSchemaVersion="firestore/bytes/1.0",_s._jsonSchema={type:Dn("string",_s._jsonSchemaVersion),bytes:Dn("string")};class Hg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class df{constructor(e){this._methodName=e}}class Li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(af(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Dn("string",Li._jsonSchemaVersion),latitude:Dn("number"),longitude:Dn("number")};class ti{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(af(e,ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ti(e.vectorValues);throw new xe(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ti._jsonSchemaVersion="firestore/vectorValue/1.0",ti._jsonSchema={type:Dn("string",ti._jsonSchemaVersion),vectorValues:Dn("object")};const i5=/^__.*__$/;class a5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $o(e,this.data,this.fieldMask,t,this.fieldTransforms):new of(e,this.data,t,this.fieldTransforms)}}class bI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $o(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{dataSource:n})}}class ex{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ex({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return tg(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(vI(this.dataSource)&&i5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class o5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bg(e)}createContext(e,t,r,i=!1){return new ex({dataSource:e,methodName:t,targetDoc:r,path:rr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hf(n){const e=n._freezeSettings(),t=Bg(n._databaseId);return new o5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tx(n,e,t,r,i,o={}){const c=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);sx("Data must be an object, but it was:",c,r);const d=EI(r,c);let h,m;if(o.merge)h=new rs(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const w=[];for(const b of o.mergeFields){const x=ec(e,b,t);if(!c.contains(x))throw new xe(ue.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);SI(w,x)||w.push(x)}h=new rs(w),m=c.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,m=c.fieldTransforms;return new a5(new jr(d),h,m)}class zg extends df{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zg}}class nx extends df{_toFieldTransform(e){return new kC(e.path,new jh)}isEqual(e){return e instanceof nx}}class rx extends df{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Fh(e.serializer,SC(e.serializer,this.Vc));return new kC(e.path,t)}isEqual(e){return e instanceof rx&&this.Vc===e.Vc}}function xI(n,e,t,r){const i=n.createContext(1,e,t);sx("Data must be an object, but it was:",i,r);const o=[],c=jr.empty();Ko(r,((h,m)=>{const w=TI(e,h,t);m=Ln(m);const b=i.childContextForFieldPath(w);if(m instanceof zg)o.push(w);else{const x=ff(m,b);x!=null&&(o.push(w),c.set(w,x))}}));const d=new rs(o);return new bI(c,d,i.fieldTransforms)}function AI(n,e,t,r,i,o){const c=n.createContext(1,e,t),d=[ec(e,r,t)],h=[i];if(o.length%2!=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)d.push(ec(e,o[x])),h.push(o[x+1]);const m=[],w=jr.empty();for(let x=d.length-1;x>=0;--x)if(!SI(m,d[x])){const S=d[x];let k=h[x];k=Ln(k);const N=c.childContextForFieldPath(S);if(k instanceof zg)m.push(S);else{const C=ff(k,N);C!=null&&(m.push(S),w.set(S,C))}}const b=new rs(m);return new bI(w,b,c.fieldTransforms)}function l5(n,e,t,r=!1){return ff(t,n.createContext(r?4:3,e))}function ff(n,e){if(_I(n=Ln(n)))return sx("Unsupported field value:",e,n),EI(n,e);if(n instanceof df)return(function(r,i){if(!vI(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const o=[];let c=0;for(const d of r){let h=ff(d,i.childContextForArray(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Gt.fromDate(r);return{timestampValue:Jp(i.serializer,o)}}if(r instanceof Gt){const o=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jp(i.serializer,o)}}if(r instanceof Li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _s)return{bytesValue:BC(i.serializer,r._byteString)};if(r instanceof xn){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Vv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ti)return(function(c,d){const h=c instanceof ti?c.toArray():c;return{mapValue:{fields:{[uC]:{stringValue:dC},[Yp]:{arrayValue:{values:h.map((w=>{if(typeof w!="number")throw d.createError("VectorValues must only contain numeric values.");return Lv(d.serializer,w)}))}}}}}})(r,i);if(GC(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Cg(r)}`)})(n,e)}function EI(n,e){const t={};return sC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ko(n,((r,i)=>{const o=ff(i,e.childContextForField(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function _I(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof Li||n instanceof _s||n instanceof xn||n instanceof df||n instanceof ti||GC(n))}function sx(n,e,t){if(!_I(t)||!nC(t)){const r=Cg(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function ec(n,e,t){if((e=Ln(e))instanceof Hg)return e._internalPath;if(typeof e=="string")return TI(n,e);throw tg("Field path arguments must be of type string or ",n,!1,void 0,t)}const c5=new RegExp("[~\\*/\\[\\]]");function TI(n,e,t){if(e.search(c5)>=0)throw tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hg(...e.split("."))._internalPath}catch{throw tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tg(n,e,t,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new xe(ue.INVALID_ARGUMENT,d+n+h)}function SI(n,e){return n.some((t=>t.isEqual(e)))}class u5{convertValue(e,t="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ko(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Yp].arrayValue?.values?.map((r=>wn(r.doubleValue)));return new ti(t)}convertGeoPoint(e){return new Li(wn(e.latitude),wn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dh(e));default:return null}}convertTimestamp(e){const t=Lo(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);Tt(zC(r),9688,{name:e});const i=new Mh(r.get(1),r.get(3)),o=new De(r.popFirst(5));return i.isEqual(t)||Ia(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}class NI extends u5{constructor(e){super(),this.firestore=e}convertBytes(e){return new _s(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function Rt(){return new nx("serverTimestamp")}function d5(n){return new rx("increment",n)}const iT="@firebase/firestore",aT="4.11.0";class CI{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(ec("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class h5 extends CI{data(){return super.data()}}function f5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ix{}class II extends ix{}function Vr(n,e,...t){let r=[];e instanceof ix&&r.push(e),r=r.concat(t),(function(o){const c=o.filter((h=>h instanceof ax)).length,d=o.filter((h=>h instanceof Gg)).length;if(c>1||c>0&&d>0)throw new xe(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Gg extends II{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gg(e,t,r)}_apply(e){const t=this._parse(e);return kI(e._query,t),new uc(e.firestore,e.converter,_b(e._query,t))}_parse(e){const t=hf(e.firestore);return(function(o,c,d,h,m,w,b){let x;if(m.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){lT(b,w);const k=[];for(const N of b)k.push(oT(h,o,N));x={arrayValue:{values:k}}}else x=oT(h,o,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||lT(b,w),x=l5(d,c,b,w==="in"||w==="not-in");return Pn.create(m,w,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ur(n,e,t){const r=e,i=ec("where",n);return Gg._create(i,r,t)}class ax extends ix{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ax(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let c=i;const d=o.getFlattenedFilters();for(const h of d)kI(c,h),c=_b(c,h)})(e._query,t),new uc(e.firestore,e.converter,_b(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ox extends II{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ox(e,t)}_apply(e){const t=(function(i,o,c){if(i.startAt!==null)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bh(o,c)})(e._query,this._field,this._direction);return new uc(e.firestore,e.converter,Vj(e._query,t))}}function RI(n,e="asc"){const t=e,r=ec("orderBy",n);return ox._create(r,t)}function oT(n,e,t){if(typeof(t=Ln(t))=="string"){if(t==="")throw new xe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bC(e)&&t.indexOf("/")!==-1)throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!De.isDocumentKey(r))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return A1(n,new De(r))}if(t instanceof xn)return A1(n,t._key);throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cg(t)}.`)}function lT(n,e){if(!Array.isArray(n)||n.length===0)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kI(n,e){const t=(function(i,o){for(const c of i)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new xe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function lx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class wh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hl extends CI{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ip(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ec("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hl._jsonSchema={type:Dn("string",Hl._jsonSchemaVersion),bundleSource:Dn("string","DocumentSnapshot"),bundleName:Dn("string"),bundle:Dn("string")};class Ip extends Hl{data(e={}){return super.data(e)}}class yu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Ip(this._firestore,this._userDataWriter,r.key,r,new wh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const h=new Ip(i._firestore,i._userDataWriter,d.doc.key,d.doc,new wh(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new Ip(i._firestore,i._userDataWriter,d.doc.key,d.doc,new wh(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,w=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),w=c.indexOf(d.doc.key)),{type:m5(d.type),doc:h,oldIndex:m,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function m5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:n})}}yu._jsonSchemaVersion="firestore/querySnapshot/1.0",yu._jsonSchema={type:Dn("string",yu._jsonSchemaVersion),bundleSource:Dn("string","QuerySnapshot"),bundleName:Dn("string"),bundle:Dn("string")};class p5{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hf(e)}set(e,t,r){this._verifyNotCommitted();const i=Pw(e,this._firestore),o=lx(i.converter,t,r),c=tx(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,Fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Pw(e,this._firestore);let c;return c=typeof(t=Ln(t))=="string"||t instanceof Hg?AI(this._dataReader,"WriteBatch.update",o._key,t,r,i):xI(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,Fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pw(e,this._firestore);return this._mutations=this._mutations.concat(new Bv(t._key,Fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pw(n,e){if((n=Ln(n)).firestore!==e)throw new xe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Fo(n){n=ni(n,xn);const e=ni(n.firestore,dc),t=Fg(e);return J6(t,n._key).then((r=>g5(e,n,r)))}function rn(n){n=ni(n,uc);const e=ni(n.firestore,dc),t=Fg(e),r=new NI(e);return f5(n._query),X6(t,n._query).then((i=>new yu(e,r,n,i)))}function qg(n,e,t){n=ni(n,xn);const r=ni(n.firestore,dc),i=lx(n.converter,e,t),o=hf(r);return Qg(r,[tx(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Fr.none())])}function Ts(n,e,t,...r){n=ni(n,xn);const i=ni(n.firestore,dc),o=hf(i);let c;return c=typeof(e=Ln(e))=="string"||e instanceof Hg?AI(o,"updateDoc",n._key,e,t,r):xI(o,"updateDoc",n._key,e),Qg(i,[c.toMutation(n._key,Fr.exists(!0))])}function Ru(n,e){const t=ni(n.firestore,dc),r=pt(n),i=lx(n.converter,e),o=hf(n.firestore);return Qg(t,[tx(o,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Fr.exists(!1))]).then((()=>r))}function Qg(n,e){const t=Fg(n);return Z6(t,e)}function g5(n,e,t){const r=t.docs.get(e._key),i=new NI(n);return new Hl(n,i,e._key,r,new wh(t.hasPendingWrites,t.fromCache),e.converter)}function Rp(n){return n=ni(n,dc),Fg(n),new p5(n,(e=>Qg(n,e)))}(function(e,t=!0){ej(qu),_u(new $l("firestore",((r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),d=new dc(new rj(r.getProvider("auth-internal")),new aj(c,r.getProvider("app-check-internal")),Ej(c,i),c);return o={useFetchStreams:t,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),ko(iT,aT,e),ko(iT,aT,"esm2020")})();const y5=["glyiv.archourium@gmail.com","admin@glyiv.com","founder@glyiv.com"],op="treasury";var w5="firebase",b5="12.9.0";ko(w5,b5,"app");const v5={apiKey:"AIzaSyBl0ZjAiKVzXVyMidp1HWpVHfBg3GPuSR4",authDomain:"glyiv-28711.firebaseapp.com",projectId:"glyiv-28711",storageBucket:"glyiv-28711.firebasestorage.app",messagingSenderId:"429607082737",appId:"1:429607082737:web:4890b9fab47f6b242aa750"},PI=uN(v5),Tl=XB(PI),Ne=r5(PI),OI=new da;OI.setCustomParameters({prompt:"select_account"});const DI=I.createContext(null),MI=n=>n?y5.map(e=>e.toLowerCase()).includes(n.toLowerCase()):!1,x5=n=>MI(n)?"ADMIN":"LO",A5=(n,e)=>({role:e?.role==="ADMIN"?"ADMIN":"LO",displayName:e?.displayName??n.displayName??n.email??"Glyiv User",phone:e?.phone,kycStatus:e?.kycStatus??"unverified",payoutWalletAddress:e?.payoutWalletAddress,payoutWalletUpdatedAt:e?.payoutWalletUpdatedAt,createdAt:e?.createdAt}),cT=async n=>{const e=pt(Ne,"users",n.uid),t=await Fo(e),r=x5(n.email);if(!t.exists())await qg(e,{role:r,displayName:n.displayName??n.email??"Glyiv User",phone:"",kycStatus:"unverified",payoutWalletAddress:"",createdAt:Rt()});else{const o=t.data(),c={};o.role||(c.role=r),MI(n.email)&&o.role!=="ADMIN"&&(c.role="ADMIN"),o.displayName||(c.displayName=n.displayName??n.email??"Glyiv User"),Object.keys(c).length>0&&await Ts(e,c)}const i=await Fo(e);return A5(n,i.exists()?i.data():{role:r})},E5=({children:n})=>{const[e,t]=I.useState(null),[r,i]=I.useState(null),[o,c]=I.useState(!0),d=I.useCallback(async()=>{if(!Tl.currentUser){i(null);return}const S=await cT(Tl.currentUser);i(S)},[]);I.useEffect(()=>{const S=VL(Tl,async k=>{if(c(!0),!k){t(null),i(null),c(!1);return}t(k);try{const N=await cT(k);i(N)}finally{c(!1)}});return()=>S()},[]);const h=I.useCallback(async()=>{await oB(Tl,OI)},[]),m=I.useCallback(async(S,k)=>{await BL(Tl,S,k)},[]),w=I.useCallback(async(S,k)=>{await LL(Tl,S,k)},[]),b=I.useCallback(async()=>{await FL(Tl)},[]),x=I.useMemo(()=>({user:e,profile:r,loading:o,signInWithGoogle:h,signInWithEmail:m,signUpWithEmail:w,signOutUser:b,refreshProfile:d}),[o,r,d,m,h,b,w,e]);return g.jsx(DI.Provider,{value:x,children:n})},Yn=()=>{const n=I.useContext(DI);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},Or=({children:n})=>{const{user:e,loading:t}=Yn(),r=ks();return t?g.jsx("section",{className:"mx-auto w-full max-w-4xl px-5 py-14 md:px-8",children:g.jsx("div",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 text-sm uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Checking session..."})}):e?g.jsx(g.Fragment,{children:n}):g.jsx(jp,{to:"/auth",replace:!0,state:{from:r}})},Dr=({children:n,roles:e})=>{const{profile:t,loading:r}=Yn();return r||!t?g.jsx("section",{className:"mx-auto w-full max-w-4xl px-5 py-14 md:px-8",children:g.jsx("div",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 text-sm uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Resolving access policy..."})}):e.includes(t.role)?g.jsx(g.Fragment,{children:n}):g.jsx(jp,{to:"/",replace:!0})},_5=()=>{const[n,e]=I.useState(()=>window.localStorage.getItem("glyiv-theme")==="light"?"light":"dark"),[t,r]=I.useState(0),[i,o]=I.useState(!0),c=ks(),d=zo(),{user:h,profile:m,signOutUser:w}=Yn(),b=c.pathname==="/",x=["/","/about","/auth"].includes(c.pathname),S=!!h&&!x,k=m?.role==="ADMIN",N=!h,C=U=>{if(c.pathname!=="/"){d("/"),window.setTimeout(()=>{document.getElementById(U)?.scrollIntoView({behavior:"smooth"})},60);return}document.getElementById(U)?.scrollIntoView({behavior:"smooth"})};I.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),window.localStorage.setItem("glyiv-theme",n)},[n]),I.useEffect(()=>{let U=0;const $=window.setInterval(()=>{U=Math.min(100,U+Math.floor(Math.random()*11)+5),r(U),U>=100&&(window.clearInterval($),window.setTimeout(()=>o(!1),420))},100);return()=>window.clearInterval($)},[]),I.useEffect(()=>{const U=document.querySelectorAll("[data-reveal]"),$=new IntersectionObserver(Y=>{Y.forEach(te=>{te.isIntersecting&&(te.target.classList.add("reveal-visible"),$.unobserve(te.target))})},{threshold:.18,rootMargin:"0px 0px -7% 0px"});return U.forEach(Y=>{Y.classList.remove("reveal-visible"),$.observe(Y)}),()=>$.disconnect()},[c.pathname]);const D=c.pathname==="/"?"nav-link nav-link-active":"nav-link",F=c.pathname==="/about"?"nav-link nav-link-active":"nav-link";return g.jsxs("div",{className:"relative min-h-screen overflow-x-clip",children:[g.jsx("div",{className:"orb orb-a"}),g.jsx("div",{className:"orb orb-b"}),g.jsx("div",{className:"grid-fx"}),g.jsxs("div",{className:"geometry-layer","aria-hidden":!0,children:[g.jsx("span",{className:"geo geo-1"}),g.jsx("span",{className:"geo geo-2"}),g.jsx("span",{className:"geo geo-3"}),g.jsx("span",{className:"geo geo-4"}),g.jsx("span",{className:"geo geo-5"}),g.jsx("span",{className:"geo geo-6"})]}),g.jsxs("header",{className:"sticky top-0 z-40 border-b border-[var(--edge)] bg-[var(--bg-nav)]/86 backdrop-blur-xl",children:[g.jsxs("div",{className:"mx-auto flex w-full max-w-7xl items-center justify-between gap-4 px-5 py-4 md:px-8",children:[g.jsxs(qe,{to:"/",className:"flex items-center gap-3 text-left",children:[g.jsx("img",{className:"h-10 w-10 rounded-xl shadow-[0_0_30px_rgba(61,242,153,0.45)]",src:"/logo.svg",alt:"glyiv logo"}),g.jsxs("div",{children:[g.jsx("p",{className:"font-syne text-lg leading-none tracking-[0.2em] text-[var(--text-main)]",children:"GLYIV"}),g.jsx("p",{className:"text-xs uppercase tracking-[0.24em] text-[var(--text-muted)]",children:"Carbon Asset Ecosystem"})]})]}),g.jsxs("div",{className:"hidden items-center gap-5 text-sm uppercase tracking-[0.14em] text-[var(--text-muted)] xl:flex",children:[N&&g.jsxs(g.Fragment,{children:[g.jsx(qe,{to:"/",className:D,children:"Home"}),g.jsx(qe,{to:"/about",className:F,children:"About"}),b&&g.jsxs(g.Fragment,{children:[g.jsx("button",{type:"button",className:"nav-link",onClick:()=>C("features"),children:"Features"}),g.jsx("button",{type:"button",className:"nav-link",onClick:()=>C("roadmap"),children:"Roadmap"}),g.jsx("button",{type:"button",className:"nav-link",onClick:()=>C("demo"),children:"Demo"})]}),g.jsx(qe,{to:"/marketplace-preview",className:"nav-link",children:"Marketplace"})]}),S&&g.jsxs(g.Fragment,{children:[!k&&g.jsxs(g.Fragment,{children:[g.jsx(qe,{to:"/register-land",className:"nav-link",children:"Register Land"}),g.jsx(qe,{to:"/dashboard",className:"nav-link",children:"Dashboard"})]}),k&&g.jsxs(g.Fragment,{children:[g.jsx(qe,{to:"/land_admin",className:"nav-link",children:"Admin"}),g.jsx(qe,{to:"/admin/rent-settlement",className:"nav-link",children:"Settlement"}),g.jsx(qe,{to:"/admin/tokens",className:"nav-link",children:"Tokens"})]}),g.jsx(qe,{to:"/marketplace-preview",className:"nav-link",children:"Marketplace"})]})]}),g.jsx("div",{className:"flex items-center gap-2",children:h?g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"hidden max-w-44 truncate text-[11px] uppercase tracking-[0.12em] text-[var(--text-muted)] md:block",children:[m?.role??"LO"," | ",h.email??h.displayName??"user"]}),g.jsx("button",{type:"button",onClick:()=>{w()},className:"rounded-full border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.1em] text-[var(--text-main)] transition hover:border-[var(--edge-strong)]",children:"Sign Out"})]}):g.jsx(qe,{to:"/auth",className:"rounded-full border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.1em] text-[var(--text-main)] transition hover:border-[var(--edge-strong)]",children:"Sign In"})})]}),g.jsxs("div",{className:"mx-auto flex w-full max-w-7xl items-center justify-center gap-4 px-5 pb-4 text-[11px] uppercase tracking-[0.13em] text-[var(--text-muted)] xl:hidden",children:[N&&g.jsxs(g.Fragment,{children:[g.jsx(qe,{to:"/",className:D,children:"Home"}),g.jsx(qe,{to:"/about",className:F,children:"About"}),g.jsx(qe,{to:"/marketplace-preview",className:"nav-link",children:"Market"})]}),S&&!k&&g.jsxs(g.Fragment,{children:[g.jsx(qe,{to:"/register-land",className:"nav-link",children:"Register"}),g.jsx(qe,{to:"/dashboard",className:"nav-link",children:"Dashboard"})]}),S&&k&&g.jsxs(g.Fragment,{children:[g.jsx(qe,{to:"/land_admin",className:"nav-link",children:"Admin"}),g.jsx(qe,{to:"/admin/rent-settlement",className:"nav-link",children:"Settle"}),g.jsx(qe,{to:"/admin/tokens",className:"nav-link",children:"Tokens"})]}),S&&g.jsx(qe,{to:"/marketplace-preview",className:"nav-link",children:"Market"})]})]}),g.jsx("main",{className:"page-stage",children:g.jsx(b3,{})},c.pathname),g.jsxs("footer",{className:"mx-auto flex w-full max-w-7xl flex-wrap items-center justify-between gap-3 px-5 pb-10 pt-4 text-xs uppercase tracking-[0.14em] text-[var(--text-muted)] md:px-8",children:[g.jsx("p",{children:"glyiv - Carbon Asset Ecosystem"}),g.jsx("p",{children:"Designed for a low-emission, high-incentive future"})]}),g.jsx("button",{type:"button",onClick:()=>e(U=>U==="dark"?"light":"dark"),className:"fixed bottom-4 left-4 z-50 rounded-full border border-[var(--edge)] bg-[var(--card-soft)] px-5 py-3 text-[13px] font-semibold uppercase tracking-[0.12em] text-[var(--text-main)] backdrop-blur-xl transition hover:border-[var(--edge-strong)] hover:text-[var(--primary)]",children:n==="dark"?"Light":"Dark"}),g.jsxs("div",{className:`splash-screen ${i?"splash-visible":"splash-hidden"}`,"aria-hidden":!i,children:[g.jsx("img",{src:"/logo.svg",className:"h-20 w-20",alt:"glyiv loading"}),g.jsx("p",{className:"mt-6 font-syne text-3xl tracking-[0.2em] text-[var(--text-main)]",children:"GLYIV"}),g.jsx("p",{className:"mt-2 text-xs uppercase tracking-[0.2em] text-[var(--text-muted)]",children:"Initializing Green Interface"}),g.jsx("div",{className:"mt-7 h-2 w-64 overflow-hidden rounded-full bg-[var(--card-hard)]",children:g.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-[#7fffc0] via-[#3df299] to-[#7fffc0] transition-all duration-300",style:{width:`${t}%`}})}),g.jsxs("p",{className:"mt-3 text-xs uppercase tracking-[0.18em] text-[var(--text-muted)]",children:[t,"%"]})]})]})},T5=[{phase:"Phase 1",title:"Carbon Tracker Assistant",description:"Scan receipts, detect products with AI OCR, classify into trusted carbon categories, and store personal impact in one wallet."},{phase:"Phase 2",title:"Marketplace + Carbon Compensation",description:"Connect land owners and offset buyers through tokenized absorption capacity, incentives, and mission-driven gamification."},{phase:"Phase 3",title:"Green Payment Infrastructure",description:"Evolve into a carbon-aware payment system with green receipts, merchant insights, and integrated Web3 plus fiat wallet rails."}],S5=[{title:"Receipt to Carbon in Seconds",copy:"AI OCR extracts every item, maps it to emission categories, and calculates estimated impact instantly.",image:"/glyiv-feature-1.png"},{title:"Behavioral Climate Dashboard",copy:"Turn daily purchases into visual carbon intelligence with trend tracking, badges, and progress loops.",image:"/glyiv-feature-2.png"},{title:"Offset Meets Ownership",copy:"Future roadmap unlocks fractional green assets so offset actions become transparent, traceable value.",image:"/glyiv-feature-3.png"}],N5=[{label:"AI Parsing Accuracy Target",value:"95%+"},{label:"Launch Focus",value:"Play Store Phase 1"},{label:"Engine Exposure",value:"Private Core Layer"},{label:"System Vision",value:"Green Payment Layer"}],C5=[{name:"Ode",role:"CEO / Founder / All-Rounder",summary:"Driving product, strategy, and execution to make carbon intelligence simple enough for daily use and powerful enough for national scale.",photo:"/founder.jpg",socials:[{label:"LinkedIn",href:"#"},{label:"Instagram",href:"#"},{label:"X",href:"#"}]},{name:"Member 1",role:"Open Role",summary:"Reserved for the next core builder. Add your teammate profile, portfolio, and social channels here.",photo:"",socials:[{label:"LinkedIn",href:"#"},{label:"Instagram",href:"#"},{label:"X",href:"#"}]},{name:"Member 2",role:"Open Role",summary:"Reserved for the next core builder. Add your teammate profile, portfolio, and social channels here.",photo:"",socials:[{label:"LinkedIn",href:"#"},{label:"Instagram",href:"#"},{label:"X",href:"#"}]}],I5=[{title:"Verified Proof Layer",copy:"Register once and keep your KYC + land proof in a structured record ready for approval and listing."},{title:"Recurring GLV Income",copy:"Approved hectares can be listed in the marketplace and tied to transparent, traceable rent simulation payouts."},{title:"Data-Backed Transparency",copy:"Per-hectare NDVI snapshots and listing terms create trust with buyers and simplify monitoring for owners."}],Mb="https://mail.google.com/mail/?view=cm&fs=1&to=glyiv.archourium@gmail.com&su=Glyiv%20Demo%20Request&body=Hi%20Glyiv%20team%2C%0A%0AI%20want%20to%20request%20a%20demo%20for%20Glyiv.%0A%0AName%3A%0AOrganization%3A%0AUse%20Case%3A%0A",uT=n=>({transitionDelay:`${n}ms`}),R5=()=>g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 pb-14 pt-14 md:px-8 md:pt-18",children:[g.jsx("div",{className:"mx-auto mb-12 max-w-4xl",children:g.jsxs("div",{className:"reveal space-y-6 text-center","data-reveal":!0,style:uT(0),children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"About glyiv"}),g.jsx("h1",{className:"font-syne text-5xl leading-[0.95] tracking-[-0.03em] text-[var(--text-main)] md:text-7xl",children:"The Team Building Carbon-First Finance"}),g.jsx("p",{className:"mx-auto max-w-2xl text-base leading-relaxed text-[var(--text-muted)] md:text-lg",children:"glyiv is built for behavior change and scalable infrastructure. We blend climate accounting, product engineering, and incentive systems into one practical platform."}),g.jsxs("div",{className:"cta-duo flex flex-wrap justify-center gap-3",children:[g.jsx("a",{href:Mb,target:"_blank",rel:"noreferrer",className:"btn-primary btn-shine rounded-2xl px-6 py-3 text-sm font-semibold uppercase tracking-[0.13em] text-[#03140b]",children:"Collaborate With Us"}),g.jsx(qe,{to:"/",className:"btn-shine rounded-2xl border border-[var(--edge)] bg-[var(--card-soft)] px-6 py-3 text-sm font-semibold uppercase tracking-[0.13em] text-[var(--text-main)] transition hover:border-[var(--edge-strong)]",children:"Back to Home"})]})]})}),g.jsx("div",{className:"grid gap-6 lg:grid-cols-3",children:C5.map((n,e)=>g.jsxs("article",{className:"reveal float-card rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 text-center","data-reveal":!0,style:{...uT(e*110),animationDelay:`${e*.5}s`},children:[n.photo?g.jsx("img",{src:n.photo,alt:n.name,className:"h-56 w-full rounded-2xl border border-[var(--edge)] object-cover"}):g.jsx("div",{className:"member-placeholder h-56 w-full rounded-2xl border border-dashed border-[var(--edge)]"}),g.jsxs("div",{className:"mt-5",children:[g.jsx("h3",{className:"font-syne text-2xl text-[var(--text-main)]",children:n.name}),g.jsx("p",{className:"mt-1 text-xs uppercase tracking-[0.16em] text-[var(--primary)]",children:n.role}),g.jsx("p",{className:"mt-4 text-sm leading-relaxed text-[var(--text-muted)]",children:n.summary}),g.jsx("div",{className:"mt-5 flex flex-wrap justify-center gap-2",children:n.socials.map(t=>g.jsx("a",{href:t.href,target:"_blank",rel:"noreferrer",className:"rounded-full border border-[var(--edge)] px-3 py-1.5 text-xs uppercase tracking-[0.14em] text-[var(--text-muted)] transition hover:border-[var(--edge-strong)] hover:text-[var(--text-main)]",children:t.label},`${n.name}-${t.label}`))})]})]},n.name))})]}),k5=()=>{const{user:n,profile:e,loading:t,signInWithGoogle:r,signInWithEmail:i,signUpWithEmail:o}=Yn(),[c,d]=I.useState("signin"),[h,m]=I.useState(""),[w,b]=I.useState(""),[x,S]=I.useState(null),[k,N]=I.useState(!1),C=zo(),F=ks().state,U=I.useMemo(()=>e?.role==="ADMIN"?"/land_admin":e?.role==="LO"?"/dashboard":"/",[e?.role]),$=F?.from?.pathname??U;I.useEffect(()=>{n&&e&&C($,{replace:!0})},[C,e,$,n]);const Y=async T=>{T.preventDefault(),S(null),N(!0);try{c==="signin"?await i(h,w):await o(h,w)}catch(_){const P=_ instanceof Error?_.message:"Authentication failed.";S(P)}finally{N(!1)}},te=async()=>{S(null),N(!0);try{await r()}catch(T){const _=T instanceof Error?T.message:"Google authentication failed.";S(_)}finally{N(!1)}};return g.jsx("section",{className:"mx-auto w-full max-w-3xl px-5 py-14 md:px-8",children:g.jsxs("div",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 md:p-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-[var(--primary)]",children:"Glyiv Portal"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)]",children:"Sign in to continue"}),g.jsx("p",{className:"mt-3 text-sm leading-relaxed text-[var(--text-muted)]",children:"Use Google or email/password to access Land Owner Portal and Admin Console routes."}),g.jsxs("div",{className:"mt-6 flex gap-2 text-xs uppercase tracking-[0.14em]",children:[g.jsx("button",{type:"button",onClick:()=>d("signin"),className:`rounded-xl border px-4 py-2 ${c==="signin"?"border-[var(--edge-strong)] text-[var(--text-main)]":"border-[var(--edge)] text-[var(--text-muted)]"}`,children:"Sign In"}),g.jsx("button",{type:"button",onClick:()=>d("signup"),className:`rounded-xl border px-4 py-2 ${c==="signup"?"border-[var(--edge-strong)] text-[var(--text-main)]":"border-[var(--edge)] text-[var(--text-muted)]"}`,children:"Create Account"})]}),g.jsxs("form",{onSubmit:Y,className:"mt-6 space-y-4",children:[g.jsxs("label",{className:"block text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Email",g.jsx("input",{type:"email",required:!0,value:h,onChange:T=>m(T.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),g.jsxs("label",{className:"block text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Password",g.jsx("input",{type:"password",required:!0,minLength:6,value:w,onChange:T=>b(T.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),x&&g.jsx("p",{className:"rounded-xl border border-red-400/40 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x}),g.jsxs("div",{className:"flex flex-wrap gap-3",children:[g.jsx("button",{type:"submit",disabled:k||t,className:"btn-primary btn-shine rounded-2xl px-6 py-3 text-sm font-semibold uppercase tracking-[0.12em] text-[#03140b] disabled:cursor-not-allowed disabled:opacity-70",children:c==="signin"?"Sign In":"Create Account"}),g.jsx("button",{type:"button",onClick:te,disabled:k||t,className:"rounded-2xl border border-[var(--edge)] bg-[var(--card-hard)] px-6 py-3 text-sm font-semibold uppercase tracking-[0.12em] text-[var(--text-main)] disabled:cursor-not-allowed disabled:opacity-70",children:"Continue with Google"})]})]}),g.jsxs("p",{className:"mt-6 text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Public route available: ",g.jsx(qe,{to:"/marketplace-preview",className:"text-[var(--text-main)]",children:"Marketplace Preview"})]})]})})},Ks=n=>({transitionDelay:`${n}ms`}),P5=()=>{const{user:n,profile:e}=Yn(),t=e?.role==="ADMIN"?"/land_admin":"/dashboard",r=e?.role==="ADMIN"?"Admin Console":"Dashboard";return g.jsxs(g.Fragment,{children:[g.jsxs("section",{id:"hero",className:"mx-auto grid w-full max-w-7xl gap-10 px-5 pb-14 pt-14 md:px-8 lg:grid-cols-[1.05fr_0.95fr] lg:pt-20",children:[g.jsxs("div",{className:"space-y-7 reveal","data-reveal":!0,style:Ks(0),children:[g.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-[var(--edge)] bg-[var(--card-soft)] px-4 py-2 text-xs uppercase tracking-[0.17em] text-[var(--text-muted)]",children:[g.jsx("span",{className:"pulse-dot h-2 w-2 rounded-full bg-[var(--primary)]"}),"Climate Intelligence Platform"]}),g.jsxs("h1",{className:"font-syne text-5xl leading-[0.95] tracking-[-0.03em] text-[var(--text-main)] sm:text-6xl md:text-7xl",children:["Track Carbon.",g.jsx("br",{}),"Own The Green",g.jsx("br",{}),"Future."]}),g.jsx("p",{className:"max-w-xl text-base leading-relaxed text-[var(--text-muted)] md:text-lg",children:"Glyiv transforms daily shopping receipts into actionable carbon insights, then evolves into a compensation and green payment infrastructure for the next generation economy."}),g.jsxs("div",{className:"cta-duo flex flex-wrap gap-3",children:[g.jsx("a",{href:Mb,target:"_blank",rel:"noreferrer",className:"btn-primary btn-shine rounded-2xl px-6 py-3 text-sm font-semibold uppercase tracking-[0.13em] text-[#03140b]",children:"Request Demo"}),g.jsx(qe,{to:n?t:"/register-land",className:"btn-shine rounded-2xl border border-[var(--edge)] bg-[var(--card-soft)] px-6 py-3 text-sm font-semibold uppercase tracking-[0.13em] text-[var(--text-main)] transition hover:border-[var(--edge-strong)]",children:n?r:"Register Land"})]})]}),g.jsxs("div",{className:"reveal space-y-4","data-reveal":!0,style:Ks(120),children:[g.jsxs("div",{className:"hero-panel",children:[g.jsx("img",{src:"/glyiv-thumb.png",alt:"glyiv app preview",className:"hero-image drift-slow"}),g.jsx("div",{className:"hero-halo"}),g.jsx("div",{className:"hero-shine"})]}),g.jsxs("div",{className:"inline-flex items-center gap-2 rounded-2xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-xs uppercase tracking-[0.16em] text-[var(--text-muted)]",children:[g.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--primary)]"}),"Carbon Intelligence Engine"]})]})]}),g.jsx("section",{className:"mx-auto w-full max-w-7xl px-5 py-8 md:px-8",children:g.jsx("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:N5.map((i,o)=>g.jsxs("article",{className:"reveal float-card rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5 backdrop-blur-xl","data-reveal":!0,style:{...Ks(o*90),animationDelay:`${o*.7}s`},children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.15em] text-[var(--text-muted)]",children:i.label}),g.jsx("p",{className:"mt-3 font-syne text-2xl text-[var(--text-main)]",children:i.value})]},i.label))})}),g.jsxs("section",{id:"land-owner",className:"mx-auto w-full max-w-7xl px-5 py-16 md:px-8",children:[g.jsxs("div",{className:"mb-10 reveal","data-reveal":!0,style:Ks(0),children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Land Owner Portal"}),g.jsx("h2",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)] md:text-5xl",children:"Why Land Owners Register with Glyiv"}),g.jsx("p",{className:"mt-4 max-w-3xl leading-relaxed text-[var(--text-muted)]",children:"Glyiv provides a direct onboarding path from document submission to hectare-level marketplace listing, with transparent terms and payout records for each approved land."})]}),g.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:I5.map((i,o)=>g.jsxs("article",{className:"reveal float-card rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6","data-reveal":!0,style:{...Ks(o*120),animationDelay:`${o*.5}s`},children:[g.jsx("h3",{className:"font-syne text-2xl text-[var(--text-main)]",children:i.title}),g.jsx("p",{className:"mt-4 text-sm leading-relaxed text-[var(--text-muted)]",children:i.copy})]},i.title))})]}),g.jsxs("section",{id:"features",className:"mx-auto w-full max-w-7xl px-5 py-16 md:px-8",children:[g.jsxs("div",{className:"mb-10 reveal","data-reveal":!0,style:Ks(0),children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Core Experience"}),g.jsx("h2",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)] md:text-5xl",children:"Built for Habit, Accuracy, and Scale"})]}),g.jsx("div",{className:"grid gap-8 lg:grid-cols-3",children:S5.map((i,o)=>g.jsxs("article",{className:"reveal group float-card overflow-hidden rounded-3xl border border-[var(--edge)] bg-[var(--card-hard)]","data-reveal":!0,style:{...Ks(o*110),animationDelay:`${o*.45}s`},children:[g.jsx("div",{className:"overflow-hidden",children:g.jsx("img",{src:i.image,alt:i.title,className:"h-60 w-full object-cover transition duration-700 group-hover:scale-105 group-hover:rotate-1"})}),g.jsxs("div",{className:"space-y-4 p-6",children:[g.jsx("h3",{className:"font-syne text-2xl text-[var(--text-main)]",children:i.title}),g.jsx("p",{className:"text-sm leading-relaxed text-[var(--text-muted)]",children:i.copy})]})]},i.title))})]}),g.jsxs("section",{id:"roadmap",className:"mx-auto w-full max-w-7xl px-5 py-16 md:px-8",children:[g.jsxs("div",{className:"mb-10 reveal","data-reveal":!0,style:Ks(0),children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Roadmap"}),g.jsx("h2",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)] md:text-5xl",children:"From Assistant to Public Infrastructure"})]}),g.jsx("div",{className:"space-y-6",children:T5.map((i,o)=>g.jsxs("article",{className:"reveal float-card relative rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 md:p-8","data-reveal":!0,style:{...Ks(o*130),animationDelay:`${o*.5}s`},children:[g.jsx("div",{className:"absolute -left-[1px] top-0 h-full w-1 rounded-full bg-gradient-to-b from-[var(--primary)] to-transparent"}),g.jsxs("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:[i.phase," - 0",o+1]}),g.jsx("h3",{className:"mt-4 font-syne text-2xl text-[var(--text-main)] md:text-3xl",children:i.title}),g.jsx("p",{className:"mt-4 max-w-3xl leading-relaxed text-[var(--text-muted)]",children:i.description})]},i.phase))})]}),g.jsx("section",{id:"demo",className:"mx-auto w-full max-w-7xl px-5 py-16 md:px-8",children:g.jsxs("div",{className:"grid gap-8 rounded-[2rem] border border-[var(--edge)] bg-[var(--card-hard)] p-6 md:p-8 xl:grid-cols-[1fr_0.9fr]",children:[g.jsxs("div",{className:"reveal space-y-5","data-reveal":!0,style:Ks(0),children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Live Walkthrough"}),g.jsx("h2",{className:"font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)] md:text-5xl",children:"See How glyiv Feels in Motion"}),g.jsx("p",{className:"max-w-xl leading-relaxed text-[var(--text-muted)]",children:"Watch the demo flow and request your private walkthrough to explore deployment, partnerships, and pilot readiness for your team."}),g.jsx("a",{href:Mb,target:"_blank",rel:"noreferrer",className:"btn-primary btn-shine inline-block rounded-2xl px-6 py-3 text-sm font-semibold uppercase tracking-[0.13em] text-[#03140b]",children:"Request Demo via Gmail"})]}),g.jsx("div",{className:"reveal aspect-video overflow-hidden rounded-2xl border border-[var(--edge)] bg-black/40","data-reveal":!0,style:Ks(120),children:g.jsx("iframe",{className:"h-full w-full",src:"https://www.youtube.com/embed/NSHcxMZuNCo?si=uthLBFB6Sd1SR63k",title:"Glyiv Introduction",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})})]})})]})};function LI(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function O5(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dT(n,e){return n.get(LI(n,e))}function D5(n,e,t){O5(n,e),e.set(n,t)}function M5(n,e,t){return n.set(LI(n,e),t),t}const L5=100,Pe={},B5=()=>{Pe.previousActiveElement instanceof HTMLElement?(Pe.previousActiveElement.focus(),Pe.previousActiveElement=null):document.body&&document.body.focus()},j5=n=>new Promise(e=>{if(!n)return e();const t=window.scrollX,r=window.scrollY;Pe.restoreFocusTimeout=setTimeout(()=>{B5(),e()},L5),window.scrollTo(t,r)}),BI="swal2-",U5=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],ie=U5.reduce((n,e)=>(n[e]=BI+e,n),{}),V5=["success","warning","info","question","error"],ng=V5.reduce((n,e)=>(n[e]=BI+e,n),{}),jI="SweetAlert2:",cx=n=>n.charAt(0).toUpperCase()+n.slice(1),Er=n=>{console.warn(`${jI} ${typeof n=="object"?n.join(" "):n}`)},hc=n=>{console.error(`${jI} ${n}`)},hT=[],F5=n=>{hT.includes(n)||(hT.push(n),Er(n))},UI=(n,e=null)=>{F5(`"${n}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Kg=n=>typeof n=="function"?n():n,ux=n=>n&&typeof n.toPromise=="function",mf=n=>ux(n)?n.toPromise():Promise.resolve(n),dx=n=>n&&Promise.resolve(n)===n,_r=()=>document.body.querySelector(`.${ie.container}`),pf=n=>{const e=_r();return e?e.querySelector(n):null},os=n=>pf(`.${n}`),_t=()=>os(ie.popup),Xu=()=>os(ie.icon),H5=()=>os(ie["icon-content"]),VI=()=>os(ie.title),hx=()=>os(ie["html-container"]),FI=()=>os(ie.image),fx=()=>os(ie["progress-steps"]),$g=()=>os(ie["validation-message"]),ji=()=>pf(`.${ie.actions} .${ie.confirm}`),Zu=()=>pf(`.${ie.actions} .${ie.cancel}`),fc=()=>pf(`.${ie.actions} .${ie.deny}`),z5=()=>os(ie["input-label"]),ed=()=>pf(`.${ie.loader}`),gf=()=>os(ie.actions),HI=()=>os(ie.footer),Yg=()=>os(ie["timer-progress-bar"]),mx=()=>os(ie.close),G5=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,px=()=>{const n=_t();if(!n)return[];const e=n.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),t=Array.from(e).sort((o,c)=>{const d=parseInt(o.getAttribute("tabindex")||"0"),h=parseInt(c.getAttribute("tabindex")||"0");return d>h?1:d<h?-1:0}),r=n.querySelectorAll(G5),i=Array.from(r).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(t.concat(i))].filter(o=>Hr(o))},gx=()=>xa(document.body,ie.shown)&&!xa(document.body,ie["toast-shown"])&&!xa(document.body,ie["no-backdrop"]),Wg=()=>{const n=_t();return n?xa(n,ie.toast):!1},q5=()=>{const n=_t();return n?n.hasAttribute("data-loading"):!1},ls=(n,e)=>{if(n.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),i=r.querySelector("head");i&&Array.from(i.childNodes).forEach(c=>{n.appendChild(c)});const o=r.querySelector("body");o&&Array.from(o.childNodes).forEach(c=>{c instanceof HTMLVideoElement||c instanceof HTMLAudioElement?n.appendChild(c.cloneNode(!0)):n.appendChild(c)})}},xa=(n,e)=>{if(!e)return!1;const t=e.split(/\s+/);for(let r=0;r<t.length;r++)if(!n.classList.contains(t[r]))return!1;return!0},Q5=(n,e)=>{Array.from(n.classList).forEach(t=>{!Object.values(ie).includes(t)&&!Object.values(ng).includes(t)&&!Object.values(e.showClass||{}).includes(t)&&n.classList.remove(t)})},is=(n,e,t)=>{if(Q5(n,e),!e.customClass)return;const r=e.customClass[t];if(r){if(typeof r!="string"&&!r.forEach){Er(`Invalid type of customClass.${t}! Expected string or iterable object, got "${typeof r}"`);return}At(n,r)}},Jg=(n,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return n.querySelector(`.${ie.popup} > .${ie[e]}`);case"checkbox":return n.querySelector(`.${ie.popup} > .${ie.checkbox} input`);case"radio":return n.querySelector(`.${ie.popup} > .${ie.radio} input:checked`)||n.querySelector(`.${ie.popup} > .${ie.radio} input:first-child`);case"range":return n.querySelector(`.${ie.popup} > .${ie.range} input`);default:return n.querySelector(`.${ie.popup} > .${ie.input}`)}},zI=n=>{if(n.focus(),n.type!=="file"){const e=n.value;n.value="",n.value=e}},GI=(n,e,t)=>{!n||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(n)?n.forEach(i=>{t?i.classList.add(r):i.classList.remove(r)}):t?n.classList.add(r):n.classList.remove(r)}))},At=(n,e)=>{GI(n,e,!0)},Cs=(n,e)=>{GI(n,e,!1)},So=(n,e)=>{const t=Array.from(n.children);for(let r=0;r<t.length;r++){const i=t[r];if(i instanceof HTMLElement&&xa(i,e))return i}},zl=(n,e,t)=>{t===`${parseInt(`${t}`)}`&&(t=parseInt(t)),t||parseInt(`${t}`)===0?n.style.setProperty(e,typeof t=="number"?`${t}px`:t):n.style.removeProperty(e)},$n=(n,e="flex")=>{n&&(n.style.display=e)},mr=n=>{n&&(n.style.display="none")},yx=(n,e="block")=>{n&&new MutationObserver(()=>{yf(n,n.innerHTML,e)}).observe(n,{childList:!0,subtree:!0})},fT=(n,e,t,r)=>{const i=n.querySelector(e);i&&i.style.setProperty(t,r)},yf=(n,e,t="flex")=>{e?$n(n,t):mr(n)},Hr=n=>!!(n&&(n.offsetWidth||n.offsetHeight||n.getClientRects().length)),K5=()=>!Hr(ji())&&!Hr(fc())&&!Hr(Zu()),Lb=n=>n.scrollHeight>n.clientHeight,$5=(n,e)=>{let t=n;for(;t&&t!==e;){if(Lb(t))return!0;t=t.parentElement}return!1},qI=n=>{const e=window.getComputedStyle(n),t=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return t>0||r>0},wx=(n,e=!1)=>{const t=Yg();t&&Hr(t)&&(e&&(t.style.transition="none",t.style.width="100%"),setTimeout(()=>{t.style.transition=`width ${n/1e3}s linear`,t.style.width="0%"},10))},Y5=()=>{const n=Yg();if(!n)return;const e=parseInt(window.getComputedStyle(n).width);n.style.removeProperty("transition"),n.style.width="100%";const t=parseInt(window.getComputedStyle(n).width),r=e/t*100;n.style.width=`${r}%`},W5=()=>typeof window>"u"||typeof document>"u",J5=`
 <div aria-labelledby="${ie.title}" aria-describedby="${ie["html-container"]}" class="${ie.popup}" tabindex="-1">
   <button type="button" class="${ie.close}"></button>
   <ul class="${ie["progress-steps"]}"></ul>
   <div class="${ie.icon}"></div>
   <img class="${ie.image}" />
   <h2 class="${ie.title}" id="${ie.title}"></h2>
   <div class="${ie["html-container"]}" id="${ie["html-container"]}"></div>
   <input class="${ie.input}" id="${ie.input}" />
   <input type="file" class="${ie.file}" />
   <div class="${ie.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${ie.select}" id="${ie.select}"></select>
   <div class="${ie.radio}"></div>
   <label class="${ie.checkbox}">
     <input type="checkbox" id="${ie.checkbox}" />
     <span class="${ie.label}"></span>
   </label>
   <textarea class="${ie.textarea}" id="${ie.textarea}"></textarea>
   <div class="${ie["validation-message"]}" id="${ie["validation-message"]}"></div>
   <div class="${ie.actions}">
     <div class="${ie.loader}"></div>
     <button type="button" class="${ie.confirm}"></button>
     <button type="button" class="${ie.deny}"></button>
     <button type="button" class="${ie.cancel}"></button>
   </div>
   <div class="${ie.footer}"></div>
   <div class="${ie["timer-progress-bar-container"]}">
     <div class="${ie["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),X5=()=>{const n=_r();return n?(n.remove(),Cs([document.documentElement,document.body],[ie["no-backdrop"],ie["toast-shown"],ie["has-column"]]),!0):!1},Sl=()=>{Pe.currentInstance&&Pe.currentInstance.resetValidationMessage()},Z5=()=>{const n=_t();if(!n)return;const e=So(n,ie.input),t=So(n,ie.file),r=n.querySelector(`.${ie.range} input`),i=n.querySelector(`.${ie.range} output`),o=So(n,ie.select),c=n.querySelector(`.${ie.checkbox} input`),d=So(n,ie.textarea);e&&(e.oninput=Sl),t&&(t.onchange=Sl),o&&(o.onchange=Sl),c&&(c.onchange=Sl),d&&(d.oninput=Sl),r&&i&&(r.oninput=()=>{Sl(),i.value=r.value},r.onchange=()=>{Sl(),i.value=r.value})},eV=n=>{if(typeof n=="string"){const e=document.querySelector(n);if(!e)throw new Error(`Target element "${n}" not found`);return e}return n},tV=n=>{const e=_t();e&&(e.setAttribute("role",n.toast?"alert":"dialog"),e.setAttribute("aria-live",n.toast?"polite":"assertive"),n.toast||e.setAttribute("aria-modal","true"))},nV=n=>{window.getComputedStyle(n).direction==="rtl"&&(At(_r(),ie.rtl),Pe.isRTL=!0)},rV=n=>{const e=X5();if(W5()){hc("SweetAlert2 requires document to initialize");return}const t=document.createElement("div");t.className=ie.container,e&&At(t,ie["no-transition"]),ls(t,J5),t.dataset.swal2Theme=n.theme;const r=eV(n.target||"body");r.appendChild(t),n.topLayer&&(t.setAttribute("popover",""),t.showPopover()),tV(n),nV(r),Z5()},bx=(n,e)=>{n instanceof HTMLElement?e.appendChild(n):typeof n=="object"?sV(n,e):n&&ls(e,n)},sV=(n,e)=>{"jquery"in n?iV(e,n):ls(e,n.toString())},iV=(n,e)=>{if(n.textContent="",0 in e)for(let t=0;t in e;t++)n.appendChild(e[t].cloneNode(!0));else n.appendChild(e.cloneNode(!0))},aV=(n,e)=>{const t=gf(),r=ed();!t||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?mr(t):$n(t),is(t,e,"actions"),oV(t,r,e),ls(r,e.loaderHtml||""),is(r,e,"loader"))};function oV(n,e,t){const r=ji(),i=fc(),o=Zu();!r||!i||!o||(Dw(r,"confirm",t),Dw(i,"deny",t),Dw(o,"cancel",t),lV(r,i,o,t),t.reverseButtons&&(t.toast?(n.insertBefore(o,r),n.insertBefore(i,r)):(n.insertBefore(o,e),n.insertBefore(i,e),n.insertBefore(r,e))))}function lV(n,e,t,r){if(!r.buttonsStyling){Cs([n,e,t],ie.styled);return}At([n,e,t],ie.styled),r.confirmButtonColor&&n.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&t.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),Ow(n),Ow(e),Ow(t)}function Ow(n){const e=window.getComputedStyle(n);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const t=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");n.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${t}`))}function Dw(n,e,t){const r=cx(e);yf(n,t[`show${r}Button`],"inline-block"),ls(n,t[`${e}ButtonText`]||""),n.setAttribute("aria-label",t[`${e}ButtonAriaLabel`]||""),n.className=ie[e],is(n,t,`${e}Button`)}const cV=(n,e)=>{const t=mx();t&&(ls(t,e.closeButtonHtml||""),is(t,e,"closeButton"),yf(t,e.showCloseButton),t.setAttribute("aria-label",e.closeButtonAriaLabel||""))},uV=(n,e)=>{const t=_r();t&&(dV(t,e.backdrop),hV(t,e.position),fV(t,e.grow),is(t,e,"container"))};function dV(n,e){typeof e=="string"?n.style.background=e:e||At([document.documentElement,document.body],ie["no-backdrop"])}function hV(n,e){e&&(e in ie?At(n,ie[e]):(Er('The "position" parameter is not valid, defaulting to "center"'),At(n,ie.center)))}function fV(n,e){e&&At(n,ie[`grow-${e}`])}var Et={innerParams:new WeakMap,domCache:new WeakMap,focusedElement:new WeakMap};const mV=["input","file","range","select","radio","checkbox","textarea"],pV=(n,e)=>{const t=_t();if(!t)return;const r=Et.innerParams.get(n),i=!r||e.input!==r.input;mV.forEach(o=>{const c=So(t,ie[o]);c&&(wV(o,e.inputAttributes),c.className=ie[o],i&&mr(c))}),e.input&&(i&&gV(e),bV(e))},gV=n=>{if(!n.input)return;if(!yn[n.input]){hc(`Unexpected type of input! Expected ${Object.keys(yn).join(" | ")}, got "${n.input}"`);return}const e=QI(n.input);if(!e)return;const t=yn[n.input](e,n);$n(e),n.inputAutoFocus&&setTimeout(()=>{zI(t)})},yV=n=>{for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;["id","type","value","style"].includes(t)||n.removeAttribute(t)}},wV=(n,e)=>{const t=_t();if(!t)return;const r=Jg(t,n);if(r){yV(r);for(const i in e)r.setAttribute(i,e[i])}},bV=n=>{if(!n.input)return;const e=QI(n.input);e&&is(e,n,"input")},vx=(n,e)=>{!n.placeholder&&e.inputPlaceholder&&(n.placeholder=e.inputPlaceholder)},wf=(n,e,t)=>{if(t.inputLabel){const r=document.createElement("label"),i=ie["input-label"];r.setAttribute("for",n.id),r.className=i,typeof t.customClass=="object"&&At(r,t.customClass.inputLabel),r.innerText=t.inputLabel,e.insertAdjacentElement("beforebegin",r)}},QI=n=>{const e=_t();if(e)return So(e,ie[n]||ie.input)},rg=(n,e)=>{["string","number"].includes(typeof e)?n.value=`${e}`:dx(e)||Er(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},yn={};yn.text=yn.email=yn.password=yn.number=yn.tel=yn.url=yn.search=yn.date=yn["datetime-local"]=yn.time=yn.week=yn.month=(n,e)=>{const t=n;return rg(t,e.inputValue),wf(t,t,e),vx(t,e),t.type=e.input,t};yn.file=(n,e)=>{const t=n;return wf(t,t,e),vx(t,e),t};yn.range=(n,e)=>{const t=n,r=t.querySelector("input"),i=t.querySelector("output");return r&&(rg(r,e.inputValue),r.type=e.input,wf(r,n,e)),i&&rg(i,e.inputValue),n};yn.select=(n,e)=>{const t=n;if(t.textContent="",e.inputPlaceholder){const r=document.createElement("option");ls(r,e.inputPlaceholder),r.value="",r.disabled=!0,r.selected=!0,t.appendChild(r)}return wf(t,t,e),t};yn.radio=n=>{const e=n;return e.textContent="",n};yn.checkbox=(n,e)=>{const t=_t();if(!t)throw new Error("Popup not found");const r=Jg(t,"checkbox");if(!r)throw new Error("Checkbox input not found");r.value="1",r.checked=!!e.inputValue;const o=n.querySelector("span");if(o){const c=e.inputPlaceholder||e.inputLabel;c&&ls(o,c)}return r};yn.textarea=(n,e)=>{const t=n;rg(t,e.inputValue),vx(t,e),wf(t,t,e);const r=i=>parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const i=_t();if(!i)return;const o=parseInt(window.getComputedStyle(i).width),c=()=>{if(!document.body.contains(t))return;const d=t.offsetWidth+r(t),h=_t();h&&(d>o?h.style.width=`${d}px`:zl(h,"width",e.width))};new MutationObserver(c).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const vV=(n,e)=>{const t=hx();t&&(yx(t),is(t,e,"htmlContainer"),e.html?(bx(e.html,t),$n(t,"block")):e.text?(t.textContent=e.text,$n(t,"block")):mr(t),pV(n,e))},xV=(n,e)=>{const t=HI();t&&(yx(t),yf(t,!!e.footer,"block"),e.footer&&bx(e.footer,t),is(t,e,"footer"))},AV=(n,e)=>{const t=Et.innerParams.get(n),r=Xu();if(!r)return;if(t&&e.icon===t.icon){pT(r,e),mT(r,e);return}if(!e.icon&&!e.iconHtml){mr(r);return}if(e.icon&&Object.keys(ng).indexOf(e.icon)===-1){hc(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),mr(r);return}$n(r),pT(r,e),mT(r,e),At(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",KI)},mT=(n,e)=>{for(const[t,r]of Object.entries(ng))e.icon!==t&&Cs(n,r);At(n,e.icon&&ng[e.icon]),TV(n,e),KI(),is(n,e,"icon")},KI=()=>{const n=_t();if(!n)return;const e=window.getComputedStyle(n).getPropertyValue("background-color"),t=n.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<t.length;r++)t[r].style.backgroundColor=e},EV=n=>`
  ${n.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${n.animation?'<div class="swal2-success-fix"></div>':""}
  ${n.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,_V=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,pT=(n,e)=>{if(!e.icon&&!e.iconHtml)return;let t=n.innerHTML,r="";e.iconHtml?r=gT(e.iconHtml):e.icon==="success"?(r=EV(e),t=t.replace(/ style=".*?"/g,"")):e.icon==="error"?r=_V:e.icon&&(r=gT({question:"?",warning:"!",info:"i"}[e.icon])),t.trim()!==r.trim()&&ls(n,r)},TV=(n,e)=>{if(e.iconColor){n.style.color=e.iconColor,n.style.borderColor=e.iconColor;for(const t of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])fT(n,t,"background-color",e.iconColor);fT(n,".swal2-success-ring","border-color",e.iconColor)}},gT=n=>`<div class="${ie["icon-content"]}">${n}</div>`,SV=(n,e)=>{const t=FI();if(t){if(!e.imageUrl){mr(t);return}$n(t,""),t.setAttribute("src",e.imageUrl),t.setAttribute("alt",e.imageAlt||""),zl(t,"width",e.imageWidth),zl(t,"height",e.imageHeight),t.className=ie.image,is(t,e,"image")}};let xx=!1,$I=0,YI=0,WI=0,JI=0;const NV=n=>{n.addEventListener("mousedown",sg),document.body.addEventListener("mousemove",ig),n.addEventListener("mouseup",ag),n.addEventListener("touchstart",sg),document.body.addEventListener("touchmove",ig),n.addEventListener("touchend",ag)},CV=n=>{n.removeEventListener("mousedown",sg),document.body.removeEventListener("mousemove",ig),n.removeEventListener("mouseup",ag),n.removeEventListener("touchstart",sg),document.body.removeEventListener("touchmove",ig),n.removeEventListener("touchend",ag)},sg=n=>{const e=_t();if(!e)return;const t=Xu();if(n.target===e||t&&t.contains(n.target)){xx=!0;const r=XI(n);$I=r.clientX,YI=r.clientY,WI=parseInt(e.style.insetInlineStart)||0,JI=parseInt(e.style.insetBlockStart)||0,At(e,"swal2-dragging")}},ig=n=>{const e=_t();if(e&&xx){let{clientX:t,clientY:r}=XI(n);const i=t-$I;e.style.insetInlineStart=`${WI+(Pe.isRTL?-i:i)}px`,e.style.insetBlockStart=`${JI+(r-YI)}px`}},ag=()=>{const n=_t();xx=!1,Cs(n,"swal2-dragging")},XI=n=>{let e=0,t=0;return n.type.startsWith("mouse")?(e=n.clientX,t=n.clientY):n.type.startsWith("touch")&&(e=n.touches[0].clientX,t=n.touches[0].clientY),{clientX:e,clientY:t}},IV=(n,e)=>{const t=_r(),r=_t();if(!(!t||!r)){if(e.toast){zl(t,"width",e.width),r.style.width="100%";const i=ed();i&&r.insertBefore(i,Xu())}else zl(r,"width",e.width);zl(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),mr($g()),RV(r,e),e.draggable&&!e.toast?(At(r,ie.draggable),NV(r)):(Cs(r,ie.draggable),CV(r))}},RV=(n,e)=>{const t=e.showClass||{};n.className=`${ie.popup} ${Hr(n)?t.popup:""}`,e.toast?(At([document.documentElement,document.body],ie["toast-shown"]),At(n,ie.toast)):At(n,ie.modal),is(n,e,"popup"),typeof e.customClass=="string"&&At(n,e.customClass),e.icon&&At(n,ie[`icon-${e.icon}`])},kV=(n,e)=>{const t=fx();if(!t)return;const{progressSteps:r,currentProgressStep:i}=e;if(!r||r.length===0||i===void 0){mr(t);return}$n(t),t.textContent="",i>=r.length&&Er("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((o,c)=>{const d=PV(o);if(t.appendChild(d),c===i&&At(d,ie["active-progress-step"]),c!==r.length-1){const h=OV(e);t.appendChild(h)}})},PV=n=>{const e=document.createElement("li");return At(e,ie["progress-step"]),ls(e,n),e},OV=n=>{const e=document.createElement("li");return At(e,ie["progress-step-line"]),n.progressStepsDistance&&zl(e,"width",n.progressStepsDistance),e},DV=(n,e)=>{const t=VI();t&&(yx(t),yf(t,!!(e.title||e.titleText),"block"),e.title&&bx(e.title,t),e.titleText&&(t.innerText=e.titleText),is(t,e,"title"))},ZI=(n,e)=>{var t;IV(n,e),uV(n,e),kV(n,e),AV(n,e),SV(n,e),DV(n,e),cV(n,e),vV(n,e),aV(n,e),xV(n,e);const r=_t();typeof e.didRender=="function"&&r&&e.didRender(r),(t=Pe.eventEmitter)===null||t===void 0||t.emit("didRender",r)},MV=()=>Hr(_t()),eR=()=>{var n;return(n=ji())===null||n===void 0?void 0:n.click()},LV=()=>{var n;return(n=fc())===null||n===void 0?void 0:n.click()},BV=()=>{var n;return(n=Zu())===null||n===void 0?void 0:n.click()},td=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),tR=n=>{if(n.keydownTarget&&n.keydownHandlerAdded&&n.keydownHandler){const e=n.keydownHandler;n.keydownTarget.removeEventListener("keydown",e,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!1}},jV=(n,e,t)=>{if(tR(n),!e.toast){const r=o=>VV(e,o,t);n.keydownHandler=r;const i=e.keydownListenerCapture?window:_t();if(i){n.keydownTarget=i,n.keydownListenerCapture=e.keydownListenerCapture;const o=r;n.keydownTarget.addEventListener("keydown",o,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!0}}},Bb=(n,e)=>{var t;const r=px();if(r.length){n=n+e,n===-2&&(n=r.length-1),n===r.length?n=0:n===-1&&(n=r.length-1),r[n].focus();return}(t=_t())===null||t===void 0||t.focus()},nR=["ArrowRight","ArrowDown"],UV=["ArrowLeft","ArrowUp"],VV=(n,e,t)=>{n&&(e.isComposing||e.keyCode===229||(n.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?FV(e,n):e.key==="Tab"?HV(e):[...nR,...UV].includes(e.key)?zV(e.key):e.key==="Escape"&&GV(e,n,t)))},FV=(n,e)=>{if(!Kg(e.allowEnterKey))return;const t=_t();if(!t||!e.input)return;const r=Jg(t,e.input);if(n.target&&r&&n.target instanceof HTMLElement&&n.target.outerHTML===r.outerHTML){if(["textarea","file"].includes(e.input))return;eR(),n.preventDefault()}},HV=n=>{const e=n.target,t=px();let r=-1;for(let i=0;i<t.length;i++)if(e===t[i]){r=i;break}n.shiftKey?Bb(r,-1):Bb(r,1),n.stopPropagation(),n.preventDefault()},zV=n=>{const e=gf(),t=ji(),r=fc(),i=Zu();if(!e||!t||!r||!i)return;const o=[t,r,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const c=nR.includes(n)?"nextElementSibling":"previousElementSibling";let d=document.activeElement;if(d){for(let h=0;h<e.children.length;h++){if(d=d[c],!d)return;if(d instanceof HTMLButtonElement&&Hr(d))break}d instanceof HTMLButtonElement&&d.focus()}},GV=(n,e,t)=>{n.preventDefault(),Kg(e.allowEscapeKey)&&t(td.esc)};var ku={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const qV=()=>{const n=_r();Array.from(document.body.children).forEach(t=>{t.contains(n)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})},rR=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},sR=typeof window<"u"&&!!window.GestureEvent,QV=()=>{if(sR&&!xa(document.body,ie.iosfix)){const n=document.body.scrollTop;document.body.style.top=`${n*-1}px`,At(document.body,ie.iosfix),KV()}},KV=()=>{const n=_r();if(!n)return;let e;n.ontouchstart=t=>{e=$V(t)},n.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},$V=n=>{const e=n.target,t=_r(),r=hx();return!t||!r||YV(n)||WV(n)?!1:e===t||!Lb(t)&&e instanceof HTMLElement&&!$5(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Lb(r)&&r.contains(e))},YV=n=>!!(n.touches&&n.touches.length&&n.touches[0].touchType==="stylus"),WV=n=>n.touches&&n.touches.length>1,JV=()=>{if(xa(document.body,ie.iosfix)){const n=parseInt(document.body.style.top,10);Cs(document.body,ie.iosfix),document.body.style.top="",document.body.scrollTop=n*-1}},XV=()=>{const n=document.createElement("div");n.className=ie["scrollbar-measure"],document.body.appendChild(n);const e=n.getBoundingClientRect().width-n.clientWidth;return document.body.removeChild(n),e};let wu=null;const ZV=n=>{wu===null&&(document.body.scrollHeight>window.innerHeight||n==="scroll")&&(wu=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${wu+XV()}px`)},e8=()=>{wu!==null&&(document.body.style.paddingRight=`${wu}px`,wu=null)};function iR(n,e,t,r){Wg()?yT(n,r):(j5(t).then(()=>yT(n,r)),tR(Pe)),sR?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),gx()&&(e8(),JV(),rR()),t8()}function t8(){Cs([document.documentElement,document.body],[ie.shown,ie["height-auto"],ie["no-backdrop"],ie["toast-shown"]])}function No(n){n=r8(n);const e=ku.swalPromiseResolve.get(this),t=n8(this);this.isAwaitingPromise?n.isDismissed||(bf(this),e(n)):t&&e(n)}const n8=n=>{const e=_t();if(!e)return!1;const t=Et.innerParams.get(n);if(!t||xa(e,t.hideClass.popup))return!1;Cs(e,t.showClass.popup),At(e,t.hideClass.popup);const r=_r();return Cs(r,t.showClass.backdrop),At(r,t.hideClass.backdrop),s8(n,e,t),!0};function aR(n){const e=ku.swalPromiseReject.get(this);bf(this),e&&e(n)}const bf=n=>{n.isAwaitingPromise&&(delete n.isAwaitingPromise,Et.innerParams.get(n)||n._destroy())},r8=n=>typeof n>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},n),s8=(n,e,t)=>{var r;const i=_r(),o=qI(e);typeof t.willClose=="function"&&t.willClose(e),(r=Pe.eventEmitter)===null||r===void 0||r.emit("willClose",e),o&&i?i8(n,e,i,!!t.returnFocus,t.didClose):i&&iR(n,i,!!t.returnFocus,t.didClose)},i8=(n,e,t,r,i)=>{Pe.swalCloseEventFinishedCallback=iR.bind(null,n,t,r,i);const o=function(c){if(c.target===e){var d;(d=Pe.swalCloseEventFinishedCallback)===null||d===void 0||d.call(Pe),delete Pe.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o)}};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},yT=(n,e)=>{setTimeout(()=>{var t;typeof e=="function"&&e.bind(n.params)(),(t=Pe.eventEmitter)===null||t===void 0||t.emit("didClose"),n._destroy&&n._destroy()})},Pu=n=>{let e=_t();if(e||new Ou,e=_t(),!e)return;const t=ed();Wg()?mr(Xu()):a8(e,n),$n(t),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},a8=(n,e)=>{const t=gf(),r=ed();!t||!r||(!e&&Hr(ji())&&(e=ji()),$n(t),e&&(mr(e),r.setAttribute("data-button-to-replace",e.className),t.insertBefore(r,e)),At([n,t],ie.loading))},o8=(n,e)=>{e.input==="select"||e.input==="radio"?h8(n,e):["text","email","number","tel","textarea"].some(t=>t===e.input)&&(ux(e.inputValue)||dx(e.inputValue))&&(Pu(ji()),f8(n,e))},l8=(n,e)=>{const t=n.getInput();if(!t)return null;switch(e.input){case"checkbox":return c8(t);case"radio":return u8(t);case"file":return d8(t);default:return e.inputAutoTrim?t.value.trim():t.value}},c8=n=>n.checked?1:0,u8=n=>n.checked?n.value:null,d8=n=>n.files&&n.files.length?n.getAttribute("multiple")!==null?n.files:n.files[0]:null,h8=(n,e)=>{const t=_t();if(!t)return;const r=i=>{e.input==="select"?m8(t,og(i),e):e.input==="radio"&&p8(t,og(i),e)};ux(e.inputOptions)||dx(e.inputOptions)?(Pu(ji()),mf(e.inputOptions).then(i=>{n.hideLoading(),r(i)})):typeof e.inputOptions=="object"?r(e.inputOptions):hc(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},f8=(n,e)=>{const t=n.getInput();t&&(mr(t),mf(e.inputValue).then(r=>{t.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,$n(t),t.focus(),n.hideLoading()}).catch(r=>{hc(`Error in inputValue promise: ${r}`),t.value="",$n(t),t.focus(),n.hideLoading()}))};function m8(n,e,t){const r=So(n,ie.select);if(!r)return;const i=(o,c,d)=>{const h=document.createElement("option");h.value=d,ls(h,c),h.selected=oR(d,t.inputValue),o.appendChild(h)};e.forEach(o=>{const c=o[0],d=o[1];if(Array.isArray(d)){const h=document.createElement("optgroup");h.label=c,h.disabled=!1,r.appendChild(h),d.forEach(m=>i(h,m[1],m[0]))}else i(r,d,c)}),r.focus()}function p8(n,e,t){const r=So(n,ie.radio);if(!r)return;e.forEach(o=>{const c=o[0],d=o[1],h=document.createElement("input"),m=document.createElement("label");h.type="radio",h.name=ie.radio,h.value=c,oR(c,t.inputValue)&&(h.checked=!0);const w=document.createElement("span");ls(w,d),w.className=ie.label,m.appendChild(h),m.appendChild(w),r.appendChild(m)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}const og=n=>{const e=[];return n instanceof Map?n.forEach((t,r)=>{let i=t;typeof i=="object"&&(i=og(i)),e.push([r,i])}):Object.keys(n).forEach(t=>{let r=n[t];typeof r=="object"&&(r=og(r)),e.push([t,r])}),e},oR=(n,e)=>!!e&&e!==null&&e!==void 0&&e.toString()===n.toString(),g8=n=>{const e=Et.innerParams.get(n);n.disableButtons(),e.input?lR(n,"confirm"):Ex(n,!0)},y8=n=>{const e=Et.innerParams.get(n);n.disableButtons(),e.returnInputValueOnDeny?lR(n,"deny"):Ax(n,!1)},w8=(n,e)=>{n.disableButtons(),e(td.cancel)},lR=(n,e)=>{const t=Et.innerParams.get(n);if(!t.input){hc(`The "input" parameter is needed to be set when using returnInputValueOn${cx(e)}`);return}const r=n.getInput(),i=l8(n,t);t.inputValidator?b8(n,i,e):r&&!r.checkValidity()?(n.enableButtons(),n.showValidationMessage(t.validationMessage||r.validationMessage)):e==="deny"?Ax(n,i):Ex(n,i)},b8=(n,e,t)=>{const r=Et.innerParams.get(n);n.disableInput(),Promise.resolve().then(()=>mf(r.inputValidator(e,r.validationMessage))).then(o=>{n.enableButtons(),n.enableInput(),o?n.showValidationMessage(o):t==="deny"?Ax(n,e):Ex(n,e)})},Ax=(n,e)=>{const t=Et.innerParams.get(n);t.showLoaderOnDeny&&Pu(fc()),t.preDeny?(n.isAwaitingPromise=!0,Promise.resolve().then(()=>mf(t.preDeny(e,t.validationMessage))).then(i=>{i===!1?(n.hideLoading(),bf(n)):n.close({isDenied:!0,value:typeof i>"u"?e:i})}).catch(i=>cR(n,i))):n.close({isDenied:!0,value:e})},wT=(n,e)=>{n.close({isConfirmed:!0,value:e})},cR=(n,e)=>{n.rejectPromise(e)},Ex=(n,e)=>{const t=Et.innerParams.get(n);t.showLoaderOnConfirm&&Pu(),t.preConfirm?(n.resetValidationMessage(),n.isAwaitingPromise=!0,Promise.resolve().then(()=>mf(t.preConfirm(e,t.validationMessage))).then(i=>{Hr($g())||i===!1?(n.hideLoading(),bf(n)):wT(n,typeof i>"u"?e:i)}).catch(i=>cR(n,i))):wT(n,e)};function lg(){const n=Et.innerParams.get(this);if(!n)return;const e=Et.domCache.get(this);mr(e.loader),Wg()?n.icon&&$n(Xu()):v8(e),Cs([e.popup,e.actions],ie.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1;const t=Et.focusedElement.get(this);t instanceof HTMLElement&&(t.focus(),Et.focusedElement.delete(this))}const v8=n=>{const e=n.loader.getAttribute("data-button-to-replace"),t=e?n.popup.getElementsByClassName(e):[];t.length?$n(t[0],"inline-block"):K5()&&mr(n.actions)};function uR(){const n=Et.innerParams.get(this),e=Et.domCache.get(this);return e?Jg(e.popup,n.input):null}function dR(n,e,t){const r=Et.domCache.get(n);e.forEach(i=>{r[i].disabled=t})}function hR(n,e){const t=_t();if(!(!t||!n))if(n.type==="radio"){const r=t.querySelectorAll(`[name="${ie.radio}"]`);for(let i=0;i<r.length;i++)r[i].disabled=e}else n.disabled=e}function fR(){dR(this,["confirmButton","denyButton","cancelButton"],!1);const n=Et.focusedElement.get(this);n instanceof HTMLElement&&(n.focus(),Et.focusedElement.delete(this))}function mR(){Et.focusedElement.set(this,document.activeElement),dR(this,["confirmButton","denyButton","cancelButton"],!0)}function pR(){hR(this.getInput(),!1)}function gR(){hR(this.getInput(),!0)}function yR(n){const e=Et.domCache.get(this),t=Et.innerParams.get(this);ls(e.validationMessage,n),e.validationMessage.className=ie["validation-message"],t.customClass&&t.customClass.validationMessage&&At(e.validationMessage,t.customClass.validationMessage),$n(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",ie["validation-message"]),zI(r),At(r,ie.inputerror))}function wR(){const n=Et.domCache.get(this);n.validationMessage&&mr(n.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Cs(e,ie.inputerror))}const Co={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},x8=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],A8={allowEnterKey:void 0},E8=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],bR=n=>Object.prototype.hasOwnProperty.call(Co,n),vR=n=>x8.indexOf(n)!==-1,xR=n=>A8[n],_8=n=>{bR(n)||Er(`Unknown parameter "${n}"`)},T8=n=>{E8.includes(n)&&Er(`The parameter "${n}" is incompatible with toasts`)},S8=n=>{const e=xR(n);e&&UI(n,e)},AR=n=>{n.backdrop===!1&&n.allowOutsideClick&&Er('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),n.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(n.theme)&&Er(`Invalid theme "${n.theme}"`);for(const e in n)_8(e),n.toast&&T8(e),S8(e)};function ER(n){const e=_r(),t=_t(),r=Et.innerParams.get(this);if(!t||xa(t,r.hideClass.popup)){Er("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=N8(n),o=Object.assign({},r,i);AR(o),e&&(e.dataset.swal2Theme=o.theme),ZI(this,o),Et.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,n),writable:!1,enumerable:!0}})}const N8=n=>{const e={};return Object.keys(n).forEach(t=>{if(vR(t)){const r=n;e[t]=r[t]}else Er(`Invalid parameter to update: ${t}`)}),e};function _R(){var n;const e=Et.domCache.get(this),t=Et.innerParams.get(this);if(!t){TR(this);return}e.popup&&Pe.swalCloseEventFinishedCallback&&(Pe.swalCloseEventFinishedCallback(),delete Pe.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),(n=Pe.eventEmitter)===null||n===void 0||n.emit("didDestroy"),C8(this)}const C8=n=>{TR(n),delete n.params,delete Pe.keydownHandler,delete Pe.keydownTarget,delete Pe.currentInstance},TR=n=>{n.isAwaitingPromise?(Mw(Et,n),n.isAwaitingPromise=!0):(Mw(ku,n),Mw(Et,n),delete n.isAwaitingPromise,delete n.disableButtons,delete n.enableButtons,delete n.getInput,delete n.disableInput,delete n.enableInput,delete n.hideLoading,delete n.disableLoading,delete n.showValidationMessage,delete n.resetValidationMessage,delete n.close,delete n.closePopup,delete n.closeModal,delete n.closeToast,delete n.rejectPromise,delete n.update,delete n._destroy)},Mw=(n,e)=>{for(const t in n)n[t].delete(e)};var I8=Object.freeze({__proto__:null,_destroy:_R,close:No,closeModal:No,closePopup:No,closeToast:No,disableButtons:mR,disableInput:gR,disableLoading:lg,enableButtons:fR,enableInput:pR,getInput:uR,handleAwaitingPromise:bf,hideLoading:lg,rejectPromise:aR,resetValidationMessage:wR,showValidationMessage:yR,update:ER});const R8=(n,e,t)=>{n.toast?k8(n,e,t):(O8(e),D8(e),M8(n,e,t))},k8=(n,e,t)=>{e.popup.onclick=()=>{n&&(P8(n)||n.timer||n.input)||t(td.close)}},P8=n=>!!(n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton);let cg=!1;const O8=n=>{n.popup.onmousedown=()=>{n.container.onmouseup=function(e){n.container.onmouseup=()=>{},e.target===n.container&&(cg=!0)}}},D8=n=>{n.container.onmousedown=e=>{e.target===n.container&&e.preventDefault(),n.popup.onmouseup=function(t){n.popup.onmouseup=()=>{},(t.target===n.popup||t.target instanceof HTMLElement&&n.popup.contains(t.target))&&(cg=!0)}}},M8=(n,e,t)=>{e.container.onclick=r=>{if(cg){cg=!1;return}r.target===e.container&&Kg(n.allowOutsideClick)&&t(td.backdrop)}},L8=n=>typeof n=="object"&&n!==null&&"jquery"in n,bT=n=>n instanceof Element||L8(n),B8=n=>{const e={};return typeof n[0]=="object"&&!bT(n[0])?Object.assign(e,n[0]):["title","html","icon"].forEach((t,r)=>{const i=n[r];typeof i=="string"||bT(i)?e[t]=i:i!==void 0&&hc(`Unexpected type of ${t}! Expected "string" or "Element", got ${typeof i}`)}),e};function j8(...n){return new this(...n)}function U8(n){class e extends this{_main(r,i){return super._main(r,Object.assign({},n,i))}}return e}const V8=()=>Pe.timeout&&Pe.timeout.getTimerLeft(),SR=()=>{if(Pe.timeout)return Y5(),Pe.timeout.stop()},NR=()=>{if(Pe.timeout){const n=Pe.timeout.start();return wx(n),n}},F8=()=>{const n=Pe.timeout;return n&&(n.running?SR():NR())},H8=n=>{if(Pe.timeout){const e=Pe.timeout.increase(n);return wx(e,!0),e}},z8=()=>!!(Pe.timeout&&Pe.timeout.isRunning());let vT=!1;const jb={};function G8(n="data-swal-template"){jb[n]=this,vT||(document.body.addEventListener("click",q8),vT=!0)}const q8=n=>{for(let e=n.target;e&&e!==document;e=e.parentNode)for(const t in jb){const r=e.getAttribute&&e.getAttribute(t);if(r){jb[t].fire({template:r});return}}};class Q8{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,t){const r=this._getHandlersByEventName(e);r.includes(t)||r.push(t)}once(e,t){const r=(...i)=>{this.removeListener(e,r),t.apply(this,i)};this.on(e,r)}emit(e,...t){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,t)}catch(i){console.error(i)}})}removeListener(e,t){const r=this._getHandlersByEventName(e),i=r.indexOf(t);i>-1&&r.splice(i,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}Pe.eventEmitter=new Q8;const K8=(n,e)=>{Pe.eventEmitter&&Pe.eventEmitter.on(n,e)},$8=(n,e)=>{Pe.eventEmitter&&Pe.eventEmitter.once(n,e)},Y8=(n,e)=>{if(Pe.eventEmitter){if(!n){Pe.eventEmitter.reset();return}e?Pe.eventEmitter.removeListener(n,e):Pe.eventEmitter.removeAllListeners(n)}};var W8=Object.freeze({__proto__:null,argsToParams:B8,bindClickHandler:G8,clickCancel:BV,clickConfirm:eR,clickDeny:LV,enableLoading:Pu,fire:j8,getActions:gf,getCancelButton:Zu,getCloseButton:mx,getConfirmButton:ji,getContainer:_r,getDenyButton:fc,getFocusableElements:px,getFooter:HI,getHtmlContainer:hx,getIcon:Xu,getIconContent:H5,getImage:FI,getInputLabel:z5,getLoader:ed,getPopup:_t,getProgressSteps:fx,getTimerLeft:V8,getTimerProgressBar:Yg,getTitle:VI,getValidationMessage:$g,increaseTimer:H8,isDeprecatedParameter:xR,isLoading:q5,isTimerRunning:z8,isUpdatableParameter:vR,isValidParameter:bR,isVisible:MV,mixin:U8,off:Y8,on:K8,once:$8,resumeTimer:NR,showLoading:Pu,stopTimer:SR,toggleTimer:F8});class J8{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const CR=["swal-title","swal-html","swal-footer"],X8=n=>{const e=typeof n.template=="string"?document.querySelector(n.template):n.template;if(!e)return{};const t=e.content;return a9(t),Object.assign(Z8(t),e9(t),t9(t),n9(t),r9(t),s9(t),i9(t,CR))},Z8=n=>{const e={};return Array.from(n.querySelectorAll("swal-param")).forEach(r=>{tc(r,["name","value"]);const i=r.getAttribute("name"),o=r.getAttribute("value");!i||!o||(i in Co&&typeof Co[i]=="boolean"?e[i]=o!=="false":i in Co&&typeof Co[i]=="object"?e[i]=JSON.parse(o):e[i]=o)}),e},e9=n=>{const e={};return Array.from(n.querySelectorAll("swal-function-param")).forEach(r=>{const i=r.getAttribute("name"),o=r.getAttribute("value");!i||!o||(e[i]=new Function(`return ${o}`)())}),e},t9=n=>{const e={};return Array.from(n.querySelectorAll("swal-button")).forEach(r=>{tc(r,["type","color","aria-label"]);const i=r.getAttribute("type");if(!(!i||!["confirm","cancel","deny"].includes(i))){if(e[`${i}ButtonText`]=r.innerHTML,e[`show${cx(i)}Button`]=!0,r.hasAttribute("color")){const o=r.getAttribute("color");o!==null&&(e[`${i}ButtonColor`]=o)}if(r.hasAttribute("aria-label")){const o=r.getAttribute("aria-label");o!==null&&(e[`${i}ButtonAriaLabel`]=o)}}}),e},n9=n=>{const e={},t=n.querySelector("swal-image");return t&&(tc(t,["src","width","height","alt"]),t.hasAttribute("src")&&(e.imageUrl=t.getAttribute("src")||void 0),t.hasAttribute("width")&&(e.imageWidth=t.getAttribute("width")||void 0),t.hasAttribute("height")&&(e.imageHeight=t.getAttribute("height")||void 0),t.hasAttribute("alt")&&(e.imageAlt=t.getAttribute("alt")||void 0)),e},r9=n=>{const e={},t=n.querySelector("swal-icon");return t&&(tc(t,["type","color"]),t.hasAttribute("type")&&(e.icon=t.getAttribute("type")),t.hasAttribute("color")&&(e.iconColor=t.getAttribute("color")),e.iconHtml=t.innerHTML),e},s9=n=>{const e={},t=n.querySelector("swal-input");t&&(tc(t,["type","label","placeholder","value"]),e.input=t.getAttribute("type")||"text",t.hasAttribute("label")&&(e.inputLabel=t.getAttribute("label")),t.hasAttribute("placeholder")&&(e.inputPlaceholder=t.getAttribute("placeholder")),t.hasAttribute("value")&&(e.inputValue=t.getAttribute("value")));const r=Array.from(n.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(i=>{tc(i,["value"]);const o=i.getAttribute("value");if(!o)return;const c=i.innerHTML;e.inputOptions[o]=c})),e},i9=(n,e)=>{const t={};for(const r in e){const i=e[r],o=n.querySelector(i);o&&(tc(o,[]),t[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return t},a9=n=>{const e=CR.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(n.children).forEach(t=>{const r=t.tagName.toLowerCase();e.includes(r)||Er(`Unrecognized element <${r}>`)})},tc=(n,e)=>{Array.from(n.attributes).forEach(t=>{e.indexOf(t.name)===-1&&Er([`Unrecognized attribute "${t.name}" on <${n.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},IR=10,o9=n=>{var e,t;const r=_r(),i=_t();if(!r||!i)return;typeof n.willOpen=="function"&&n.willOpen(i),(e=Pe.eventEmitter)===null||e===void 0||e.emit("willOpen",i);const c=window.getComputedStyle(document.body).overflowY;if(u9(r,i,n),setTimeout(()=>{l9(r,i)},IR),gx()&&(c9(r,n.scrollbarPadding!==void 0?n.scrollbarPadding:!1,c),qV()),!Wg()&&!Pe.previousActiveElement&&(Pe.previousActiveElement=document.activeElement),typeof n.didOpen=="function"){const d=n.didOpen;setTimeout(()=>d(i))}(t=Pe.eventEmitter)===null||t===void 0||t.emit("didOpen",i)},ug=n=>{const e=_t();if(!e||n.target!==e)return;const t=_r();t&&(e.removeEventListener("animationend",ug),e.removeEventListener("transitionend",ug),t.style.overflowY="auto",Cs(t,ie["no-transition"]))},l9=(n,e)=>{qI(e)?(n.style.overflowY="hidden",e.addEventListener("animationend",ug),e.addEventListener("transitionend",ug)):n.style.overflowY="auto"},c9=(n,e,t)=>{QV(),e&&t!=="hidden"&&ZV(t),setTimeout(()=>{n.scrollTop=0})},u9=(n,e,t)=>{var r;(r=t.showClass)!==null&&r!==void 0&&r.backdrop&&At(n,t.showClass.backdrop),t.animation?(e.style.setProperty("opacity","0","important"),$n(e,"grid"),setTimeout(()=>{var i;(i=t.showClass)!==null&&i!==void 0&&i.popup&&At(e,t.showClass.popup),e.style.removeProperty("opacity")},IR)):$n(e,"grid"),At([document.documentElement,document.body],ie.shown),t.heightAuto&&t.backdrop&&!t.toast&&At([document.documentElement,document.body],ie["height-auto"])};var xT={email:(n,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(n,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function d9(n){n.inputValidator||(n.input==="email"&&(n.inputValidator=xT.email),n.input==="url"&&(n.inputValidator=xT.url))}function h9(n){(!n.target||typeof n.target=="string"&&!document.querySelector(n.target)||typeof n.target!="string"&&!n.target.appendChild)&&(Er('Target parameter is not valid, defaulting to "body"'),n.target="body")}function f9(n){d9(n),n.showLoaderOnConfirm&&!n.preConfirm&&Er(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),h9(n),typeof n.title=="string"&&(n.title=n.title.split(`
`).join("<br />")),rV(n)}let Ii;var lp=new WeakMap;class An{constructor(...e){if(D5(this,lp,Promise.resolve({isConfirmed:!1,isDenied:!1,isDismissed:!0})),typeof window>"u")return;Ii=this;const t=Object.freeze(this.constructor.argsToParams(e));this.params=t,this.isAwaitingPromise=!1,M5(lp,this,this._main(Ii.params))}_main(e,t={}){if(AR(Object.assign({},t,e)),Pe.currentInstance){const o=ku.swalPromiseResolve.get(Pe.currentInstance),{isAwaitingPromise:c}=Pe.currentInstance;Pe.currentInstance._destroy(),c||o({isDismissed:!0}),gx()&&rR()}Pe.currentInstance=Ii;const r=p9(e,t);f9(r),Object.freeze(r),Pe.timeout&&(Pe.timeout.stop(),delete Pe.timeout),clearTimeout(Pe.restoreFocusTimeout);const i=g9(Ii);return ZI(Ii,r),Et.innerParams.set(Ii,r),m9(Ii,i,r)}then(e){return dT(lp,this).then(e)}finally(e){return dT(lp,this).finally(e)}}const m9=(n,e,t)=>new Promise((r,i)=>{const o=c=>{n.close({isDismissed:!0,dismiss:c,isConfirmed:!1,isDenied:!1})};ku.swalPromiseResolve.set(n,r),ku.swalPromiseReject.set(n,i),e.confirmButton.onclick=()=>{g8(n)},e.denyButton.onclick=()=>{y8(n)},e.cancelButton.onclick=()=>{w8(n,o)},e.closeButton.onclick=()=>{o(td.close)},R8(t,e,o),jV(Pe,t,o),o8(n,t),o9(t),y9(Pe,t,o),w9(e,t),setTimeout(()=>{e.container.scrollTop=0})}),p9=(n,e)=>{const t=X8(n),r=Object.assign({},Co,e,t,n);return r.showClass=Object.assign({},Co.showClass,r.showClass),r.hideClass=Object.assign({},Co.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},g9=n=>{const e={popup:_t(),container:_r(),actions:gf(),confirmButton:ji(),denyButton:fc(),cancelButton:Zu(),loader:ed(),closeButton:mx(),validationMessage:$g(),progressSteps:fx()};return Et.domCache.set(n,e),e},y9=(n,e,t)=>{const r=Yg();mr(r),e.timer&&(n.timeout=new J8(()=>{t("timer"),delete n.timeout},e.timer),e.timerProgressBar&&r&&($n(r),is(r,e,"timerProgressBar"),setTimeout(()=>{n.timeout&&n.timeout.running&&wx(e.timer)})))},w9=(n,e)=>{if(!e.toast){if(!Kg(e.allowEnterKey)){UI("allowEnterKey","preConfirm: () => false"),n.popup.focus();return}b9(n)||v9(n,e)||Bb(-1,1)}},b9=n=>{const e=Array.from(n.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&Hr(t))return t.focus(),!0;return!1},v9=(n,e)=>e.focusDeny&&Hr(n.denyButton)?(n.denyButton.focus(),!0):e.focusCancel&&Hr(n.cancelButton)?(n.cancelButton.focus(),!0):e.focusConfirm&&Hr(n.confirmButton)?(n.confirmButton.focus(),!0):!1;An.prototype.disableButtons=mR;An.prototype.enableButtons=fR;An.prototype.getInput=uR;An.prototype.disableInput=gR;An.prototype.enableInput=pR;An.prototype.hideLoading=lg;An.prototype.disableLoading=lg;An.prototype.showValidationMessage=yR;An.prototype.resetValidationMessage=wR;An.prototype.close=No;An.prototype.closePopup=No;An.prototype.closeModal=No;An.prototype.closeToast=No;An.prototype.rejectPromise=aR;An.prototype.update=ER;An.prototype._destroy=_R;Object.assign(An,W8);Object.keys(I8).forEach(n=>{An[n]=function(...e){if(Ii&&Ii[n])return Ii[n](...e)}});An.DismissReason=td;An.version="11.26.20";const Ou=An;Ou.default=Ou;typeof document<"u"&&(function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const x9={background:"#04140e",color:"#d7eee4",confirmButtonColor:"#3df299"},RR=(n="Loading...")=>{Ou.fire({...x9,title:n,allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{Ou.showLoading()}})},kR=()=>{Ou.close()},Lw=8,A9=()=>{const{user:n}=Yn(),[e,t]=I.useState("pending"),[r,i]=I.useState([]),[o,c]=I.useState([]),[d,h]=I.useState([]),[m,w]=I.useState([]),[b,x]=I.useState(0),[S,k]=I.useState(null),[N,C]=I.useState(""),[D,F]=I.useState({}),[U,$]=I.useState(1),[Y,te]=I.useState(!0),[T,_]=I.useState(!1),[P,L]=I.useState(null),[B,j]=I.useState(null);I.useEffect(()=>{if(Y||T){RR("Processing...");return}kR()},[Y,T]);const M=I.useCallback(async()=>{if(!n){te(!1);return}te(!0),j(null);try{await qg(pt(Ne,"wallets",n.uid),{balances:{GLV:0},updatedAt:Rt()},{merge:!0});const[z,oe,ae,we,Re]=await Promise.all([rn(Vr(tt(Ne,"land_submissions"),Ur("status","==","pending"))),rn(tt(Ne,"lands")),rn(tt(Ne,"hectares")),rn(tt(Ne,"token_suites")),Fo(pt(Ne,"wallets",n.uid))]),Te=z.docs.map(Le=>({id:Le.id,...Le.data()}));i(Te),c(oe.docs.map(Le=>({id:Le.id,...Le.data()}))),h(ae.docs.map(Le=>({id:Le.id,...Le.data()}))),w(we.docs.map(Le=>({id:Le.id,...Le.data()})));const Ze=Re.data();x(Ze?.balances?.GLV??0),Te.length>0&&!S&&k(Te[0].id),Te.length===0&&k(null)}catch(z){const oe=z instanceof Error?z.message:"Failed to load admin data.";j(oe)}finally{te(!1)}},[S,n]);I.useEffect(()=>{M()},[M]);const ye=I.useMemo(()=>r.find(z=>z.id===S)??null,[r,S]),ee=()=>{L(null),j(null)},G=async z=>{if(ye){ee(),_(!0);try{await Ts(pt(Ne,"land_submissions",ye.id),{status:z,adminNotes:N.trim(),updatedAt:Rt()}),L(`Submission marked as ${z}.`),C(""),await M()}catch(oe){const ae=oe instanceof Error?oe.message:"Failed to update submission status.";j(ae)}finally{_(!1)}}},se=async()=>{if(ye){ee(),_(!0);try{const z=Rp(Ne),oe=pt(Ne,"land_submissions",ye.id),ae=pt(tt(Ne,"lands")),we=new Date,Re=new Date(we);Re.setDate(we.getDate()-30),z.update(oe,{status:"approved",adminNotes:N.trim(),updatedAt:Rt()}),z.set(ae,{ownerUid:ye.ownerUid,title:ye.title,locationText:ye.locationText,polygonGeoJson:null,areaHa:ye.areaHa,status:"approved",createdAt:Rt()});const Te=Math.max(1,Math.round(Number(ye.areaHa)||1));for(let Ze=1;Ze<=Te;Ze+=1){const Le=pt(tt(Ne,"hectares")),Bn=pt(tt(Ne,"market_listings"));z.set(Le,{landId:ae.id,index:Ze,polygonGeoJson:{type:"Polygon",coordinates:[]},areaHa:1,ndviLatest:{mean:.62,min:.46,max:.78,std:.09,periodStart:Re.toISOString().slice(0,10),periodEnd:we.toISOString().slice(0,10)},creditModel:{riskAdjustedTonPerHaYear:2.3},marketStatus:"available",tokenization:{suiteId:"",tokenAddress:"",status:"unlinked"}}),z.set(Bn,{hectareId:Le.id,landId:ae.id,ownerUid:ye.ownerUid,status:"available",consumedFraction:0,terms:{revShareOwner:.65,revShareAdmin:.3,revShareTreasury:.05},pricePerMonthGlv:1200,createdAt:Rt()})}await z.commit(),L("Submission approved. Land, hectares, and yearly marketplace listings were created."),C(""),await M()}catch(z){const oe=z instanceof Error?z.message:"Failed to approve submission.";j(oe)}finally{_(!1)}}},pe=async(z,oe)=>{ee(),_(!0);try{await Ts(pt(Ne,"lands",z),{status:oe}),L(`Land status updated to ${oe}.`),await M()}catch(ae){const we=ae instanceof Error?ae.message:"Failed to update land status.";j(we)}finally{_(!1)}},ve=async z=>{const oe=D[z];if(!oe){j("Select a token suite before linking hectare.");return}const ae=m.find(we=>we.id===oe);if(!ae?.addresses.token){j("Selected suite does not have a token address attached.");return}ee(),_(!0);try{await Ts(pt(Ne,"hectares",z),{tokenization:{suiteId:oe,tokenAddress:ae.addresses.token,status:"linked"}}),L("Hectare linked to token suite."),await M()}catch(we){const Re=we instanceof Error?we.message:"Failed to link hectare token suite.";j(Re)}finally{_(!1)}},de=I.useMemo(()=>{const z=[...o].sort((ae,we)=>ae.title.localeCompare(we.title)),oe=(U-1)*Lw;return z.slice(oe,oe+Lw)},[U,o]),V=Math.max(1,Math.ceil(o.length/Lw));return g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Admin Route"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)]",children:"Land Admin Console"}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Admin Custodial Wallet"}),g.jsxs("p",{className:"mt-1 font-syne text-4xl text-[var(--text-main)]",children:[b.toFixed(2)," GLV"]}),g.jsx("p",{className:"mt-3 text-xs text-[var(--text-muted)]",children:"Rent settlement is now in dedicated page for cleaner operations."}),g.jsx(qe,{to:"/admin/rent-settlement",className:"mt-3 inline-block rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Open Rent Settlement"})]}),g.jsxs("div",{className:"mt-6 flex flex-wrap gap-2 text-xs uppercase tracking-[0.14em]",children:[g.jsx("button",{type:"button",onClick:()=>t("pending"),className:`rounded-xl border px-4 py-2 ${e==="pending"?"border-[var(--edge-strong)] text-[var(--text-main)]":"border-[var(--edge)] text-[var(--text-muted)]"}`,children:"Pending Submissions"}),g.jsx("button",{type:"button",onClick:()=>t("approved"),className:`rounded-xl border px-4 py-2 ${e==="approved"?"border-[var(--edge-strong)] text-[var(--text-main)]":"border-[var(--edge)] text-[var(--text-muted)]"}`,children:"Approved / Managed Lands"})]}),P&&g.jsx("p",{className:"mt-4 rounded-xl border border-emerald-500/35 bg-emerald-500/12 px-3 py-2 text-sm text-emerald-200",children:P}),B&&g.jsx("p",{className:"mt-4 rounded-xl border border-red-400/35 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:B}),!Y&&e==="pending"&&g.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-[0.9fr_1.1fr]",children:[g.jsxs("div",{className:"space-y-3",children:[r.length===0&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No pending submissions."}),r.map(z=>g.jsxs("button",{type:"button",onClick:()=>k(z.id),className:`w-full rounded-2xl border p-4 text-left ${z.id===S?"border-[var(--edge-strong)] bg-[var(--card-hard)]":"border-[var(--edge)] bg-[var(--card-soft)]"}`,children:[g.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:z.title}),g.jsxs("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:[z.ownerName," | ",z.areaHa," ha"]}),g.jsx("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:z.locationText})]},z.id))]}),g.jsxs("div",{className:"rounded-2xl border border-[var(--edge)] bg-[var(--card-hard)] p-5",children:[!ye&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Select a submission to review."}),ye&&g.jsxs("div",{className:"space-y-4 text-left",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:"Submission Detail"}),g.jsx("h2",{className:"mt-2 font-syne text-2xl text-[var(--text-main)]",children:ye.title}),g.jsx("p",{className:"mt-1 text-sm text-[var(--text-muted)]",children:ye.locationText}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-muted)]",children:["Area: ",ye.areaHa," ha"]})]}),g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:"KYC Summary"}),g.jsxs("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:["Name: ",ye.kyc.ktpName,g.jsx("br",{}),"KTP: ",ye.kyc.ktpNumberMasked,g.jsx("br",{}),"Selfie URL: ",ye.kyc.selfieUrl||"-"]})]}),g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:"Land Proof"}),g.jsx("a",{href:ye.landProof.url,target:"_blank",rel:"noreferrer",className:"mt-2 inline-block text-sm text-[var(--text-main)] underline",children:"Open landProof.url"}),ye.landProof.notes&&g.jsx("p",{className:"mt-2 text-xs text-[var(--text-muted)]",children:ye.landProof.notes})]}),g.jsxs("label",{className:"block text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Admin notes",g.jsx("textarea",{value:N,onChange:z=>C(z.target.value),rows:3,className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-4 py-3 text-sm text-[var(--text-main)] outline-none"})]}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{se()},disabled:T,className:"btn-primary btn-shine rounded-xl px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[#03140b] disabled:opacity-70",children:"Approve"}),g.jsx("button",{type:"button",onClick:()=>{G("needs_revision")},disabled:T,className:"rounded-xl border border-[var(--edge)] px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-70",children:"Needs Revision"}),g.jsx("button",{type:"button",onClick:()=>{G("rejected")},disabled:T,className:"rounded-xl border border-red-400/40 bg-red-500/10 px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-red-200 disabled:opacity-70",children:"Reject"})]})]})]})]}),!Y&&e==="approved"&&g.jsx("div",{className:"mt-6 space-y-6",children:g.jsxs("article",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:[g.jsx("h2",{className:"font-syne text-3xl text-[var(--text-main)]",children:"Approved Lands Table"}),g.jsx("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:"Each row is one approved land. Admin can revoke, re-accept, revise and link token suite."}),g.jsx("div",{className:"mt-4 overflow-x-auto",children:g.jsxs("table",{className:"min-w-full border-collapse text-left text-xs text-[var(--text-muted)]",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Land"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Owner UID"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Area"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Status"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Actions"})]})}),g.jsx("tbody",{children:de.map(z=>{const oe=d.filter(ae=>ae.landId===z.id);return g.jsxs("tr",{children:[g.jsxs("td",{className:"border-b border-[var(--edge)] px-3 py-2",children:[g.jsx("p",{className:"text-[var(--text-main)]",children:z.title}),g.jsx("p",{className:"text-[10px]",children:z.locationText}),g.jsx("div",{className:"mt-2 space-y-2",children:oe.map(ae=>g.jsxs("div",{className:"rounded-lg border border-[var(--edge)] bg-[var(--card-hard)] p-2",children:[g.jsxs("p",{className:"text-[10px] uppercase tracking-[0.1em] text-[var(--primary)]",children:["Hectare #",ae.index]}),g.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[g.jsxs("select",{value:D[ae.id]??"",onChange:we=>F(Re=>({...Re,[ae.id]:we.target.value})),className:"rounded-md border border-[var(--edge)] bg-[var(--card-soft)] px-2 py-1 text-[10px] text-[var(--text-main)]",children:[g.jsx("option",{value:"",children:"Select suite"}),m.map(we=>g.jsx("option",{value:we.id,children:we.name},we.id))]}),g.jsx("button",{type:"button",onClick:()=>{ve(ae.id)},className:"rounded-md border border-[var(--edge)] px-2 py-1 text-[10px] uppercase tracking-[0.1em] text-[var(--text-main)]",children:"Link Token Suite"})]})]},ae.id))})]}),g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2",children:z.ownerUid}),g.jsxs("td",{className:"border-b border-[var(--edge)] px-3 py-2",children:[z.areaHa," ha"]}),g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2 uppercase",children:z.status}),g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2",children:g.jsxs("div",{className:"flex flex-wrap gap-1",children:[g.jsx("button",{type:"button",onClick:()=>{pe(z.id,"approved")},className:"rounded-md border border-emerald-400/40 px-2 py-1 text-[10px] uppercase tracking-[0.1em] text-emerald-200",children:"Re-accept"}),g.jsx("button",{type:"button",onClick:()=>{pe(z.id,"revised")},className:"rounded-md border border-yellow-400/40 px-2 py-1 text-[10px] uppercase tracking-[0.1em] text-yellow-200",children:"Revise"}),g.jsx("button",{type:"button",onClick:()=>{pe(z.id,"revoked")},className:"rounded-md border border-red-400/40 px-2 py-1 text-[10px] uppercase tracking-[0.1em] text-red-200",children:"Revoke"})]})})]},z.id)})})]})}),g.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[g.jsx("button",{type:"button",disabled:U<=1,onClick:()=>$(z=>Math.max(1,z-1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Prev"}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Page ",U," / ",V]}),g.jsx("button",{type:"button",disabled:U>=V,onClick:()=>$(z=>Math.min(V,z+1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Next"})]})]})})]})},PR=(n,e,t)=>Math.min(t,Math.max(e,n)),Ub=(n,e=3)=>{const t=10**e;return Math.round((n+Number.EPSILON)*t)/t},E9=n=>typeof n=="object"&&n!==null&&"seconds"in n?Number(n.seconds):0,_9=n=>{const e=E9(n);return e>0?new Date(e*1e3).toISOString().slice(0,10):""},AT=(n,e,t)=>!(!n||e&&n<e||t&&n>t),Xg=n=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(n)}`,Zg=n=>{const e=n.reduce((t,r)=>{if(!r.ndviLatest)return t;const o=(r.creditModel?.riskAdjustedTonPerHaYear??2.3)*r.areaHa*PR(r.ndviLatest.mean,0,1);return t+o},0);return Ub(e,2)},T9=(n,e,t=18)=>{const r=Math.max(n.areaHa||0,1e-4),i=e.length>0?e.reduce((c,d)=>c+(d.ndviLatest?.mean??.62),0)/e.length:.62,o=[];for(let c=t-1;c>=0;c-=1){const d=new Date;d.setDate(1),d.setMonth(d.getMonth()-c);const h=Math.sin((c+1)*.55)*.08,m=(t-c)*.002,w=PR(i+h+m,.3,.92),b=Ub(w*r*2.3,3),x=d.toISOString().slice(0,10);o.push({id:`S2-${x.replaceAll("-","")}`,date:x,ndviMean:Ub(w,3),carbonTon:b,sourceUrl:`https://browser.dataspace.copernicus.eu/?zoom=8&lat=0&lng=0&fromTime=${x}&toTime=${x}`})}return o},_x=n=>n instanceof Gt?n.toDate().toLocaleString():n instanceof Date?n.toLocaleString():"-",S9=(n,e=0)=>!Number.isFinite(n)||n<0?e:n,N9=n=>{const e=n.replace(/\D/g,"");return e.length<=4?e:`${e.slice(0,2)}********${e.slice(-2)}`},Vt=n=>Math.round((n+Number.EPSILON)*100)/100,Bw=5,jw=6,ET=n=>n.toISOString().slice(0,10),C9=()=>{const{user:n}=Yn(),{landId:e}=Vi(),[t,r]=I.useState(!0),[i,o]=I.useState(null),[c,d]=I.useState(null),[h,m]=I.useState([]),[w,b]=I.useState([]),x=I.useMemo(()=>{const de=new Date;return de.setMonth(de.getMonth()-12),ET(de)},[]),S=I.useMemo(()=>ET(new Date),[]),[k,N]=I.useState(x),[C,D]=I.useState(S),[F,U]=I.useState(""),[$,Y]=I.useState(""),[te,T]=I.useState(1),[_,P]=I.useState(1);I.useEffect(()=>{(async()=>{if(!n||!e){r(!1);return}r(!0),o(null);try{const V=await Fo(pt(Ne,"lands",e));if(!V.exists()){o("Land not found."),r(!1);return}const z={id:V.id,...V.data()};if(z.ownerUid!==n.uid){o("You are not allowed to access this land detail."),r(!1);return}const[oe,ae]=await Promise.all([rn(Vr(tt(Ne,"hectares"),Ur("landId","==",e))),rn(Vr(tt(Ne,"ledger"),Ur("ref.landId","==",e)))]),we=oe.docs.map(Te=>({id:Te.id,...Te.data()})).sort((Te,Ze)=>Te.index-Ze.index),Re=ae.docs.map(Te=>({id:Te.id,...Te.data()})).sort((Te,Ze)=>{const Le=typeof Te.createdAt=="object"&&Te.createdAt!==null&&"seconds"in Te.createdAt?Number(Te.createdAt.seconds):0;return(typeof Ze.createdAt=="object"&&Ze.createdAt!==null&&"seconds"in Ze.createdAt?Number(Ze.createdAt.seconds):0)-Le});d(z),m(we),b(Re)}catch(V){const z=V instanceof Error?V.message:"Failed to load land detail.";o(z)}finally{r(!1)}})()},[e,n]);const L=I.useMemo(()=>c?T9(c,h,18):[],[h,c]),B=I.useMemo(()=>L.filter(de=>AT(de.date,k,C)),[k,C,L]),j=I.useMemo(()=>Zg(h),[h]),M=I.useMemo(()=>B.length===0?1:Math.max(...B.map(de=>de.carbonTon),1),[B]),ye=I.useMemo(()=>Math.max(1,Math.ceil(B.length/Bw)),[B.length]),ee=I.useMemo(()=>{const de=(te-1)*Bw;return B.slice(de,de+Bw)},[B,te]),G=I.useMemo(()=>w.filter(de=>{const V=_9(de.createdAt);return V?AT(V,F,$):!1}),[F,$,w]),se=I.useMemo(()=>Math.max(1,Math.ceil(G.length/jw)),[G.length]),pe=I.useMemo(()=>{const de=(_-1)*jw;return G.slice(de,de+jw)},[G,_]),ve=I.useMemo(()=>G.reduce((de,V)=>de+(Number(V.amountGlv)||0),0),[G]);return I.useEffect(()=>{T(1)},[k,C]),I.useEffect(()=>{P(1)},[F,$]),t?g.jsx("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:g.jsx("p",{className:"text-sm uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Loading land detail..."})}):i||!c?g.jsx("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:g.jsx("div",{className:"rounded-3xl border border-red-400/35 bg-red-500/10 p-6 text-red-200",children:i??"Unable to open land detail."})}):g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Land Detail"}),g.jsx("h1",{className:"mt-2 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)]",children:c.title})]}),g.jsx(qe,{to:"/dashboard",className:"rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Back to Dashboard"})]}),g.jsx("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 md:p-8",children:g.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Location"}),g.jsx("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:c.locationText}),g.jsx("p",{className:"mt-4 text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Area"}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:[c.areaHa," ha"]}),g.jsx("p",{className:"mt-4 text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Hectares"}),g.jsx("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:h.length})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Carbon Absorption (Latest Estimate)"}),g.jsxs("p",{className:"mt-1 font-syne text-4xl text-[var(--text-main)]",children:[j.toFixed(2)," ton/year"]}),g.jsx("a",{href:Xg(c.locationText),target:"_blank",rel:"noreferrer",className:"mt-4 inline-block rounded-xl border border-[var(--edge)] px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Open Maps View"})]})]})}),g.jsxs("section",{className:"mt-10",children:[g.jsx("h2",{className:"font-syne text-3xl text-[var(--text-main)]",children:"Monitoring Histories"}),g.jsx("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:"Carbon absorption trend sourced from Sentinel-2 observations."}),g.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["From",g.jsx("input",{type:"date",value:k,onChange:de=>N(de.target.value),className:"mt-2 block rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["To",g.jsx("input",{type:"date",value:C,onChange:de=>D(de.target.value),className:"mt-2 block rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]"})]})]}),g.jsx("div",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:g.jsx("div",{className:"overflow-x-auto",children:g.jsx("div",{className:"flex min-w-[720px] items-end gap-2",children:B.map(de=>g.jsxs("div",{className:"flex w-10 flex-col items-center gap-2",children:[g.jsx("div",{className:"w-full rounded-t-md bg-gradient-to-b from-[var(--primary)] to-[#0dad68]",style:{height:`${Math.max(8,de.carbonTon/M*170)}px`},title:`${de.date}: ${de.carbonTon} ton/year`}),g.jsx("p",{className:"text-[10px] text-[var(--text-muted)]",children:de.date.slice(5)})]},de.id))})})})]}),g.jsxs("section",{className:"mt-10",children:[g.jsx("h2",{className:"font-syne text-3xl text-[var(--text-main)]",children:"Sentinel-2 Data Source"}),g.jsx("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:"Source references from Sentinel-2 compatible browser links."}),g.jsxs("div",{className:"mt-4 space-y-3",children:[ee.length===0&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No records in this date range."}),ee.map(de=>g.jsxs("article",{className:"rounded-2xl border border-[var(--edge)] bg-[var(--card-soft)] p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:de.id}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-muted)]",children:["Date: ",de.date," | NDVI mean: ",de.ndviMean.toFixed(3)," | Carbon: ",de.carbonTon.toFixed(3)," ton/year"]}),g.jsx("a",{href:de.sourceUrl,target:"_blank",rel:"noreferrer",className:"mt-2 inline-block text-sm text-[var(--text-main)] underline",children:"Open Sentinel-2 Source"})]},de.id))]}),g.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[g.jsx("button",{type:"button",disabled:te<=1,onClick:()=>T(de=>Math.max(1,de-1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Prev"}),g.jsxs("p",{className:"text-xs uppercase tracking-[0.12em] text-[var(--text-muted)]",children:["Page ",te," / ",ye]}),g.jsx("button",{type:"button",disabled:te>=ye,onClick:()=>T(de=>Math.min(ye,de+1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Next"})]})]}),g.jsxs("section",{className:"mt-10",children:[g.jsx("h2",{className:"font-syne text-3xl text-[var(--text-main)]",children:"Land Transaction History"}),g.jsx("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:"Traded volume and buyer wallet addresses for this land."}),g.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["From",g.jsx("input",{type:"date",value:F,onChange:de=>U(de.target.value),className:"mt-2 block rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["To",g.jsx("input",{type:"date",value:$,onChange:de=>Y(de.target.value),className:"mt-2 block rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]"})]})]}),g.jsxs("article",{className:"mt-4 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Filtered Traded Volume"}),g.jsxs("p",{className:"mt-1 font-syne text-4xl text-[var(--text-main)]",children:[ve.toFixed(2)," GLV"]}),g.jsxs("div",{className:"mt-5 space-y-3",children:[pe.length===0&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No transactions in this range."}),pe.map(de=>g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:de.type}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:["Amount: ",de.amountGlv.toFixed(2)," GLV"]}),g.jsxs("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:["Buyer wallet: ",de.fromUid??"-"]}),g.jsxs("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:["Receiver wallet: ",de.toUid??"-"]}),g.jsx("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:_x(de.createdAt)})]},de.id))]}),g.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[g.jsx("button",{type:"button",disabled:_<=1,onClick:()=>P(de=>Math.max(1,de-1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Prev"}),g.jsxs("p",{className:"text-xs uppercase tracking-[0.12em] text-[var(--text-muted)]",children:["Page ",_," / ",se]}),g.jsx("button",{type:"button",disabled:_>=se,onClick:()=>P(de=>Math.min(se,de+1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Next"})]})]})]})]})},I9="6.16.0";function R9(n,e,t){const r=e.split("|").map(o=>o.trim());for(let o=0;o<r.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=n,i}async function wr(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,i,o)=>(r[e[o]]=i,r),{})}function je(n,e,t){for(let r in e){let i=e[r];const o=t?t[r]:null;o&&R9(i,o,r),Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function cu(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>cu(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let i=0;i<n.length;i++)r+=t[n[i]>>4],r+=t[n[i]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return cu(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${cu(r,e)}: ${cu(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function sr(n,e){return n&&n.code===e}function Tx(n){return sr(n,"CALL_EXCEPTION")}function Wt(n,e,t){let r=n;{const o=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${cu(t)}`);for(const c in t){if(c==="shortMessage")continue;const d=t[c];o.push(c+"="+cu(d))}}o.push(`code=${e}`),o.push(`version=${I9}`),o.length&&(n+=" ("+o.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return je(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&je(i,{shortMessage:r}),i}function me(n,e,t,r){if(!n)throw Wt(e,t,r)}function Q(n,e,t,r){me(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function OR(n,e,t){t==null&&(t=""),t&&(t=": "+t),me(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),me(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function vf(n,e,t){if(t==null&&(t=""),n!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function DR(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.length%2===0&&n.match(/^0x[0-9a-f]*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let o=0;o<r.length;o++)r[o]=parseInt(n.substring(i,i+2),16),i+=2;return r}Q(!1,"invalid BytesLike value",e||"value",n)}function Xe(n,e){return DR(n,e,!1)}function br(n,e){return DR(n,e,!0)}function qt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function Sx(n){return qt(n,!0)||n instanceof Uint8Array}const _T="0123456789abcdef";function Ae(n){const e=Xe(n);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=_T[(i&240)>>4]+_T[i&15]}return t}function Xt(n){return"0x"+n.map(e=>Ae(e).substring(2)).join("")}function bu(n){return qt(n,!0)?(n.length-2)/2:Xe(n).length}function un(n,e,t){const r=Xe(n);return t!=null&&t>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),Ae(r.slice(e??0,t??r.length))}function MR(n,e,t){const r=Xe(n);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(r,e-r.length):i.set(r,0),Ae(i)}function ka(n,e){return MR(n,e,!0)}function k9(n,e){return MR(n,e,!1)}const xf=BigInt(0),Xs=BigInt(1),uu=9007199254740991;function dg(n,e){const t=ey(n,"value"),r=BigInt(Ye(e,"width"));if(me(t>>r===xf,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-Xs){const i=(Xs<<r)-Xs;return-((~t&i)+Xs)}return t}function LR(n,e){let t=Ce(n,"value");const r=BigInt(Ye(e,"width")),i=Xs<<r-Xs;if(t<xf){t=-t,me(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const o=(Xs<<r)-Xs;return(~t&o)+Xs}else me(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function jl(n,e){const t=ey(n,"value"),r=BigInt(Ye(e,"bits"));return t&(Xs<<r)-Xs}function Ce(n,e){switch(typeof n){case"bigint":return n;case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-uu&&n<=uu,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){Q(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}Q(!1,"invalid BigNumberish value",e||"value",n)}function ey(n,e){const t=Ce(n,e);return me(t>=xf,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const TT="0123456789abcdef";function ty(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=TT[t>>4],e+=TT[t&15];return BigInt(e)}return Ce(n)}function Ye(n,e){switch(typeof n){case"bigint":return Q(n>=-uu&&n<=uu,"overflow",e||"value",n),Number(n);case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-uu&&n<=uu,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return Ye(BigInt(n),e)}catch(t){Q(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}Q(!1,"invalid numeric value",e||"value",n)}function P9(n){return Ye(ty(n))}function Ho(n,e){const t=ey(n,"value");let r=t.toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Ye(e,"width");if(i===0&&t===xf)return"0x";for(me(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function Mn(n,e){const t=ey(n,"value");if(t===xf)return new Uint8Array(0);let r=t.toString(16);r.length%2&&(r="0"+r);const i=new Uint8Array(r.length/2);for(let o=0;o<i.length;o++){const c=o*2;i[o]=parseInt(r.substring(c,c+2),16)}return i}function Js(n){let e=Ae(Sx(n)?n:Mn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const ST="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const NT=BigInt(58);function O9(n){const e=Xe(n);let t=ty(e),r="";for(;t;)r=ST[Number(t%NT)]+r,t/=NT;for(let i=0;i<e.length&&!e[i];i++)r=ST[0]+r;return r}function D9(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return Xe(e)}function M9(n){const e=Xe(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}class BR{filter;emitter;#e;constructor(e,t,r){this.#e=t,je(this,{emitter:e,filter:r})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function L9(n,e,t,r,i){Q(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function jR(n,e,t,r,i){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let o=0;for(let c=e+1;c<t.length&&t[c]>>6===2;c++)o++;return o}return n==="OVERRUN"?t.length-e-1:0}function B9(n,e,t,r,i){return n==="OVERLONG"?(Q(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),jR(n,e,t))}const j9=Object.freeze({error:L9,ignore:jR,replace:B9});function U9(n,e){e==null&&(e=j9.error);const t=Xe(n,"bytes"),r=[];let i=0;for(;i<t.length;){const o=t[i++];if(o>>7===0){r.push(o);continue}let c=null,d=null;if((o&224)===192)c=1,d=127;else if((o&240)===224)c=2,d=2047;else if((o&248)===240)c=3,d=65535;else{(o&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,r):i+=e("BAD_PREFIX",i-1,t,r);continue}if(i-1+c>=t.length){i+=e("OVERRUN",i-1,t,r);continue}let h=o&(1<<8-c-1)-1;for(let m=0;m<c;m++){let w=t[i];if((w&192)!=128){i+=e("MISSING_CONTINUE",i,t,r),h=null;break}h=h<<6|w&63,i++}if(h!==null){if(h>1114111){i+=e("OUT_OF_RANGE",i-1-c,t,r,h);continue}if(h>=55296&&h<=57343){i+=e("UTF16_SURROGATE",i-1-c,t,r,h);continue}if(h<=d){i+=e("OVERLONG",i-1-c,t,r,h);continue}r.push(h)}}return r}function Aa(n,e){Q(typeof n=="string","invalid string value","str",n);let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const o=n.charCodeAt(r);Q(r<n.length&&(o&64512)===56320,"invalid surrogate pair","str",n);const c=65536+((i&1023)<<10)+(o&1023);t.push(c>>18|240),t.push(c>>12&63|128),t.push(c>>6&63|128),t.push(c&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function V9(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function hg(n,e){return V9(U9(n,e))}function UR(n){async function e(t,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();me(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),me(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let o=null;const c=new AbortController,d=setTimeout(()=>{o=Wt("request timeout","TIMEOUT"),c.abort()},t.timeout);r&&r.addListener(()=>{o=Wt("request cancelled","CANCELLED"),c.abort()});const h=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:c.signal});let m;try{m=await fetch(t.url,h)}catch(S){throw clearTimeout(d),o||S}clearTimeout(d);const w={};m.headers.forEach((S,k)=>{w[k.toLowerCase()]=S});const b=await m.arrayBuffer(),x=b==null?null:new Uint8Array(b);return{statusCode:m.status,statusMessage:m.statusText,headers:w,body:x}}return e}const F9=12,H9=250;let CT=UR();const z9=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),G9=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Uw=!1;async function VR(n,e){try{const t=n.match(z9);if(!t)throw new Error("invalid data");return new Do(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?D9(t[3]):Q9(t[3]))}catch{return new Do(599,"BAD REQUEST (invalid data: URI)",{},null,new Pa(n))}}function FR(n){async function e(t,r){try{const i=t.match(G9);if(!i)throw new Error("invalid link");return new Pa(`${n}${i[2]}`)}catch{return new Do(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Pa(t))}}return e}const cp={data:VR,ipfs:FR("https://gateway.ipfs.io/ipfs/")},HR=new WeakMap;class q9{#e;#t;constructor(e){this.#e=[],this.#t=!1,HR.set(e,()=>{if(!this.#t){this.#t=!0;for(const t of this.#e)setTimeout(()=>{t()},0);this.#e=[]}})}addListener(e){me(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}function up(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}class Pa{#e;#t;#n;#r;#s;#a;#i;#o;#d;#c;#m;#p;#l;#u;#h;get url(){return this.#a}set url(e){this.#a=String(e)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(e){if(e==null)this.#i=void 0,this.#o=void 0;else if(typeof e=="string")this.#i=Aa(e),this.#o="text/plain";else if(e instanceof Uint8Array)this.#i=e,this.#o="application/octet-stream";else if(typeof e=="object")this.#i=Aa(JSON.stringify(e)),this.#o="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#r?this.#r:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#r=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#d&&(e.authorization=`Basic ${M9(Aa(this.#d))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#o&&(e["content-type"]=this.#o),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#n[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#d||null}setCredentials(e,t){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#d=`${e}:${t}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#s}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),this.#s=e}get preflightFunc(){return this.#c||null}set preflightFunc(e){this.#c=e}get processFunc(){return this.#m||null}set processFunc(e){this.#m=e}get retryFunc(){return this.#p||null}set retryFunc(e){this.#p=e}get getUrlFunc(){return this.#h||CT}set getUrlFunc(e){this.#h=e}constructor(e){this.#a=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#r="",this.#s=3e5,this.#u={slotInterval:H9,maxAttempts:F9},this.#h=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?Ae(this.#i):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#f(e,t,r,i,o){if(e>=this.#u.maxAttempts)return o.makeServerError("exceeded maximum retry limit");me(IT()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await K9(r);let c=this.clone();const d=(c.url.split(":")[0]||"").toLowerCase();if(d in cp){const w=await cp[d](c.url,up(i.#l));if(w instanceof Do){let b=w;if(this.processFunc){up(i.#l);try{b=await this.processFunc(c,b)}catch(x){(x.throttle==null||typeof x.stall!="number")&&b.makeServerError("error in post-processing function",x).assertOk()}}return b}c=w}this.preflightFunc&&(c=await this.preflightFunc(c));const h=await this.getUrlFunc(c,up(i.#l));let m=new Do(h.statusCode,h.statusMessage,h.headers,h.body,i);if(m.statusCode===301||m.statusCode===302){try{const w=m.headers.location||"";return c.redirect(w).#f(e+1,t,0,i,m)}catch{}return m}else if(m.statusCode===429&&(this.retryFunc==null||await this.retryFunc(c,m,e))){const w=m.headers["retry-after"];let b=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof w=="string"&&w.match(/^[1-9][0-9]*$/)&&(b=parseInt(w)),c.clone().#f(e+1,t,b,i,m)}if(this.processFunc){up(i.#l);try{m=await this.processFunc(c,m)}catch(w){(w.throttle==null||typeof w.stall!="number")&&m.makeServerError("error in post-processing function",w).assertOk();let b=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return w.stall>=0&&(b=w.stall),c.clone().#f(e+1,t,b,i,m)}}return m}send(){return me(this.#l==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#l=new q9(this),this.#f(0,IT()+this.timeout,0,this,new Do(0,"",{},null,this))}cancel(){me(this.#l!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=HR.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Pa(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,i.#n=Object.assign({},this.#n),this.#i&&(i.#i=new Uint8Array(this.#i)),i.#o=this.#o,i}clone(){const e=new Pa(this.url);return e.#r=this.#r,this.#i&&(e.#i=this.#i),e.#o=this.#o,e.#n=Object.assign({},this.#n),e.#d=this.#d,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#c=this.#c,e.#m=this.#m,e.#p=this.#p,e.#u=Object.assign({},this.#u),e.#h=this.#h,e}static lockConfig(){Uw=!0}static getGateway(e){return cp[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Uw)throw new Error("gateways locked");cp[e]=t}static registerGetUrl(e){if(Uw)throw new Error("gateways locked");CT=e}static createGetUrlFunc(e){return UR(e)}static createDataGateway(){return VR}static createIpfsGatewayFunc(e){return FR(e)}}class Do{#e;#t;#n;#r;#s;#a;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#r?Ae(this.#r):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#r==null?null:new Uint8Array(this.#r)}get bodyText(){try{return this.#r==null?"":hg(this.#r)}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,r,i,o){this.#e=e,this.#t=t,this.#n=Object.keys(r).reduce((c,d)=>(c[d.toLowerCase()]=String(r[d]),c),{}),this.#r=i==null?null:new Uint8Array(i),this.#s=o||null,this.#a={message:""}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new Do(599,r,this.headers,this.body,this.#s||void 0);return i.#a={message:e,error:t},i}throwThrottleError(e,t){t==null?t=-1:Q(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw je(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#r!=null}get request(){return this.#s}ok(){return this.#a.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#a;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{this.#r&&(i=hg(this.#r))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function IT(){return new Date().getTime()}function Q9(n){return Aa(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function K9(n){return new Promise(e=>setTimeout(e,n))}const $9=BigInt(-1),$s=BigInt(0),du=BigInt(1),Y9=BigInt(5),nu={};let vu="0000";for(;vu.length<80;)vu+=vu;function Nl(n){let e=vu;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function uh(n,e,t){const r=BigInt(e.width);if(e.signed){const i=du<<r-du;me(t==null||n>=-i&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>$s?n=dg(jl(n,r),r):n=-dg(jl(-n,r),r)}else{const i=du<<r;me(t==null||n>=0&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%i+i)%i&i-du}return n}function Vw(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const o=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Q(o,"invalid fixed format","format",n),e=o[1]!=="u",t=parseInt(o[2]),r=parseInt(o[3])}}else if(n){const o=n,c=(d,h,m)=>o[d]==null?m:(Q(typeof o[d]===h,"invalid fixed format ("+d+" not "+h+")","format."+d,o[d]),o[d]);e=c("signed","boolean",e),t=c("width","number",t),r=c("decimals","number",r)}Q(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),Q(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:i}}function W9(n,e){let t="";n<$s&&(t="-",n*=$9);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=vu+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}class ca{format;#e;#t;#n;_value;constructor(e,t,r){vf(e,nu,"FixedNumber"),this.#t=t,this.#e=r;const i=W9(t,r.decimals);je(this,{format:r.name,_value:i}),this.#n=Nl(r.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#r(e){Q(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#s(e,t){return e=uh(e,this.#e,t),new ca(nu,e,this.#e)}#a(e,t){return this.#r(e),this.#s(this.#t+e.#t,t)}addUnsafe(e){return this.#a(e)}add(e){return this.#a(e,"add")}#i(e,t){return this.#r(e),this.#s(this.#t-e.#t,t)}subUnsafe(e){return this.#i(e)}sub(e){return this.#i(e,"sub")}#o(e,t){return this.#r(e),this.#s(this.#t*e.#t/this.#n,t)}mulUnsafe(e){return this.#o(e)}mul(e){return this.#o(e,"mul")}mulSignal(e){this.#r(e);const t=this.#t*e.#t;return me(t%this.#n===$s,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#s(t/this.#n,"mulSignal")}#d(e,t){return me(e.#t!==$s,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e),this.#s(this.#t*this.#n/e.#t,t)}divUnsafe(e){return this.#d(e)}div(e){return this.#d(e,"div")}divSignal(e){me(e.#t!==$s,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e);const t=this.#t*this.#n;return me(t%e.#t===$s,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#s(t/e.#t,"divSignal")}cmp(e){let t=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=Nl(i):i<0&&(t*=Nl(-i)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<$s&&(e-=this.#n-du),e=this.#t/this.#n*this.#n,this.#s(e,"floor")}ceiling(){let e=this.#t;return this.#t>$s&&(e+=this.#n-du),e=this.#t/this.#n*this.#n,this.#s(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=Y9*Nl(t-1);let i=this.value+r;const o=Nl(t);return i=i/o*o,uh(i,this.#e,"round"),new ca(nu,i,this.#e)}isZero(){return this.#t===$s}isNegative(){return this.#t<$s}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return ca.fromString(this.toString(),e)}static fromValue(e,t,r){const i=t==null?0:Ye(t),o=Vw(r);let c=Ce(e,"value");const d=i-o.decimals;if(d>0){const h=Nl(d);me(c%h===$s,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),c/=h}else d<0&&(c*=Nl(-d));return uh(c,o,"fromValue"),new ca(nu,c,o)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Q(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=Vw(t);let o=r[2]||"0",c=r[3]||"";for(;c.length<i.decimals;)c+=vu;me(c.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),c=c.substring(0,i.decimals);const d=BigInt(r[1]+o+c);return uh(d,i,"fromString"),new ca(nu,d,i)}static fromBytes(e,t){let r=ty(Xe(e,"value"));const i=Vw(t);return i.signed&&(r=dg(r,i.width)),uh(r,i,"fromBytes"),new ca(nu,r,i)}}function J9(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function RT(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function kT(n,e,t,r){const i=[];for(;t<e+1+r;){const o=zR(n,t);i.push(o.result),t+=o.consumed,me(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:i}}function zR(n,e){me(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{me(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const i=RT(n,e+1,r);return t(e+1+r+i),kT(n,e,e+1+r,r+i)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),kT(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const i=RT(n,e+1,r);t(e+1+r+i);const o=Ae(n.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:o}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const i=Ae(n.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:J9(n[e])}}function Af(n){const e=Xe(n,"data"),t=zR(e,0);return Q(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function PT(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function GR(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(o){r=r.concat(GR(o))}),r.length<=55)return r.unshift(192+r.length),r;const i=PT(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Xe(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=PT(e.length);return t.unshift(183+t.length),t.concat(e)}const OT="0123456789abcdef";function Ea(n){let e="0x";for(const t of GR(n))e+=OT[t>>4],e+=OT[t&15];return e}const qR=["wei","kwei","mwei","gwei","szabo","finney","ether"];function QR(n,e){let t=18;if(typeof e=="string"){const r=qR.indexOf(e);Q(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=Ye(e,"unit"));return ca.fromValue(n,t,{decimals:t,width:512}).toString()}function ny(n,e){Q(typeof n=="string","value must be a string","value",n);let t=18;if(typeof e=="string"){const r=qR.indexOf(e);Q(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=Ye(e,"unit"));return ca.fromString(n,{decimals:t,width:512}).value}const vr=32,Vb=new Uint8Array(vr),X9=["then"],dp={},KR=new WeakMap;function Ol(n){return KR.get(n)}function DT(n,e){KR.set(n,e)}function dh(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function Fb(n,e,t){return n.indexOf(null)>=0?e.map((r,i)=>r instanceof ya?Fb(Ol(r),r,t):r):n.reduce((r,i,o)=>{let c=e.getValue(i);return i in r||(t&&c instanceof ya&&(c=Fb(Ol(c),c,t)),r[i]=c),r},{})}class ya extends Array{#e;constructor(...e){const t=e[0];let r=e[1],i=(e[2]||[]).slice(),o=!0;t!==dp&&(r=e,i=[],o=!1),super(r.length),r.forEach((h,m)=>{this[m]=h});const c=i.reduce((h,m)=>(typeof m=="string"&&h.set(m,(h.get(m)||0)+1),h),new Map);if(DT(this,Object.freeze(r.map((h,m)=>{const w=i[m];return w!=null&&c.get(w)===1?w:null}))),this.#e=[],this.#e==null&&this.#e,!o)return;Object.freeze(this);const d=new Proxy(this,{get:(h,m,w)=>{if(typeof m=="string"){if(m.match(/^[0-9]+$/)){const x=Ye(m,"%index");if(x<0||x>=this.length)throw new RangeError("out of result range");const S=h[x];return S instanceof Error&&dh(`index ${x}`,S),S}if(X9.indexOf(m)>=0)return Reflect.get(h,m,w);const b=h[m];if(b instanceof Function)return function(...x){return b.apply(this===w?h:this,x)};if(!(m in h))return h.getValue.apply(this===w?h:this,[m])}return Reflect.get(h,m,w)}});return DT(d,Ol(this)),d}toArray(e){const t=[];return this.forEach((r,i)=>{r instanceof Error&&dh(`index ${i}`,r),e&&r instanceof ya&&(r=r.toArray(e)),t.push(r)}),t}toObject(e){const t=Ol(this);return t.reduce((r,i,o)=>(me(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Fb(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);const r=Ol(this),i=[],o=[];for(let c=e;c<t;c++)i.push(this[c]),o.push(r[c]);return new ya(dp,i,o)}filter(e,t){const r=Ol(this),i=[],o=[];for(let c=0;c<this.length;c++){const d=this[c];d instanceof Error&&dh(`index ${c}`,d),e.call(t,d,c,this)&&(i.push(d),o.push(r[c]))}return new ya(dp,i,o)}map(e,t){const r=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&dh(`index ${i}`,o),r.push(e.call(t,o,i,this))}return r}getValue(e){const t=Ol(this).indexOf(e);if(t===-1)return;const r=this[t];return r instanceof Error&&dh(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new ya(dp,e,t)}}function MT(n){let e=Mn(n);return me(e.length<=vr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:vr,offset:e.length}),e.length!==vr&&(e=br(Xt([Vb.slice(e.length%vr),e]))),e}class Ma{name;type;localName;dynamic;constructor(e,t,r,i){je(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){Q(!1,e,this.localName,t)}}class Hb{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return Xt(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(br(e.data))}writeBytes(e){let t=br(e);const r=t.length%vr;return r&&(t=br(Xt([t,Vb.slice(r)]))),this.#n(t)}writeValue(e){return this.#n(MT(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(Vb),this.#t+=vr,t=>{this.#e[e]=MT(t)}}}class Nx{allowLoose;#e;#t;#n;#r;#s;constructor(e,t,r){je(this,{allowLoose:!!t}),this.#e=br(e),this.#n=0,this.#r=null,this.#s=r??1024,this.#t=0}get data(){return Ae(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#a(e){if(this.#r)return this.#r.#a(e);this.#n+=e,me(this.#s<1||this.#n<=this.#s*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#s} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:br(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#i(e,t,r){let i=Math.ceil(t/vr)*vr;return this.#t+i>this.#e.length&&(this.allowLoose&&r&&this.#t+t<=this.#e.length?i=t:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:br(this.#e),length:this.#e.length,offset:this.#t+i})),this.#e.slice(this.#t,this.#t+i)}subReader(e){const t=new Nx(this.#e.slice(this.#t+e),this.allowLoose,this.#s);return t.#r=this,t}readBytes(e,t){let r=this.#i(0,e,!!t);return this.#a(e),this.#t+=r.length,r.slice(0,e)}readValue(){return ty(this.readBytes(vr))}readIndex(){return P9(this.readBytes(vr))}}function fg(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Cx(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Z9(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");fg(n.outputLen),fg(n.blockLen)}function Du(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function $R(n,e){Cx(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Fw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const YR=n=>n instanceof Uint8Array,eF=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Hw=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Si=(n,e)=>n<<32-e|n>>>e,tF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!tF)throw new Error("Non little-endian hardware is not supported");function nF(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function ry(n){if(typeof n=="string"&&(n=nF(n)),!YR(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function rF(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!YR(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}class Ix{clone(){return this._cloneInto()}}function Rx(n){const e=r=>n().update(ry(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function sF(n=32){if(Fw&&typeof Fw.getRandomValues=="function")return Fw.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class WR extends Ix{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Z9(e);const r=ry(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let c=0;c<o.length;c++)o[c]^=54;this.iHash.update(o),this.oHash=e.create();for(let c=0;c<o.length;c++)o[c]^=106;this.oHash.update(o),o.fill(0)}update(e){return Du(this),this.iHash.update(e),this}digestInto(e){Du(this),Cx(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:o,blockLen:c,outputLen:d}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=c,e.outputLen=d,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const JR=(n,e,t)=>new WR(n,e).update(t).digest();JR.create=(n,e)=>new WR(n,e);function iF(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),o=BigInt(4294967295),c=Number(t>>i&o),d=Number(t&o),h=r?4:0,m=r?0:4;n.setUint32(e+h,c,r),n.setUint32(e+m,d,r)}class XR extends Ix{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Hw(this.buffer)}update(e){Du(this);const{view:t,buffer:r,blockLen:i}=this;e=ry(e);const o=e.length;for(let c=0;c<o;){const d=Math.min(i-this.pos,o-c);if(d===i){const h=Hw(e);for(;i<=o-c;c+=i)this.process(h,c);continue}r.set(e.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Du(this),$R(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:o}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(r,0),c=0);for(let b=c;b<i;b++)t[b]=0;iF(r,i-8,BigInt(this.length*8),o),this.process(r,0);const d=Hw(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=h/4,w=this.get();if(m>w.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)d.setUint32(4*b,w[b],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:o,destroyed:c,pos:d}=this;return e.length=i,e.pos=d,e.finished=o,e.destroyed=c,i%t&&e.buffer.set(r),e}}const aF=(n,e,t)=>n&e^~n&t,oF=(n,e,t)=>n&e^n&t^e&t,lF=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),go=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yo=new Uint32Array(64);class cF extends XR{constructor(){super(64,32,8,!1),this.A=go[0]|0,this.B=go[1]|0,this.C=go[2]|0,this.D=go[3]|0,this.E=go[4]|0,this.F=go[5]|0,this.G=go[6]|0,this.H=go[7]|0}get(){const{A:e,B:t,C:r,D:i,E:o,F:c,G:d,H:h}=this;return[e,t,r,i,o,c,d,h]}set(e,t,r,i,o,c,d,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=c|0,this.G=d|0,this.H=h|0}process(e,t){for(let b=0;b<16;b++,t+=4)yo[b]=e.getUint32(t,!1);for(let b=16;b<64;b++){const x=yo[b-15],S=yo[b-2],k=Si(x,7)^Si(x,18)^x>>>3,N=Si(S,17)^Si(S,19)^S>>>10;yo[b]=N+yo[b-7]+k+yo[b-16]|0}let{A:r,B:i,C:o,D:c,E:d,F:h,G:m,H:w}=this;for(let b=0;b<64;b++){const x=Si(d,6)^Si(d,11)^Si(d,25),S=w+x+aF(d,h,m)+lF[b]+yo[b]|0,N=(Si(r,2)^Si(r,13)^Si(r,22))+oF(r,i,o)|0;w=m,m=h,h=d,d=c+S|0,c=o,o=i,i=r,r=S+N|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,c=c+this.D|0,d=d+this.E|0,h=h+this.F|0,m=m+this.G|0,w=w+this.H|0,this.set(r,i,o,c,d,h,m,w)}roundClean(){yo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ZR=Rx(()=>new cF),hp=BigInt(2**32-1),zb=BigInt(32);function ek(n,e=!1){return e?{h:Number(n&hp),l:Number(n>>zb&hp)}:{h:Number(n>>zb&hp)|0,l:Number(n&hp)|0}}function tk(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:o,l:c}=ek(n[i],e);[t[i],r[i]]=[o,c]}return[t,r]}const uF=(n,e)=>BigInt(n>>>0)<<zb|BigInt(e>>>0),dF=(n,e,t)=>n>>>t,hF=(n,e,t)=>n<<32-t|e>>>t,fF=(n,e,t)=>n>>>t|e<<32-t,mF=(n,e,t)=>n<<32-t|e>>>t,pF=(n,e,t)=>n<<64-t|e>>>t-32,gF=(n,e,t)=>n>>>t-32|e<<64-t,yF=(n,e)=>e,wF=(n,e)=>n,nk=(n,e,t)=>n<<t|e>>>32-t,rk=(n,e,t)=>e<<t|n>>>32-t,sk=(n,e,t)=>e<<t-32|n>>>64-t,ik=(n,e,t)=>n<<t-32|e>>>64-t;function bF(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const vF=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),xF=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,AF=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),EF=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,_F=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),TF=(n,e,t,r,i,o)=>e+t+r+i+o+(n/2**32|0)|0,Je={fromBig:ek,split:tk,toBig:uF,shrSH:dF,shrSL:hF,rotrSH:fF,rotrSL:mF,rotrBH:pF,rotrBL:gF,rotr32H:yF,rotr32L:wF,rotlSH:nk,rotlSL:rk,rotlBH:sk,rotlBL:ik,add:bF,add3L:vF,add3H:xF,add4L:AF,add4H:EF,add5H:TF,add5L:_F},[SF,NF]=Je.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),wo=new Uint32Array(80),bo=new Uint32Array(80);class CF extends XR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:o,Cl:c,Dh:d,Dl:h,Eh:m,El:w,Fh:b,Fl:x,Gh:S,Gl:k,Hh:N,Hl:C}=this;return[e,t,r,i,o,c,d,h,m,w,b,x,S,k,N,C]}set(e,t,r,i,o,c,d,h,m,w,b,x,S,k,N,C){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=c|0,this.Dh=d|0,this.Dl=h|0,this.Eh=m|0,this.El=w|0,this.Fh=b|0,this.Fl=x|0,this.Gh=S|0,this.Gl=k|0,this.Hh=N|0,this.Hl=C|0}process(e,t){for(let U=0;U<16;U++,t+=4)wo[U]=e.getUint32(t),bo[U]=e.getUint32(t+=4);for(let U=16;U<80;U++){const $=wo[U-15]|0,Y=bo[U-15]|0,te=Je.rotrSH($,Y,1)^Je.rotrSH($,Y,8)^Je.shrSH($,Y,7),T=Je.rotrSL($,Y,1)^Je.rotrSL($,Y,8)^Je.shrSL($,Y,7),_=wo[U-2]|0,P=bo[U-2]|0,L=Je.rotrSH(_,P,19)^Je.rotrBH(_,P,61)^Je.shrSH(_,P,6),B=Je.rotrSL(_,P,19)^Je.rotrBL(_,P,61)^Je.shrSL(_,P,6),j=Je.add4L(T,B,bo[U-7],bo[U-16]),M=Je.add4H(j,te,L,wo[U-7],wo[U-16]);wo[U]=M|0,bo[U]=j|0}let{Ah:r,Al:i,Bh:o,Bl:c,Ch:d,Cl:h,Dh:m,Dl:w,Eh:b,El:x,Fh:S,Fl:k,Gh:N,Gl:C,Hh:D,Hl:F}=this;for(let U=0;U<80;U++){const $=Je.rotrSH(b,x,14)^Je.rotrSH(b,x,18)^Je.rotrBH(b,x,41),Y=Je.rotrSL(b,x,14)^Je.rotrSL(b,x,18)^Je.rotrBL(b,x,41),te=b&S^~b&N,T=x&k^~x&C,_=Je.add5L(F,Y,T,NF[U],bo[U]),P=Je.add5H(_,D,$,te,SF[U],wo[U]),L=_|0,B=Je.rotrSH(r,i,28)^Je.rotrBH(r,i,34)^Je.rotrBH(r,i,39),j=Je.rotrSL(r,i,28)^Je.rotrBL(r,i,34)^Je.rotrBL(r,i,39),M=r&o^r&d^o&d,ye=i&c^i&h^c&h;D=N|0,F=C|0,N=S|0,C=k|0,S=b|0,k=x|0,{h:b,l:x}=Je.add(m|0,w|0,P|0,L|0),m=d|0,w=h|0,d=o|0,h=c|0,o=r|0,c=i|0;const ee=Je.add3L(L,j,ye);r=Je.add3H(ee,P,B,M),i=ee|0}({h:r,l:i}=Je.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:c}=Je.add(this.Bh|0,this.Bl|0,o|0,c|0),{h:d,l:h}=Je.add(this.Ch|0,this.Cl|0,d|0,h|0),{h:m,l:w}=Je.add(this.Dh|0,this.Dl|0,m|0,w|0),{h:b,l:x}=Je.add(this.Eh|0,this.El|0,b|0,x|0),{h:S,l:k}=Je.add(this.Fh|0,this.Fl|0,S|0,k|0),{h:N,l:C}=Je.add(this.Gh|0,this.Gl|0,N|0,C|0),{h:D,l:F}=Je.add(this.Hh|0,this.Hl|0,D|0,F|0),this.set(r,i,o,c,d,h,m,w,b,x,S,k,N,C,D,F)}roundClean(){wo.fill(0),bo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const IF=Rx(()=>new CF);function RF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const LT=RF();LT.crypto||LT.msCrypto;function kF(n){switch(n){case"sha256":return ZR.create();case"sha512":return IF.create()}Q(!1,"invalid hashing algorithm name","algorithm",n)}const[ak,ok,lk]=[[],[],[]],PF=BigInt(0),hh=BigInt(1),OF=BigInt(2),DF=BigInt(7),MF=BigInt(256),LF=BigInt(113);for(let n=0,e=hh,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],ak.push(2*(5*r+t)),ok.push((n+1)*(n+2)/2%64);let i=PF;for(let o=0;o<7;o++)e=(e<<hh^(e>>DF)*LF)%MF,e&OF&&(i^=hh<<(hh<<BigInt(o))-hh);lk.push(i)}const[BF,jF]=tk(lk,!0),BT=(n,e,t)=>t>32?sk(n,e,t):nk(n,e,t),jT=(n,e,t)=>t>32?ik(n,e,t):rk(n,e,t);function UF(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let c=0;c<10;c++)t[c]=n[c]^n[c+10]^n[c+20]^n[c+30]^n[c+40];for(let c=0;c<10;c+=2){const d=(c+8)%10,h=(c+2)%10,m=t[h],w=t[h+1],b=BT(m,w,1)^t[d],x=jT(m,w,1)^t[d+1];for(let S=0;S<50;S+=10)n[c+S]^=b,n[c+S+1]^=x}let i=n[2],o=n[3];for(let c=0;c<24;c++){const d=ok[c],h=BT(i,o,d),m=jT(i,o,d),w=ak[c];i=n[w],o=n[w+1],n[w]=h,n[w+1]=m}for(let c=0;c<50;c+=10){for(let d=0;d<10;d++)t[d]=n[c+d];for(let d=0;d<10;d++)n[c+d]^=~t[(d+2)%10]&t[(d+4)%10]}n[0]^=BF[r],n[1]^=jF[r]}t.fill(0)}class kx extends Ix{constructor(e,t,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,fg(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=eF(this.state)}keccak(){UF(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Du(this);const{blockLen:t,state:r}=this;e=ry(e);const i=e.length;for(let o=0;o<i;){const c=Math.min(t-this.pos,i-o);for(let d=0;d<c;d++)r[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Du(this,!1),Cx(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,o=e.length;i<o;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,o-i);e.set(t.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return fg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if($R(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:o,enableXOF:c}=this;return e||(e=new kx(t,r,i,c,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}}const VF=(n,e,t)=>Rx(()=>new kx(e,n,t)),FF=VF(1,136,256/8);let ck=!1;const uk=function(n){return FF(n)};let dk=uk;function On(n){const e=Xe(n,"data");return Ae(dk(e))}On._=uk;On.lock=function(){ck=!0};On.register=function(n){if(ck)throw new TypeError("keccak256 is locked");dk=n};Object.freeze(On);const hk=function(n){return kF("sha256").update(n).digest()};let fk=hk,mk=!1;function nd(n){const e=Xe(n,"data");return Ae(fk(e))}nd._=hk;nd.lock=function(){mk=!0};nd.register=function(n){if(mk)throw new Error("sha256 is locked");fk=n};Object.freeze(nd);Object.freeze(nd);BigInt(0);const HF=BigInt(1),zF=BigInt(2),sy=n=>n instanceof Uint8Array,GF=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Mu(n){if(!sy(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=GF[n[t]];return e}function Px(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Hh(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,o=n.slice(i,i+2),c=Number.parseInt(o,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");t[r]=c}return t}function Gl(n){return Px(Mu(n))}function Ox(n){if(!sy(n))throw new Error("Uint8Array expected");return Px(Mu(Uint8Array.from(n).reverse()))}function Lu(n,e){return Hh(n.toString(16).padStart(e*2,"0"))}function Dx(n,e){return Lu(n,e).reverse()}function Ys(n,e,t){let r;if(typeof e=="string")try{r=Hh(e)}catch(o){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${o}`)}else if(sy(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function zh(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!sy(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}const Mx=n=>(zF<<BigInt(n-1))-HF,zw=n=>new Uint8Array(n),UT=n=>Uint8Array.from(n);function pk(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=zw(n),i=zw(n),o=0;const c=()=>{r.fill(1),i.fill(0),o=0},d=(...b)=>t(i,r,...b),h=(b=zw())=>{i=d(UT([0]),b),r=d(),b.length!==0&&(i=d(UT([1]),b),r=d())},m=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const x=[];for(;b<e;){r=d();const S=r.slice();x.push(S),b+=r.length}return zh(...x)};return(b,x)=>{c(),h(b);let S;for(;!(S=x(m()));)h();return c(),S}}const qF={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Ef(n,e,t={}){const r=(i,o,c)=>{const d=qF[o];if(typeof d!="function")throw new Error(`Invalid validator "${o}", expected function`);const h=n[i];if(!(c&&h===void 0)&&!d(h,n))throw new Error(`Invalid param ${String(i)}=${h} (${typeof h}), expected ${o}`)};for(const[i,o]of Object.entries(e))r(i,o,!1);for(const[i,o]of Object.entries(t))r(i,o,!0);return n}const QF=Object.freeze(Object.defineProperty({__proto__:null,bitMask:Mx,bytesToHex:Mu,bytesToNumberBE:Gl,bytesToNumberLE:Ox,concatBytes:zh,createHmacDrbg:pk,ensureBytes:Ys,hexToBytes:Hh,hexToNumber:Px,numberToBytesBE:Lu,numberToBytesLE:Dx,validateObject:Ef},Symbol.toStringTag,{value:"Module"}));const Kn=BigInt(0),vn=BigInt(1),Dl=BigInt(2),KF=BigInt(3),Gb=BigInt(4),VT=BigInt(5),FT=BigInt(8);BigInt(9);BigInt(16);function Lr(n,e){const t=n%e;return t>=Kn?t:e+t}function $F(n,e,t){if(t<=Kn||e<Kn)throw new Error("Expected power/modulo > 0");if(t===vn)return Kn;let r=vn;for(;e>Kn;)e&vn&&(r=r*n%t),n=n*n%t,e>>=vn;return r}function As(n,e,t){let r=n;for(;e-- >Kn;)r*=r,r%=t;return r}function qb(n,e){if(n===Kn||e<=Kn)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Lr(n,e),r=e,i=Kn,o=vn;for(;t!==Kn;){const d=r/t,h=r%t,m=i-o*d;r=t,t=h,i=o,o=m}if(r!==vn)throw new Error("invert: does not exist");return Lr(i,e)}function YF(n){const e=(n-vn)/Dl;let t,r,i;for(t=n-vn,r=0;t%Dl===Kn;t/=Dl,r++);for(i=Dl;i<n&&$F(i,e,n)!==n-vn;i++);if(r===1){const c=(n+vn)/Gb;return function(h,m){const w=h.pow(m,c);if(!h.eql(h.sqr(w),m))throw new Error("Cannot find square root");return w}}const o=(t+vn)/Dl;return function(d,h){if(d.pow(h,e)===d.neg(d.ONE))throw new Error("Cannot find square root");let m=r,w=d.pow(d.mul(d.ONE,i),t),b=d.pow(h,o),x=d.pow(h,t);for(;!d.eql(x,d.ONE);){if(d.eql(x,d.ZERO))return d.ZERO;let S=1;for(let N=d.sqr(x);S<m&&!d.eql(N,d.ONE);S++)N=d.sqr(N);const k=d.pow(w,vn<<BigInt(m-S-1));w=d.sqr(k),b=d.mul(b,k),x=d.mul(x,w),m=S}return b}}function WF(n){if(n%Gb===KF){const e=(n+vn)/Gb;return function(r,i){const o=r.pow(i,e);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(n%FT===VT){const e=(n-VT)/FT;return function(r,i){const o=r.mul(i,Dl),c=r.pow(o,e),d=r.mul(i,c),h=r.mul(r.mul(d,Dl),c),m=r.mul(d,r.sub(h,r.ONE));if(!r.eql(r.sqr(m),i))throw new Error("Cannot find square root");return m}}return YF(n)}const JF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function XF(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=JF.reduce((r,i)=>(r[i]="function",r),e);return Ef(n,t)}function ZF(n,e,t){if(t<Kn)throw new Error("Expected power > 0");if(t===Kn)return n.ONE;if(t===vn)return e;let r=n.ONE,i=e;for(;t>Kn;)t&vn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=vn;return r}function eH(n,e){const t=new Array(e.length),r=e.reduce((o,c,d)=>n.is0(c)?o:(t[d]=o,n.mul(o,c)),n.ONE),i=n.inv(r);return e.reduceRight((o,c,d)=>n.is0(c)?o:(t[d]=n.mul(o,t[d]),n.mul(o,c)),i),t}function gk(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function tH(n,e,t=!1,r={}){if(n<=Kn)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:o}=gk(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=WF(n),d=Object.freeze({ORDER:n,BITS:i,BYTES:o,MASK:Mx(i),ZERO:Kn,ONE:vn,create:h=>Lr(h,n),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return Kn<=h&&h<n},is0:h=>h===Kn,isOdd:h=>(h&vn)===vn,neg:h=>Lr(-h,n),eql:(h,m)=>h===m,sqr:h=>Lr(h*h,n),add:(h,m)=>Lr(h+m,n),sub:(h,m)=>Lr(h-m,n),mul:(h,m)=>Lr(h*m,n),pow:(h,m)=>ZF(d,h,m),div:(h,m)=>Lr(h*qb(m,n),n),sqrN:h=>h*h,addN:(h,m)=>h+m,subN:(h,m)=>h-m,mulN:(h,m)=>h*m,inv:h=>qb(h,n),sqrt:r.sqrt||(h=>c(d,h)),invertBatch:h=>eH(d,h),cmov:(h,m,w)=>w?m:h,toBytes:h=>t?Dx(h,o):Lu(h,o),fromBytes:h=>{if(h.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${h.length}`);return t?Ox(h):Gl(h)}});return Object.freeze(d)}function yk(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function wk(n){const e=yk(n);return e+Math.ceil(e/2)}function nH(n,e,t=!1){const r=n.length,i=yk(e),o=wk(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const c=t?Gl(n):Ox(n),d=Lr(c,e-vn)+vn;return t?Dx(d,i):Lu(d,i)}const rH=BigInt(0),Gw=BigInt(1);function sH(n,e){const t=(i,o)=>{const c=o.negate();return i?c:o},r=i=>{const o=Math.ceil(e/i)+1,c=2**(i-1);return{windows:o,windowSize:c}};return{constTimeNegate:t,unsafeLadder(i,o){let c=n.ZERO,d=i;for(;o>rH;)o&Gw&&(c=c.add(d)),d=d.double(),o>>=Gw;return c},precomputeWindow(i,o){const{windows:c,windowSize:d}=r(o),h=[];let m=i,w=m;for(let b=0;b<c;b++){w=m,h.push(w);for(let x=1;x<d;x++)w=w.add(m),h.push(w);m=w.double()}return h},wNAF(i,o,c){const{windows:d,windowSize:h}=r(i);let m=n.ZERO,w=n.BASE;const b=BigInt(2**i-1),x=2**i,S=BigInt(i);for(let k=0;k<d;k++){const N=k*h;let C=Number(c&b);c>>=S,C>h&&(C-=x,c+=Gw);const D=N,F=N+Math.abs(C)-1,U=k%2!==0,$=C<0;C===0?w=w.add(t(U,o[D])):m=m.add(t($,o[F]))}return{p:m,f:w}},wNAFCached(i,o,c,d){const h=i._WINDOW_SIZE||1;let m=o.get(i);return m||(m=this.precomputeWindow(i,h),h!==1&&o.set(i,d(m))),this.wNAF(h,m,c)}}}function bk(n){return XF(n.Fp),Ef(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gk(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}function iH(n){const e=bk(n);Ef(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:aH,hexToBytes:oH}=QF,Ul={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Ul;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:aH(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Ul,t=typeof n=="string"?oH(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=Ul._parseInt(t.subarray(2)),{d:c,l:d}=Ul._parseInt(o);if(d.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:c}},hexFromSig(n){const e=m=>Number.parseInt(m[0],16)&8?"00"+m:m,t=m=>{const w=m.toString(16);return w.length&1?`0${w}`:w},r=e(t(n.s)),i=e(t(n.r)),o=r.length/2,c=i.length/2,d=t(o),h=t(c);return`30${t(c+o+4)}02${h}${i}02${d}${r}`}},ha=BigInt(0),Es=BigInt(1);BigInt(2);const HT=BigInt(3);BigInt(4);function lH(n){const e=iH(n),{Fp:t}=e,r=e.toBytes||((k,N,C)=>{const D=N.toAffine();return zh(Uint8Array.from([4]),t.toBytes(D.x),t.toBytes(D.y))}),i=e.fromBytes||(k=>{const N=k.subarray(1),C=t.fromBytes(N.subarray(0,t.BYTES)),D=t.fromBytes(N.subarray(t.BYTES,2*t.BYTES));return{x:C,y:D}});function o(k){const{a:N,b:C}=e,D=t.sqr(k),F=t.mul(D,k);return t.add(t.add(F,t.mul(k,N)),C)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function c(k){return typeof k=="bigint"&&ha<k&&k<e.n}function d(k){if(!c(k))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(k){const{allowedPrivateKeyLengths:N,nByteLength:C,wrapPrivateKey:D,n:F}=e;if(N&&typeof k!="bigint"){if(k instanceof Uint8Array&&(k=Mu(k)),typeof k!="string"||!N.includes(k.length))throw new Error("Invalid key");k=k.padStart(C*2,"0")}let U;try{U=typeof k=="bigint"?k:Gl(Ys("private key",k,C))}catch{throw new Error(`private key must be ${C} bytes, hex or bigint, not ${typeof k}`)}return D&&(U=Lr(U,F)),d(U),U}const m=new Map;function w(k){if(!(k instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(N,C,D){if(this.px=N,this.py=C,this.pz=D,N==null||!t.isValid(N))throw new Error("x required");if(C==null||!t.isValid(C))throw new Error("y required");if(D==null||!t.isValid(D))throw new Error("z required")}static fromAffine(N){const{x:C,y:D}=N||{};if(!N||!t.isValid(C)||!t.isValid(D))throw new Error("invalid affine point");if(N instanceof b)throw new Error("projective point not allowed");const F=U=>t.eql(U,t.ZERO);return F(C)&&F(D)?b.ZERO:new b(C,D,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const C=t.invertBatch(N.map(D=>D.pz));return N.map((D,F)=>D.toAffine(C[F])).map(b.fromAffine)}static fromHex(N){const C=b.fromAffine(i(Ys("pointHex",N)));return C.assertValidity(),C}static fromPrivateKey(N){return b.BASE.multiply(h(N))}_setWindowSize(N){this._WINDOW_SIZE=N,m.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:N,y:C}=this.toAffine();if(!t.isValid(N)||!t.isValid(C))throw new Error("bad point: x or y not FE");const D=t.sqr(C),F=o(N);if(!t.eql(D,F))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:N}=this.toAffine();if(t.isOdd)return!t.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){w(N);const{px:C,py:D,pz:F}=this,{px:U,py:$,pz:Y}=N,te=t.eql(t.mul(C,Y),t.mul(U,F)),T=t.eql(t.mul(D,Y),t.mul($,F));return te&&T}negate(){return new b(this.px,t.neg(this.py),this.pz)}double(){const{a:N,b:C}=e,D=t.mul(C,HT),{px:F,py:U,pz:$}=this;let Y=t.ZERO,te=t.ZERO,T=t.ZERO,_=t.mul(F,F),P=t.mul(U,U),L=t.mul($,$),B=t.mul(F,U);return B=t.add(B,B),T=t.mul(F,$),T=t.add(T,T),Y=t.mul(N,T),te=t.mul(D,L),te=t.add(Y,te),Y=t.sub(P,te),te=t.add(P,te),te=t.mul(Y,te),Y=t.mul(B,Y),T=t.mul(D,T),L=t.mul(N,L),B=t.sub(_,L),B=t.mul(N,B),B=t.add(B,T),T=t.add(_,_),_=t.add(T,_),_=t.add(_,L),_=t.mul(_,B),te=t.add(te,_),L=t.mul(U,$),L=t.add(L,L),_=t.mul(L,B),Y=t.sub(Y,_),T=t.mul(L,P),T=t.add(T,T),T=t.add(T,T),new b(Y,te,T)}add(N){w(N);const{px:C,py:D,pz:F}=this,{px:U,py:$,pz:Y}=N;let te=t.ZERO,T=t.ZERO,_=t.ZERO;const P=e.a,L=t.mul(e.b,HT);let B=t.mul(C,U),j=t.mul(D,$),M=t.mul(F,Y),ye=t.add(C,D),ee=t.add(U,$);ye=t.mul(ye,ee),ee=t.add(B,j),ye=t.sub(ye,ee),ee=t.add(C,F);let G=t.add(U,Y);return ee=t.mul(ee,G),G=t.add(B,M),ee=t.sub(ee,G),G=t.add(D,F),te=t.add($,Y),G=t.mul(G,te),te=t.add(j,M),G=t.sub(G,te),_=t.mul(P,ee),te=t.mul(L,M),_=t.add(te,_),te=t.sub(j,_),_=t.add(j,_),T=t.mul(te,_),j=t.add(B,B),j=t.add(j,B),M=t.mul(P,M),ee=t.mul(L,ee),j=t.add(j,M),M=t.sub(B,M),M=t.mul(P,M),ee=t.add(ee,M),B=t.mul(j,ee),T=t.add(T,B),B=t.mul(G,ee),te=t.mul(ye,te),te=t.sub(te,B),B=t.mul(ye,j),_=t.mul(G,_),_=t.add(_,B),new b(te,T,_)}subtract(N){return this.add(N.negate())}is0(){return this.equals(b.ZERO)}wNAF(N){return S.wNAFCached(this,m,N,C=>{const D=t.invertBatch(C.map(F=>F.pz));return C.map((F,U)=>F.toAffine(D[U])).map(b.fromAffine)})}multiplyUnsafe(N){const C=b.ZERO;if(N===ha)return C;if(d(N),N===Es)return this;const{endo:D}=e;if(!D)return S.unsafeLadder(this,N);let{k1neg:F,k1:U,k2neg:$,k2:Y}=D.splitScalar(N),te=C,T=C,_=this;for(;U>ha||Y>ha;)U&Es&&(te=te.add(_)),Y&Es&&(T=T.add(_)),_=_.double(),U>>=Es,Y>>=Es;return F&&(te=te.negate()),$&&(T=T.negate()),T=new b(t.mul(T.px,D.beta),T.py,T.pz),te.add(T)}multiply(N){d(N);let C=N,D,F;const{endo:U}=e;if(U){const{k1neg:$,k1:Y,k2neg:te,k2:T}=U.splitScalar(C);let{p:_,f:P}=this.wNAF(Y),{p:L,f:B}=this.wNAF(T);_=S.constTimeNegate($,_),L=S.constTimeNegate(te,L),L=new b(t.mul(L.px,U.beta),L.py,L.pz),D=_.add(L),F=P.add(B)}else{const{p:$,f:Y}=this.wNAF(C);D=$,F=Y}return b.normalizeZ([D,F])[0]}multiplyAndAddUnsafe(N,C,D){const F=b.BASE,U=(Y,te)=>te===ha||te===Es||!Y.equals(F)?Y.multiplyUnsafe(te):Y.multiply(te),$=U(this,C).add(U(N,D));return $.is0()?void 0:$}toAffine(N){const{px:C,py:D,pz:F}=this,U=this.is0();N==null&&(N=U?t.ONE:t.inv(F));const $=t.mul(C,N),Y=t.mul(D,N),te=t.mul(F,N);if(U)return{x:t.ZERO,y:t.ZERO};if(!t.eql(te,t.ONE))throw new Error("invZ was invalid");return{x:$,y:Y}}isTorsionFree(){const{h:N,isTorsionFree:C}=e;if(N===Es)return!0;if(C)return C(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:C}=e;return N===Es?this:C?C(b,this):this.multiplyUnsafe(e.h)}toRawBytes(N=!0){return this.assertValidity(),r(b,this,N)}toHex(N=!0){return Mu(this.toRawBytes(N))}}b.BASE=new b(e.Gx,e.Gy,t.ONE),b.ZERO=new b(t.ZERO,t.ONE,t.ZERO);const x=e.nBitLength,S=sH(b,e.endo?Math.ceil(x/2):x);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:h,weierstrassEquation:o,isWithinCurveOrder:c}}function cH(n){const e=bk(n);return Ef(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function uH(n){const e=cH(n),{Fp:t,n:r}=e,i=t.BYTES+1,o=2*t.BYTES+1;function c(ee){return ha<ee&&ee<t.ORDER}function d(ee){return Lr(ee,r)}function h(ee){return qb(ee,r)}const{ProjectivePoint:m,normPrivateKeyToScalar:w,weierstrassEquation:b,isWithinCurveOrder:x}=lH({...e,toBytes(ee,G,se){const pe=G.toAffine(),ve=t.toBytes(pe.x),de=zh;return se?de(Uint8Array.from([G.hasEvenY()?2:3]),ve):de(Uint8Array.from([4]),ve,t.toBytes(pe.y))},fromBytes(ee){const G=ee.length,se=ee[0],pe=ee.subarray(1);if(G===i&&(se===2||se===3)){const ve=Gl(pe);if(!c(ve))throw new Error("Point is not on curve");const de=b(ve);let V=t.sqrt(de);const z=(V&Es)===Es;return(se&1)===1!==z&&(V=t.neg(V)),{x:ve,y:V}}else if(G===o&&se===4){const ve=t.fromBytes(pe.subarray(0,t.BYTES)),de=t.fromBytes(pe.subarray(t.BYTES,2*t.BYTES));return{x:ve,y:de}}else throw new Error(`Point of length ${G} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),S=ee=>Mu(Lu(ee,e.nByteLength));function k(ee){const G=r>>Es;return ee>G}function N(ee){return k(ee)?d(-ee):ee}const C=(ee,G,se)=>Gl(ee.slice(G,se));class D{constructor(G,se,pe){this.r=G,this.s=se,this.recovery=pe,this.assertValidity()}static fromCompact(G){const se=e.nByteLength;return G=Ys("compactSignature",G,se*2),new D(C(G,0,se),C(G,se,2*se))}static fromDER(G){const{r:se,s:pe}=Ul.toSig(Ys("DER",G));return new D(se,pe)}assertValidity(){if(!x(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!x(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new D(this.r,this.s,G)}recoverPublicKey(G){const{r:se,s:pe,recovery:ve}=this,de=T(Ys("msgHash",G));if(ve==null||![0,1,2,3].includes(ve))throw new Error("recovery id invalid");const V=ve===2||ve===3?se+e.n:se;if(V>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=(ve&1)===0?"02":"03",oe=m.fromHex(z+S(V)),ae=h(V),we=d(-de*ae),Re=d(pe*ae),Te=m.BASE.multiplyAndAddUnsafe(oe,we,Re);if(!Te)throw new Error("point at infinify");return Te.assertValidity(),Te}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new D(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return Hh(this.toDERHex())}toDERHex(){return Ul.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Hh(this.toCompactHex())}toCompactHex(){return S(this.r)+S(this.s)}}const F={isValidPrivateKey(ee){try{return w(ee),!0}catch{return!1}},normPrivateKeyToScalar:w,randomPrivateKey:()=>{const ee=wk(e.n);return nH(e.randomBytes(ee),e.n)},precompute(ee=8,G=m.BASE){return G._setWindowSize(ee),G.multiply(BigInt(3)),G}};function U(ee,G=!0){return m.fromPrivateKey(ee).toRawBytes(G)}function $(ee){const G=ee instanceof Uint8Array,se=typeof ee=="string",pe=(G||se)&&ee.length;return G?pe===i||pe===o:se?pe===2*i||pe===2*o:ee instanceof m}function Y(ee,G,se=!0){if($(ee))throw new Error("first arg must be private key");if(!$(G))throw new Error("second arg must be public key");return m.fromHex(G).multiply(w(ee)).toRawBytes(se)}const te=e.bits2int||function(ee){const G=Gl(ee),se=ee.length*8-e.nBitLength;return se>0?G>>BigInt(se):G},T=e.bits2int_modN||function(ee){return d(te(ee))},_=Mx(e.nBitLength);function P(ee){if(typeof ee!="bigint")throw new Error("bigint expected");if(!(ha<=ee&&ee<_))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Lu(ee,e.nByteLength)}function L(ee,G,se=B){if(["recovered","canonical"].some(Le=>Le in se))throw new Error("sign() legacy options not supported");const{hash:pe,randomBytes:ve}=e;let{lowS:de,prehash:V,extraEntropy:z}=se;de==null&&(de=!0),ee=Ys("msgHash",ee),V&&(ee=Ys("prehashed msgHash",pe(ee)));const oe=T(ee),ae=w(G),we=[P(ae),P(oe)];if(z!=null){const Le=z===!0?ve(t.BYTES):z;we.push(Ys("extraEntropy",Le))}const Re=zh(...we),Te=oe;function Ze(Le){const Bn=te(Le);if(!x(Bn))return;const Ps=h(Bn),hn=m.BASE.multiply(Bn).toAffine(),ge=d(hn.x);if(ge===ha)return;const Me=d(Ps*d(Te+ge*ae));if(Me===ha)return;let Bt=(hn.x===ge?0:2)|Number(hn.y&Es),et=Me;return de&&k(Me)&&(et=N(Me),Bt^=1),new D(ge,et,Bt)}return{seed:Re,k2sig:Ze}}const B={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function M(ee,G,se=B){const{seed:pe,k2sig:ve}=L(ee,G,se),de=e;return pk(de.hash.outputLen,de.nByteLength,de.hmac)(pe,ve)}m.BASE._setWindowSize(8);function ye(ee,G,se,pe=j){const ve=ee;if(G=Ys("msgHash",G),se=Ys("publicKey",se),"strict"in pe)throw new Error("options.strict was renamed to lowS");const{lowS:de,prehash:V}=pe;let z,oe;try{if(typeof ve=="string"||ve instanceof Uint8Array)try{z=D.fromDER(ve)}catch(hn){if(!(hn instanceof Ul.Err))throw hn;z=D.fromCompact(ve)}else if(typeof ve=="object"&&typeof ve.r=="bigint"&&typeof ve.s=="bigint"){const{r:hn,s:ge}=ve;z=new D(hn,ge)}else throw new Error("PARSE");oe=m.fromHex(se)}catch(hn){if(hn.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(de&&z.hasHighS())return!1;V&&(G=e.hash(G));const{r:ae,s:we}=z,Re=T(G),Te=h(we),Ze=d(Re*Te),Le=d(ae*Te),Bn=m.BASE.multiplyAndAddUnsafe(oe,Ze,Le)?.toAffine();return Bn?d(Bn.x)===ae:!1}return{CURVE:e,getPublicKey:U,getSharedSecret:Y,sign:M,verify:ye,ProjectivePoint:m,Signature:D,utils:F}}function dH(n){return{hash:n,hmac:(e,...t)=>JR(n,e,rF(...t)),randomBytes:sF}}function hH(n,e){const t=r=>uH({...n,...dH(r)});return Object.freeze({...t(e),create:t})}const vk=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zT=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fH=BigInt(1),Qb=BigInt(2),GT=(n,e)=>(n+e/Qb)/e;function mH(n){const e=vk,t=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),c=BigInt(23),d=BigInt(44),h=BigInt(88),m=n*n*n%e,w=m*m*n%e,b=As(w,t,e)*w%e,x=As(b,t,e)*w%e,S=As(x,Qb,e)*m%e,k=As(S,i,e)*S%e,N=As(k,o,e)*k%e,C=As(N,d,e)*N%e,D=As(C,h,e)*C%e,F=As(D,d,e)*N%e,U=As(F,t,e)*w%e,$=As(U,c,e)*k%e,Y=As($,r,e)*m%e,te=As(Y,Qb,e);if(!Kb.eql(Kb.sqr(te),n))throw new Error("Cannot find square root");return te}const Kb=tH(vk,void 0,void 0,{sqrt:mH}),vo=hH({a:BigInt(0),b:BigInt(7),Fp:Kb,n:zT,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=zT,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-fH*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,c=BigInt("0x100000000000000000000000000000000"),d=GT(o*n,e),h=GT(-r*n,e);let m=Lr(n-d*t-h*i,e),w=Lr(-d*r-h*o,e);const b=m>c,x=w>c;if(b&&(m=e-m),x&&(w=e-w),m>c||w>c)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:b,k1:m,k2neg:x,k2:w}}}},ZR);BigInt(0);vo.ProjectivePoint;const Gh="0x0000000000000000000000000000000000000000",qT="0x0000000000000000000000000000000000000000000000000000000000000000",QT=BigInt(0),KT=BigInt(1),$b=BigInt(2),$T=BigInt(27),YT=BigInt(28),fp=BigInt(35),xk=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),pH=xk/$b,gH=Symbol.for("nodejs.util.inspect.custom"),Cl={};function qw(n){return ka(Mn(n),32)}class tn{#e;#t;#n;#r;get r(){return this.#e}set r(e){Q(bu(e)===32,"invalid r","value",e),this.#e=Ae(e)}get s(){return Q(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){Q(bu(e)===32,"invalid s","value",e),this.#t=Ae(e)}get _s(){return this.#t}isValid(){return BigInt(this.#t)<=pH}get v(){return this.#n}set v(e){const t=Ye(e,"value");Q(t===27||t===28,"invalid v","v",e),this.#n=t}get networkV(){return this.#r}get legacyChainId(){const e=this.networkV;return e==null?null:tn.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Xe(this.s);return this.yParity&&(e[0]|=128),Ae(e)}get compactSerialized(){return Xt([this.r,this.yParityAndS])}get serialized(){return Xt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,i){vf(e,Cl,"Signature"),this.#e=t,this.#t=r,this.#n=i,this.#r=null}getCanonical(){if(this.isValid())return this;const e=xk-BigInt(this._s),t=55-this.v,r=new tn(Cl,this.r,qw(e),t);return this.networkV&&(r.#r=this.networkV),r}clone(){const e=new tn(Cl,this.r,this._s,this.v);return this.networkV&&(e.#r=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[gH](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const t=Ce(e,"v");return t==$T||t==YT?QT:(Q(t>=fp,"invalid EIP-155 v","v",e),(t-fp)/$b)}static getChainIdV(e,t){return Ce(e)*$b+BigInt(35+t-27)}static getNormalizedV(e){const t=Ce(e);return t===QT||t===$T?27:t===KT||t===YT?28:(Q(t>=fp,"invalid v","v",e),t&KT?27:28)}static from(e){function t(m,w){Q(m,w,"signature",e)}if(e==null)return new tn(Cl,qT,qT,27);if(typeof e=="string"){const m=Xe(e,"signature");if(m.length===64){const w=Ae(m.slice(0,32)),b=m.slice(32,64),x=b[0]&128?28:27;return b[0]&=127,new tn(Cl,w,Ae(b),x)}if(m.length===65){const w=Ae(m.slice(0,32)),b=Ae(m.slice(32,64)),x=tn.getNormalizedV(m[64]);return new tn(Cl,w,b,x)}t(!1,"invalid raw signature length")}if(e instanceof tn)return e.clone();const r=e.r;t(r!=null,"missing r");const i=qw(r),o=(function(m,w){if(m!=null)return qw(m);if(w!=null){t(qt(w,32),"invalid yParityAndS");const b=Xe(w);return b[0]&=127,Ae(b)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:c,v:d}=(function(m,w,b){if(m!=null){const x=Ce(m);return{networkV:x>=fp?x:void 0,v:tn.getNormalizedV(x)}}if(w!=null)return t(qt(w,32),"invalid yParityAndS"),{v:Xe(w)[0]&128?28:27};if(b!=null){switch(Ye(b,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),h=new tn(Cl,i,o,d);return c&&(h.#r=c),t(e.yParity==null||Ye(e.yParity,"sig.yParity")===h.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===h.yParityAndS,"yParityAndS mismatch"),h}}class fa{#e;constructor(e){Q(bu(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=Ae(e)}get privateKey(){return this.#e}get publicKey(){return fa.computePublicKey(this.#e)}get compressedPublicKey(){return fa.computePublicKey(this.#e,!0)}sign(e){Q(bu(e)===32,"invalid digest length","digest",e);const t=vo.sign(br(e),br(this.#e),{lowS:!0});return tn.from({r:Ho(t.r,32),s:Ho(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=fa.computePublicKey(e);return Ae(vo.getSharedSecret(br(this.#e),Xe(t),!1))}static computePublicKey(e,t){let r=Xe(e,"key");if(r.length===32){const o=vo.getPublicKey(r,!!t);return Ae(o)}if(r.length===64){const o=new Uint8Array(65);o[0]=4,o.set(r,1),r=o}const i=vo.ProjectivePoint.fromHex(r);return Ae(i.toRawBytes(t))}static recoverPublicKey(e,t){Q(bu(e)===32,"invalid digest length","digest",e);const r=tn.from(t);let i=vo.Signature.fromCompact(br(Xt([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const o=i.recoverPublicKey(br(e));return Q(o!=null,"invalid signature for digest","signature",t),"0x"+o.toHex(!1)}static addPoints(e,t,r){const i=vo.ProjectivePoint.fromHex(fa.computePublicKey(e).substring(2)),o=vo.ProjectivePoint.fromHex(fa.computePublicKey(t).substring(2));return"0x"+i.add(o).toHex(!!r)}}const yH=BigInt(0),wH=BigInt(36);function WT(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=Xe(On(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Lx={};for(let n=0;n<10;n++)Lx[String(n)]=String(n);for(let n=0;n<26;n++)Lx[String.fromCharCode(65+n)]=String(10+n);const JT=15;function bH(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>Lx[r]).join("");for(;e.length>=JT;){let r=e.substring(0,JT);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const vH=(function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n})();function xH(n){n=n.toLowerCase();let e=yH;for(let t=0;t<n.length;t++)e=e*wH+vH[n[t]];return e}function ft(n){if(Q(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=WT(n);return Q(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(n.substring(2,4)===bH(n),"bad icap checksum","address",n);let e=xH(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return WT("0x"+e)}Q(!1,"invalid address","address",n)}function AH(n){const e=ft(n.from);let r=Ce(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,ft(un(On(Ea([e,r])),12))}function Ak(n){return n&&typeof n.getAddress=="function"}function ma(n){try{return ft(n),!0}catch{}return!1}async function Qw(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(me(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),ft(t)}function xr(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?ft(n):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Qw(n,e.resolveName(n)));if(Ak(n))return Qw(n,n.getAddress());if(n&&typeof n.then=="function")return Qw(n,n);Q(!1,"unsupported addressable value","target",n)}const la={};function Se(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new dn(la,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function bt(n,e){return new dn(la,`bytes${e||""}`,n,{size:e})}const XT=Symbol.for("_ethers_typed");class dn{type;value;#e;_typedSymbol;constructor(e,t,r,i){i==null&&(i=null),vf(la,e,"Typed"),je(this,{_typedSymbol:XT,type:t,value:r}),this.#e=i,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new dn(la,e,t)}static uint8(e){return Se(e,8)}static uint16(e){return Se(e,16)}static uint24(e){return Se(e,24)}static uint32(e){return Se(e,32)}static uint40(e){return Se(e,40)}static uint48(e){return Se(e,48)}static uint56(e){return Se(e,56)}static uint64(e){return Se(e,64)}static uint72(e){return Se(e,72)}static uint80(e){return Se(e,80)}static uint88(e){return Se(e,88)}static uint96(e){return Se(e,96)}static uint104(e){return Se(e,104)}static uint112(e){return Se(e,112)}static uint120(e){return Se(e,120)}static uint128(e){return Se(e,128)}static uint136(e){return Se(e,136)}static uint144(e){return Se(e,144)}static uint152(e){return Se(e,152)}static uint160(e){return Se(e,160)}static uint168(e){return Se(e,168)}static uint176(e){return Se(e,176)}static uint184(e){return Se(e,184)}static uint192(e){return Se(e,192)}static uint200(e){return Se(e,200)}static uint208(e){return Se(e,208)}static uint216(e){return Se(e,216)}static uint224(e){return Se(e,224)}static uint232(e){return Se(e,232)}static uint240(e){return Se(e,240)}static uint248(e){return Se(e,248)}static uint256(e){return Se(e,256)}static uint(e){return Se(e,256)}static int8(e){return Se(e,-8)}static int16(e){return Se(e,-16)}static int24(e){return Se(e,-24)}static int32(e){return Se(e,-32)}static int40(e){return Se(e,-40)}static int48(e){return Se(e,-48)}static int56(e){return Se(e,-56)}static int64(e){return Se(e,-64)}static int72(e){return Se(e,-72)}static int80(e){return Se(e,-80)}static int88(e){return Se(e,-88)}static int96(e){return Se(e,-96)}static int104(e){return Se(e,-104)}static int112(e){return Se(e,-112)}static int120(e){return Se(e,-120)}static int128(e){return Se(e,-128)}static int136(e){return Se(e,-136)}static int144(e){return Se(e,-144)}static int152(e){return Se(e,-152)}static int160(e){return Se(e,-160)}static int168(e){return Se(e,-168)}static int176(e){return Se(e,-176)}static int184(e){return Se(e,-184)}static int192(e){return Se(e,-192)}static int200(e){return Se(e,-200)}static int208(e){return Se(e,-208)}static int216(e){return Se(e,-216)}static int224(e){return Se(e,-224)}static int232(e){return Se(e,-232)}static int240(e){return Se(e,-240)}static int248(e){return Se(e,-248)}static int256(e){return Se(e,-256)}static int(e){return Se(e,-256)}static bytes1(e){return bt(e,1)}static bytes2(e){return bt(e,2)}static bytes3(e){return bt(e,3)}static bytes4(e){return bt(e,4)}static bytes5(e){return bt(e,5)}static bytes6(e){return bt(e,6)}static bytes7(e){return bt(e,7)}static bytes8(e){return bt(e,8)}static bytes9(e){return bt(e,9)}static bytes10(e){return bt(e,10)}static bytes11(e){return bt(e,11)}static bytes12(e){return bt(e,12)}static bytes13(e){return bt(e,13)}static bytes14(e){return bt(e,14)}static bytes15(e){return bt(e,15)}static bytes16(e){return bt(e,16)}static bytes17(e){return bt(e,17)}static bytes18(e){return bt(e,18)}static bytes19(e){return bt(e,19)}static bytes20(e){return bt(e,20)}static bytes21(e){return bt(e,21)}static bytes22(e){return bt(e,22)}static bytes23(e){return bt(e,23)}static bytes24(e){return bt(e,24)}static bytes25(e){return bt(e,25)}static bytes26(e){return bt(e,26)}static bytes27(e){return bt(e,27)}static bytes28(e){return bt(e,28)}static bytes29(e){return bt(e,29)}static bytes30(e){return bt(e,30)}static bytes31(e){return bt(e,31)}static bytes32(e){return bt(e,32)}static address(e){return new dn(la,"address",e)}static bool(e){return new dn(la,"bool",!!e)}static bytes(e){return new dn(la,"bytes",e)}static string(e){return new dn(la,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new dn(la,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===XT}static dereference(e,t){if(dn.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class EH extends Ma{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=dn.dereference(t,"string");try{r=ft(r)}catch(i){return this._throwError(i.message,t)}return e.writeValue(r)}decode(e){return ft(Ho(e.readValue(),20))}}class _H extends Ma{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function Ek(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let h={};r=e.map(m=>{const w=m.localName;return me(w,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:m},value:t}),me(!h[w],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:m},value:t}),h[w]=!0,t[w]})}else Q(!1,"invalid tuple value","tuple",t);Q(e.length===r.length,"types/value length mismatch","tuple",t);let i=new Hb,o=new Hb,c=[];e.forEach((h,m)=>{let w=r[m];if(h.dynamic){let b=o.length;h.encode(o,w);let x=i.writeUpdatableValue();c.push(S=>{x(S+b)})}else h.encode(i,w)}),c.forEach(h=>{h(i.length)});let d=n.appendWriter(i);return d+=n.appendWriter(o),d}function _k(n,e){let t=[],r=[],i=n.subReader(0);return e.forEach(o=>{let c=null;if(o.dynamic){let d=n.readIndex(),h=i.subReader(d);try{c=o.decode(h)}catch(m){if(sr(m,"BUFFER_OVERRUN"))throw m;c=m,c.baseType=o.name,c.name=o.localName,c.type=o.type}}else try{c=o.decode(n)}catch(d){if(sr(d,"BUFFER_OVERRUN"))throw d;c=d,c.baseType=o.name,c.name=o.localName,c.type=o.type}if(c==null)throw new Error("investigate");t.push(c),r.push(o.localName||null)}),ya.fromItems(t,r)}class TH extends Ma{coder;length;constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",o=t===-1||e.dynamic;super("array",i,r,o),je(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){const r=dn.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),OR(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let c=0;c<r.length;c++)o.push(this.coder);return Ek(e,o,r)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),me(t*vr<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*vr,length:e.dataLength}));let r=[];for(let i=0;i<t;i++)r.push(new _H(this.coder));return _k(e,r)}}class SH extends Ma{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=dn.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Tk extends Ma{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=br(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class NH extends Tk{constructor(e){super("bytes",e)}decode(e){return Ae(super.decode(e))}}class CH extends Ma{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),je(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=br(dn.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return Ae(e.readBytes(this.size))}}const IH=new Uint8Array([]);class RH extends Ma{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(IH)}decode(e){return e.readBytes(0),null}}const kH=BigInt(0),PH=BigInt(1),OH=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class DH extends Ma{size;signed;constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),je(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=Ce(dn.dereference(t,this.type)),i=jl(OH,vr*8);if(this.signed){let o=jl(i,this.size*8-1);(r>o||r<-(o+PH))&&this._throwError("value out-of-bounds",t),r=LR(r,8*vr)}else(r<kH||r>jl(i,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=jl(e.readValue(),this.size*8);return this.signed&&(t=dg(t,this.size*8)),t}}class MH extends Tk{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Aa(dn.dereference(t,"string")))}decode(e){return hg(super.decode(e))}}class mp extends Ma{coders;constructor(e,t){let r=!1;const i=[];e.forEach(c=>{c.dynamic&&(r=!0),i.push(c.type)});const o="tuple("+i.join(",")+")";super("tuple",o,t,r),je(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const o=i.localName;return o&&(r[o]||(r[o]=0),r[o]++),r},{});return this.coders.forEach((r,i)=>{let o=r.localName;!o||t[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,t){const r=dn.dereference(t,"tuple");return Ek(e,this.coders,r)}decode(e){return _k(e,this.coders)}}function Kw(n,e){return{address:ft(n),storageKeys:e.map((t,r)=>(Q(qt(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function mc(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(Q(t.length===2,"invalid slot set",`value[${r}]`,t),Kw(t[0],t[1])):(Q(t!=null&&typeof t=="object","invalid address-slot set","value",n),Kw(t.address,t.storageKeys)));Q(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,o)=>(i[o]=!0,i),{});return Kw(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function Sk(n){return{address:ft(n.address),nonce:Ce(n.nonce!=null?n.nonce:0),chainId:Ce(n.chainId!=null?n.chainId:0),signature:tn.from(n.signature)}}function LH(n){let e;return typeof n=="string"?e=fa.computePublicKey(n,!1):e=n.publicKey,ft(On("0x"+e.substring(4)).substring(26))}function BH(n,e){return LH(fa.recoverPublicKey(n,e))}const Qn=BigInt(0),jH=BigInt(2),UH=BigInt(27),VH=BigInt(28),FH=BigInt(35),HH=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),zH=Symbol.for("nodejs.util.inspect.custom"),$w=4096*32,kp=128;function GH(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return Xe(n.blobToKzgCommitment(Ae(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return Xe(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return Xe(n.blobToKZGCommitment(Ae(r)));Q(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return Xe(n.computeBlobProof(Ae(r),Ae(i)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return Xe(n.computeBlobKZGProof(Ae(r),Ae(i)));Q(!1,"unsupported KZG library","kzg",n)}}}function ZT(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=nd(e).substring(4),"0x"+t}function rd(n){return n==="0x"?null:ft(n)}function iy(n,e){try{return mc(n)}catch(t){Q(!1,t.message,e,n)}}function qH(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const i=n[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);t.push({address:rd(i[1]),nonce:Lt(i[2],"nonce"),chainId:Lt(i[0],"chainId"),signature:tn.from({yParity:pc(i[3],"yParity"),r:ka(i[4],32),s:ka(i[5],32)})})}return t}catch(t){Q(!1,t.message,e,n)}}function pc(n,e){return n==="0x"?0:Ye(n,e)}function Lt(n,e){if(n==="0x")return Qn;const t=Ce(n,e);return Q(t<=HH,"value exceeds uint size",e,t),t}function ht(n,e){const t=Ce(n,"value"),r=Mn(t);return Q(r.length<=32,"value too large",`tx.${e}`,t),r}function ay(n){return mc(n).map(e=>[e.address,e.storageKeys])}function QH(n){return n.map(e=>[ht(e.chainId,"chainId"),e.address,ht(e.nonce,"nonce"),ht(e.signature.yParity,"yParity"),Mn(e.signature.r),Mn(e.signature._s)])}function KH(n,e){Q(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)Q(qt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function $H(n){const e=Af(n);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:pc(e[0],"nonce"),gasPrice:Lt(e[1],"gasPrice"),gasLimit:Lt(e[2],"gasLimit"),to:rd(e[3]),value:Lt(e[4],"value"),data:Ae(e[5]),chainId:Qn};if(e.length===6)return t;const r=Lt(e[6],"v"),i=Lt(e[7],"r"),o=Lt(e[8],"s");if(i===Qn&&o===Qn)t.chainId=r;else{let c=(r-FH)/jH;c<Qn&&(c=Qn),t.chainId=c,Q(c!==Qn||r===UH||r===VH,"non-canonical legacy v","v",e[6]),t.signature=tn.from({r:ka(e[7],32),s:ka(e[8],32),v:r})}return t}function YH(n,e){const t=[ht(n.nonce,"nonce"),ht(n.gasPrice||0,"gasPrice"),ht(n.gasLimit,"gasLimit"),n.to||"0x",ht(n.value,"value"),n.data];let r=Qn;if(n.chainId!=Qn)r=Ce(n.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const o=n.signature.legacyChainId;o!=null&&(r=o)}if(!e)return r!==Qn&&(t.push(Mn(r)),t.push("0x"),t.push("0x")),Ea(t);let i=BigInt(27+e.yParity);return r!==Qn?i=tn.getChainIdV(r,e.v):BigInt(e.v)!==i&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Mn(i)),t.push(Mn(e.r)),t.push(Mn(e._s)),Ea(t)}function oy(n,e){let t;try{if(t=pc(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=ka(e[1],32),i=ka(e[2],32),o=tn.from({r,s:i,yParity:t});n.signature=o}function WH(n){const e=Af(Xe(n).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ae(n));const t={type:2,chainId:Lt(e[0],"chainId"),nonce:pc(e[1],"nonce"),maxPriorityFeePerGas:Lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Lt(e[4],"gasLimit"),to:rd(e[5]),value:Lt(e[6],"value"),data:Ae(e[7]),accessList:iy(e[8],"accessList")};return e.length===9||oy(t,e.slice(9)),t}function JH(n,e){const t=[ht(n.chainId,"chainId"),ht(n.nonce,"nonce"),ht(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ht(n.maxFeePerGas||0,"maxFeePerGas"),ht(n.gasLimit,"gasLimit"),n.to||"0x",ht(n.value,"value"),n.data,ay(n.accessList||[])];return e&&(t.push(ht(e.yParity,"yParity")),t.push(Mn(e.r)),t.push(Mn(e.s))),Xt(["0x02",Ea(t)])}function XH(n){const e=Af(Xe(n).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ae(n));const t={type:1,chainId:Lt(e[0],"chainId"),nonce:pc(e[1],"nonce"),gasPrice:Lt(e[2],"gasPrice"),gasLimit:Lt(e[3],"gasLimit"),to:rd(e[4]),value:Lt(e[5],"value"),data:Ae(e[6]),accessList:iy(e[7],"accessList")};return e.length===8||oy(t,e.slice(8)),t}function ZH(n,e){const t=[ht(n.chainId,"chainId"),ht(n.nonce,"nonce"),ht(n.gasPrice||0,"gasPrice"),ht(n.gasLimit,"gasLimit"),n.to||"0x",ht(n.value,"value"),n.data,ay(n.accessList||[])];return e&&(t.push(ht(e.yParity,"recoveryParam")),t.push(Mn(e.r)),t.push(Mn(e.s))),Xt(["0x01",Ea(t)])}function ez(n){let e=Af(Xe(n).slice(1)),t="3",r=null,i=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const c=e[1],d=e[2],h=e[3];Q(Array.isArray(c),"invalid network format: blobs not an array","fields[1]",c),Q(Array.isArray(d),"invalid network format: commitments not an array","fields[2]",d),Q(Array.isArray(h),"invalid network format: proofs not an array","fields[3]",h),Q(c.length===d.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(c.length===h.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let m=0;m<e[1].length;m++)i.push({data:c[m],commitment:d[m],proof:h[m]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){t="3 (EIP-7594 network format)",r=Ye(e[1]);const c=e[2],d=e[3],h=e[4];Q(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),Q(Array.isArray(c),"invalid EIP-7594 network format: blobs not an array","fields[2]",c),Q(Array.isArray(d),"invalid EIP-7594 network format: commitments not an array","fields[3]",d),Q(Array.isArray(h),"invalid EIP-7594 network format: proofs not an array","fields[4]",h),Q(c.length===d.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(c.length*kp===h.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let m=0;m<c.length;m++){const w=[];for(let b=0;b<kp;b++)w.push(h[m*kp+b]);i.push({data:c[m],commitment:d[m],proof:Xt(w)})}e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",Ae(n));const o={type:3,chainId:Lt(e[0],"chainId"),nonce:pc(e[1],"nonce"),maxPriorityFeePerGas:Lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Lt(e[4],"gasLimit"),to:rd(e[5]),value:Lt(e[6],"value"),data:Ae(e[7]),accessList:iy(e[8],"accessList"),maxFeePerBlobGas:Lt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};i&&(o.blobs=i),Q(o.to!=null,`invalid address for transaction type: ${t}`,"data",n),Q(Array.isArray(o.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let c=0;c<o.blobVersionedHashes.length;c++)Q(qt(o.blobVersionedHashes[c],32),`invalid blobVersionedHash at index ${c}: must be length 32`,"data",n);return e.length===11||oy(o,e.slice(11)),o}function tz(n,e,t){const r=[ht(n.chainId,"chainId"),ht(n.nonce,"nonce"),ht(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ht(n.maxFeePerGas||0,"maxFeePerGas"),ht(n.gasLimit,"gasLimit"),n.to||Gh,ht(n.value,"value"),n.data,ay(n.accessList||[]),ht(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),KH(n.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push(ht(e.yParity,"yParity")),r.push(Mn(e.r)),r.push(Mn(e.s)),t)){if(n.blobWrapperVersion!=null){const i=Mn(n.blobWrapperVersion),o=[];for(const{proof:c}of t){const d=Xe(c),h=d.length/kp;for(let m=0;m<d.length;m+=h)o.push(d.subarray(m,m+h))}return Xt(["0x03",Ea([r,i,t.map(c=>c.data),t.map(c=>c.commitment),o])])}return Xt(["0x03",Ea([r,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])])}return Xt(["0x03",Ea(r)])}function nz(n){const e=Af(Xe(n).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ae(n));const t={type:4,chainId:Lt(e[0],"chainId"),nonce:pc(e[1],"nonce"),maxPriorityFeePerGas:Lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Lt(e[4],"gasLimit"),to:rd(e[5]),value:Lt(e[6],"value"),data:Ae(e[7]),accessList:iy(e[8],"accessList"),authorizationList:qH(e[9],"authorizationList")};return e.length===10||oy(t,e.slice(10)),t}function rz(n,e){const t=[ht(n.chainId,"chainId"),ht(n.nonce,"nonce"),ht(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ht(n.maxFeePerGas||0,"maxFeePerGas"),ht(n.gasLimit,"gasLimit"),n.to||"0x",ht(n.value,"value"),n.data,ay(n.accessList||[]),QH(n.authorizationList||[])];return e&&(t.push(ht(e.yParity,"yParity")),t.push(Mn(e.r)),t.push(Mn(e.s))),Xt(["0x04",Ea(t)])}class Ws{#e;#t;#n;#r;#s;#a;#i;#o;#d;#c;#m;#p;#l;#u;#h;#f;#w;#g;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?Gh:e}set to(e){this.#t=e==null?null:ft(e)}get nonce(){return this.#r}set nonce(e){this.#r=Ye(e,"value")}get gasLimit(){return this.#s}set gasLimit(e){this.#s=Ce(e)}get gasPrice(){const e=this.#a;return e==null&&(this.type===0||this.type===1)?Qn:e}set gasPrice(e){this.#a=e==null?null:Ce(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#i;return e??(this.type===2||this.type===3?Qn:null)}set maxPriorityFeePerGas(e){this.#i=e==null?null:Ce(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#o;return e??(this.type===2||this.type===3?Qn:null)}set maxFeePerGas(e){this.#o=e==null?null:Ce(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=Ae(e)}get value(){return this.#d}set value(e){this.#d=Ce(e,"value")}get chainId(){return this.#c}set chainId(e){this.#c=Ce(e)}get signature(){return this.#m||null}set signature(e){this.#m=e==null?null:tn.from(e)}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const t=this.authorizationList;if(t){for(const r of t)if(!r.signature.isValid())return!1}return!0}get accessList(){const e=this.#p||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#p=e==null?null:mc(e)}get authorizationList(){const e=this.#w||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#w=e==null?null:e.map(t=>Sk(t))}get maxFeePerBlobGas(){const e=this.#l;return e==null&&this.type===3?Qn:e}set maxFeePerBlobGas(e){this.#l=e==null?null:Ce(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)Q(qt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#u=e}get blobs(){return this.#f==null?null:this.#f.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#f=null;return}const t=[],r=[];for(let i=0;i<e.length;i++){const o=e[i];if(Sx(o)){me(this.#h,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let c=Xe(o);if(Q(c.length<=$w,"blob is too large",`blobs[${i}]`,o),c.length!==$w){const m=new Uint8Array($w);m.set(c),c=m}const d=this.#h.blobToKzgCommitment(c),h=Ae(this.#h.computeBlobKzgProof(c,d));t.push({data:Ae(c),commitment:Ae(d),proof:h}),r.push(ZT(1,d))}else{const c=Ae(o.data),d=Ae(o.commitment),h=Ae(o.proof);t.push({data:c,commitment:d,proof:h}),r.push(ZT(1,d))}}this.#f=t,this.#u=r}get kzg(){return this.#h}set kzg(e){e==null?this.#h=null:this.#h=GH(e)}get blobWrapperVersion(){return this.#g}set blobWrapperVersion(e){this.#g=e}constructor(){this.#e=null,this.#t=null,this.#r=0,this.#s=Qn,this.#a=null,this.#i=null,this.#o=null,this.#n="0x",this.#d=Qn,this.#c=Qn,this.#m=null,this.#p=null,this.#l=null,this.#u=null,this.#h=null,this.#f=null,this.#w=null,this.#g=null}get hash(){return this.signature==null?null:On(this.#y(!0,!1))}get unsignedHash(){return On(this.unsignedSerialized)}get from(){return this.signature==null?null:BH(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:fa.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}#y(e,t){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return YH(this,r);case 1:return ZH(this,r);case 2:return JH(this,r);case 3:return tz(this,r,t?this.blobs:null);case 4:return rz(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#y(!0,!0)}get unsignedSerialized(){return this.#y(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=this.#l!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const o=[];return this.type!=null?o.push(this.type):this.authorizationList&&this.authorizationList.length?o.push(4):t?o.push(2):e?(o.push(1),r||o.push(0)):r?(o.push(1),o.push(2)):(i&&this.to||(o.push(0),o.push(1),o.push(2)),o.push(3)),o.sort(),o}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ws.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[zH](){return this.toString()}toString(){const e=[],t=i=>{let o=this[i];typeof o=="string"&&(o=JSON.stringify(o)),e.push(`${i}: ${o}`)};this.type&&t("type"),t("to"),t("data"),t("nonce"),t("gasLimit"),t("value"),this.chainId!=null&&t("chainId"),this.signature&&(t("from"),e.push(`signature: ${this.signature.toString()}`));const r=this.authorizationList;if(r){const i=[];for(const o of r){const c=[];c.push(`address: ${JSON.stringify(o.address)}`),o.nonce!=null&&c.push(`nonce: ${o.nonce}`),o.chainId!=null&&c.push(`chainId: ${o.chainId}`),o.signature&&c.push(`signature: ${o.signature.toString()}`),i.push(`Authorization { ${c.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Ws;if(typeof e=="string"){const r=Xe(e);if(r[0]>=127)return Ws.from($H(r));switch(r[0]){case 1:return Ws.from(XH(r));case 2:return Ws.from(WH(r));case 3:return Ws.from(ez(r));case 4:return Ws.from(nz(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Ws;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=tn.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobWrapperVersion!=null&&(t.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}function nc(n){return On(Aa(n))}var sz="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const eS=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),tS=4;function iz(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,o=[0,1];for(let Y=1;Y<r;Y++)o.push(i+=t());let c=t(),d=e;e+=c;let h=0,m=0;function w(){return h==0&&(m=m<<8|n[e++],h=8),m>>--h&1}const b=31,x=2**b,S=x>>>1,k=S>>1,N=x-1;let C=0;for(let Y=0;Y<b;Y++)C=C<<1|w();let D=[],F=0,U=x;for(;;){let Y=Math.floor(((C-F+1)*i-1)/U),te=0,T=r;for(;T-te>1;){let L=te+T>>>1;Y<o[L]?T=L:te=L}if(te==0)break;D.push(te);let _=F+Math.floor(U*o[te]/i),P=F+Math.floor(U*o[te+1]/i)-1;for(;((_^P)&S)==0;)C=C<<1&N|w(),_=_<<1&N,P=P<<1&N|1;for(;_&~P&k;)C=C&S|C<<1&N>>>1|w(),_=_<<1^S,P=(P^S)<<1|S|1;F=_,U=1+P-_}let $=r-4;return D.map(Y=>{switch(Y-$){case 3:return $+65792+(n[d++]<<16|n[d++]<<8|n[d++]);case 2:return $+256+(n[d++]<<8|n[d++]);case 1:return $+n[d++];default:return Y-1}})}function az(n){let e=0;return()=>n[e++]}function Nk(n){return az(iz(oz(n)))}function oz(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,o)=>e[i.charCodeAt(0)]=o);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,o=0,c=0,d=0;i<t;i++)d=d<<6|e[n.charCodeAt(i)],c+=6,c>=8&&(r[o++]=d>>(c-=8));return r}function lz(n){return n&1?~n>>1:n>>1}function cz(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=lz(e());return t}function qh(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let o=0;o<i;o++)t.push(e+o);e+=i+1}return t}function Ck(n){return Qh(()=>{let e=qh(n);if(e.length)return e})}function Ik(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(uz(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(dz(t,n))}return e.flat()}function Qh(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function Rk(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)cz(n,t).forEach((o,c)=>r[c].push(o));return r}function uz(n,e){let t=1+e(),r=e(),i=Qh(e);return Rk(i.length,1+n,e).flatMap((c,d)=>{let[h,...m]=c;return Array(i[d]).fill().map((w,b)=>{let x=b*r;return[h+b*t,m.map(S=>S+x)]})})}function dz(n,e){let t=1+e();return Rk(t,1+n,e).map(i=>[i[0],i.slice(1)])}function hz(n){let e=[],t=qh(n);return i(r([]),[]),e;function r(o){let c=n(),d=Qh(()=>{let h=qh(n).map(m=>t[m]);if(h.length)return r(h)});return{S:c,B:d,Q:o}}function i({S:o,B:c},d,h){if(!(o&4&&h===d[d.length-1])){o&2&&(h=d[d.length-1]),o&1&&e.push(d);for(let m of c)for(let w of m.Q)i(m,[...d,w],h)}}}function fz(n){return n.toString(16).toUpperCase().padStart(2,"0")}function kk(n){return`{${fz(n)}}`}function mz(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Bu(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function pz(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var gz="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Kh=44032,mg=4352,pg=4449,gg=4519,Pk=19,Ok=21,ju=28,yg=Ok*ju,yz=Pk*yg,wz=Kh+yz,bz=mg+Pk,vz=pg+Ok,xz=gg+ju;function bh(n){return n>>24&255}function Dk(n){return n&16777215}let Yb,nS,Wb,Pp;function Az(){let n=Nk(gz);Yb=new Map(Ck(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),nS=new Set(qh(n)),Wb=new Map,Pp=new Map;for(let[e,t]of Ik(n)){if(!nS.has(e)&&t.length==2){let[r,i]=t,o=Pp.get(r);o||(o=new Map,Pp.set(r,o)),o.set(i,e)}Wb.set(e,t.reverse())}}function Mk(n){return n>=Kh&&n<wz}function Ez(n,e){if(n>=mg&&n<bz&&e>=pg&&e<vz)return Kh+(n-mg)*yg+(e-pg)*ju;if(Mk(n)&&e>gg&&e<xz&&(n-Kh)%ju==0)return n+(e-gg);{let t=Pp.get(n);return t&&(t=t.get(e),t)?t:-1}}function Lk(n){Yb||Az();let e=[],t=[],r=!1;function i(o){let c=Yb.get(o);c&&(r=!0,o|=c),e.push(o)}for(let o of n)for(;;){if(o<128)e.push(o);else if(Mk(o)){let c=o-Kh,d=c/yg|0,h=c%yg/ju|0,m=c%ju;i(mg+d),i(pg+h),m>0&&i(gg+m)}else{let c=Wb.get(o);c?t.push(...c):i(o)}if(!t.length)break;o=t.pop()}if(r&&e.length>1){let o=bh(e[0]);for(let c=1;c<e.length;c++){let d=bh(e[c]);if(d==0||o<=d){o=d;continue}let h=c-1;for(;;){let m=e[h+1];if(e[h+1]=e[h],e[h]=m,!h||(o=bh(e[--h]),o<=d))break}o=bh(e[c])}}return e}function _z(n){let e=[],t=[],r=-1,i=0;for(let o of n){let c=bh(o),d=Dk(o);if(r==-1)c==0?r=d:e.push(d);else if(i>0&&i>=c)c==0?(e.push(r,...t),t.length=0,r=d):t.push(d),i=c;else{let h=Ez(r,d);h>=0?r=h:i==0&&c==0?(e.push(r),r=d):(t.push(d),i=c)}}return r>=0&&e.push(r,...t),e}function Bk(n){return Lk(n).map(Dk)}function Tz(n){return _z(Lk(n))}const rS=45,jk=".",Uk=65039,Vk=1,wg=n=>Array.from(n);function $h(n,e){return n.P.has(e)||n.Q.has(e)}class Sz extends Array{get is_emoji(){return!0}}let Jb,Fk,Vl,Xb,Hk,xu,Yw,lu,kl,sS,Zb;function Bx(){if(Jb)return;let n=Nk(sz);const e=()=>qh(n),t=()=>new Set(e()),r=(w,b)=>b.forEach(x=>w.add(x));Jb=new Map(Ik(n)),Fk=t(),Vl=e(),Xb=new Set(e().map(w=>Vl[w])),Vl=new Set(Vl),Hk=t(),t();let i=Ck(n),o=n();const c=()=>{let w=new Set;return e().forEach(b=>r(w,i[b])),r(w,e()),w};xu=Qh(w=>{let b=Qh(n).map(x=>x+96);if(b.length){let x=w>=o;b[0]-=32,b=Bu(b),x&&(b=`Restricted[${b}]`);let S=c(),k=c(),N=!n();return{N:b,P:S,Q:k,M:N,R:x}}}),Yw=t(),lu=new Map;let d=e().concat(wg(Yw)).sort((w,b)=>w-b);d.forEach((w,b)=>{let x=n(),S=d[b]=x?d[b-x]:{V:[],M:new Map};S.V.push(w),Yw.has(w)||lu.set(w,S)});for(let{V:w,M:b}of new Set(lu.values())){let x=[];for(let k of w){let N=xu.filter(D=>$h(D,k)),C=x.find(({G:D})=>N.some(F=>D.has(F)));C||(C={G:new Set,V:[]},x.push(C)),C.V.push(k),r(C.G,N)}let S=x.flatMap(k=>wg(k.G));for(let{G:k,V:N}of x){let C=new Set(S.filter(D=>!k.has(D)));for(let D of N)b.set(D,C)}}kl=new Set;let h=new Set;const m=w=>kl.has(w)?h.add(w):kl.add(w);for(let w of xu){for(let b of w.P)m(b);for(let b of w.Q)m(b)}for(let w of kl)!lu.has(w)&&!h.has(w)&&lu.set(w,Vk);r(kl,Bk(kl)),sS=hz(n).map(w=>Sz.from(w)).sort(pz),Zb=new Map;for(let w of sS){let b=[Zb];for(let x of w){let S=b.map(k=>{let N=k.get(x);return N||(N=new Map,k.set(x,N)),N});x===Uk?b.push(...S):b=S}for(let x of b)x.V=w}}function jx(n){return(zk(n)?"":`${Ux(ly([n]))} `)+kk(n)}function Ux(n){return`"${n}"`}function Nz(n){if(n.length>=4&&n[2]==rS&&n[3]==rS)throw new Error(`invalid label extension: "${Bu(n.slice(0,4))}"`)}function Cz(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function Iz(n){let e=n[0],t=eS.get(e);if(t)throw Nh(`leading ${t}`);let r=n.length,i=-1;for(let o=1;o<r;o++){e=n[o];let c=eS.get(e);if(c){if(i==o)throw Nh(`${t} + ${c}`);i=o+1,t=c}}if(i==r)throw Nh(`trailing ${t}`)}function ly(n,e=1/0,t=kk){let r=[];Rz(n[0])&&r.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,o=n.length;for(let c=0;c<o;c++){let d=n[c];zk(d)&&(r.push(Bu(n.slice(i,c))),r.push(t(d)),i=c+1)}return r.push(Bu(n.slice(i,o))),r.join("")}function Rz(n){return Bx(),Vl.has(n)}function zk(n){return Bx(),Hk.has(n)}function kz(n){return Mz(Pz(n,Tz,jz))}function Pz(n,e,t){if(!n)return[];Bx();let r=0;return n.split(jk).map(i=>{let o=mz(i),c={input:o,offset:r};r+=o.length+1;try{let d=c.tokens=Bz(o,e,t),h=d.length,m;if(!h)throw new Error("empty label");let w=c.output=d.flat();if(Cz(w),!(c.emoji=h>1||d[0].is_emoji)&&w.every(x=>x<128))Nz(w),m="ASCII";else{let x=d.flatMap(S=>S.is_emoji?[]:S);if(!x.length)m="Emoji";else{if(Vl.has(w[0]))throw Nh("leading combining mark");for(let N=1;N<h;N++){let C=d[N];if(!C.is_emoji&&Vl.has(C[0]))throw Nh(`emoji + combining mark: "${Bu(d[N-1])} + ${ly([C[0]])}"`)}Iz(w);let S=wg(new Set(x)),[k]=Dz(S);Lz(k,x),Oz(k,S),m=k.N}}c.type=m}catch(d){c.error=d}return c})}function Oz(n,e){let t,r=[];for(let i of e){let o=lu.get(i);if(o===Vk)return;if(o){let c=o.M.get(i);if(t=t?t.filter(d=>c.has(d)):wg(c),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(o=>$h(i,o)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function Dz(n){let e=xu;for(let t of n){let r=e.filter(i=>$h(i,t));if(!r.length)throw xu.some(i=>$h(i,t))?qk(e[0],t):Gk(t);if(e=r,r.length==1)break}return e}function Mz(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${Ux(ly(e,63))}: ${i}`)}return Bu(r)}).join(jk)}function Gk(n){return new Error(`disallowed character: ${jx(n)}`)}function qk(n,e){let t=jx(e),r=xu.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Nh(n){return new Error(`illegal placement: ${n}`)}function Lz(n,e){for(let t of e)if(!$h(n,t))throw qk(n,t);if(n.M){let t=Bk(e);for(let r=1,i=t.length;r<i;r++)if(Xb.has(t[r])){let o=r+1;for(let c;o<i&&Xb.has(c=t[o]);o++)for(let d=r;d<o;d++)if(t[d]==c)throw new Error(`duplicate non-spacing marks: ${jx(c)}`);if(o-r>tS)throw new Error(`excessive non-spacing marks: ${Ux(ly(t.slice(r-1,o)))} (${o-r}/${tS})`);r=o}}}function Bz(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let o=Uz(n);if(o)i.length&&(r.push(e(i)),i=[]),r.push(t(o));else{let c=n.pop();if(kl.has(c))i.push(c);else{let d=Jb.get(c);if(d)i.push(...d);else if(!Fk.has(c))throw Gk(c)}}}return i.length&&r.push(e(i)),r}function jz(n){return n.filter(e=>e!=Uk)}function Uz(n,e){let t=Zb,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:o}=t;o&&(r=o,n.length=i)}return r}const Qk=new Uint8Array(32);Qk.fill(0);function iS(n){return Q(n.length!==0,"invalid ENS name; empty component","comp",n),n}function Kk(n){const e=Aa(Vz(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(iS(e.slice(r,i))),r=i+1);return Q(r<e.length,"invalid ENS name; empty component","name",n),t.push(iS(e.slice(r))),t}function Vz(n){try{if(n.length===0)throw new Error("empty label");return kz(n)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",n)}}function ev(n){Q(typeof n=="string","invalid ENS name; not a string","name",n),Q(n.length,"invalid ENS name (empty label)","name",n);let e=Qk;const t=Kk(n);for(;t.length;)e=On(Xt([e,On(t.pop())]));return Ae(e)}function Fz(n,e){const t=e;return Q(t<=255,"DNS encoded label cannot exceed 255","length",t),Ae(Xt(Kk(n).map(r=>{Q(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const $k=new Uint8Array(32);$k.fill(0);const Hz=BigInt(-1),Yk=BigInt(0),Wk=BigInt(1),zz=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Gz(n){const e=Xe(n),t=e.length%32;return t?Xt([e,$k.slice(t)]):Ae(e)}const qz=Ho(Wk,32),Qz=Ho(Yk,32),aS={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ww=["name","version","chainId","verifyingContract","salt"];function oS(n){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const Kz={name:oS("name"),version:oS("version"),chainId:function(n){const e=Ce(n,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Js(e)},verifyingContract:function(n){try{return ft(n).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=Xe(n,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",n),Ae(e)}};function Jw(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const i=jl(zz,t?r-1:r),o=t?(i+Wk)*Hz:Yk;return function(c){const d=Ce(c,"value");return Q(d>=o&&d<=i,`value out-of-bounds for ${n}`,"value",d),Ho(t?LR(d,256):d,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return Q(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const i=Xe(r);return Q(i.length===t,`invalid length for ${n}`,"value",r),Gz(r)}}}switch(n){case"address":return function(e){return ka(ft(e),32)};case"bool":return function(e){return e?qz:Qz};case"bytes":return function(e){return On(e)};case"string":return function(e){return nc(e)}}return null}function lS(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function pp(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}class Zr{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const t=new Map,r=new Map,i=new Map,o={};Object.keys(e).forEach(h=>{o[h]=e[h].map(({name:m,type:w})=>{let{base:b,index:x}=pp(w);return b==="int"&&!e.int&&(b="int256"),b==="uint"&&!e.uint&&(b="uint256"),{name:m,type:b+(x||"")}}),t.set(h,new Set),r.set(h,[]),i.set(h,new Set)}),this.#e=JSON.stringify(o);for(const h in o){const m=new Set;for(const w of o[h]){Q(!m.has(w.name),`duplicate variable name ${JSON.stringify(w.name)} in ${JSON.stringify(h)}`,"types",e),m.add(w.name);const b=pp(w.type).base;Q(b!==h,`circular type reference to ${JSON.stringify(b)}`,"types",e),!Jw(b)&&(Q(r.has(b),`unknown type ${JSON.stringify(b)}`,"types",e),r.get(b).push(h),t.get(h).add(b))}}const c=Array.from(r.keys()).filter(h=>r.get(h).length===0);Q(c.length!==0,"missing primary type","types",e),Q(c.length===1,`ambiguous primary types or unused types: ${c.map(h=>JSON.stringify(h)).join(", ")}`,"types",e),je(this,{primaryType:c[0]});function d(h,m){Q(!m.has(h),`circular type reference to ${JSON.stringify(h)}`,"types",e),m.add(h);for(const w of t.get(h))if(r.has(w)){d(w,m);for(const b of m)i.get(b).add(w)}m.delete(h)}d(this.primaryType,new Set);for(const[h,m]of i){const w=Array.from(m);w.sort(),this.#t.set(h,lS(h,o[h])+w.map(b=>lS(b,o[b])).join(""))}}getEncoder(e){let t=this.#n.get(e);return t||(t=this.#r(e),this.#n.set(e,t)),t}#r(e){{const i=Jw(e);if(i)return i}const t=pp(e).array;if(t){const i=t.prefix,o=this.getEncoder(i);return c=>{Q(t.count===-1||t.count===c.length,`array length mismatch; expected length ${t.count}`,"value",c);let d=c.map(o);return this.#t.has(i)&&(d=d.map(On)),On(Xt(d))}}const r=this.types[e];if(r){const i=nc(this.#t.get(e));return o=>{const c=r.map(({name:d,type:h})=>{const m=this.getEncoder(h)(o[d]);return this.#t.has(h)?On(m):m});return c.unshift(i),Xt(c)}}Q(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#t.get(e);return Q(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return On(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Jw(e))return r(e,t);const i=pp(e).array;if(i)return Q(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(c=>this._visit(i.prefix,c,r));const o=this.types[e];if(o)return o.reduce((c,{name:d,type:h})=>(c[d]=this._visit(h,t[d],r),c),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Zr(e)}static getPrimaryType(e){return Zr.from(e).primaryType}static hashStruct(e,t,r){return Zr.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=aS[r];Q(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Ww.indexOf(r.name)-Ww.indexOf(i.name)),Zr.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Xt(["0x1901",Zr.hashDomain(e),Zr.from(t).hash(r)])}static hash(e,t,r){return On(Zr.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const d in e)e[d]==null&&delete e[d];const o={};e.verifyingContract&&!qt(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const c=Zr.from(t);c.visit(r,(d,h)=>(d==="address"&&!qt(h,20)&&(o[h]="0x"),h));for(const d in o)o[d]=await i(d);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),r=c.visit(r,(d,h)=>d==="address"&&o[h]?o[h]:h),{domain:e,value:r}}static getPayload(e,t,r){Zr.hashDomain(e);const i={},o=[];Ww.forEach(h=>{const m=e[h];m!=null&&(i[h]=Kz[h](m),o.push({name:h,type:aS[h]}))});const c=Zr.from(t);t=c.types;const d=Object.assign({},t);return Q(d.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),d.EIP712Domain=o,c.encode(r),{types:d,domain:i,primaryType:c.primaryType,message:c.visit(r,(h,m)=>{if(h.match(/^bytes(\d*)/))return Ae(Xe(m));if(h.match(/^u?int/))return Ce(m).toString();switch(h){case"address":return m.toLowerCase();case"bool":return!!m;case"string":return Q(typeof m=="string","invalid string","value",m),m}Q(!1,"unsupported type","type",h)})}}}function Ar(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const $z="external public payable override",Yz=Ar($z.split(" ")),Jk="constant external internal payable private public pure view override",Wz=Ar(Jk.split(" ")),Xk="constructor error event fallback function receive struct",Zk=Ar(Xk.split(" ")),eP="calldata memory storage payable indexed",Jz=Ar(eP.split(" ")),Xz="tuple returns",Zz=[Xk,eP,Xz,Jk].join(" "),e7=Ar(Zz.split(" ")),t7={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},n7=new RegExp("^(\\s*)"),r7=new RegExp("^([0-9]+)"),s7=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),tP=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),nP=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Is{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Is(this.#t)}reset(){this.#e=0}#n(e=0,t=0){return new Is(this.#t.slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const r=this.peek().linkNext;t.push(this.#n(this.#e+1,r)),this.#e=r}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const r=this.#t[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function Yo(n){const e=[],t=c=>{const d=o<n.length?JSON.stringify(n[o]):"$EOI";throw new Error(`invalid token ${d} at ${o}: ${c}`)};let r=[],i=[],o=0;for(;o<n.length;){let c=n.substring(o),d=c.match(n7);d&&(o+=d[1].length,c=n.substring(o));const h={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};e.push(h);let m=t7[c[0]]||"";if(m){if(h.type=m,h.text=c[0],o++,m==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(m=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),h.match=r.pop(),e[h.match].match=e.length-1,h.depth--,h.linkBack=i.pop(),e[h.linkBack].linkNext=e.length-1;else if(m==="COMMA")h.linkBack=i.pop(),e[h.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(m==="OPEN_BRACKET")h.type="BRACKET";else if(m==="CLOSE_BRACKET"){let w=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const b=e.pop().text;w=b+w,e[e.length-1].value=Ye(b)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=w}continue}if(d=c.match(s7),d){if(h.text=d[1],o+=h.text.length,e7.has(h.text)){h.type="KEYWORD";continue}if(h.text.match(nP)){h.type="TYPE";continue}h.type="ID";continue}if(d=c.match(r7),d){h.text=d[1],h.type="NUMBER",o+=h.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(c[0])} at position ${o}`)}return new Is(e.map(c=>Object.freeze(c)))}function cS(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function cy(n,e){if(e.peekKeyword(Zk)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function Oa(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function rP(n){let e=Oa(n,Wz);return cS(e,Ar("constant payable nonpayable".split(" "))),cS(e,Ar("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function _a(n,e){return n.popParams().map(t=>Ht.from(t,e))}function sP(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Ce(n.pop().text);throw new Error("invalid gas")}return null}function rc(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const i7=new RegExp(/^(.*)\[([0-9]*)\]$/);function uS(n){const e=n.match(nP);if(Q(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);Q(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);Q(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const nn={},zr=Symbol.for("_ethers_internal"),dS="_ParamTypeInternal",hS="_ErrorInternal",fS="_EventInternal",mS="_ConstructorInternal",pS="_FallbackInternal",gS="_FunctionInternal",yS="_StructInternal";class Ht{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,i,o,c,d,h){if(vf(e,nn,"ParamType"),Object.defineProperty(this,zr,{value:dS}),c&&(c=Object.freeze(c.slice())),i==="array"){if(d==null||h==null)throw new Error("")}else if(d!=null||h!=null)throw new Error("");if(i==="tuple"){if(c==null)throw new Error("")}else if(c!=null)throw new Error("");je(this,{name:t,type:r,baseType:i,indexed:o,components:c,arrayLength:d,arrayChildren:h})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const o=JSON.parse(this.arrayChildren.format("json"));return o.name=r,o.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(o)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(o=>JSON.parse(o.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,o)=>r.components[o].walk(i,t))}return t(this.type,e)}#e(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const c=this.arrayChildren,d=t.slice();d.forEach((h,m)=>{c.#e(e,h,r,w=>{d[m]=w})}),i(d);return}if(this.isTuple()){const c=this.components;let d;if(Array.isArray(t))d=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");d=c.map(h=>{if(!h.name)throw new Error("cannot use object value with unnamed components");if(!(h.name in t))throw new Error(`missing value for component ${h.name}`);return t[h.name]})}if(d.length!==this.components.length)throw new Error("array is wrong length");d.forEach((h,m)=>{c[m].#e(e,h,r,w=>{d[m]=w})}),i(d);return}const o=r(this.type,t);o.then?e.push((async function(){i(await o)})()):i(o)}async walkAsync(e,t){const r=[],i=[e];return this.#e(r,e,t,o=>{i[0]=o}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(Ht.isParamType(e))return e;if(typeof e=="string")try{return Ht.from(Yo(e),t)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Is){let d="",h="",m=null;Oa(e,Ar(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(h="tuple",m=e.popParams().map(N=>Ht.from(N)),d=`tuple(${m.map(N=>N.format()).join(",")})`):(d=uS(e.popType("TYPE")),h=d);let w=null,b=null;for(;e.length&&e.peekType("BRACKET");){const N=e.pop();w=new Ht(nn,"",d,h,null,m,b,w),b=N.value,d+=N.text,h="array",m=null}let x=null;if(Oa(e,Jz).has("indexed")){if(!t)throw new Error("");x=!0}const k=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ht(nn,k,d,h,x,m,b,w)}const r=e.name;Q(!r||typeof r=="string"&&r.match(tP),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(Q(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let o=e.type,c=o.match(i7);if(c){const d=parseInt(c[2]||"-1"),h=Ht.from({type:c[1],components:e.components});return new Ht(nn,r||"",o,"array",i,null,d,h)}if(o==="tuple"||o.startsWith("tuple(")||o.startsWith("(")){const d=e.components!=null?e.components.map(m=>Ht.from(m)):null;return new Ht(nn,r||"",o,"tuple",i,d,null,null)}return o=uS(e.type),new Ht(nn,r||"",o,o,i,null,null,null)}static isParamType(e){return e&&e[zr]===dS}}class sc{type;inputs;constructor(e,t,r){vf(e,nn,"Fragment"),r=Object.freeze(r.slice()),je(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{sc.from(JSON.parse(e))}catch{}return sc.from(Yo(e))}if(e instanceof Is)switch(e.peekKeyword(Zk)){case"constructor":return wa.from(e);case"error":return Br.from(e);case"event":return Ri.from(e);case"fallback":case"receive":return ua.from(e);case"function":return ki.from(e);case"struct":return ql.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return wa.from(e);case"error":return Br.from(e);case"event":return Ri.from(e);case"fallback":case"receive":return ua.from(e);case"function":return ki.from(e);case"struct":return ql.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return wa.isFragment(e)}static isError(e){return Br.isFragment(e)}static isEvent(e){return Ri.isFragment(e)}static isFunction(e){return ki.isFragment(e)}static isStruct(e){return ql.isFragment(e)}}class uy extends sc{name;constructor(e,t,r,i){super(e,t,i),Q(typeof r=="string"&&r.match(tP),"invalid identifier","name",r),i=Object.freeze(i.slice()),je(this,{name:r})}}function Yh(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class Br extends uy{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,zr,{value:hS})}get selector(){return nc(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Yh(e,this.inputs)),t.join(" ")}static from(e){if(Br.isFragment(e))return e;if(typeof e=="string")return Br.from(Yo(e));if(e instanceof Is){const t=cy("error",e),r=_a(e);return rc(e),new Br(nn,t,r)}return new Br(nn,e.name,e.inputs?e.inputs.map(Ht.from):[])}static isFragment(e){return e&&e[zr]===hS}}class Ri extends uy{anonymous;constructor(e,t,r,i){super(e,"event",t,r),Object.defineProperty(this,zr,{value:fS}),je(this,{anonymous:i})}get topicHash(){return nc(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+Yh(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(i=>Ht.from(i)),new Ri(nn,e,t,!1).topicHash}static from(e){if(Ri.isFragment(e))return e;if(typeof e=="string")try{return Ri.from(Yo(e))}catch{Q(!1,"invalid event fragment","obj",e)}else if(e instanceof Is){const t=cy("event",e),r=_a(e,!0),i=!!Oa(e,Ar(["anonymous"])).has("anonymous");return rc(e),new Ri(nn,t,r,i)}return new Ri(nn,e.name,e.inputs?e.inputs.map(t=>Ht.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[zr]===fS}}class wa extends sc{payable;gas;constructor(e,t,r,i,o){super(e,t,r),Object.defineProperty(this,zr,{value:mS}),je(this,{payable:i,gas:o})}format(e){if(me(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[`constructor${Yh(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(wa.isFragment(e))return e;if(typeof e=="string")try{return wa.from(Yo(e))}catch{Q(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Is){Oa(e,Ar(["constructor"]));const t=_a(e),r=!!Oa(e,Yz).has("payable"),i=sP(e);return rc(e),new wa(nn,"constructor",t,r,i)}return new wa(nn,"constructor",e.inputs?e.inputs.map(Ht.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[zr]===mS}}class ua extends sc{payable;constructor(e,t,r){super(e,"fallback",t),Object.defineProperty(this,zr,{value:pS}),je(this,{payable:r})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:r})}return`${t}()${this.payable?" payable":""}`}static from(e){if(ua.isFragment(e))return e;if(typeof e=="string")try{return ua.from(Yo(e))}catch{Q(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Is){const t=e.toString(),r=e.peekKeyword(Ar(["fallback","receive"]));if(Q(r,"type must be fallback or receive","obj",t),e.popKeyword(Ar(["fallback","receive"]))==="receive"){const d=_a(e);return Q(d.length===0,"receive cannot have arguments","obj.inputs",d),Oa(e,Ar(["payable"])),rc(e),new ua(nn,[],!0)}let o=_a(e);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(d=>d.format("minimal")).join(", ")):o=[Ht.from("bytes")];const c=rP(e);if(Q(c==="nonpayable"||c==="payable","fallback cannot be constants","obj.stateMutability",c),Oa(e,Ar(["returns"])).has("returns")){const d=_a(e);Q(d.length===1&&d[0].type==="bytes","invalid fallback outputs","obj.outputs",d.map(h=>h.format("minimal")).join(", "))}return rc(e),new ua(nn,o,c==="payable")}if(e.type==="receive")return new ua(nn,[],!0);if(e.type==="fallback"){const t=[Ht.from("bytes")],r=e.stateMutability==="payable";return new ua(nn,t,r)}Q(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[zr]===pS}}class ki extends uy{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,i,o,c){super(e,"function",t,i),Object.defineProperty(this,zr,{value:gS}),o=Object.freeze(o.slice()),je(this,{constant:r==="view"||r==="pure",gas:c,outputs:o,payable:r==="payable",stateMutability:r})}get selector(){return nc(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+Yh(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Yh(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(i=>Ht.from(i)),new ki(nn,e,"view",t,[],null).selector}static from(e){if(ki.isFragment(e))return e;if(typeof e=="string")try{return ki.from(Yo(e))}catch{Q(!1,"invalid function fragment","obj",e)}else if(e instanceof Is){const r=cy("function",e),i=_a(e),o=rP(e);let c=[];Oa(e,Ar(["returns"])).has("returns")&&(c=_a(e));const d=sP(e);return rc(e),new ki(nn,r,o,i,c,d)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new ki(nn,e.name,t,e.inputs?e.inputs.map(Ht.from):[],e.outputs?e.outputs.map(Ht.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[zr]===gS}}class ql extends uy{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,zr,{value:yS})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return ql.from(Yo(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Is){const t=cy("struct",e),r=_a(e);return rc(e),new ql(nn,t,r)}return new ql(nn,e.name,e.inputs?e.inputs.map(Ht.from):[])}static isFragment(e){return e&&e[zr]===yS}}const si=new Map;si.set(0,"GENERIC_PANIC");si.set(1,"ASSERT_FALSE");si.set(17,"OVERFLOW");si.set(18,"DIVIDE_BY_ZERO");si.set(33,"ENUM_RANGE_ERROR");si.set(34,"BAD_STORAGE_DATA");si.set(49,"STACK_UNDERFLOW");si.set(50,"ARRAY_RANGE_ERROR");si.set(65,"OUT_OF_MEMORY");si.set(81,"UNINITIALIZED_FUNCTION_CALL");const a7=new RegExp(/^bytes([0-9]*)$/),o7=new RegExp(/^(u?int)([0-9]*)$/);let Xw=null,wS=1024;function l7(n,e,t,r){let i="missing revert data",o=null;const c=null;let d=null;if(t){i="execution reverted";const m=Xe(t);if(t=Ae(t),m.length===0)i+=" (no data present; likely require(false) occurred",o="require(false)";else if(m.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Ae(m.slice(0,4))==="0x08c379a0")try{o=r.decode(["string"],m.slice(4))[0],d={signature:"Error(string)",name:"Error",args:[o]},i+=`: ${JSON.stringify(o)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Ae(m.slice(0,4))==="0x4e487b71")try{const w=Number(r.decode(["uint256"],m.slice(4))[0]);d={signature:"Panic(uint256)",name:"Panic",args:[w]},o=`Panic due to ${si.get(w)||"UNKNOWN"}(${w})`,i+=`: ${o}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const h={to:e.to?ft(e.to):null,data:e.data||"0x"};return e.from&&(h.from=ft(e.from)),Wt(i,"CALL_EXCEPTION",{action:n,data:t,reason:o,transaction:h,invocation:c,revert:d})}class Uu{#e(e){if(e.isArray())return new TH(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new mp(e.components.map(r=>this.#e(r)),e.name);switch(e.baseType){case"address":return new EH(e.name);case"bool":return new SH(e.name);case"string":return new MH(e.name);case"bytes":return new NH(e.name);case"":return new RH(e.name)}let t=e.type.match(o7);if(t){let r=parseInt(t[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new DH(r/8,t[1]==="int",e.name)}if(t=e.type.match(a7),t){let r=parseInt(t[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new CH(r,e.name)}Q(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map(i=>this.#e(Ht.from(i)));return new mp(t,"_").defaultValue()}encode(e,t){OR(t.length,e.length,"types/values length mismatch");const r=e.map(c=>this.#e(Ht.from(c))),i=new mp(r,"_"),o=new Hb;return i.encode(o,t),o.data}decode(e,t,r){const i=e.map(c=>this.#e(Ht.from(c)));return new mp(i,"_").decode(new Nx(t,r,wS))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),wS=e}static defaultAbiCoder(){return Xw==null&&(Xw=new Uu),Xw}static getBuiltinCallException(e,t,r){return l7(e,t,r,Uu.defaultAbiCoder())}}class c7{fragment;name;signature;topic;args;constructor(e,t,r){const i=e.name,o=e.format();je(this,{fragment:e,name:i,signature:o,topic:t,args:r})}}class u7{fragment;name;args;signature;selector;value;constructor(e,t,r,i){const o=e.name,c=e.format();je(this,{fragment:e,name:o,args:r,signature:c,selector:t,value:i})}}class d7{fragment;name;args;signature;selector;constructor(e,t,r){const i=e.name,o=e.format();je(this,{fragment:e,name:i,args:r,signature:o,selector:t})}}class bS{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){je(this,{hash:e,_isIndexed:!0})}}const vS={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},xS={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&vS[n.toString()]&&(e=vS[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};class _o{fragments;deploy;fallback;receive;#e;#t;#n;#r;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const r=[];for(const c of t)try{r.push(sc.from(c))}catch(d){console.log(`[Warning] Invalid Fragment ${JSON.stringify(c)}:`,d.message)}je(this,{fragments:Object.freeze(r)});let i=null,o=!1;this.#r=this.getAbiCoder(),this.fragments.forEach((c,d)=>{let h;switch(c.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}je(this,{deploy:c});return;case"fallback":c.inputs.length===0?o=!0:(Q(!i||c.payable!==i.payable,"conflicting fallback fragments",`fragments[${d}]`,c),i=c,o=i.payable);return;case"function":h=this.#n;break;case"event":h=this.#t;break;case"error":h=this.#e;break;default:return}const m=c.format();h.has(m)||h.set(m,c)}),this.deploy||je(this,{deploy:wa.from("constructor()")}),je(this,{fallback:i,receive:o})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Uu.defaultAbiCoder()}#s(e,t,r){if(qt(e)){const o=e.toLowerCase();for(const c of this.#n.values())if(o===c.selector)return c;return null}if(e.indexOf("(")===-1){const o=[];for(const[c,d]of this.#n)c.split("(")[0]===e&&o.push(d);if(t){const c=t.length>0?t[t.length-1]:null;let d=t.length,h=!0;dn.isTyped(c)&&c.type==="overrides"&&(h=!1,d--);for(let m=o.length-1;m>=0;m--){const w=o[m].inputs.length;w!==d&&(!h||w!==d-1)&&o.splice(m,1)}for(let m=o.length-1;m>=0;m--){const w=o[m].inputs;for(let b=0;b<t.length;b++)if(dn.isTyped(t[b])){if(b>=w.length){if(t[b].type==="overrides")continue;o.splice(m,1);break}if(t[b].type!==w[b].baseType){o.splice(m,1);break}}}}if(o.length===1&&t&&t.length!==o[0].inputs.length){const c=t[t.length-1];(c==null||Array.isArray(c)||typeof c!="object")&&o.splice(0,1)}if(o.length===0)return null;if(o.length>1&&r){const c=o.map(d=>JSON.stringify(d.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${c})`,"key",e)}return o[0]}const i=this.#n.get(ki.from(e).format());return i||null}getFunctionName(e){const t=this.#s(e,null,!1);return Q(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#s(e,null,!1)}getFunction(e,t){return this.#s(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#n.keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(this.#n.get(i),r)}}#a(e,t,r){if(qt(e)){const o=e.toLowerCase();for(const c of this.#t.values())if(o===c.topicHash)return c;return null}if(e.indexOf("(")===-1){const o=[];for(const[c,d]of this.#t)c.split("(")[0]===e&&o.push(d);if(t){for(let c=o.length-1;c>=0;c--)o[c].inputs.length<t.length&&o.splice(c,1);for(let c=o.length-1;c>=0;c--){const d=o[c].inputs;for(let h=0;h<t.length;h++)if(dn.isTyped(t[h])&&t[h].type!==d[h].baseType){o.splice(c,1);break}}}if(o.length===0)return null;if(o.length>1&&r){const c=o.map(d=>JSON.stringify(d.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${c})`,"key",e)}return o[0]}const i=this.#t.get(Ri.from(e).format());return i||null}getEventName(e){const t=this.#a(e,null,!1);return Q(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#a(e,null,!1)}getEvent(e,t){return this.#a(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#t.keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(this.#t.get(i),r)}}getError(e,t){if(qt(e)){const i=e.toLowerCase();if(xS[i])return Br.from(xS[i].signature);for(const o of this.#e.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,c]of this.#e)o.split("(")[0]===e&&i.push(c);if(i.length===0)return e==="Error"?Br.from("error Error(string)"):e==="Panic"?Br.from("error Panic(uint256)"):null;if(i.length>1){const o=i.map(c=>JSON.stringify(c.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${o})`,"name",e)}return i[0]}if(e=Br.from(e).format(),e==="Error(string)")return Br.from("error Error(string)");if(e==="Panic(uint256)")return Br.from("error Panic(uint256)");const r=this.#e.get(e);return r||null}forEachError(e){const t=Array.from(this.#e.keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(this.#e.get(i),r)}}_decodeParams(e,t){return this.#r.decode(e,t)}_encodeParams(e,t){return this.#r.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(un(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,un(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Xt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(un(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,un(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Xt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const o=this.getFunction(e);Q(o,"unknown function","fragment",e),e=o}let r="invalid length for result data";const i=br(t);if(i.length%32===0)try{return this.#r.decode(e.outputs,i)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:Ae(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=Xe(e,"data"),i=Uu.getBuiltinCallException("call",t,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const d=Ae(r.slice(0,4)),h=this.getError(d);if(h)try{const m=this.#r.decode(h.inputs,r.slice(4));i.revert={name:h.name,signature:h.format(),args:m},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const c=this.parseTransaction(t);return c&&(i.invocation={method:c.name,signature:c.signature,args:c.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Ae(this.#r.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}me(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(o,c)=>o.type==="string"?nc(c):o.type==="bytes"?On(Ae(c)):(o.type==="bool"&&typeof c=="boolean"?c=c?"0x01":"0x00":o.type.match(/^u?int/)?c=Ho(c):o.type.match(/^bytes/)?c=k9(c,32):o.type==="address"&&this.#r.encode(["address"],[c]),ka(Ae(c),32));for(t.forEach((o,c)=>{const d=e.inputs[c];if(!d.indexed){Q(o==null,"cannot filter non-indexed parameters; must be null","contract."+d.name,o);return}o==null?r.push(null):d.baseType==="array"||d.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+d.name,o):Array.isArray(o)?r.push(o.map(h=>i(d,h))):r.push(i(d,o))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const c=this.getEvent(e);Q(c,"unknown event","eventFragment",e),e=c}const r=[],i=[],o=[];return e.anonymous||r.push(e.topicHash),Q(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((c,d)=>{const h=t[d];if(c.indexed)if(c.type==="string")r.push(nc(h));else if(c.type==="bytes")r.push(On(h));else{if(c.baseType==="tuple"||c.baseType==="array")throw new Error("not implemented");r.push(this.#r.encode([c.type],[h]))}else i.push(c),o.push(h)}),{data:this.#r.encode(i,o),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const S=this.getEvent(e);Q(S,"unknown event","eventFragment",e),e=S}if(r!=null&&!e.anonymous){const S=e.topicHash;Q(qt(r[0],32)&&r[0].toLowerCase()===S,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],o=[],c=[];e.inputs.forEach((S,k)=>{S.indexed?S.type==="string"||S.type==="bytes"||S.baseType==="tuple"||S.baseType==="array"?(i.push(Ht.from({type:"bytes32",name:S.name})),c.push(!0)):(i.push(S),c.push(!1)):(o.push(S),c.push(!1))});const d=r!=null?this.#r.decode(i,Xt(r)):null,h=this.#r.decode(o,t,!0),m=[],w=[];let b=0,x=0;return e.inputs.forEach((S,k)=>{let N=null;if(S.indexed)if(d==null)N=new bS(null);else if(c[k])N=new bS(d[x++]);else try{N=d[x++]}catch(C){N=C}else try{N=h[b++]}catch(C){N=C}m.push(N),w.push(S.name||null)}),ya.fromItems(m,w)}parseTransaction(e){const t=Xe(e.data,"tx.data"),r=Ce(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Ae(t.slice(0,4)));if(!i)return null;const o=this.#r.decode(i.inputs,t.slice(4));return new u7(i,i.selector,o,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new c7(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Ae(e),r=this.getError(un(t,0,4));if(!r)return null;const i=this.#r.decode(r.inputs,un(t,4));return new d7(r,r.selector,i)}static from(e){return e instanceof _o?e:typeof e=="string"?new _o(JSON.parse(e)):typeof e.formatJson=="function"?new _o(e.formatJson()):typeof e.format=="function"?new _o(e.format("json")):new _o(e)}}const iP=BigInt(0);function Au(n){return n??null}function bn(n){return n==null?null:n.toString()}class AS{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){je(this,{gasPrice:Au(e),maxFeePerGas:Au(t),maxPriorityFeePerGas:Au(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:bn(e),maxFeePerGas:bn(t),maxPriorityFeePerGas:bn(r)}}}function bg(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Ae(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in n)||n[i]==null||(e[i]=Ce(n[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in n)||n[i]==null||(e[i]=Ye(n[i],`request.${i}`));return n.accessList&&(e.accessList=mc(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobWrapperVersion"in n&&(e.blobWrapperVersion=n.blobWrapperVersion),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(i=>Sx(i)?Ae(i):Object.assign({},i))),e}class h7{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,t){this.#e=e.transactions.map(r=>typeof r!="string"?new Tf(r,t):r),je(this,{provider:t,hash:Au(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Au(e.prevRandao),extraData:e.extraData,baseFeePerGas:Au(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:o,hash:c,miner:d,prevRandao:h,nonce:m,number:w,parentHash:b,parentBeaconBlockRoot:x,stateRoot:S,receiptsRoot:k,timestamp:N,transactions:C}=this;return{_type:"Block",baseFeePerGas:bn(e),difficulty:bn(t),extraData:r,gasLimit:bn(i),gasUsed:bn(o),blobGasUsed:bn(this.blobGasUsed),excessBlobGas:bn(this.excessBlobGas),hash:c,miner:d,prevRandao:h,nonce:m,number:w,parentHash:b,timestamp:N,parentBeaconBlockRoot:x,stateRoot:S,receiptsRoot:k,transactions:C}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=this.#e[e];else{const r=e.toLowerCase();for(const i of this.#e)if(typeof i=="string"){if(i!==r)continue;t=i;break}else{if(i.hash!==r)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return f7(this)}}class _f{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const r=Object.freeze(e.topics.slice());je(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:i,index:o,removed:c,topics:d,transactionHash:h,transactionIndex:m}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:o,removed:c,topics:d,transactionHash:h,transactionIndex:m}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return m7(this)}}class aP{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,t){this.#e=Object.freeze(e.logs.map(i=>new _f(i,t)));let r=iP;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),je(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:t,contractAddress:r,hash:i,index:o,blockHash:c,blockNumber:d,logsBloom:h,logs:m,status:w,root:b}=this;return{_type:"TransactionReceipt",blockHash:c,blockNumber:d,contractAddress:r,cumulativeGasUsed:bn(this.cumulativeGasUsed),from:t,gasPrice:bn(this.gasPrice),blobGasUsed:bn(this.blobGasUsed),blobGasPrice:bn(this.blobGasPrice),gasUsed:bn(this.gasUsed),hash:i,index:o,logs:m,logsBloom:h,root:b,status:w,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return lP(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),oP(this,e)}}class Tf{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,t){this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:i,type:o,to:c,from:d,nonce:h,data:m,signature:w,accessList:b,blobVersionedHashes:x}=this;return{_type:"TransactionResponse",accessList:b,blockNumber:e,blockHash:t,blobVersionedHashes:x,chainId:bn(this.chainId),data:m,from:d,gasLimit:bn(this.gasLimit),gasPrice:bn(this.gasPrice),hash:i,maxFeePerGas:bn(this.maxFeePerGas),maxPriorityFeePerGas:bn(this.maxPriorityFeePerGas),maxFeePerBlobGas:bn(this.maxFeePerBlobGas),nonce:h,signature:w,to:c,index:r,type:o,value:bn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await wr({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,i=t??0;let o=this.#e,c=-1,d=o===-1;const h=async()=>{if(d)return null;const{blockNumber:x,nonce:S}=await wr({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(S<this.nonce){o=x;return}if(d)return null;const k=await this.getTransaction();if(!(k&&k.blockNumber!=null))for(c===-1&&(c=o-3,c<this.#e&&(c=this.#e));c<=x;){if(d)return null;const N=await this.provider.getBlock(c,!0);if(N==null)return;for(const C of N)if(C===this.hash)return;for(let C=0;C<N.length;C++){const D=await N.getTransaction(C);if(D.from===this.from&&D.nonce===this.nonce){if(d)return null;const F=await this.provider.getTransactionReceipt(D.hash);if(F==null||x-F.blockNumber+1<r)return;let U="replaced";D.data===this.data&&D.to===this.to&&D.value===this.value?U="repriced":D.data==="0x"&&D.from===D.to&&D.value===iP&&(U="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:U==="replaced"||U==="cancelled",reason:U,replacement:D.replaceableTransaction(o),hash:D.hash,receipt:F})}}c++}},m=x=>{if(x==null||x.status!==0)return x;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:x.to,from:x.from,data:""},receipt:x})},w=await this.provider.getTransactionReceipt(this.hash);if(r===0)return m(w);if(w){if(r===1||await w.confirmations()>=r)return m(w)}else if(await h(),r===0)return null;return await new Promise((x,S)=>{const k=[],N=()=>{k.forEach(D=>D())};if(k.push(()=>{d=!0}),i>0){const D=setTimeout(()=>{N(),S(Wt("wait for transaction timeout","TIMEOUT"))},i);k.push(()=>{clearTimeout(D)})}const C=async D=>{if(await D.confirmations()>=r){N();try{x(m(D))}catch(F){S(F)}}};if(k.push(()=>{this.provider.off(this.hash,C)}),this.provider.on(this.hash,C),o>=0){const D=async()=>{try{await h()}catch(F){if(sr(F,"TRANSACTION_REPLACED")){N(),S(F);return}}d||this.provider.once("block",D)};k.push(()=>{this.provider.off("block",D)}),this.provider.once("block",D)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),lP(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),oP(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Tf(this,this.provider);return t.#e=e,t}}function f7(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function oP(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function lP(n){return{orphan:"drop-transaction",tx:n}}function m7(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class Vx extends _f{interface;fragment;args;constructor(e,t,r){super(e,e.provider);const i=t.decodeEventLog(r,e.data,e.topics);je(this,{args:i,fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class cP extends _f{error;constructor(e,t){super(e,e.provider),je(this,{error:t})}}class p7 extends aP{#e;constructor(e,t,r){super(r,t),this.#e=e}get logs(){return super.logs.map(e=>{const t=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(t)try{return new Vx(e,this.#e,t)}catch(r){return new cP(e,r)}return e})}}class Fx extends Tf{#e;constructor(e,t,r){super(r,t),this.#e=e}async wait(e,t){const r=await super.wait(e,t);return r==null?null:new p7(this.#e,this.provider,r)}}class uP extends BR{log;constructor(e,t,r,i){super(e,t,r),je(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class g7 extends uP{constructor(e,t,r,i,o){super(e,t,r,new Vx(o,e.interface,i));const c=e.interface.decodeEventLog(i,this.log.data,this.log.topics);je(this,{args:c,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const ES=BigInt(0);function dP(n){return n&&typeof n.call=="function"}function hP(n){return n&&typeof n.estimateGas=="function"}function dy(n){return n&&typeof n.resolveName=="function"}function fP(n){return n&&typeof n.sendTransaction=="function"}function mP(n){if(n!=null){if(dy(n))return n;if(n.provider)return n.provider}}class y7{#e;fragment;constructor(e,t,r){if(je(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const i=ic(e.runner,"resolveName"),o=dy(i)?i:null;this.#e=(async function(){const c=await Promise.all(t.inputs.map((d,h)=>r[h]==null?null:d.walkAsync(r[h],(w,b)=>w==="address"?Array.isArray(b)?Promise.all(b.map(x=>xr(x,o))):xr(b,o):b)));return e.interface.encodeFilterTopics(t,c)})()}getTopicFilter(){return this.#e}}function ic(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function Fl(n){return n==null?null:n.provider||null}async function pP(n,e){const t=dn.dereference(n,"overrides");Q(typeof t=="object","invalid overrides parameter","overrides",n);const r=bg(t);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function w7(n,e,t){const r=ic(n,"resolveName"),i=dy(r)?r:null;return await Promise.all(e.map((o,c)=>o.walkAsync(t[c],(d,h)=>(h=dn.dereference(h,d),d==="address"?xr(h,i):h))))}function b7(n){const e=async function(c){const d=await pP(c,["data"]);d.to=await n.getAddress(),d.from&&(d.from=await xr(d.from,mP(n.runner)));const h=n.interface,m=Ce(d.value||ES,"overrides.value")===ES,w=(d.data||"0x")==="0x";h.fallback&&!h.fallback.payable&&h.receive&&!w&&!m&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",c),Q(h.fallback||w,"cannot send data to receive-only contract","overrides.data",d.data);const b=h.receive||h.fallback&&h.fallback.payable;return Q(b||m,"cannot send value to non-payable fallback","overrides.value",d.value),Q(h.fallback||w,"cannot send data to receive-only contract","overrides.data",d.data),d},t=async function(c){const d=ic(n.runner,"call");me(dP(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await e(c);try{return await d.call(h)}catch(m){throw Tx(m)&&m.data?n.interface.makeError(m.data,h):m}},r=async function(c){const d=n.runner;me(fP(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await d.sendTransaction(await e(c)),m=Fl(n.runner);return new Fx(n.interface,m,h)},i=async function(c){const d=ic(n.runner,"estimateGas");return me(hP(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await e(c))},o=async c=>await r(c);return je(o,{_contract:n,estimateGas:i,populateTransaction:e,send:r,staticCall:t}),o}function v7(n,e){const t=function(...m){const w=n.interface.getFunction(e,m);return me(w,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:m}}),w},r=async function(...m){const w=t(...m);let b={};if(w.inputs.length+1===m.length&&(b=await pP(m.pop()),b.from&&(b.from=await xr(b.from,mP(n.runner)))),w.inputs.length!==m.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const x=await w7(n.runner,w.inputs,m);return Object.assign({},b,await wr({to:n.getAddress(),data:n.interface.encodeFunctionData(w,x)}))},i=async function(...m){const w=await d(...m);return w.length===1?w[0]:w},o=async function(...m){const w=n.runner;me(fP(w),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const b=await w.sendTransaction(await r(...m)),x=Fl(n.runner);return new Fx(n.interface,x,b)},c=async function(...m){const w=ic(n.runner,"estimateGas");return me(hP(w),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await w.estimateGas(await r(...m))},d=async function(...m){const w=ic(n.runner,"call");me(dP(w),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const b=await r(...m);let x="0x";try{x=await w.call(b)}catch(k){throw Tx(k)&&k.data?n.interface.makeError(k.data,b):k}const S=t(...m);return n.interface.decodeFunctionResult(S,x)},h=async(...m)=>t(...m).constant?await i(...m):await o(...m);return je(h,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:c,populateTransaction:r,send:o,staticCall:i,staticCallResult:d}),Object.defineProperty(h,"fragment",{configurable:!1,enumerable:!0,get:()=>{const m=n.interface.getFunction(e);return me(m,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),m}}),h}function x7(n,e){const t=function(...i){const o=n.interface.getEvent(e,i);return me(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),o},r=function(...i){return new y7(n,t(...i),i)};return je(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=n.interface.getEvent(e);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const vg=Symbol.for("_ethersInternal_contract"),gP=new WeakMap;function A7(n,e){gP.set(n[vg],e)}function es(n){return gP.get(n[vg])}function E7(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function Hx(n,e){let t,r=null;if(Array.isArray(e)){const o=function(c){if(qt(c,32))return c;const d=n.interface.getEvent(c);return Q(d,"unknown fragment","name",c),d.topicHash};t=e.map(c=>c==null?null:Array.isArray(c)?c.map(o):o(c))}else e==="*"?t=[null]:typeof e=="string"?qt(e,32)?t=[e]:(r=n.interface.getEvent(e),Q(r,"unknown fragment","event",e),t=[r.topicHash]):E7(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):Q(!1,"unknown event name","event",e);t=t.map(o=>{if(o==null)return null;if(Array.isArray(o)){const c=Array.from(new Set(o.map(d=>d.toLowerCase())).values());return c.length===1?c[0]:(c.sort(),c)}return o.toLowerCase()});const i=t.map(o=>o==null?"null":Array.isArray(o)?o.join("|"):o).join("&");return{fragment:r,tag:i,topics:t}}async function vh(n,e){const{subs:t}=es(n);return t.get((await Hx(n,e)).tag)||null}async function _S(n,e,t){const r=Fl(n.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:o,topics:c}=await Hx(n,t),{addr:d,subs:h}=es(n);let m=h.get(o);if(!m){const b={address:d||n,topics:c},x=C=>{let D=i;if(D==null)try{D=n.interface.getEvent(C.topics[0])}catch{}if(D){const F=D,U=i?n.interface.decodeEventLog(i,C.data,C.topics):[];nv(n,t,U,$=>new g7(n,$,t,F,C))}else nv(n,t,[],F=>new uP(n,F,t,C))};let S=[];m={tag:o,listeners:[],start:()=>{S.length||S.push(r.on(b,x))},stop:async()=>{if(S.length==0)return;let C=S;S=[],await Promise.all(C),r.off(b,x)}},h.set(o,m)}return m}let tv=Promise.resolve();async function _7(n,e,t,r){await tv;const i=await vh(n,e);if(!i)return!1;const o=i.listeners.length;return i.listeners=i.listeners.filter(({listener:c,once:d})=>{const h=Array.from(t);r&&h.push(r(d?null:c));try{c.call(n,...h)}catch{}return!d}),i.listeners.length===0&&(i.stop(),es(n).subs.delete(i.tag)),o>0}async function nv(n,e,t,r){try{await tv}catch{}const i=_7(n,e,t,r);return tv=i,await i}const gp=["then"];class Ch{target;interface;runner;filters;[vg];fallback;constructor(e,t,r,i){Q(typeof e=="string"||Ak(e),"invalid value for Contract target","target",e),r==null&&(r=null);const o=_o.from(t);je(this,{target:e,runner:r,interface:o}),Object.defineProperty(this,vg,{value:{}});let c,d=null,h=null;if(i){const b=Fl(r);h=new Fx(this.interface,b,i)}let m=new Map;if(typeof e=="string")if(qt(e))d=e,c=Promise.resolve(e);else{const b=ic(r,"resolveName");if(!dy(b))throw Wt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});c=b.resolveName(e).then(x=>{if(x==null)throw Wt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return es(this).addr=x,x})}else c=e.getAddress().then(b=>{if(b==null)throw new Error("TODO");return es(this).addr=b,b});A7(this,{addrPromise:c,addr:d,deployTx:h,subs:m});const w=new Proxy({},{get:(b,x,S)=>{if(typeof x=="symbol"||gp.indexOf(x)>=0)return Reflect.get(b,x,S);try{return this.getEvent(x)}catch(k){if(!sr(k,"INVALID_ARGUMENT")||k.argument!=="key")throw k}},has:(b,x)=>gp.indexOf(x)>=0?Reflect.has(b,x):Reflect.has(b,x)||this.interface.hasEvent(String(x))});return je(this,{filters:w}),je(this,{fallback:o.receive||o.fallback?b7(this):null}),new Proxy(this,{get:(b,x,S)=>{if(typeof x=="symbol"||x in b||gp.indexOf(x)>=0)return Reflect.get(b,x,S);try{return b.getFunction(x)}catch(k){if(!sr(k,"INVALID_ARGUMENT")||k.argument!=="key")throw k}},has:(b,x)=>typeof x=="symbol"||x in b||gp.indexOf(x)>=0?Reflect.has(b,x):b.interface.hasFunction(x)})}connect(e){return new Ch(this.target,this.interface,e)}attach(e){return new Ch(e,this.interface,this.runner)}async getAddress(){return await es(this).addrPromise}async getDeployedCode(){const e=Fl(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Fl(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,o)=>{const c=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",c)}catch(d){o(d)}};c()})}deploymentTransaction(){return es(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),v7(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),x7(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:i,addrPromise:o}=es(this),c=i||await o,{fragment:d,topics:h}=await Hx(this,e),m={address:c,topics:h,fromBlock:t,toBlock:r},w=Fl(this.runner);return me(w,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await w.getLogs(m)).map(b=>{let x=d;if(x==null)try{x=this.interface.getEvent(b.topics[0])}catch{}if(x)try{return new Vx(b,this.interface,x)}catch(S){return new cP(b,S)}return new _f(b,w)})}async on(e,t){const r=await _S(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await _S(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await nv(this,e,t,null)}async listenerCount(e){if(e){const i=await vh(this,e);return i?i.listeners.length:0}const{subs:t}=es(this);let r=0;for(const{listeners:i}of t.values())r+=i.length;return r}async listeners(e){if(e){const i=await vh(this,e);return i?i.listeners.map(({listener:o})=>o):[]}const{subs:t}=es(this);let r=[];for(const{listeners:i}of t.values())r=r.concat(i.map(({listener:o})=>o));return r}async off(e,t){const r=await vh(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:o})=>o).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(t==null||r.listeners.length===0)&&(r.stop(),es(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await vh(this,e);if(!t)return this;t.stop(),es(this).subs.delete(t.tag)}else{const{subs:t}=es(this);for(const{tag:r,stop:i}of t.values())i(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Ch{constructor(i,o=null){super(i,e,o)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}}function T7(){return Ch}class Ql extends T7(){}function Zw(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Q(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class S7{name;constructor(e){je(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const yP=new RegExp("^(ipfs)://(.*)$","i"),TS=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),yP,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Eu{provider;address;name;#e;#t;constructor(e,t,r){je(this,{provider:e,address:t,name:r}),this.#e=null,this.#t=new Ql(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(sr(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,t){t=(t||[]).slice();const r=this.#t.interface;t.unshift(ev(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),me(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[Fz(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const o=await this.#t[e](...t);return i?r.decodeFunctionResult(i,o)[0]:o}catch(o){if(!sr(o,"CALL_EXCEPTION"))throw o}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const o=await this.#n("addr(bytes32)");return o==null||o===Gh?null:o}catch(o){if(sr(o,"CALL_EXCEPTION"))return null;throw o}if(e>=0&&e<2147483648){let o=e+2147483648;const c=await this.#n("addr(bytes32,uint)",[o]);if(qt(c,20))return ft(c)}let t=null;for(const o of this.provider.plugins)if(o instanceof S7&&o.supportsCoinType(e)){t=o;break}if(t==null)return null;const r=await this.#n("addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await t.decodeAddress(e,r);if(i!=null)return i;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await this.#n("text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",o=parseInt(t[4],16);if(t[5].length===o*2)return`${i}://${O9("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<TS.length;r++){const i=t.match(TS[r]);if(i==null)continue;const o=i[1].toLowerCase();switch(o){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const c=Zw(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:c}),{linkage:e,url:c}}case"erc721":case"erc1155":{const c=o==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:o,value:t});const d=await this.getAddress();if(d==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const h=(i[2]||"").split("/");if(h.length!==2)return e.push({type:`!${o}caip`,value:i[2]||""}),{url:null,linkage:e};const m=h[1],w=new Ql(h[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(o==="erc721"){const N=await w.ownerOf(m);if(d!==N)return e.push({type:"!owner",value:N}),{url:null,linkage:e};e.push({type:"owner",value:N})}else if(o==="erc1155"){const N=await w.balanceOf(d,m);if(!N)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:N.toString()})}let b=await w[c](m);if(b==null||b==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:b}),o==="erc1155"&&(b=b.replace("{id}",Ho(m,32).substring(2)),e.push({type:"metadata-url-expanded",value:b})),b.match(/^ipfs:/i)&&(b=Zw(b)),e.push({type:"metadata-url",value:b});let x={};const S=await new Pa(b).send();S.assertOk();try{x=S.bodyJson}catch{try{e.push({type:"!metadata",value:S.bodyText})}catch{const D=S.body;return D&&e.push({type:"!metadata",value:Ae(D)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!x)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(x)});let k=x.image;if(typeof k!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!k.match(/^(https:\/\/|data:)/i)){if(k.match(yP)==null)return e.push({type:"!imageUrl-ipfs",value:k}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:k}),k=Zw(k)}return e.push({type:"url",value:k}),{linkage:e,url:k}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async#r(e,t){const r=await Eu.getEnsAddress(e);try{const o=await new Ql(r,["function resolver(bytes32) view returns (address)"],e).resolver(ev(t),{enableCcipRead:!0});return o===Gh?null:o}catch(i){throw i}return null}static async fromName(e,t){let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const i=await Eu.#r(e,r);if(i!=null){const o=new Eu(e,i,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}}const SS=BigInt(0);function dt(n,e){return(function(t){return t==null?e:n(t)})}function Wh(n,e){return(t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))})}function Sf(n,e){return(t=>{const r={};for(const i in n){let o=i;if(e&&i in e&&!(o in t)){for(const c of e[i])if(c in t){o=c;break}}try{const c=n[i](t[o]);c!==void 0&&(r[i]=c)}catch(c){const d=c instanceof Error?c.message:"not-an-error";me(!1,`invalid value for value.${i} (${d})`,"BAD_DATA",{value:t})}}return r})}function N7(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Vu(n){return Q(qt(n,!0),"invalid data","value",n),n}function nr(n){return Q(qt(n,32),"invalid hash","value",n),n}const C7=Sf({address:ft,blockHash:nr,blockNumber:Ye,data:Vu,index:Ye,removed:dt(N7,!1),topics:Wh(nr),transactionHash:nr,transactionIndex:Ye},{index:["logIndex"]});function I7(n){return C7(n)}const R7=Sf({hash:dt(nr),parentHash:nr,parentBeaconBlockRoot:dt(nr,null),number:Ye,timestamp:Ye,nonce:dt(Vu),difficulty:Ce,gasLimit:Ce,gasUsed:Ce,stateRoot:dt(nr,null),receiptsRoot:dt(nr,null),blobGasUsed:dt(Ce,null),excessBlobGas:dt(Ce,null),miner:dt(ft),prevRandao:dt(nr,null),extraData:Vu,baseFeePerGas:dt(Ce)},{prevRandao:["mixHash"]});function k7(n){const e=R7(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:wP(t)),e}const P7=Sf({transactionIndex:Ye,blockNumber:Ye,transactionHash:nr,address:ft,topics:Wh(nr),data:Vu,index:Ye,blockHash:nr},{index:["logIndex"]});function O7(n){return P7(n)}const D7=Sf({to:dt(ft,null),from:dt(ft,null),contractAddress:dt(ft,null),index:Ye,root:dt(Ae),gasUsed:Ce,blobGasUsed:dt(Ce,null),logsBloom:dt(Vu),blockHash:nr,hash:nr,logs:Wh(O7),blockNumber:Ye,cumulativeGasUsed:Ce,effectiveGasPrice:dt(Ce),blobGasPrice:dt(Ce,null),status:dt(Ye),type:dt(Ye,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function M7(n){return D7(n)}function wP(n){n.to&&Ce(n.to)===SS&&(n.to="0x0000000000000000000000000000000000000000");const e=Sf({hash:nr,index:dt(Ye,void 0),type:t=>t==="0x"||t==null?0:Ye(t),accessList:dt(mc,null),blobVersionedHashes:dt(Wh(nr,!0),null),authorizationList:dt(Wh(t=>{let r;if(t.signature)r=t.signature;else{let i=t.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},t,{yParity:i})}return{address:ft(t.address),chainId:Ce(t.chainId),nonce:Ce(t.nonce),signature:tn.from(r)}},!1),null),blockHash:dt(nr,null),blockNumber:dt(Ye,null),transactionIndex:dt(Ye,null),from:ft,gasPrice:dt(Ce),maxPriorityFeePerGas:dt(Ce),maxFeePerGas:dt(Ce),maxFeePerBlobGas:dt(Ce,null),gasLimit:Ce,to:dt(ft,null),value:Ce,nonce:Ye,data:Vu,creates:dt(ft,null),chainId:dt(Ce,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=AH(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=tn.from(n.signature):e.signature=tn.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Ce(e.blockHash)===SS&&(e.blockHash=null),e}const L7="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Nf{name;constructor(e){je(this,{name:e})}clone(){return new Nf(this.name)}}class hy extends Nf{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const r={effectiveBlock:e};function i(o,c){let d=(t||{})[o];d==null&&(d=c),Q(typeof d=="number",`invalud value for ${o}`,"costs",t),r[o]=d}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),je(this,r)}clone(){return new hy(this.effectiveBlock,this)}}class fy extends Nf{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),je(this,{address:e||L7,targetNetwork:t??1})}clone(){return new fy(this.address,this.targetNetwork)}}class B7 extends Nf{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=t}clone(){return this}}const eb=new Map;class ss{#e;#t;#n;constructor(e,t){this.#e=e,this.#t=Ce(t),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=Ce(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ce(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ce(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ce(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new ss(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new hy;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const i=mc(e.accessList);for(const o in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[o].storageKeys.length}return r}static from(e){if(j7(),e==null)return ss.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=eb.get(e);if(t)return t();if(typeof e=="bigint")return new ss("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new ss(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new fy(e.ensAddress,e.ensNetwork)),t}Q(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=eb.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),eb.set(e,t)}}function NS(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function CS(n){return new B7(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[o,c]=await Promise.all([r.send(),e()]);i=o;const d=i.bodyJson.standard;return{gasPrice:c.gasPrice,maxFeePerGas:NS(d.maxFee,9),maxPriorityFeePerGas:NS(d.maxPriorityFee,9)}}catch(o){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:o})}})}let IS=!1;function j7(){if(IS)return;IS=!0;function n(e,t,r){const i=function(){const o=new ss(e,t);return r.ensNetwork!=null&&o.attachPlugin(new fy(null,r.ensNetwork)),o.attachPlugin(new hy),(r.plugins||[]).forEach(c=>{o.attachPlugin(c)}),o};ss.register(e,i),ss.register(t,i),r.altNames&&r.altNames.forEach(o=>{ss.register(o,i)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("filecoin",314,{}),n("filecoin-calibration",314159,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[CS("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[CS("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function rv(n){return JSON.parse(JSON.stringify(n))}class U7{#e;#t;#n;#r;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#r=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#s(){try{const e=await this.#e.getBlockNumber();if(this.#r===-2){this.#r=e;return}if(e!==this.#r){for(let t=this.#r+1;t<=e;t++){if(this.#t==null)return;await this.#e.emit("block",t)}this.#r=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#s.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#s.bind(this),this.#n),this.#s())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}class zx{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=t=>{this._poll(t,this.#e)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class V7 extends zx{#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,t){const r=await t.getBlock(this.#e);r!=null&&(this.#t===-2?this.#t=r.number:r.number>this.#t&&(t.emit(this.#e,r.number),this.#t=r.number))}}class F7 extends zx{#e;constructor(e,t){super(e),this.#e=rv(t)}async _poll(e,t){throw new Error("@TODO")}}class H7 extends zx{#e;constructor(e,t){super(e),this.#e=t}async _poll(e,t){const r=await t.getTransactionReceipt(this.#e);r&&t.emit(this.#e,r)}}class Gx{#e;#t;#n;#r;#s;constructor(e,t){this.#e=e,this.#t=rv(t),this.#n=this.#a.bind(this),this.#r=!1,this.#s=-2}async#a(e){if(this.#s===-2)return;const t=rv(this.#t);t.fromBlock=this.#s+1,t.toBlock=e;const r=await this.#e.getLogs(t);if(r.length===0){this.#s<e-60&&(this.#s=e-60);return}for(const i of r)this.#e.emit(this.#t,i),this.#s=i.blockNumber}start(){this.#r||(this.#r=!0,this.#s===-2&&this.#e.getBlockNumber().then(e=>{this.#s=e}),this.#e.on("block",this.#n))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#s=-2)}resume(){this.start()}}const z7=BigInt(2),G7=10;function yp(n){return n&&typeof n.then=="function"}function Op(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((o,c)=>(o[c]=r[c],o),{})}return r})}class bP{name;constructor(e){je(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function q7(n){return JSON.parse(JSON.stringify(n))}function sv(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function tb(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(qt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:Op("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:Op("orphan",t),filter:q7(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?sv(i.map(o=>o.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],o=[],c=d=>{qt(d)?i.push(d):o.push((async()=>{i.push(await xr(d,e))})())};Array.isArray(t.address)?t.address.forEach(c):c(t.address),o.length&&await Promise.all(o),r.address=sv(i.map(d=>d.toLowerCase()))}return{filter:r,tag:Op("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",n)}function nb(){return new Date().getTime()}const Q7={cacheTimeout:250,pollingInterval:4e3};class K7{#e;#t;#n;#r;#s;#a;#i;#o;#d;#c;#m;#p;constructor(e,t){if(this.#p=Object.assign({},Q7,t||{}),e==="any")this.#a=!0,this.#s=null;else if(e){const r=ss.from(e);this.#a=!1,this.#s=Promise.resolve(r),setTimeout(()=>{this.emit("network",r,null)},0)}else this.#a=!1,this.#s=null;this.#o=-1,this.#i=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#r=!1,this.#d=1,this.#c=new Map,this.#m=!1}get pollingInterval(){return this.#p.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#m}set disableCcipRead(e){this.#m=!!e}async#l(e){const t=this.#p.cacheTimeout;if(t<0)return await this._perform(e);const r=Op(e.method,e);let i=this.#i.get(r);return i||(i=this._perform(e),this.#i.set(r,i),setTimeout(()=>{this.#i.get(r)===i&&this.#i.delete(r)},t)),await i}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),o=t.toLowerCase(),c=[];for(let d=0;d<r.length;d++){const h=r[d],m=h.replace("{sender}",i).replace("{data}",o),w=new Pa(m);h.indexOf("{data}")===-1&&(w.body={data:o,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:w,index:d,urls:r});let b="unknown error",x;try{x=await w.send()}catch(S){c.push(S.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:w,result:{error:S}});continue}try{const S=x.bodyJson;if(S.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:w,result:S}),S.data;S.message&&(b=S.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:w,result:S})}catch{}me(x.statusCode<400||x.statusCode>=500,`response not found during CCIP fetch: ${b}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:h,errorMessage:b}}),c.push(b)}me(!1,`error encountered during CCIP fetch: ${c.map(d=>JSON.stringify(d)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:c}})}_wrapBlock(e,t){return new h7(k7(e),this)}_wrapLog(e,t){return new _f(I7(e),this)}_wrapTransactionReceipt(e,t){return new aP(M7(e),this)}_wrapTransactionResponse(e,t){return new Tf(wP(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ye(await this.#l({method:"getBlockNumber"}),"%response");return this.#o>=0&&(this.#o=e),e}_getAddress(e){return xr(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(qt(e))return qt(e,32)?e:Js(e);if(typeof e=="bigint"&&(e=Ye(e,"blockTag")),typeof e=="number")return e>=0?Js(e):this.#o>=0?Js(this.#o+e):this.getBlockNumber().then(t=>Js(t+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(h=>h==null?null:Array.isArray(h)?sv(h.map(m=>m.toLowerCase())):h.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(h,m,w)=>{let b;switch(h.length){case 0:break;case 1:b=h[0];break;default:h.sort(),b=h}if(r&&(m!=null||w!=null))throw new Error("invalid filter");const x={};return b&&(x.address=b),t.length&&(x.topics=t),m&&(x.fromBlock=m),w&&(x.toBlock=w),r&&(x.blockHash=r),x};let o=[];if(e.address)if(Array.isArray(e.address))for(const h of e.address)o.push(this._getAddress(h));else o.push(this._getAddress(e.address));let c;"fromBlock"in e&&(c=this._getBlockTag(e.fromBlock));let d;return"toBlock"in e&&(d=this._getBlockTag(e.toBlock)),o.filter(h=>typeof h!="string").length||c!=null&&typeof c!="string"||d!=null&&typeof d!="string"?Promise.all([Promise.all(o),c,d]).then(h=>i(h[0],h[1],h[2])):i(o,c,d)}_getTransactionRequest(e){const t=bg(e),r=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const o=xr(t[i],this);yp(o)?r.push((async function(){t[i]=await o})()):t[i]=o}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);yp(i)?r.push((async function(){t.blockTag=await i})()):t.blockTag=i}return r.length?(async function(){return await Promise.all(r),t})():t}async getNetwork(){if(this.#s==null){const i=(async()=>{try{const o=await this._detectNetwork();return this.emit("network",o,null),o}catch(o){throw this.#s===i&&(this.#s=null),o}})();return this.#s=i,(await i).clone()}const e=this.#s,[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(this.#a?(this.emit("network",r,t),this.#s===e&&(this.#s=Promise.resolve(r))):me(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:o,priorityFee:c}=await wr({_block:this.#w("latest",!1),gasPrice:(async()=>{try{const w=await this.#l({method:"getGasPrice"});return Ce(w,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const w=await this.#l({method:"getPriorityFee"});return Ce(w,"%response")}catch{}return null})()});let d=null,h=null;const m=this._wrapBlock(i,e);return m&&m.baseFeePerGas&&(h=c??BigInt("1000000000"),d=m.baseFeePerGas*z7+h),new AS(o,d,h)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Pa(r.url),o=await r.processFunc(t,this,i);return new AS(o.gasPrice,o.maxFeePerGas,o.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return yp(t)&&(t=await t),Ce(await this.#l({method:"estimateGas",transaction:t}),"%response")}async#u(e,t,r){me(r<G7,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=bg(e);try{return Ae(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(o){if(!this.disableCcipRead&&Tx(o)&&o.data&&r>=0&&t==="latest"&&i.to!=null&&un(o.data,0,4)==="0x556f1830"){const c=o.data,d=await xr(i.to,this);let h;try{h=X7(un(o.data,4))}catch(b){me(!1,b.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:c}})}me(h.sender.toLowerCase()===d.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:c,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:h.errorArgs}});const m=await this.ccipReadFetch(i,h.calldata,h.urls);me(m!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:o.data,errorArgs:h.errorArgs}});const w={to:d,data:Xt([h.selector,J7([m,h.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:w});try{const b=await this.#u(w,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},w),result:b}),b}catch(b){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},w),error:b}),b}}throw o}}async#h(e){const{value:t}=await wr({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:r}=await wr({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#h(this.#u(t,r,e.enableCcipRead?0:-1))}async#f(e,t,r){let i=this._getAddress(t),o=this._getBlockTag(r);return(typeof i!="string"||typeof o!="string")&&([i,o]=await Promise.all([i,o])),await this.#h(this.#l(Object.assign(e,{address:i,blockTag:o})))}async getBalance(e,t){return Ce(await this.#f({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Ye(await this.#f({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Ae(await this.#f({method:"getCode"},e,t))}async getStorage(e,t,r){const i=Ce(t,"position");return Ae(await this.#f({method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:i}=await wr({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),o=Ws.from(e);if(o.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(o,i).replaceableTransaction(t)}async#w(e,t){if(qt(e,32))return await this.#l({method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await this.#l({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){const{network:r,params:i}=await wr({network:this.getNetwork(),params:this.#w(e,!!t)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:t,params:r}=await wr({network:this.getNetwork(),params:this.#l({method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await wr({network:this.getNetwork(),params:this.#l({method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await this.#l({method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await wr({network:this.getNetwork(),result:this.#l({method:"getTransactionResult",hash:e})});return t==null?null:Ae(t)}async getLogs(e){let t=this._getFilter(e);yp(t)&&(t=await t);const{network:r,params:i}=await wr({network:this.getNetwork(),params:this.#l({method:"getLogs",filter:t})});return i.map(o=>this._wrapLog(o,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Eu.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=ft(e);const t=ev(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await Eu.getEnsAddress(this),o=await new Ql(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(o==null||o===Gh)return null;const d=await new Ql(o,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(d)!==e?null:d}catch(r){if(sr(r,"BAD_DATA")&&r.value==="0x"||sr(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(o,c)=>{let d=null;const h=(async m=>{try{const w=await this.getTransactionReceipt(e);if(w!=null&&m-w.blockNumber+1>=i){o(w),d&&(clearTimeout(d),d=null);return}}catch(w){console.log("EEE",w)}this.once("block",h)});r!=null&&(d=setTimeout(()=>{d!=null&&(d=null,this.off("block",h),c(Wt("timeout","TIMEOUT",{reason:"timeout"})))},r)),h(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#c.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#c.delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=this.#d++,i=()=>{this.#c.delete(r),e()};if(this.paused)this.#c.set(r,{timer:null,func:i,time:t});else{const o=setTimeout(i,t);this.#c.set(r,{timer:o,func:i,time:nb()})}return r}_forEachSubscriber(e){for(const t of this.#e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new bP(e.type);case"block":{const t=new U7(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new V7(this,e.type);case"event":return new Gx(this,e.filter);case"transaction":return new H7(this,e.hash);case"orphan":return new F7(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of this.#e.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),this.#n!=null&&t.pause(this.#n);break}}async#g(e,t){let r=await tb(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await tb({orphan:"drop-log",log:t[0]},this)),this.#e.get(r.tag)||null}async#y(e){const t=await tb(e,this),r=t.tag;let i=this.#e.get(r);return i||(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(r,i)),i}async on(e,t){const r=await this.#y(e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async once(e,t){const r=await this.#y(e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async emit(e,...t){const r=await this.#g(e,t);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:c})=>{const d=new BR(this,c?null:o,e);try{o.call(this,...t,d)}catch{}return!c}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await this.#g(e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of this.#e.values())t+=r.length;return t}async listeners(e){if(e){const r=await this.#g(e);return r?r.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:r}of this.#e.values())t=t.concat(r.map(({listener:i})=>i));return t}async off(e,t){const r=await this.#g(e);if(!r)return this;if(t){const i=r.listeners.map(({listener:o})=>o).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:i}=await this.#y(e);r&&i.stop(),this.#e.delete(t)}else for(const[t,{started:r,subscriber:i}]of this.#e)r&&i.stop(),this.#e.delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#r}destroy(){this.removeAllListeners();for(const e of this.#c.keys())this._clearTimeout(e);this.#r=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#o=-1,this.#n!=null){if(this.#n==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),this.#n=!!e;for(const t of this.#c.values())t.timer&&clearTimeout(t.timer),t.time=nb()-t.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#c.values()){let t=e.time;t<0&&(t=0),e.time=nb(),setTimeout(e.func,t)}}}}function $7(n,e){try{const t=iv(n,e);if(t)return hg(t)}catch{}return null}function iv(n,e){if(n==="0x")return null;try{const t=Ye(un(n,e,e+32)),r=Ye(un(n,t,t+32));return un(n,t+32,t+32+r)}catch{}return null}function RS(n){const e=Mn(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Y7(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const W7=new Uint8Array([]);function J7(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(W7),t+=32;for(let r=0;r<n.length;r++){const i=Xe(n[r]);e[r]=RS(t),e.push(RS(i.length)),e.push(Y7(i)),t+=32+Math.ceil(i.length/32)*32}return Xt(e)}const kS="0x0000000000000000000000000000000000000000000000000000000000000000";function X7(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me(bu(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=un(n,0,32);me(un(t,0,12)===un(kS,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=un(t,12);try{const r=[],i=Ye(un(n,32,64)),o=Ye(un(n,i,i+32)),c=un(n,i+32);for(let d=0;d<o;d++){const h=$7(c,d*32);if(h==null)throw new Error("abort");r.push(h)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=iv(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(un(n,100,128)===un(kS,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=un(n,96,100);try{const r=iv(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Il(n,e){if(n.provider)return n.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function PS(n,e){let t=bg(e);if(t.to!=null&&(t.to=xr(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),xr(r,n)]).then(([i,o])=>(Q(i.toLowerCase()===o.toLowerCase(),"transaction from mismatch","tx.from",o),i))}else t.from=n.getAddress();return await wr(t)}class Z7{provider;constructor(e){je(this,{provider:e||null})}async getNonce(e){return Il(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await PS(this,e)}async populateTransaction(e){const t=Il(this,"populateTransaction"),r=await PS(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const c=Ce(r.chainId);Q(c===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const o=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||o)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&o&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const c=await t.getFeeData();me(c.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=c.gasPrice)}else{const c=await t.getFeeData();if(r.type==null)if(c.maxFeePerGas!=null&&c.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const d=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=d,r.maxPriorityFeePerGas=d}else r.maxFeePerGas==null&&(r.maxFeePerGas=c.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=c.maxPriorityFeePerGas);else c.gasPrice!=null?(me(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=c.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=c.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=c.maxPriorityFeePerGas))}return await wr(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Il(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Il(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Il(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Il(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Il(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=Ws.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function eG(n){return JSON.parse(JSON.stringify(n))}class vP{#e;#t;#n;#r;#s;#a;constructor(e){this.#e=e,this.#t=null,this.#n=this.#i.bind(this),this.#r=!1,this.#s=null,this.#a=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#i(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let t=null;try{t=await this.#t}catch(o){if(!sr(o,"UNSUPPORTED_OPERATION")||o.operation!=="eth_newFilter")throw o}if(t==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const r=await this.#e.getNetwork();if(this.#s||(this.#s=r),this.#s.chainId!==r.chainId)throw new Error("chaid changed");if(this.#a)return;const i=await this.#e.send("eth_getFilterChanges",[t]);await this._emitResults(this.#e,i)}catch(t){console.log("@TODO",t)}this.#e.once("block",this.#n)}#o(){const e=this.#t;e&&(this.#t=null,e.then(t=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[t])}))}start(){this.#r||(this.#r=!0,this.#i(-2))}stop(){this.#r&&(this.#r=!1,this.#a=!0,this.#o(),this.#e.off("block",this.#n))}pause(e){e&&this.#o(),this.#e.off("block",this.#n)}resume(){this.start()}}class tG extends vP{#e;constructor(e,t){super(e),this.#e=eG(t)}_recover(e){return new Gx(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,t){for(const r of t)e.emit(this.#e,e._wrapLog(r,e._network))}}class nG extends vP{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const rG="bigint,boolean,function,number,string,symbol".split(/,/g);function Dp(n){if(n==null||rG.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Dp);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function sG(n){return new Promise(e=>{setTimeout(e,n)})}function ru(n){return n&&n.toLowerCase()}function OS(n){return n&&typeof n.pollingInterval=="number"}const xP={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class rb extends Z7{address;constructor(e,t){super(e),t=ft(t),je(this,{address:t})}connect(e){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Dp(e),r=[];if(t.from){const o=t.from;r.push((async()=>{const c=await xr(o,this.provider);Q(c!=null&&c.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=c})())}else t.from=this.address;if(t.gasLimit==null&&r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),t.to!=null){const o=t.to;r.push((async()=>{t.to=await xr(o,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const c=[1e3,100];let d=0;const h=async()=>{try{const m=await this.provider.getTransaction(r);if(m!=null){i(m.replaceableTransaction(t));return}}catch(m){if(sr(m,"CANCELLED")||sr(m,"BAD_DATA")||sr(m,"NETWORK_ERROR")||sr(m,"UNSUPPORTED_OPERATION")){m.info==null&&(m.info={}),m.info.sendTransactionHash=r,o(m);return}if(sr(m,"INVALID_ARGUMENT")&&(d++,m.info==null&&(m.info={}),m.info.sendTransactionHash=r,d>10)){o(m);return}this.provider.emit("error",Wt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:m}))}this.provider._setTimeout(()=>{h()},c.pop()||4e3)};h()})}async signTransaction(e){const t=Dp(e);if(t.from){const i=await xr(t.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=i}else t.from=this.address;const r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const t=typeof e=="string"?Aa(e):e;return await this.provider.send("personal_sign",[Ae(t),this.address.toLowerCase()])}async signTypedData(e,t,r){const i=Dp(r),o=await Zr.resolveNames(e,t,i,async c=>{const d=await xr(c);return Q(d!=null,"TypedData does not support null address","value",c),d});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Zr.getPayload(o.domain,t,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t=typeof e=="string"?Aa(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ae(t)])}}class iG extends K7{#e;#t;#n;#r;#s;#a;#i;#o(){if(this.#r)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#r=setTimeout(()=>{this.#r=null;const t=this.#n;for(this.#n=[];t.length;){const r=[t.shift()];for(;t.length&&r.length!==this.#e.batchMaxCount;)if(r.push(t.shift()),JSON.stringify(r.map(o=>o.payload)).length>this.#e.batchMaxSize){t.unshift(r.pop());break}(async()=>{const i=r.length===1?r[0].payload:r.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:c,reject:d,payload:h}of r){if(this.destroyed){d(Wt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:h.method}));continue}const m=o.filter(w=>w.id===h.id)[0];if(m==null){const w=Wt("missing response for request","BAD_DATA",{value:o,info:{payload:h}});this.emit("error",w),d(w);continue}if("error"in m){d(this.getRpcError(h,m));continue}c(m.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:c}of r)c(o)}})()}},e)}constructor(e,t){super(e,t),this.#t=1,this.#e=Object.assign({},xP,t||{}),this.#n=[],this.#r=null,this.#a=null,this.#i=null;{let i=null;const o=new Promise(c=>{i=c});this.#s={promise:o,resolve:i}}const r=this._getOption("staticNetwork");typeof r=="boolean"?(Q(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",t),r&&e!=null&&(this.#a=ss.from(e))):r&&(Q(e==null||r.matches(e),"staticNetwork MUST match network object","options",t),this.#a=r)}_getOption(e){return this.#e[e]}get _network(){return me(this.#a,"network is not available yet","NETWORK_ERROR"),this.#a}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&Ce(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}const t=this.getRpcRequest(e);return t!=null?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#a)return this.#a}else return e;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{try{const t=ss.from(Ce(await this.send("eth_chainId",[])));return this.#i=null,t}catch(t){throw this.#i=null,t}})(),await this.#i):(this.#i=(async()=>{const t={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});let r;try{r=(await this._send(t))[0],this.#i=null}catch(i){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return ss.from(Ce(r.result));throw this.getRpcError(t,r)})(),await this.#i)}_start(){this.#s==null||this.#s.resolve==null||(this.#s.resolve(),this.#s=null,(async()=>{for(;this.#a==null&&!this.destroyed;)try{this.#a=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Wt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await sG(1e3)}this.#o()})())}async _waitUntilReady(){if(this.#s!=null)return await this.#s.promise}_getSubscriber(e){return e.type==="pending"?new nG(this):e.type==="event"?this._getOption("polling")?new Gx(this,e.filter):new tG(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new bP("orphan"):super._getSubscriber(e)}get ready(){return this.#s==null}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let i=r;r==="gasLimit"&&(i="gas"),t[i]=Js(Ce(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(t[r]=Ae(e[r]))}),e.accessList&&(t.accessList=mc(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(r=>r.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(r=>{const i=Sk(r);return{address:i.address,nonce:Js(i.nonce),chainId:Js(i.chainId),yParity:Js(i.signature.yParity),r:Js(i.signature.r),s:Js(i.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[ru(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[ru(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[ru(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[ru(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(ru):e.filter.address=ru(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:r}=e,{error:i}=t;if(r==="eth_estimateGas"&&i.message){const d=i.message;if(!d.match(/revert/i)&&d.match(/insufficient funds/i))return Wt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(d.match(/nonce/i)&&d.match(/too low/i))return Wt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(r==="eth_call"||r==="eth_estimateGas"){const d=av(i),h=Uu.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],d?d.data:null);return h.info={error:i,payload:e},h}const o=JSON.stringify(oG(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Wt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const d=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Wt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:d,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Wt("nonce has already been used","NONCE_EXPIRED",{transaction:d,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Wt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:d,info:{error:i}});if(o.match(/only replay-protected/i))return Wt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:d,info:{error:i}}})}let c=!!o.match(/the method .* does not exist/i);return c||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(c=!0),c?Wt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):Wt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(Wt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=this.#t++,i=new Promise((o,c)=>{this.#n.push({resolve:o,reject:c,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})});return this.#o(),i}async getSigner(e){e==null&&(e=0);const t=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await t;if(e>=i.length)throw new Error("no such account");return new rb(this,i[e])}const{accounts:r}=await wr({network:this.getNetwork(),accounts:t});e=ft(e);for(const i of r)if(ft(i)===e)return new rb(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(t=>new rb(this,t))}destroy(){this.#r&&(clearTimeout(this.#r),this.#r=null);for(const{payload:e,reject:t}of this.#n)t(Wt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class aG extends iG{#e;constructor(e,t){super(e,t);let r=this._getOption("pollingInterval");r==null&&(r=xP.pollingInterval),this.#e=r}_getSubscriber(e){const t=super._getSubscriber(e);return OS(t)&&(t.pollingInterval=this.#e),t}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(t=>{OS(t)&&(t.pollingInterval=this.#e)})}}function av(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&qt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=av(n[e]);if(t)return t}return null}if(typeof n=="string")try{return av(JSON.parse(n))}catch{}return null}function ov(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)ov(n[t],e);if(typeof n=="string")try{return ov(JSON.parse(n),e)}catch{}}}function oG(n){const e=[];return ov(n,e),e}class Ml extends aG{#e;#t;constructor(e,t,r){const i=Object.assign({},r??{},{batchMaxCount:1});Q(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,i),this.#t=null,r&&r.providerInfo&&(this.#t=r.providerInfo),this.#e=async(o,c)=>{const d={method:o,params:c};this.emit("debug",{action:"sendEip1193Request",payload:d});try{const h=await e.request(d);return this.emit("debug",{action:"receiveEip1193Result",result:h}),h}catch(h){const m=new Error(h.message);throw m.code=h.code,m.data=h.data,m.payload=d,this.emit("debug",{action:"receiveEip1193Error",error:m}),m}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){Q(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch(t=JSON.parse(JSON.stringify(t)),t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){e==null&&(e=0);const t=await this.send("eth_accounts",[]);return typeof e=="number"?t.length>e:(e=e.toLowerCase(),t.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){const r=t.payload;throw this.getRpcError(r,{id:r.id,error:t})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Ml(e.provider);const t=e.window?e.window:typeof window<"u"?window:null;if(t==null)return null;const r=e.anyProvider;if(r&&t.ethereum)return new Ml(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((o,c)=>{let d=[];const h=b=>{d.push(b.detail),r&&m()},m=()=>{if(clearTimeout(w),d.length)if(e&&e.filter){const b=e.filter(d.map(x=>Object.assign({},x.info)));if(b==null)o(null);else if(b instanceof Ml)o(b);else{let x=null;if(b.uuid&&(x=d.filter(k=>b.uuid===k.info.uuid)[0]),x){const{provider:S,info:k}=x;o(new Ml(S,void 0,{providerInfo:k}))}else c(Wt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:b}))}}else{const{provider:b,info:x}=d[0];o(new Ml(b,void 0,{providerInfo:x}))}else o(null);t.removeEventListener("eip6963:announceProvider",h)},w=setTimeout(()=>{m()},i);t.addEventListener("eip6963:announceProvider",h),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}const ts=({label:n,value:e,onChange:t,required:r})=>{const i=I.useMemo(()=>ma(e)?ft(e):null,[e]);return g.jsxs("label",{className:"block text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:[n,g.jsx("input",{value:e,required:r,onChange:o=>t(o.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]",placeholder:"0x..."}),e&&!i&&g.jsx("span",{className:"mt-1 block text-[10px] text-yellow-200",children:"Invalid address"}),i&&g.jsxs("span",{className:"mt-1 block text-[10px] text-emerald-200",children:["Checksum: ",i]})]})},Ta=11155111,lG="0xaa36a7",Pl={chainId:Ta,chainIdHex:lG,chainName:"Sepolia",nativeCurrency:{name:"Sepolia ETH",symbol:"ETH",decimals:18},rpcUrls:["https://rpc.sepolia.org"],blockExplorerUrls:["https://sepolia.etherscan.io"]},qx=n=>`${Pl.blockExplorerUrls[0]}/tx/${n}`,my=()=>{if(!window.ethereum)throw new Error("MetaMask is not installed. Please install MetaMask extension.");return window.ethereum},sd=()=>{const n=my();return new Ml(n)},AP=async()=>{const e=await my().request({method:"eth_requestAccounts"});if(!e[0])throw new Error("No wallet account returned by MetaMask.");return e[0]},EP=async()=>sd().getSigner(),Fu=async()=>{const e=await sd().getNetwork();return Number(e.chainId)},Tr=async()=>{if(await Fu()!==Ta)throw new Error("Please switch wallet network to Sepolia.")},Qx=async()=>{const n=my();try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:Pl.chainIdHex}]})}catch{await n.request({method:"wallet_addEthereumChain",params:[{chainId:Pl.chainIdHex,chainName:Pl.chainName,nativeCurrency:Pl.nativeCurrency,rpcUrls:Pl.rpcUrls,blockExplorerUrls:Pl.blockExplorerUrls}]})}},cG=Object.freeze(Object.defineProperty({__proto__:null,connectMetaMask:AP,ensureSepoliaNetwork:Tr,getConnectedChainId:Fu,getProvider:sd,getSigner:EP,requireMetaMask:my,switchToSepolia:Qx},Symbol.toStringTag,{value:"Module"})),ii=({wallet:n,onConnected:e})=>{const[t,r]=I.useState(!1),[i,o]=I.useState(null),c=async()=>{r(!0),o(null);try{const d=await AP();e(d)}catch(d){o(d instanceof Error?d.message:"Wallet connect failed.")}finally{r(!1)}};return g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{type:"button",onClick:()=>{c()},disabled:t,className:"rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-60",children:n?`${n.slice(0,6)}...${n.slice(-4)}`:t?"Connecting...":"Connect Wallet"}),i&&g.jsx("p",{className:"text-xs text-red-200",children:i})]})},Cf=({open:n,title:e,onClose:t,onConfirm:r})=>{const[i,o]=I.useState("ready"),[c,d]=I.useState(null),[h,m]=I.useState("");if(!n)return null;const w=()=>{o("idle"),d(null),m(""),t()},b=async()=>{o("pending"),d(null);try{const x=await r();x?.txHash&&m(x.txHash),o("confirmed")}catch(x){o("failed"),d(x instanceof Error?x.message:"Transaction failed.")}};return g.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4",children:g.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-[var(--edge)] bg-[var(--card-hard)] p-5",children:[g.jsx("h3",{className:"font-syne text-2xl text-[var(--text-main)]",children:e}),g.jsxs("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:[i==="ready"&&"Review action and confirm in MetaMask.",i==="pending"&&"Waiting for transaction confirmation...",i==="confirmed"&&"Transaction confirmed.",i==="failed"&&"Transaction failed."]}),c&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:c}),h&&g.jsx("a",{href:qx(h),target:"_blank",rel:"noreferrer",className:"mt-3 inline-block text-sm text-[var(--text-main)] underline",children:"View on Etherscan"}),g.jsxs("div",{className:"mt-5 flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{b()},disabled:i==="pending",className:"btn-primary btn-shine rounded-xl px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[#03140b] disabled:opacity-60",children:"Confirm"}),g.jsx("button",{type:"button",onClick:w,className:"rounded-xl border border-[var(--edge)] px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Close"})]})]})})},uG=async n=>(await Ru(tt(Ne,"token_suites"),{name:n.name,symbol:n.symbol,decimals:n.decimals,chainId:11155111,networkName:"sepolia",ownerAdminUid:n.uid,status:"draft",treasuryAddress:n.treasuryAddress,addresses:{},lastIndexedBlock:0,createdAt:Rt(),updatedAt:Rt()})).id,dG=async()=>(await rn(Vr(tt(Ne,"token_suites"),RI("createdAt","desc")))).docs.map(e=>({id:e.id,...e.data()})),hG=async n=>{const e=await Fo(pt(Ne,"token_suites",n));return e.exists()?{id:e.id,...e.data()}:null},fG=async(n,e)=>{await Ts(pt(Ne,"token_suites",n),{name:e.name,symbol:e.symbol,chainId:e.chainId,networkName:e.network,addresses:e.addresses,decimals:e.decimals??18,status:"attached",updatedAt:Rt()})},mG=async(n,e)=>{await Ts(pt(Ne,"token_suites",n),{...e,updatedAt:Rt()})},ac=async n=>(await Ru(tt(Ne,"token_actions"),{...n,createdAt:Rt()})).id,Ui=async(n,e)=>{await Ts(pt(Ne,"token_actions",n),e)},pG=async(n,e=10)=>(await rn(Vr(tt(Ne,"token_actions"),Ur("suiteId","==",n),RI("createdAt","desc")))).docs.map(r=>({id:r.id,...r.data()})).slice(0,e),gG=async(n,e)=>{await Ts(pt(Ne,"token_suites",n),{lastIndexedBlock:e,updatedAt:Rt()}),await qg(pt(Ne,"token_events_cache",n),{suiteId:n,lastIndexedBlock:e,updatedAt:Rt()},{merge:!0})},Kx=["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function totalSupply() view returns (uint256)","function balanceOf(address account) view returns (uint256)","function mint(address to,uint256 amount)","function burn(address account,uint256 amount)","function setAddressFrozen(address account,bool frozen)","function forcedTransfer(address from,address to,uint256 amount)","function isFrozen(address account) view returns (bool)","event Transfer(address indexed from,address indexed to,uint256 value)","event AddressFrozen(address indexed account,bool indexed frozen)"],$x=["function isVerified(address account) view returns (bool)","function registerIdentity(address userAddress,address identityContract,uint16 country)","function deleteIdentity(address userAddress)","event IdentityRegistered(address indexed userAddress,address indexed identity)","event IdentityRemoved(address indexed userAddress)"],Yx=["function getTrustedIssuers() view returns (address[])","function addTrustedIssuer(address issuer,uint256[] claimTopics)","function removeTrustedIssuer(address issuer)","event TrustedIssuerAdded(address indexed issuer)","event TrustedIssuerRemoved(address indexed issuer)"],Wx=["function getClaimTopics() view returns (uint256[])","function addClaimTopic(uint256 claimTopic)","function removeClaimTopic(uint256 claimTopic)","event ClaimTopicAdded(uint256 indexed claimTopic)","event ClaimTopicRemoved(uint256 indexed claimTopic)"],yG=["function canTransfer(address from,address to,uint256 amount) view returns (bool)"],_P=["function addAgent(address agent)","function removeAgent(address agent)","function isAgent(address agent) view returns (bool)"],id=(n,e)=>{const t=sd();return new Ql(n,e,t)},If=async(n,e)=>{const t=await EP();return new Ql(n,e,t)},Rf=n=>id(n,Kx),ad=async n=>If(n,Kx),TP=n=>id(n,$x),SP=async n=>If(n,$x),wG=n=>id(n,Yx),NP=async n=>If(n,Yx),bG=n=>id(n,Wx),CP=async n=>If(n,Wx),vG=n=>id(n,yG),IP=async n=>If(n,_P),RP=n=>id(n,_P),kP=async n=>{const e=Rf(n),[t,r,i]=await Promise.all([e.name(),e.symbol(),e.decimals()]);return{name:t,symbol:r,decimals:Number(i)}},xG=async(n,e)=>{const r=await Rf(n).totalSupply();return QR(r,e)},PP=async(n,e,t)=>{const i=await Rf(n).balanceOf(e);return QR(i,t)},Mp=async(n,e)=>!!await Rf(n).isFrozen(e),Lp=async(n,e)=>!!await TP(n).isVerified(e),AG=async n=>await RP(n).isAgent("0x0000000000000000000000000000000000000000")?["0x0000000000000000000000000000000000000000"]:[],EG=async(n,e)=>!!await RP(n).isAgent(e),_G=async n=>await wG(n).getTrustedIssuers(),TG=async n=>(await bG(n).getClaimTopics()).map(r=>Number(r)),cs=async n=>{const e=await n.wait();return{txHash:n.hash,blockNumber:e?.blockNumber}},OP=n=>{if(!n||typeof n!="object")return"Unknown web3 error.";const e=n;return e.shortMessage||e.reason||e.info?.error?.message||e.data?.message||e.message||"Unknown web3 error."},SG=async(n,e,t,r)=>{await Tr();const i=await ad(n),o=ny(t,r),c=await i.mint(e,o);return cs(c)},NG=async(n,e,t)=>{await Tr();const r=await ad(n),i=[];for(const o of t)try{const c=ny(o.amount,e),d=await r.mint(o.recipient,c),h=await d.wait();i.push({label:o.label,recipient:o.recipient,amount:o.amount,txHash:d.hash,blockNumber:h?.blockNumber,status:"confirmed"})}catch(c){i.push({label:o.label,recipient:o.recipient,amount:o.amount,status:"failed",errorMessage:OP(c)})}return i},CG=async(n,e,t,r)=>{await Tr();const i=await ad(n),o=ny(t,r),c=await i.burn(e,o);return cs(c)},IG=async(n,e)=>{await Tr();const r=await(await ad(n)).setAddressFrozen(e,!0);return cs(r)},RG=async(n,e)=>{await Tr();const r=await(await ad(n)).setAddressFrozen(e,!1);return cs(r)},kG=async(n,e,t,r,i)=>{await Tr();const o=await ad(n),c=ny(r,i),d=await o.forcedTransfer(e,t,c);return cs(d)},PG=async(n,e)=>{await Tr();const r=await(await IP(n)).addAgent(e);return cs(r)},OG=async(n,e)=>{await Tr();const r=await(await IP(n)).removeAgent(e);return cs(r)},DG=async(n,e,t)=>{await Tr();const i=await(await NP(n)).addTrustedIssuer(e,t);return cs(i)},MG=async(n,e)=>{await Tr();const r=await(await NP(n)).removeTrustedIssuer(e);return cs(r)},LG=async(n,e)=>{await Tr();const r=await(await CP(n)).addClaimTopic(e);return cs(r)},BG=async(n,e)=>{await Tr();const r=await(await CP(n)).removeClaimTopic(e);return cs(r)},jG=async(n,e,t,r)=>{await Tr();const o=await(await SP(n)).registerIdentity(e,t,r);return cs(o)},UG=async(n,e)=>{await Tr();const r=await(await SP(n)).deleteIdentity(e);return cs(r)},Wo=({suiteId:n})=>{const e=`/admin/tokens/${n}`;return g.jsxs("div",{className:"mt-5 flex flex-wrap gap-2 text-xs uppercase tracking-[0.12em]",children:[g.jsx(qe,{to:e,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:"Dashboard"}),g.jsx(qe,{to:`${e}/attach`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:"Attach"}),g.jsx(qe,{to:`${e}/mint`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:"Mint"}),g.jsx(qe,{to:`${e}/burn`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:"Burn"}),g.jsx(qe,{to:`${e}/wallets`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:"Wallets"}),g.jsx(qe,{to:`${e}/agents`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:"Agents"}),g.jsx(qe,{to:`${e}/claims`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:"Claims"}),g.jsx(qe,{to:`${e}/events`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:"Events"})]})},Jo=n=>{const[e,t]=I.useState(null),[r,i]=I.useState(!0),[o,c]=I.useState(null),d=I.useCallback(async()=>{if(!n){i(!1);return}i(!0),c(null);try{const h=await hG(n);t(h),h||c("Token suite not found.")}catch(h){const m=h instanceof Error?h.message:"Failed to load token suite.";c(m)}finally{i(!1)}},[n]);return I.useEffect(()=>{d()},[d]),{suite:e,loading:r,error:o,reload:d}},VG=()=>{const{suiteId:n}=Vi(),{user:e}=Yn(),{suite:t,error:r}=Jo(n),[i,o]=I.useState(""),[c,d]=I.useState(""),[h,m]=I.useState([]),[w,b]=I.useState(!1),[x,S]=I.useState("ADD_AGENT"),[k,N]=I.useState(null),C=I.useCallback(async()=>{if(t?.addresses.token)try{const F=await AG(t.addresses.token);m(F)}catch(F){N(F instanceof Error?F.message:"Failed to read agents.")}},[t]);I.useEffect(()=>{C()},[C]);const D=async()=>{if(!e||!n||!t?.addresses.token)throw new Error("Suite/token not ready.");const F=await ac({suiteId:n,type:x,payload:{agent:c},requestedByUid:e.uid,requestedByWallet:i,status:"pending"});try{const U=x==="ADD_AGENT"?await PG(t.addresses.token,c):await OG(t.addresses.token,c);return await Ui(F,{status:"confirmed",txHash:U.txHash,blockNumber:U.blockNumber}),await C(),{txHash:U.txHash}}catch(U){const $=U instanceof Error?U.message:"Agent action failed.";throw await Ui(F,{status:"failed",errorMessage:$}),U}};return g.jsxs("section",{className:"mx-auto w-full max-w-4xl px-5 py-14 md:px-8",children:[g.jsx("h1",{className:"font-syne text-4xl text-[var(--text-main)]",children:"Agent Management"}),r&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:r}),k&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:k}),n&&g.jsx(Wo,{suiteId:n}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx(ii,{wallet:i,onConnected:o}),g.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[g.jsx(ts,{label:"Agent Wallet",value:c,onChange:d,required:!0}),g.jsxs("div",{className:"flex items-end gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{S("ADD_AGENT"),b(!0)},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Add Agent"}),g.jsx("button",{type:"button",onClick:()=>{S("REMOVE_AGENT"),b(!0)},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Remove Agent"})]})]})]}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx("h2",{className:"font-syne text-2xl text-[var(--text-main)]",children:"Current Agents"}),g.jsxs("div",{className:"mt-4 space-y-2",children:[h.length===0&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No listed agents from this suite version."}),h.map(F=>g.jsx("p",{className:"rounded-lg border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]",children:F},F))]})]}),g.jsx(Cf,{open:w,title:x==="ADD_AGENT"?"Confirm Add Agent":"Confirm Remove Agent",onClose:()=>b(!1),onConfirm:D})]})},FG=({onParsed:n})=>{const e=async t=>{const r=t.target.files?.[0];if(!r)return;const i=await r.text(),o=JSON.parse(i);n(o)};return g.jsxs("label",{className:"block text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Upload deployment JSON",g.jsx("input",{type:"file",accept:"application/json",onChange:t=>{e(t)},className:"mt-2 block w-full text-sm text-[var(--text-main)]"})]})},DP=({chainId:n})=>{const e=n===Ta;return g.jsx("span",{className:`inline-flex rounded-full border px-3 py-1 text-[10px] uppercase tracking-[0.12em] ${e?"border-emerald-400/40 bg-emerald-500/10 text-emerald-200":"border-yellow-400/40 bg-yellow-500/10 text-yellow-200"}`,children:n?`Chain ${n}${e?" (Sepolia)":" (Unsupported)"}`:"No Network"})},DS=["token","identityRegistry","trustedIssuersRegistry","claimTopicsRegistry","compliance"],HG=async n=>{if(!ma(n))throw new Error(`Invalid address format: ${n}`);const t=await sd().getCode(n);if(!t||t==="0x")throw new Error(`Address is not a deployed contract: ${n}`)},zG=async n=>{DS.forEach(i=>{if(!n[i])throw new Error(`Missing required contract address: ${i}`)}),await Promise.all(DS.map(async i=>{await HG(String(n[i]))}));const e=Rf(String(n.token));await Promise.all([e.name(),e.symbol(),e.decimals(),e.totalSupply()]),await TP(String(n.identityRegistry)).isVerified("0x0000000000000000000000000000000000000000"),await vG(String(n.compliance)).canTransfer("0x0000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000",0n)},GG=n=>({...n,name:n.name.trim(),symbol:n.symbol.trim().toUpperCase(),addresses:{...n.addresses}}),qG=()=>{const{suiteId:n}=Vi(),{user:e}=Yn(),t=zo(),{suite:r,loading:i,error:o,reload:c}=Jo(n),[d,h]=I.useState(""),[m,w]=I.useState(null),[b,x]=I.useState(!1),[S,k]=I.useState(null),[N,C]=I.useState(null),[D,F]=I.useState({chainId:11155111,network:"sepolia",name:r?.name??"",symbol:r?.symbol??"",decimals:r?.decimals??18,addresses:{token:r?.addresses.token??"",identityRegistry:r?.addresses.identityRegistry??"",trustedIssuersRegistry:r?.addresses.trustedIssuersRegistry??"",claimTopicsRegistry:r?.addresses.claimTopicsRegistry??"",compliance:r?.addresses.compliance??"",implementationAuthority:r?.addresses.implementationAuthority??""}}),U=I.useMemo(()=>r?.id??n,[r?.id,n]);if(I.useEffect(()=>{(async()=>{try{const _=await Fu();w(_)}catch{w(null)}})()},[d]),!n||!U)return null;const $=T=>{if(typeof T!="object"||T===null){C("Invalid JSON payload.");return}const _=T;F(P=>({chainId:_.chainId??P.chainId,network:_.network??P.network,name:_.name??P.name,symbol:_.symbol??P.symbol,decimals:_.decimals??P.decimals,addresses:{...P.addresses,..._.addresses}})),C(null)},Y=(T,_)=>{F(P=>({...P,addresses:{...P.addresses,[T]:_}}))},te=async()=>{if(e){x(!0),k(null),C(null);try{const T=await Fu();if(w(T),T!==Ta)throw new Error(`Wrong network (chainId ${T}). Please switch MetaMask to Sepolia (11155111).`);const _=GG(D);await zG(_.addresses),await fG(U,_),await ac({suiteId:U,type:"ATTACH",payload:_,requestedByUid:e.uid,requestedByWallet:d,status:"confirmed"}),k("Suite attached and validated successfully."),await c()}catch(T){const _=T instanceof Error?T.message:"Attach failed.";C(_),await ac({suiteId:U,type:"ATTACH",payload:D,requestedByUid:e.uid,requestedByWallet:d,status:"failed",errorMessage:_})}finally{x(!1)}}};return g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Admin Route"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl text-[var(--text-main)]",children:"Attach Token Suite"}),g.jsx(Wo,{suiteId:U}),(o||N)&&g.jsx("p",{className:"mt-4 text-sm text-red-200",children:o??N}),S&&g.jsx("p",{className:"mt-4 text-sm text-emerald-200",children:S}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Name",g.jsx("input",{value:D.name,onChange:T=>F(_=>({..._,name:T.target.value})),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Symbol",g.jsx("input",{value:D.symbol,onChange:T=>F(_=>({..._,symbol:T.target.value.toUpperCase()})),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]"})]})]}),g.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[g.jsx(FG,{onParsed:$}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(ii,{wallet:d,onConnected:h}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(DP,{chainId:m}),m!==null&&m!==Ta&&g.jsx("button",{type:"button",onClick:()=>{Qx()},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Switch to Sepolia"})]})]})]}),g.jsxs("div",{className:"mt-6 grid gap-3 md:grid-cols-2",children:[g.jsx(ts,{label:"Token",value:D.addresses.token??"",onChange:T=>Y("token",T),required:!0}),g.jsx(ts,{label:"Identity Registry",value:D.addresses.identityRegistry??"",onChange:T=>Y("identityRegistry",T),required:!0}),g.jsx(ts,{label:"Trusted Issuers Registry",value:D.addresses.trustedIssuersRegistry??"",onChange:T=>Y("trustedIssuersRegistry",T),required:!0}),g.jsx(ts,{label:"Claim Topics Registry",value:D.addresses.claimTopicsRegistry??"",onChange:T=>Y("claimTopicsRegistry",T),required:!0}),g.jsx(ts,{label:"Compliance",value:D.addresses.compliance??"",onChange:T=>Y("compliance",T),required:!0}),g.jsx(ts,{label:"Implementation Authority (optional)",value:D.addresses.implementationAuthority??"",onChange:T=>Y("implementationAuthority",T)})]}),g.jsxs("div",{className:"mt-6 flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{te()},disabled:b||i,className:"btn-primary btn-shine rounded-xl px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[#03140b] disabled:opacity-60",children:b?"Validating...":"Validate & Attach"}),g.jsx("button",{type:"button",onClick:()=>t(`/admin/tokens/${U}`),className:"rounded-xl border border-[var(--edge)] px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[var(--text-main)]",children:"View Dashboard"})]})]})]})},MP=({keyword:n,onConfirm:e,label:t})=>{const[r,i]=I.useState("");return g.jsxs("div",{className:"rounded-xl border border-red-400/35 bg-red-500/10 p-4",children:[g.jsxs("p",{className:"text-xs uppercase tracking-[0.12em] text-red-200",children:["Type ",n," to confirm"]}),g.jsx("input",{value:r,onChange:o=>i(o.target.value),className:"mt-2 w-full rounded-lg border border-red-400/35 bg-black/30 px-3 py-2 text-sm text-red-100"}),g.jsx("button",{type:"button",onClick:e,disabled:r!==n,className:"mt-3 rounded-lg border border-red-400/40 px-3 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-red-100 disabled:opacity-40",children:t})]})},QG=()=>{const{suiteId:n}=Vi(),{user:e}=Yn(),{suite:t,error:r}=Jo(n),[i,o]=I.useState(""),[c,d]=I.useState("treasury"),[h,m]=I.useState(""),[w,b]=I.useState(""),[x,S]=I.useState(!1),[k,N]=I.useState(null),C=async()=>{if(!e||!n||!t?.addresses.token)throw new Error("Suite/token not ready.");if(!w||Number(w)<=0)throw new Error("Amount must be greater than zero.");const D=c==="treasury"?t.treasuryAddress:h;if(!D)throw new Error(c==="treasury"?"Treasury wallet is not set on this suite.":"From wallet is required.");const F=await ac({suiteId:n,type:"BURN",payload:{mode:c,burnWallet:D,amount:w},requestedByUid:e.uid,requestedByWallet:i,status:"pending"});try{const U=await CG(t.addresses.token,D,w,t.decimals);return await Ui(F,{txHash:U.txHash,blockNumber:U.blockNumber,status:"confirmed"}),{txHash:U.txHash}}catch(U){const $=U instanceof Error?U.message:"Burn failed";throw await Ui(F,{status:"failed",errorMessage:$}),U}};return g.jsxs("section",{className:"mx-auto w-full max-w-4xl px-5 py-14 md:px-8",children:[g.jsx("h1",{className:"font-syne text-4xl text-[var(--text-main)]",children:"Burn Tokens"}),r&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:r}),k&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:k}),n&&g.jsx(Wo,{suiteId:n}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx(ii,{wallet:i,onConnected:o}),g.jsxs("div",{className:"mt-4 flex gap-2 text-xs uppercase tracking-[0.12em]",children:[g.jsx("button",{type:"button",onClick:()=>d("treasury"),className:`rounded-lg border px-3 py-2 ${c==="treasury"?"border-[var(--edge-strong)] text-[var(--text-main)]":"border-[var(--edge)] text-[var(--text-muted)]"}`,children:"Burn Treasury"}),g.jsx("button",{type:"button",onClick:()=>d("wallet"),className:`rounded-lg border px-3 py-2 ${c==="wallet"?"border-[var(--edge-strong)] text-[var(--text-main)]":"border-[var(--edge)] text-[var(--text-muted)]"}`,children:"Burn From Wallet"})]}),g.jsxs("label",{className:"mt-4 block text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Amount",g.jsx("input",{value:w,onChange:D=>b(D.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),c==="wallet"&&g.jsx("div",{className:"mt-4",children:g.jsx(ts,{label:"From Wallet",value:h,onChange:m,required:!0})}),g.jsx("div",{className:"mt-5",children:g.jsx(MP,{keyword:"BURN",label:"Open Burn Modal",onConfirm:()=>S(!0)})})]}),g.jsx(Cf,{open:x,title:"Confirm Burn",onClose:()=>S(!1),onConfirm:async()=>{try{return await C()}catch(D){throw N(D instanceof Error?D.message:"Burn failed."),D}}})]})},KG=()=>{const{suiteId:n}=Vi(),{user:e}=Yn(),{suite:t,error:r}=Jo(n),[i,o]=I.useState(""),[c,d]=I.useState(""),[h,m]=I.useState("1,2"),[w,b]=I.useState("1"),[x,S]=I.useState([]),[k,N]=I.useState([]),[C,D]=I.useState(null),[F,U]=I.useState(!1),[$,Y]=I.useState(null),te=I.useCallback(async()=>{if(!(!t?.addresses.claimTopicsRegistry||!t?.addresses.trustedIssuersRegistry))try{const[_,P]=await Promise.all([TG(t.addresses.claimTopicsRegistry),_G(t.addresses.trustedIssuersRegistry)]);S(_),N(P)}catch(_){Y(_ instanceof Error?_.message:"Failed to load claims data.")}},[t]);I.useEffect(()=>{te()},[te]);const T=async()=>{if(!e||!n||!t||!C)throw new Error("Action not ready.");const P=await ac({suiteId:n,type:{ADD_TOPIC:"ADD_CLAIM_TOPIC",REMOVE_TOPIC:"REMOVE_CLAIM_TOPIC",ADD_ISSUER:"ADD_TRUSTED_ISSUER",REMOVE_ISSUER:"REMOVE_TRUSTED_ISSUER"}[C],payload:{issuer:c,topicInput:w,topicsInput:h},requestedByUid:e.uid,requestedByWallet:i,status:"pending"});try{let L;if(C==="ADD_TOPIC")L=await LG(String(t.addresses.claimTopicsRegistry),Number(w));else if(C==="REMOVE_TOPIC")L=await BG(String(t.addresses.claimTopicsRegistry),Number(w));else if(C==="ADD_ISSUER"){const B=h.split(",").map(j=>Number(j.trim())).filter(j=>Number.isFinite(j));L=await DG(String(t.addresses.trustedIssuersRegistry),c,B)}else L=await MG(String(t.addresses.trustedIssuersRegistry),c);return await Ui(P,{status:"confirmed",txHash:L.txHash,blockNumber:L.blockNumber}),await te(),{txHash:L.txHash}}catch(L){const B=L instanceof Error?L.message:"Claims action failed.";throw await Ui(P,{status:"failed",errorMessage:B}),L}};return g.jsxs("section",{className:"mx-auto w-full max-w-5xl px-5 py-14 md:px-8",children:[g.jsx("h1",{className:"font-syne text-4xl text-[var(--text-main)]",children:"Claims & Trusted Issuers"}),r&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:r}),$&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:$}),n&&g.jsx(Wo,{suiteId:n}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx(ii,{wallet:i,onConnected:o}),g.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:[g.jsx("h2",{className:"font-syne text-xl text-[var(--text-main)]",children:"Claim Topics"}),g.jsxs("label",{className:"mt-3 block text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Topic",g.jsx("input",{value:w,onChange:_=>b(_.target.value),className:"mt-2 w-full rounded-lg border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsxs("div",{className:"mt-3 flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{D("ADD_TOPIC"),U(!0)},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Add Topic"}),g.jsx("button",{type:"button",onClick:()=>{D("REMOVE_TOPIC"),U(!0)},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Remove Topic"})]}),g.jsx("div",{className:"mt-3 space-y-1",children:x.map(_=>g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["#",_]},_))})]}),g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:[g.jsx("h2",{className:"font-syne text-xl text-[var(--text-main)]",children:"Trusted Issuers"}),g.jsx(ts,{label:"Issuer Address",value:c,onChange:d}),g.jsxs("label",{className:"mt-3 block text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Issuer Topics (comma separated)",g.jsx("input",{value:h,onChange:_=>m(_.target.value),className:"mt-2 w-full rounded-lg border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsxs("div",{className:"mt-3 flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{D("ADD_ISSUER"),U(!0)},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Add Issuer"}),g.jsx("button",{type:"button",onClick:()=>{D("REMOVE_ISSUER"),U(!0)},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Remove Issuer"})]}),g.jsx("div",{className:"mt-3 space-y-1",children:k.map(_=>g.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:_},_))})]})]})]}),g.jsx(Cf,{open:F,title:`Confirm ${C??"Action"}`,onClose:()=>U(!1),onConfirm:T})]})},$G=()=>{const{suiteId:n}=Vi(),{suite:e,loading:t,error:r,reload:i}=Jo(n),[o,c]=I.useState(""),[d,h]=I.useState(null),[m,w]=I.useState(null),[b,x]=I.useState(""),[S,k]=I.useState([]),[N,C]=I.useState(""),D=I.useCallback(async()=>{if(!n)return;const U=await pG(n,10);k(U)},[n]);I.useEffect(()=>{e?.treasuryAddress&&C(e.treasuryAddress)},[e?.treasuryAddress]),I.useEffect(()=>{D()},[D]),I.useEffect(()=>{(async()=>{try{const $=await Fu();h($)}catch{h(null)}})()},[o]),I.useEffect(()=>{(async()=>{if(e?.addresses.token){w(null);try{const $=await kP(e.addresses.token),Y=await xG(e.addresses.token,$.decimals);x(Y)}catch($){w($ instanceof Error?$.message:"Failed to read suite on-chain metadata.")}}})()},[e?.addresses.token]);const F=async()=>{n&&(await mG(n,{treasuryAddress:N}),await i())};return n?g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Admin Route"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl text-[var(--text-main)]",children:"Token Suite Dashboard"}),g.jsx(Wo,{suiteId:n}),(r||m)&&g.jsx("p",{className:"mt-4 text-sm text-red-200",children:r??m}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[g.jsx(ii,{wallet:o,onConnected:c}),g.jsx(DP,{chainId:d}),d!==Ta&&g.jsx("button",{type:"button",onClick:()=>{Qx()},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Switch to Sepolia"})]}),t&&g.jsx("p",{className:"mt-4 text-sm text-[var(--text-muted)]",children:"Loading suite..."}),!t&&e&&g.jsxs("div",{className:"mt-6 grid gap-5 md:grid-cols-2",children:[g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Suite"}),g.jsxs("h2",{className:"mt-2 font-syne text-2xl text-[var(--text-main)]",children:[e.name," (",e.symbol,")"]}),g.jsxs("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:["Status: ",e.status]}),g.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Token: ",e.addresses.token??"-"]}),g.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Total Supply: ",b||"-"]})]}),g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Custodial Treasury Wallet"}),g.jsx("input",{value:N,onChange:U=>C(U.target.value),className:"mt-2 w-full rounded-lg border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]",placeholder:"0x..."}),g.jsx("button",{type:"button",onClick:()=>{F()},className:"mt-3 rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Save Treasury"})]})]}),g.jsxs("div",{className:"mt-6 flex flex-wrap gap-2",children:[g.jsx(qe,{to:`/admin/tokens/${n}/mint`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Mint"}),g.jsx(qe,{to:`/admin/tokens/${n}/burn`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Burn"}),g.jsx(qe,{to:`/admin/tokens/${n}/wallets`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Wallet Compliance"}),g.jsx(qe,{to:`/admin/tokens/${n}/agents`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Agents"}),g.jsx(qe,{to:`/admin/tokens/${n}/claims`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Claims"}),g.jsx(qe,{to:`/admin/tokens/${n}/events`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Events"})]})]}),g.jsxs("article",{className:"mt-8 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx("h2",{className:"font-syne text-2xl text-[var(--text-main)]",children:"Latest Actions"}),g.jsxs("div",{className:"mt-4 space-y-3",children:[S.length===0&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No actions yet."}),S.map(U=>g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:U.type}),g.jsxs("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:["Status: ",U.status]}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Tx: ",U.txHash??"-"]})]},U.id))]})]})]}):null},YG="modulepreload",WG=function(n){return"/"+n},MS={},JG=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let m=function(w){return Promise.all(w.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var c=m;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");i=m(t.map(w=>{if(w=WG(w),w in MS)return;MS[w]=!0;const b=w.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${x}`))return;const S=document.createElement("link");if(S.rel=b?"stylesheet":YG,b||(S.as="script"),S.crossOrigin="",S.href=w,h&&S.setAttribute("nonce",h),document.head.appendChild(S),b)return new Promise((k,N)=>{S.addEventListener("load",k),S.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${w}`)))})}))}function o(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return i.then(d=>{for(const h of d||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},XG=(n,e,t)=>{const r=new _o(e);return n.map(i=>{try{const o=r.parseLog({topics:i.topics,data:i.data});if(!o)return null;const c={};return o.fragment.inputs.forEach((d,h)=>{c[d.name||`arg${h}`]=o.args[h]?.toString?.()??o.args[h]}),{contract:t,eventName:o.name,txHash:i.transactionHash,blockNumber:i.blockNumber,args:c}}catch{return null}}).filter(i=>i!==null)},ZG=async(n,e,t)=>{const r=sd(),i=[],o=[{address:n.token,abi:Kx},{address:n.identityRegistry,abi:$x},{address:n.trustedIssuersRegistry,abi:Yx},{address:n.claimTopicsRegistry,abi:Wx}];for(const c of o){if(!c.address)continue;const d=await r.getLogs({address:c.address,fromBlock:e,toBlock:t});i.push(...XG(d,c.abi,c.address))}return i.sort((c,d)=>d.blockNumber-c.blockNumber)},sb=20,eq=()=>{const{suiteId:n}=Vi(),{suite:e,error:t}=Jo(n),[r,i]=I.useState(""),[o,c]=I.useState(!1),[d,h]=I.useState(null),[m,w]=I.useState([]),[b,x]=I.useState(1),S=async()=>{if(!(!n||!e)){c(!0),h(null);try{const C=await(await JG(async()=>{const{getProvider:U}=await Promise.resolve().then(()=>cG);return{getProvider:U}},[])).getProvider().getBlockNumber(),D=Math.max(0,e.lastIndexedBlock||C-2e3),F=await ZG({token:e.addresses.token,identityRegistry:e.addresses.identityRegistry,trustedIssuersRegistry:e.addresses.trustedIssuersRegistry,claimTopicsRegistry:e.addresses.claimTopicsRegistry},D,C);w(F),await gG(n,C)}catch(C){h(C instanceof Error?C.message:"Failed to sync events.")}finally{c(!1)}}},k=Math.max(1,Math.ceil(m.length/sb)),N=m.slice((b-1)*sb,b*sb);return g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsx("h1",{className:"font-syne text-4xl text-[var(--text-main)]",children:"On-chain Events"}),t&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:t}),d&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:d}),n&&g.jsx(Wo,{suiteId:n}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(ii,{wallet:r,onConnected:i}),g.jsx("button",{type:"button",onClick:()=>{S()},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:o?"Syncing...":"Sync Events"}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Indexed from block: ",e?.lastIndexedBlock??0]})]}),g.jsx("div",{className:"mt-5 overflow-x-auto",children:g.jsxs("table",{className:"min-w-full border-collapse text-left text-xs text-[var(--text-muted)]",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Event"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Contract"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Tx"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Block"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Fields"})]})}),g.jsx("tbody",{children:N.map(C=>g.jsxs("tr",{children:[g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2 text-[var(--text-main)]",children:C.eventName}),g.jsxs("td",{className:"border-b border-[var(--edge)] px-3 py-2",children:[C.contract.slice(0,8),"...",C.contract.slice(-4)]}),g.jsxs("td",{className:"border-b border-[var(--edge)] px-3 py-2",children:[C.txHash.slice(0,10),"..."]}),g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2",children:C.blockNumber}),g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2",children:JSON.stringify(C.args)})]},`${C.txHash}-${C.eventName}-${C.blockNumber}`))})]})}),g.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[g.jsx("button",{type:"button",disabled:b<=1,onClick:()=>x(C=>Math.max(1,C-1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Prev"}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Page ",b," / ",k]}),g.jsx("button",{type:"button",disabled:b>=k,onClick:()=>x(C=>Math.min(k,C+1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Next"})]})]})]})},tq=()=>{const{suiteId:n}=Vi(),{user:e}=Yn(),{suite:t,error:r}=Jo(n),[i,o]=I.useState(""),[c,d]=I.useState(""),[h,m]=I.useState(""),[w,b]=I.useState(""),[x,S]=I.useState(!1),[k,N]=I.useState(null),C=async()=>{if(!e||!n||!t?.addresses.token)throw new Error("Suite/token not ready.");const D=await ac({suiteId:n,type:"MINT",payload:{recipient:c,amount:h,note:w},requestedByUid:e.uid,requestedByWallet:i,status:"pending"});try{const F=await SG(t.addresses.token,c,h,t.decimals);return await Ui(D,{txHash:F.txHash,blockNumber:F.blockNumber,status:"confirmed"}),{txHash:F.txHash}}catch(F){const U=F instanceof Error?F.message:"Mint failed";throw await Ui(D,{status:"failed",errorMessage:U}),F}};return g.jsxs("section",{className:"mx-auto w-full max-w-4xl px-5 py-14 md:px-8",children:[g.jsx("h1",{className:"font-syne text-4xl text-[var(--text-main)]",children:"Mint Tokens"}),r&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:r}),k&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:k}),n&&g.jsx(Wo,{suiteId:n}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx(ii,{wallet:i,onConnected:o}),g.jsxs("div",{className:"mt-4 grid gap-3",children:[g.jsx(ts,{label:"Recipient",value:c,onChange:d,required:!0}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Amount",g.jsx("input",{value:h,onChange:D=>m(D.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Reason (off-chain note)",g.jsx("textarea",{value:w,onChange:D=>b(D.target.value),rows:3,className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]"})]})]}),g.jsx("button",{type:"button",onClick:()=>{N(null),S(!0)},className:"btn-primary btn-shine mt-5 rounded-xl px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[#03140b]",children:"Mint"})]}),g.jsx(Cf,{open:x,title:"Confirm Mint",onClose:()=>S(!1),onConfirm:async()=>{try{return await C()}catch(D){throw N(D instanceof Error?D.message:"Mint failed."),D}}})]})},nq=()=>{const{suiteId:n}=Vi(),{user:e}=Yn(),{suite:t,error:r}=Jo(n),[i,o]=I.useState(""),[c,d]=I.useState(""),[h,m]=I.useState(""),[w,b]=I.useState(360),[x,S]=I.useState(""),[k,N]=I.useState(!1),[C,D]=I.useState(null),[F,U]=I.useState(null),[$,Y]=I.useState("-"),[te,T]=I.useState(null),[_,P]=I.useState(null),L=async()=>{if(!t?.addresses.token||!t?.addresses.identityRegistry||!c)return;const[j,M,ye]=await Promise.all([PP(t.addresses.token,c,t.decimals),Mp(t.addresses.token,c),Lp(t.addresses.identityRegistry,c)]);Y(j),T(M),P(ye)},B=async()=>{if(!e||!n||!t||!C||!t.addresses.token)throw new Error("Suite/action not ready.");const M=await ac({suiteId:n,type:{freeze:"FREEZE",unfreeze:"UNFREEZE",register:"REGISTER_IDENTITY",remove:"REMOVE_IDENTITY",force:"FORCED_TRANSFER"}[C],payload:{targetWallet:c,identityContract:h,countryCode:w,forceAmount:x},requestedByUid:e.uid,requestedByWallet:i,status:"pending"});try{let ye;if(C==="freeze")ye=await IG(t.addresses.token,c);else if(C==="unfreeze")ye=await RG(t.addresses.token,c);else if(C==="register"){if(!t.addresses.identityRegistry)throw new Error("Identity registry address missing.");ye=await jG(t.addresses.identityRegistry,c,h,w)}else if(C==="remove"){if(!t.addresses.identityRegistry)throw new Error("Identity registry address missing.");ye=await UG(t.addresses.identityRegistry,c)}else ye=await kG(t.addresses.token,c,t.treasuryAddress,x,t.decimals);return await Ui(M,{status:"confirmed",txHash:ye.txHash,blockNumber:ye.blockNumber}),await L(),{txHash:ye.txHash}}catch(ye){const ee=ye instanceof Error?ye.message:"Action failed.";throw await Ui(M,{status:"failed",errorMessage:ee}),ye}};return g.jsxs("section",{className:"mx-auto w-full max-w-5xl px-5 py-14 md:px-8",children:[g.jsx("h1",{className:"font-syne text-4xl text-[var(--text-main)]",children:"Wallet Compliance"}),r&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:r}),F&&g.jsx("p",{className:"mt-3 text-sm text-red-200",children:F}),n&&g.jsx(Wo,{suiteId:n}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx(ii,{wallet:i,onConnected:o}),g.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[g.jsx(ts,{label:"Target Wallet",value:c,onChange:d,required:!0}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{type:"button",onClick:()=>{L()},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Check Status"}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Balance: ",$]}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Frozen: ",te===null?"-":String(te)]}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Verified: ",_===null?"-":String(_)]})]})]}),g.jsxs("div",{className:"mt-6 grid gap-3 md:grid-cols-2",children:[g.jsx("button",{type:"button",onClick:()=>{D("freeze"),N(!0)},className:"rounded-xl border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Freeze Wallet"}),g.jsx("button",{type:"button",onClick:()=>{D("unfreeze"),N(!0)},className:"rounded-xl border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Unfreeze Wallet"})]}),g.jsxs("div",{className:"mt-6 rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:[g.jsx("h2",{className:"font-syne text-xl text-[var(--text-main)]",children:"Identity Verification (MVP)"}),g.jsx("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:"TODO: Replace simplified identityContract input with full ONCHAINID flow."}),g.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[g.jsx(ts,{label:"Identity Contract",value:h,onChange:m}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Country Code",g.jsx("input",{type:"number",value:w,onChange:j=>b(Number(j.target.value)||0),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]"})]})]}),g.jsxs("div",{className:"mt-3 flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{D("register"),N(!0)},className:"rounded-xl border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Register Identity"}),g.jsx("button",{type:"button",onClick:()=>{D("remove"),N(!0)},className:"rounded-xl border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Remove Identity"})]})]}),g.jsxs("div",{className:"mt-6 rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:[g.jsx("h2",{className:"font-syne text-xl text-[var(--text-main)]",children:"Forced Transfer to Treasury"}),g.jsxs("label",{className:"mt-3 block text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Amount",g.jsx("input",{value:x,onChange:j=>S(j.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsx("div",{className:"mt-4",children:g.jsx(MP,{keyword:"FORCE",label:"Open Forced Transfer Modal",onConfirm:()=>{D("force"),N(!0)}})})]})]}),g.jsx(Cf,{open:k,title:`Confirm ${C?.toUpperCase()??"Action"}`,onClose:()=>N(!1),onConfirm:async()=>{try{return await B()}catch(j){throw U(j instanceof Error?j.message:"Action failed."),j}}})]})},rq=()=>{const{user:n}=Yn(),e=zo(),[t,r]=I.useState(""),[i,o]=I.useState(!0),[c,d]=I.useState(!1),[h,m]=I.useState(null),[w,b]=I.useState([]),[x,S]=I.useState("Glyiv Asset Token"),[k,N]=I.useState("GLAT"),[C,D]=I.useState(18),F=async()=>{o(!0),m(null);try{const $=await dG();b($)}catch($){const Y=$ instanceof Error?$.message:"Failed to list token suites.";m(Y)}finally{o(!1)}};I.useEffect(()=>{F()},[]);const U=async()=>{if(n){d(!0),m(null);try{const $=await uG({uid:n.uid,name:x,symbol:k,decimals:C,treasuryAddress:t});e(`/admin/tokens/${$}`)}catch($){const Y=$ instanceof Error?$.message:"Failed to create suite draft.";m(Y)}finally{d(!1)}}};return g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Admin Route"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl text-[var(--text-main)]",children:"Token Suites"}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx("h2",{className:"font-syne text-2xl text-[var(--text-main)]",children:"Create Draft Suite"}),g.jsx("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:"Drafts are off-chain records in Firestore. Attach deployed T-REX contracts later."}),g.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-3",children:[g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Name",g.jsx("input",{value:x,onChange:$=>S($.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Symbol",g.jsx("input",{value:k,onChange:$=>N($.target.value.toUpperCase()),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]"})]}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Decimals",g.jsx("input",{type:"number",min:0,max:18,value:C,onChange:$=>D(Number($.target.value)||18),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-sm text-[var(--text-main)]"})]})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx(ii,{wallet:t,onConnected:r}),g.jsx("p",{className:"mt-2 text-xs text-[var(--text-muted)]",children:"Treasury address defaults to connected wallet."})]}),g.jsx("button",{type:"button",onClick:()=>{U()},disabled:c,className:"btn-primary btn-shine mt-5 rounded-xl px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[#03140b] disabled:opacity-60",children:c?"Creating...":"Create Draft Suite"})]}),h&&g.jsx("p",{className:"mt-4 text-sm text-red-200",children:h}),g.jsxs("article",{className:"mt-8 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6",children:[g.jsx("h2",{className:"font-syne text-2xl text-[var(--text-main)]",children:"Existing Suites"}),i&&g.jsx("p",{className:"mt-3 text-sm text-[var(--text-muted)]",children:"Loading suites..."}),g.jsxs("div",{className:"mt-4 space-y-3",children:[!i&&w.length===0&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No suites yet."}),w.map($=>g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:[g.jsxs("p",{className:"font-semibold text-[var(--text-main)]",children:[$.name," (",$.symbol,")"]}),g.jsxs("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:["Status: ",$.status," | Chain: ",$.chainId," | Token: ",$.addresses.token||"-"]}),g.jsxs("div",{className:"mt-3 flex gap-2",children:[g.jsx(qe,{to:`/admin/tokens/${$.id}`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Open"}),g.jsx(qe,{to:`/admin/tokens/${$.id}/attach`,className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Attach"})]})]},$.id))]})]})]})},sq=(n,e)=>{const t=e==="24H"?24:e==="7D"?28:e==="1M"?30:e==="3M"?36:52;return Array.from({length:t}).map((r,i)=>{const o=Math.sin((i+1)*.4)*n*.06,c=Math.cos((i+2)*.8)*n*.03,d=i/Math.max(1,t-1)*n*.08;return{label:`${i+1}`,value:Math.max(.01,n+o+c+d)}})},iq=()=>{const{landId:n}=Vi(),[e,t]=I.useState(!0),[r,i]=I.useState(null),[o,c]=I.useState("7D"),[d,h]=I.useState(null),[m,w]=I.useState([]),[b,x]=I.useState([]);I.useEffect(()=>{(async()=>{if(!n){t(!1);return}t(!0),i(null);try{const F=await Fo(pt(Ne,"lands",n));if(!F.exists()){i("Land not found."),t(!1);return}const U={id:F.id,...F.data()},[$,Y]=await Promise.all([rn(Vr(tt(Ne,"hectares"),Ur("landId","==",n))),rn(Vr(tt(Ne,"market_listings"),Ur("landId","==",n)))]),te=$.docs.map(_=>({id:_.id,..._.data()})),T=Y.docs.map(_=>({id:_.id,..._.data()}));h(U),w(te),x(T)}catch(F){const U=F instanceof Error?F.message:"Failed to load asset detail.";i(U)}finally{t(!1)}})()},[n]);const S=I.useMemo(()=>{const D=b.map(te=>Number(te.pricePerMonthGlv)||0),F=D.length>0?D.reduce((te,T)=>te+T,0)/D.length:0,U=D.length>0?Math.min(...D):0,$=D.length>0?Math.max(...D):0,Y=Zg(m);return{avgPrice:F,low:U,high:$,absorption:Y,listedHectares:b.filter(te=>te.status==="available").length,marketCapLike:F*Math.max(1,b.length),volume24hLike:F*.35}},[m,b]),k=I.useMemo(()=>sq(Math.max(1,S.avgPrice||1),o),[S.avgPrice,o]),N=I.useMemo(()=>Math.min(...k.map(D=>D.value),0),[k]),C=I.useMemo(()=>Math.max(...k.map(D=>D.value),1),[k]);return e?g.jsx("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Loading asset detail..."})}):r||!d?g.jsx("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:g.jsx("p",{className:"rounded-xl border border-red-400/35 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:r??"Asset not found."})}):g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Marketplace Asset"}),g.jsx("h1",{className:"mt-2 font-syne text-4xl text-[var(--text-main)]",children:d.title}),g.jsx("p",{className:"mt-1 text-sm text-[var(--text-muted)]",children:d.locationText})]}),g.jsx(qe,{to:"/marketplace-preview",className:"rounded-xl border border-[var(--edge)] px-4 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Back to Marketplace"})]}),g.jsxs("div",{className:"mt-6 grid gap-6 xl:grid-cols-[0.38fr_0.62fr]",children:[g.jsxs("article",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:[g.jsx("div",{className:"aspect-[16/10] overflow-hidden rounded-2xl border border-[var(--edge)] bg-[var(--card-hard)]",children:g.jsx("iframe",{title:`map-detail-${d.id}`,src:`https://www.google.com/maps?q=${encodeURIComponent(d.locationText)}&output=embed`,className:"h-full w-full",loading:"lazy"})}),g.jsx("p",{className:"mt-4 font-syne text-5xl text-[var(--text-main)]",children:S.avgPrice.toFixed(2)}),g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"GLV/year average"}),g.jsx("div",{className:"mt-4 h-2 rounded-full bg-[var(--card-hard)]",children:g.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-[#3df299] to-[#0dad68]",style:{width:"66%"}})}),g.jsxs("div",{className:"mt-1 flex justify-between text-xs text-[var(--text-muted)]",children:[g.jsxs("span",{children:["Low ",S.low.toFixed(2)]}),g.jsxs("span",{children:["High ",S.high.toFixed(2)]})]}),g.jsxs("div",{className:"mt-6 space-y-2 text-sm text-[var(--text-muted)]",children:[g.jsxs("p",{children:["Area: ",d.areaHa," ha"]}),g.jsxs("p",{children:["Listed Hectares: ",S.listedHectares]}),g.jsxs("p",{children:["Carbon Absorption: ",S.absorption.toFixed(2)," ton/y"]}),g.jsxs("p",{children:["Average Price: ",S.avgPrice.toFixed(2)," GLV/year"]}),g.jsxs("p",{children:["Market Cap (proxy): ",S.marketCapLike.toFixed(2)," GLV"]}),g.jsxs("p",{children:["24H Trading Vol (proxy): ",S.volume24hLike.toFixed(2)," GLV"]}),g.jsx("a",{href:Xg(d.locationText),target:"_blank",rel:"noreferrer",className:"inline-block underline text-[var(--text-main)]",children:"Open Maps Source"})]})]}),g.jsxs("article",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:[g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[g.jsx("div",{className:"flex gap-2",children:["24H","7D","1M","3M","1Y"].map(D=>g.jsx("button",{type:"button",onClick:()=>c(D),className:`rounded-lg border px-3 py-2 text-xs uppercase tracking-[0.12em] ${o===D?"border-[var(--edge-strong)] text-[var(--text-main)]":"border-[var(--edge)] text-[var(--text-muted)]"}`,children:D},D))}),g.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Price chart (proxy) for traders"})]}),g.jsx("div",{className:"mt-5 h-80 rounded-2xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:g.jsx("div",{className:"flex h-full items-end gap-1",children:k.map((D,F)=>g.jsx("div",{className:"flex flex-1 flex-col items-center justify-end gap-1",children:g.jsx("div",{className:"w-full rounded-t-sm bg-gradient-to-b from-[#ff6a6a] to-[#c94242]",style:{height:`${Math.max(6,(D.value-N)/Math.max(1e-4,C-N)*220)}px`},title:`${D.value.toFixed(2)} GLV`})},`${D.label}-${F}`))})}),g.jsxs("div",{className:"mt-5 grid gap-3 md:grid-cols-2",children:[g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Hectare Performance"}),g.jsx("div",{className:"mt-2 space-y-1 text-xs text-[var(--text-muted)]",children:m.map(D=>g.jsxs("p",{children:["H#",D.index," | NDVI ",D.ndviLatest?.mean?.toFixed(2)??"-"," | Risk-Adjusted Ton/Ha/Y ",D.creditModel?.riskAdjustedTonPerHaYear??2.3]},D.id))})]}),g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Market Listings"}),g.jsx("div",{className:"mt-2 space-y-1 text-xs text-[var(--text-muted)]",children:b.map(D=>g.jsx("p",{children:(()=>{const U=((1-Math.max(0,Math.min(1,Number(D.consumedFraction??0))))*100).toFixed(2);return`Listing ${D.id.slice(0,8)} | ${D.pricePerMonthGlv} GLV/year | ${D.status} | ${U}% available`})()},D.id))})]})]})]})]})]})},aq=n=>{const e=[];for(let t=0;t<7;t+=1){const r=Math.sin((t+1)*.9)*(n*.07),i=t*(n*.008);e.push(Math.max(.01,n+r+i))}return e},oq=n=>{if(!n||typeof n!="object")return!1;const e=n,t=(e.code??"").toLowerCase(),r=(e.message??"").toLowerCase();return t.includes("permission")||t.includes("permission-denied")||r.includes("missing or insufficient permissions")},lq=(n,e)=>{if(!Number.isFinite(n)||n<=0)return null;const t=n/1e3,r=[];let i=t,o=0,c=0;const d=[...e].sort((b,x)=>b.unitPriceGlstPerTon-x.unitPriceGlstPerTon);for(const b of d){if(i<=0)break;if(b.availableCarbonTon<=0)continue;const x=Math.min(i,b.availableCarbonTon),S=Math.max(0,Math.min(1,x/Math.max(b.availableCarbonTon,1e-6)))*b.availableFraction,k=x*b.unitPriceGlstPerTon,N=b.availableAreaHa*(x/Math.max(b.availableCarbonTon,1e-6));r.push({listingId:b.listingId,landId:b.landId,landTitle:b.landTitle,hectareId:b.hectareId,hectareIndex:b.hectareIndex,carbonTon:Vt(x),areaHa:Vt(N),allocationFraction:Vt(S),unitPriceGlstPerTon:Vt(b.unitPriceGlstPerTon),amountGlst:Vt(k)}),i-=x,c+=x,o+=k}const h=Math.max(0,i),m=c>0?o/c:0,w=t>0?Math.min(100,c/t*100):0;return{targetKg:Vt(n),targetTon:Vt(t),filledTon:Vt(c),unfilledTon:Vt(h),totalPriceGlst:Vt(o),avgPricePerTonGlst:Vt(m),coveragePct:Vt(w),allocations:r}},cq=()=>{const n=zo(),{user:e}=Yn(),[t,r]=I.useState(!0),[i,o]=I.useState(null),[c,d]=I.useState([]),[h,m]=I.useState(""),[w,b]=I.useState(null),[x,S]=I.useState(!1),[k,N]=I.useState(""),[C,D]=I.useState("cheapest");I.useEffect(()=>{(async()=>{r(!0),o(null);try{const[_,P,L]=await Promise.all([rn(Vr(tt(Ne,"lands"),Ur("status","==","approved"))),rn(tt(Ne,"hectares")),rn(Vr(tt(Ne,"market_listings"),Ur("status","==","available")))]),B=_.docs.map(ee=>({id:ee.id,...ee.data()})),j=P.docs.map(ee=>({id:ee.id,...ee.data()})),M=L.docs.map(ee=>({id:ee.id,...ee.data()})),ye=B.map(ee=>{const G=j.filter(z=>z.landId===ee.id),se=M.filter(z=>z.landId===ee.id);if(se.length===0)return null;const pe=se.map(z=>Number(z.pricePerMonthGlv)||0),ve=pe.reduce((z,oe)=>z+oe,0)/pe.length,de=se.reduce((z,oe)=>{const ae=Math.max(0,Math.min(1,Number(oe.consumedFraction??0)));return z+(1-ae)},0)/Math.max(1,se.length),V=Zg(G);return{land:ee,hectares:G,listings:se,avgPrice:ve,minPrice:Math.min(...pe),maxPrice:Math.max(...pe),absorptionTon:V,availableCapacityPct:de*100,availableCarbonTon:V*de,mapUrl:Xg(ee.locationText),priceSeries7d:aq(ve)}}).filter(ee=>ee!==null);d(ye)}catch(_){const P=_ instanceof Error?_.message:"Failed to load marketplace assets.";o(P)}finally{r(!1)}})()},[]);const F=I.useMemo(()=>{const T=c.reduce((L,B)=>L+B.listings.length,0),_=c.length>0?c.reduce((L,B)=>L+B.avgPrice,0)/c.length:0,P=c.reduce((L,B)=>L+B.absorptionTon,0);return{listedCount:T,avgPrice:_,totalAbsorption:P}},[c]),U=I.useMemo(()=>{const T=k.trim().toLowerCase(),_=Number(T);let P=c.filter(L=>!T||L.land.title.toLowerCase().includes(T)||L.land.locationText.toLowerCase().includes(T)?!0:Number.isFinite(_)?L.absorptionTon>=_:!1);return P=P.sort((L,B)=>C==="cheapest"?L.minPrice-B.minPrice:C==="highest_price"?B.maxPrice-L.maxPrice:C==="highest_absorption"?B.absorptionTon-L.absorptionTon:B.land.areaHa-L.land.areaHa),P},[c,k,C]),$=I.useMemo(()=>{const T=[];return c.forEach(_=>{_.listings.forEach(P=>{if(P.status!=="available")return;const L=_.hectares.find(ve=>ve.id===P.hectareId);if(!L)return;const B=Math.max(0,Math.min(1,Number(P.consumedFraction??0))),j=Math.max(0,1-B);if(j<=0)return;const M=Number(L.areaHa)||0,ye=Math.max(0,Math.min(1,Number(L.ndviLatest?.mean??.62))),ee=Number(L.creditModel?.riskAdjustedTonPerHaYear??2.3),G=M*ye*ee,se=G*j;if(se<=0)return;const pe=Number(P.pricePerMonthGlv)||0;pe<=0||T.push({listingId:P.id,landId:P.landId,landTitle:_.land.title,hectareId:P.hectareId,hectareIndex:L.index,yearlyPriceGlst:pe,unitPriceGlstPerTon:pe/G,availableFraction:j,availableCarbonTon:se,availableAreaHa:M*j})})}),T},[c]),Y=I.useMemo(()=>{const T=Number(h);return lq(T,$)},[h,$]),te=async()=>{if(b(null),!e){b("Sign in first to place a compensation buy request."),n("/auth");return}if(!Y||Y.allocations.length===0){b("No valid quote available. Check the requested carbon amount.");return}S(!0);try{const T={requesterUid:e.uid,requesterEmail:e.email??"",targetKg:Y.targetKg,targetTon:Y.targetTon,filledTon:Y.filledTon,unfilledTon:Y.unfilledTon,coveragePct:Y.coveragePct,totalPriceGlst:Y.totalPriceGlst,avgPricePerTonGlst:Y.avgPricePerTonGlst,status:Y.unfilledTon>0?"pending_partial":"pending",allocationPlan:Y.allocations};try{await Ru(tt(Ne,"compensation_orders"),{...T,createdAt:Rt(),updatedAt:Rt()}),b("Buy request submitted. Admin can now settle this request in the payout flow.")}catch(_){if(!oq(_))throw _;await Ru(tt(Ne,"land_submissions"),{ownerUid:e.uid,ownerName:e.displayName??e.email??"Carbon Buyer",title:`Carbon Compensation Order (${Y.targetKg.toFixed(0)} kg)`,locationText:"MARKETPLACE_POOL",areaHa:0,kyc:{ktpName:"N/A",ktpNumberMasked:"N/A",selfieUrl:""},landProof:{type:"compensation_order",url:"internal://compensation-order",notes:JSON.stringify(T)},status:"compensation_requested",adminNotes:"Fallback mode: stored as land_submissions due current Firestore rules.",createdAt:Rt(),updatedAt:Rt()}),b("Buy request submitted in fallback mode (no deploy needed). Admin can review it from Firestore now.")}}catch(T){const _=T instanceof Error?T.message:"Failed to submit buy request.";b(_)}finally{S(!1)}};return g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Public Route"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)]",children:"Glyiv Land Marketplace"}),g.jsx("p",{className:"mt-3 text-sm text-[var(--text-muted)]",children:"Transparent listings of approved hectares with carbon metrics and price discovery tools."}),g.jsxs("section",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:[g.jsx("h2",{className:"font-syne text-2xl text-[var(--text-main)]",children:"Carbon Compensation Pool"}),g.jsx("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:"Enter target carbon in kg. Marketplace pool calculates weighted average GLST price and fills from available hectare capacity."}),g.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-[1fr_auto] md:items-end",children:[g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Carbon to compensate (kg CO2)",g.jsx("input",{type:"number",min:1,step:1,value:h,onChange:T=>m(T.target.value),placeholder:"e.g. 5000",className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)]"})]}),g.jsx("button",{type:"button",onClick:()=>{te()},disabled:x||!Y||Y.allocations.length===0,className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-xs font-semibold uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-60",children:x?"Submitting...":"Buy To Compensate"})]}),Y&&g.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-4",children:[g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-[10px] uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Requested"}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:[Y.targetKg.toFixed(0)," kg (",Y.targetTon.toFixed(3)," t)"]})]}),g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-[10px] uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Estimated Total"}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:[Y.totalPriceGlst.toFixed(2)," GLST/year"]})]}),g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-[10px] uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Avg Price"}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:[Y.avgPricePerTonGlst.toFixed(2)," GLST/tCO2/year"]})]}),g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-[10px] uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Coverage"}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:[Y.coveragePct.toFixed(2),"%"]})]})]}),Y&&Y.allocations.length>0&&g.jsxs("div",{className:"mt-4 rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-[10px] uppercase tracking-[0.12em] text-[var(--primary)]",children:"Pool Fill Plan"}),g.jsx("div",{className:"mt-2 space-y-1 text-xs text-[var(--text-muted)]",children:Y.allocations.map(T=>g.jsxs("p",{children:[T.landTitle," | H#",T.hectareIndex," | ",T.carbonTon.toFixed(3)," tCO2/year | ",T.amountGlst.toFixed(2)," GLST"]},`${T.listingId}-${T.hectareId}`))}),Y.unfilledTon>0&&g.jsxs("p",{className:"mt-2 text-xs text-yellow-200",children:["Pool cannot fully fill request. Unfilled: ",Y.unfilledTon.toFixed(3)," tCO2/year."]})]}),w&&g.jsx("p",{className:"mt-4 rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-3 py-2 text-xs text-[var(--text-main)]",children:w})]}),i&&g.jsx("p",{className:"mt-4 rounded-xl border border-red-400/35 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:i}),g.jsxs("section",{className:"mt-6 grid gap-4 md:grid-cols-3",children:[g.jsxs("article",{className:"rounded-2xl border border-[var(--edge)] bg-[var(--card-soft)] p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Listed Hectares"}),g.jsx("p",{className:"mt-1 font-syne text-3xl text-[var(--text-main)]",children:F.listedCount})]}),g.jsxs("article",{className:"rounded-2xl border border-[var(--edge)] bg-[var(--card-soft)] p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Average Yearly Price"}),g.jsxs("p",{className:"mt-1 font-syne text-3xl text-[var(--text-main)]",children:[F.avgPrice.toFixed(2)," GLV/year"]})]}),g.jsxs("article",{className:"rounded-2xl border border-[var(--edge)] bg-[var(--card-soft)] p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Total Carbon Absorption"}),g.jsxs("p",{className:"mt-1 font-syne text-3xl text-[var(--text-main)]",children:[F.totalAbsorption.toFixed(2)," ton/y"]})]})]}),g.jsxs("section",{className:"mt-6 grid gap-3 md:grid-cols-[1fr_220px]",children:[g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Search land name, location, or minimum carbon absorption",g.jsx("input",{value:k,onChange:T=>N(T.target.value),placeholder:"e.g. Gowa, Lahan Syahril, 1.8",className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-4 py-3 text-sm text-[var(--text-main)]"})]}),g.jsxs("label",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Sort by",g.jsxs("select",{value:C,onChange:T=>D(T.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-3 text-sm text-[var(--text-main)]",children:[g.jsx("option",{value:"cheapest",children:"Cheapest"}),g.jsx("option",{value:"highest_price",children:"Highest Price"}),g.jsx("option",{value:"highest_absorption",children:"Highest Carbon Absorption"}),g.jsx("option",{value:"largest_area",children:"Largest Area"})]})]})]}),t&&g.jsx("p",{className:"mt-6 text-sm uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Loading marketplace assets..."}),g.jsxs("section",{className:"mt-6 grid gap-5 lg:grid-cols-2",children:[!t&&U.length===0&&g.jsx("article",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5 text-sm text-[var(--text-muted)]",children:"No assets match your search."}),U.map(T=>{const _=Math.max(...T.priceSeries7d,1);return g.jsxs("article",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:[g.jsx("div",{className:"aspect-[16/8] overflow-hidden rounded-2xl border border-[var(--edge)] bg-[var(--card-hard)]",children:g.jsx("iframe",{title:`maps-${T.land.id}`,src:`https://www.google.com/maps?q=${encodeURIComponent(T.land.locationText)}&output=embed`,className:"h-full w-full",loading:"lazy"})}),g.jsxs("div",{className:"mt-4 flex items-start justify-between gap-3",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"font-syne text-2xl text-[var(--text-main)]",children:T.land.title}),g.jsx("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:T.land.locationText})]}),g.jsxs("span",{className:"rounded-full border border-[var(--edge)] px-3 py-1 text-[10px] uppercase tracking-[0.14em] text-[var(--primary)]",children:[T.land.areaHa," ha"]})]}),g.jsxs("div",{className:"mt-4 grid gap-2 text-xs text-[var(--text-muted)] md:grid-cols-2",children:[g.jsxs("p",{children:["Avg: ",T.avgPrice.toFixed(2)," GLV/year"]}),g.jsxs("p",{children:["Range: ",T.minPrice.toFixed(2)," - ",T.maxPrice.toFixed(2)," GLV/year"]}),g.jsxs("p",{children:["Carbon: ",T.absorptionTon.toFixed(2)," ton/y"]}),g.jsxs("p",{children:["Available Carbon: ",T.availableCarbonTon.toFixed(2)," ton/y"]}),g.jsxs("p",{children:["Capacity Left: ",T.availableCapacityPct.toFixed(2),"%"]}),g.jsxs("p",{children:["Listings: ",T.listings.length]})]}),g.jsxs("div",{className:"mt-4 rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:"7D Price Momentum"}),g.jsx("div",{className:"mt-2 flex items-end gap-1",children:T.priceSeries7d.map((P,L)=>g.jsx("div",{className:"flex-1",children:g.jsx("div",{className:"w-full rounded-t-sm bg-gradient-to-b from-[var(--primary)] to-[#0dad68]",style:{height:`${Math.max(8,P/_*68)}px`},title:`${P.toFixed(2)} GLV`})},`${T.land.id}-p-${L}`))})]}),g.jsx("button",{type:"button",onClick:()=>n(`/marketplace-preview/${T.land.id}`),className:"mt-4 rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-[var(--text-main)]",children:"View Asset Detail"})]},T.land.id)})]})]})},uq=()=>{const{user:n,profile:e,refreshProfile:t}=Yn(),r=zo(),[i,o]=I.useState(!0),[c,d]=I.useState(null),[h,m]=I.useState(0),[w,b]=I.useState([]),[x,S]=I.useState([]),[k,N]=I.useState([]),[C,D]=I.useState(null),[F,U]=I.useState(""),[$,Y]=I.useState(""),[te,T]=I.useState(!1);I.useEffect(()=>{Y(e?.payoutWalletAddress??"")},[e?.payoutWalletAddress]);const _=I.useMemo(()=>{const j=new Set;return x.forEach(M=>{M.hectares.forEach(ye=>{const ee=ye.tokenization?.tokenAddress?.trim();ee&&j.add(ee)})}),[...j]},[x]),P=I.useCallback(async()=>{if(!n){o(!1);return}o(!0),d(null);try{const[j,M,ye,ee]=await Promise.all([rn(Vr(tt(Ne,"lands"),Ur("ownerUid","==",n.uid),Ur("status","==","approved"))),Fo(pt(Ne,"wallets",n.uid)),rn(Vr(tt(Ne,"ledger"),Ur("toUid","==",n.uid))),rn(Vr(tt(Ne,"ledger"),Ur("fromUid","==",n.uid)))]),G=j.docs.map(z=>({id:z.id,...z.data()})),se=await Promise.all(G.map(async z=>{const ae=(await rn(Vr(tt(Ne,"hectares"),Ur("landId","==",z.id)))).docs.map(we=>({id:we.id,...we.data()})).sort((we,Re)=>we.index-Re.index);return{land:z,hectares:ae,latestCarbonTon:Zg(ae),mapUrl:Xg(z.locationText)}})),pe=M.exists()?M.data():void 0,ve=ye.docs.map(z=>({id:z.id,...z.data()})),de=ee.docs.map(z=>({id:z.id,...z.data()})),V=[...ve,...de].reduce((z,oe)=>(z.some(ae=>ae.id===oe.id)||z.push(oe),z),[]).sort((z,oe)=>{const ae=typeof z.createdAt=="object"&&z.createdAt!==null&&"seconds"in z.createdAt?Number(z.createdAt.seconds):0;return(typeof oe.createdAt=="object"&&oe.createdAt!==null&&"seconds"in oe.createdAt?Number(oe.createdAt.seconds):0)-ae}).slice(0,10);m(S9(pe?.balances?.GLV??0)),b(V),S(se)}catch(j){const M=j instanceof Error?j.message:"Failed to load dashboard data.";d(M)}finally{o(!1)}},[n]),L=I.useCallback(async()=>{if(!$||!ma($)||_.length===0){N([]),D(null);return}D(null);try{const j=ft($),M=await Promise.all(_.map(async ye=>{const ee=await kP(ye),G=await PP(ye,j,ee.decimals);return{tokenAddress:ye,symbol:ee.symbol,balance:G}}));N(M)}catch(j){const M=j instanceof Error?j.message:"Failed to load GLST balances.";N([]),D(M)}},[_,$]);I.useEffect(()=>{P()},[P]),I.useEffect(()=>{L()},[L]);const B=async j=>{if(n){if(!ma(j)){d("Enter a valid payout wallet address.");return}T(!0),d(null);try{const M=ft(j);await Ts(pt(Ne,"users",n.uid),{payoutWalletAddress:M,payoutWalletUpdatedAt:Rt()}),Y(M),await t(),d(null)}catch(M){const ye=M instanceof Error?M.message:"Failed to update payout wallet.";d(ye)}finally{T(!1)}}};return g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"LO Route"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)]",children:"Dashboard"}),c&&g.jsx("p",{className:"mt-5 rounded-xl border border-red-400/35 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:c}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 md:p-8",children:[g.jsx("h2",{className:"font-syne text-3xl text-[var(--text-main)]",children:"Wallet"}),g.jsx("p",{className:"mt-3 text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"GLV Balance"}),g.jsx("p",{className:"mt-1 font-syne text-5xl text-[var(--text-main)]",children:h.toFixed(2)}),g.jsxs("div",{className:"mt-8 rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:"GLST Payout Wallet (Sepolia)"}),g.jsx("p",{className:"mt-2 text-xs text-[var(--text-muted)]",children:"This wallet receives GLST when admin settles rental payouts on-chain."}),g.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-[1fr_auto] md:items-end",children:[g.jsx(ts,{label:"Payout Wallet Address",value:$,onChange:Y,required:!0}),g.jsx("button",{type:"button",disabled:te,onClick:()=>{B($)},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-60",children:te?"Saving...":"Save Payout Wallet"})]}),g.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[g.jsx(ii,{wallet:F,onConnected:U}),g.jsx("button",{type:"button",disabled:!F||te,onClick:()=>{B(F)},className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-60",children:"Use Connected Wallet"})]}),g.jsxs("div",{className:"mt-4 space-y-2",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:"Linked Token Balances"}),C&&g.jsx("p",{className:"text-xs text-red-200",children:C}),!C&&k.length===0&&g.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"No linked tokenized hectares found yet, or payout wallet is not set."}),k.map(j=>g.jsxs("div",{className:"rounded-lg border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2",children:[g.jsxs("p",{className:"text-sm text-[var(--text-main)]",children:[j.balance," ",j.symbol]}),g.jsx("p",{className:"text-[10px] text-[var(--text-muted)]",children:j.tokenAddress})]},j.tokenAddress))]})]}),g.jsx("h3",{className:"mt-8 text-xs uppercase tracking-[0.16em] text-[var(--primary)]",children:"Recent Wallet Activity"}),g.jsxs("div",{className:"mt-4 space-y-3",children:[w.length===0&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No ledger entries yet."}),w.map(j=>g.jsxs("div",{className:"rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3 text-left",children:[g.jsxs("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:[j.type," ",j.assetSymbol?`| ${j.assetSymbol}`:""]}),g.jsxs("p",{className:"mt-1 text-sm text-[var(--text-main)]",children:[j.amountGlv.toFixed(2)," ",j.assetSymbol??"GLV"]}),g.jsxs("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:["Status: ",j.status??"simulated"," | ",_x(j.createdAt)]}),j.txHash&&g.jsx("a",{href:qx(j.txHash),target:"_blank",rel:"noreferrer",className:"mt-2 inline-block text-xs text-[var(--text-main)] underline",children:"View Tx"})]},j.id))]})]}),g.jsx("div",{className:"mt-10",children:g.jsx("h2",{className:"font-syne text-3xl text-[var(--text-main)]",children:"Land Management"})}),i&&g.jsx("p",{className:"mt-5 text-sm uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Loading dashboard data..."}),g.jsxs("div",{className:"mt-6 grid gap-5 md:grid-cols-2",children:[!i&&x.length===0&&g.jsx("article",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 text-sm text-[var(--text-muted)]",children:"No approved lands found. Submit land first, then wait for admin approval."}),x.map(j=>g.jsxs("button",{type:"button",onClick:()=>r(`/dashboard/land/${j.land.id}`),className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5 text-left transition hover:border-[var(--edge-strong)]",children:[g.jsxs("div",{className:"flex items-start justify-between gap-3",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-syne text-2xl text-[var(--text-main)]",children:j.land.title}),g.jsx("p",{className:"mt-1 text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:j.land.status})]}),g.jsxs("span",{className:"rounded-full border border-[var(--edge)] px-3 py-1 text-[10px] uppercase tracking-[0.14em] text-[var(--text-muted)]",children:[j.land.areaHa," ha"]})]}),g.jsx("p",{className:"mt-4 text-sm text-[var(--text-muted)]",children:j.land.locationText}),g.jsxs("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:["Hectares: ",j.hectares.length," | Carbon absorption (latest estimate): ",j.latestCarbonTon.toFixed(2)," ton/year"]}),g.jsxs("div",{className:"mt-4 rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:"Hectare Location & Maps View"}),g.jsx("p",{className:"mt-2 text-xs text-[var(--text-muted)]",children:j.hectares.length>0?`Hectare #1 to #${j.hectares.length} are mapped under this registered land.`:"Hectare location data is pending admin-generated polygons."}),g.jsx("a",{href:j.mapUrl,target:"_blank",rel:"noreferrer",onClick:M=>M.stopPropagation(),className:"mt-3 inline-block rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)]",children:"Open Maps View"})]}),g.jsx("p",{className:"mt-4 text-xs uppercase tracking-[0.14em] text-[var(--primary)]",children:"Open Land Detail"})]},j.land.id))]})]})},LS={title:"",locationText:"",areaHa:"1",ktpName:"",ktpNumber:"",selfieUrl:"",certificateUrl:"",notes:""},dq=()=>{const{user:n}=Yn(),[e,t]=I.useState(LS),[r,i]=I.useState(!1),[o,c]=I.useState([]),[d,h]=I.useState(null),[m,w]=I.useState(null),b=I.useMemo(()=>n?.displayName??n?.email??"Land Owner",[n?.displayName,n?.email]),x=I.useCallback(async()=>{if(!n){c([]);return}const N=Vr(tt(Ne,"land_submissions"),Ur("ownerUid","==",n.uid)),D=(await rn(N)).docs.map(F=>({id:F.id,...F.data()})).filter(F=>F.landProof?.type!=="compensation_order").sort((F,U)=>{const $=typeof F.createdAt=="object"&&F.createdAt!==null&&"seconds"in F.createdAt?Number(F.createdAt.seconds):0;return(typeof U.createdAt=="object"&&U.createdAt!==null&&"seconds"in U.createdAt?Number(U.createdAt.seconds):0)-$});c(D)},[n]);I.useEffect(()=>{x()},[x]);const S=(N,C)=>{t(D=>({...D,[N]:C}))},k=async N=>{if(N.preventDefault(),!!n){i(!0),h(null),w(null);try{const C=Number(e.areaHa);if(!Number.isFinite(C)||C<=0){w("Estimated area must be greater than 0 hectare."),i(!1);return}const D=C,F=e.certificateUrl.includes("bhumi.atrbpn.go.id")?"bhumi_link":"url";await Ru(tt(Ne,"land_submissions"),{ownerUid:n.uid,ownerName:b,title:e.title.trim(),locationText:e.locationText.trim(),areaHa:D,kyc:{ktpName:e.ktpName.trim(),ktpNumberMasked:N9(e.ktpNumber),selfieUrl:e.selfieUrl.trim()||""},landProof:{type:F,url:e.certificateUrl.trim(),notes:e.notes.trim()||""},status:"pending",adminNotes:"",createdAt:Rt(),updatedAt:Rt()}),t(LS),h("Submission created. Status is now pending."),await x()}catch(C){const D=C instanceof Error?C.message:"Failed to submit land registration.";w(D)}finally{i(!1)}}};return g.jsx("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]",children:[g.jsxs("article",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 md:p-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"LO Route"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)]",children:"Register Land"}),g.jsxs("form",{onSubmit:k,className:"mt-6 grid gap-4",children:[g.jsxs("label",{className:"text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Land title",g.jsx("input",{required:!0,value:e.title,onChange:N=>S("title",N.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),g.jsxs("label",{className:"text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Location text",g.jsx("input",{required:!0,value:e.locationText,onChange:N=>S("locationText",N.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),g.jsxs("label",{className:"text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Estimated area (ha)",g.jsx("input",{required:!0,min:1e-4,step:1e-4,type:"number",value:e.areaHa,onChange:N=>S("areaHa",N.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"}),g.jsx("span",{className:"mt-1 block text-[10px] uppercase tracking-[0.12em] text-[var(--text-muted)]",children:"Example: 82 m2 = 0.0082 ha"})]}),g.jsxs("label",{className:"text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["KTP name",g.jsx("input",{required:!0,value:e.ktpName,onChange:N=>S("ktpName",N.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),g.jsxs("label",{className:"text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["KTP number (masked at save)",g.jsx("input",{required:!0,value:e.ktpNumber,onChange:N=>S("ktpNumber",N.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),g.jsxs("label",{className:"text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Selfie URL (optional)",g.jsx("input",{value:e.selfieUrl,onChange:N=>S("selfieUrl",N.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),g.jsxs("label",{className:"text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Land certificate URL",g.jsx("input",{required:!0,type:"url",value:e.certificateUrl,onChange:N=>S("certificateUrl",N.target.value),className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),g.jsxs("label",{className:"text-left text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Notes (optional)",g.jsx("textarea",{value:e.notes,onChange:N=>S("notes",N.target.value),rows:3,className:"mt-2 w-full rounded-xl border border-[var(--edge)] bg-[var(--card-hard)] px-4 py-3 text-sm text-[var(--text-main)] outline-none focus:border-[var(--edge-strong)]"})]}),d&&g.jsx("p",{className:"rounded-xl border border-emerald-500/35 bg-emerald-500/12 px-3 py-2 text-sm text-emerald-200",children:d}),m&&g.jsx("p",{className:"rounded-xl border border-red-400/35 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:m}),g.jsx("button",{type:"submit",disabled:r,className:"btn-primary btn-shine mt-2 rounded-2xl px-6 py-3 text-sm font-semibold uppercase tracking-[0.12em] text-[#03140b] disabled:cursor-not-allowed disabled:opacity-70",children:r?"Submitting...":"Submit Land"})]})]}),g.jsxs("article",{className:"rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-6 md:p-8",children:[g.jsx("h2",{className:"font-syne text-2xl text-[var(--text-main)]",children:"My Submission Status"}),g.jsxs("div",{className:"mt-5 space-y-4",children:[o.length===0&&g.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No submissions yet."}),o.map(N=>g.jsxs("div",{className:"rounded-2xl border border-[var(--edge)] bg-[var(--card-hard)] p-4 text-left",children:[g.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:N.title}),g.jsxs("p",{className:"mt-1 text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:["Status: ",N.status]}),g.jsxs("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:["Submitted: ",_x(N.createdAt)]}),N.adminNotes&&g.jsxs("p",{className:"mt-3 rounded-xl border border-[var(--edge)] bg-[var(--card-soft)] px-3 py-2 text-xs text-[var(--text-muted)]",children:["Admin notes: ",N.adminNotes]})]},N.id))]})]})]})})},ib=8,hq="RENTED_SIMULATION_POOL",Ni=n=>Math.max(0,Math.min(1,n)),ab=n=>{if(!n)return 0;const e=Math.max(Number(n.areaHa)||0,0),t=Math.max(0,Math.min(1,n.ndviLatest?.mean??.62)),r=n.creditModel?.riskAdjustedTonPerHaYear??2.3;return Vt(e*t*r)},fq=()=>{const{user:n}=Yn(),[e,t]=I.useState([]),[r,i]=I.useState([]),[o,c]=I.useState([]),[d,h]=I.useState([]),[m,w]=I.useState({}),[b,x]=I.useState(0),[S,k]=I.useState(""),[N,C]=I.useState(null),[D,F]=I.useState({}),[U,$]=I.useState({}),[Y,te]=I.useState({}),[T,_]=I.useState({}),[P,L]=I.useState({}),[B,j]=I.useState({}),[M,ye]=I.useState({}),[ee,G]=I.useState(1),[se,pe]=I.useState(!0),[ve,de]=I.useState(!1),[V,z]=I.useState(null),[oe,ae]=I.useState(null);I.useEffect(()=>{if(se||ve){RR("Processing...");return}kR()},[se,ve]);const we=I.useCallback(async()=>{if(!n){pe(!1);return}pe(!0),ae(null);try{await qg(pt(Ne,"wallets",n.uid),{balances:{GLV:0},updatedAt:Rt()},{merge:!0});const[ge,Me,Bt,et,an,kt]=await Promise.all([rn(tt(Ne,"lands")),rn(tt(Ne,"hectares")),rn(tt(Ne,"market_listings")),rn(tt(Ne,"token_suites")),rn(tt(Ne,"users")),Fo(pt(Ne,"wallets",n.uid))]);t(ge.docs.map(Ee=>({id:Ee.id,...Ee.data()}))),i(Me.docs.map(Ee=>({id:Ee.id,...Ee.data()}))),c(Bt.docs.map(Ee=>({id:Ee.id,...Ee.data()}))),h(et.docs.map(Ee=>({id:Ee.id,...Ee.data()})));const ze={};an.docs.forEach(Ee=>{const gt=Ee.data();gt.payoutWalletAddress&&(ze[Ee.id]=gt.payoutWalletAddress)}),w(ze);const Fe=kt.data();x(Fe?.balances?.GLV??0)}catch(ge){const Me=ge instanceof Error?ge.message:"Failed to load rent settlement data.";ae(Me)}finally{pe(!1)}},[n]);I.useEffect(()=>{we()},[we]),I.useEffect(()=>{(async()=>{try{C(await Fu())}catch{C(null)}})()},[S]);const Re=ge=>{const Me=r.find(an=>an.id===ge.hectareId),Bt=Me?.tokenization?.suiteId,et=Bt?d.find(an=>an.id===Bt):void 0;return{hectare:Me,suiteId:Bt,suite:et,tokenAddress:Me?.tokenization?.tokenAddress||et?.addresses.token||""}},Te=async ge=>{const Me=[],{hectare:Bt,suiteId:et,suite:an,tokenAddress:kt}=Re(ge),ze=m[ge.ownerUid],Fe=an?.treasuryAddress||"",Ee=an?.addresses.identityRegistry||"",gt=ma(S)?ft(S):"";if(Bt||Me.push("Hectare not found for listing."),(!et||!an)&&Me.push("Hectare is not linked to an attached token suite."),(!kt||!ma(kt))&&Me.push("Invalid or missing token address."),(!Ee||!ma(Ee))&&Me.push("Suite identity registry address is missing."),(!ze||!ma(ze))&&Me.push("LO payout wallet is missing or invalid."),(!Fe||!ma(Fe))&&Me.push("Suite treasury wallet is missing or invalid."),gt||Me.push("Connect an admin wallet before GLST settlement."),N!==Ta&&Me.push("Admin wallet must be connected on Sepolia (11155111)."),Me.length>0||!Ee||!kt||!ze||!Fe||!gt)return{ok:!1,issues:Me,ownerWallet:ze,treasuryWallet:Fe,adminWallet:gt,tokenAddress:kt,suiteId:et};try{const[on,St,jn,nt,jt,ar,Os]=await Promise.all([Lp(Ee,ze),Lp(Ee,gt),Lp(Ee,Fe),Mp(kt,ze),Mp(kt,gt),Mp(kt,Fe),EG(kt,gt)]);return on||Me.push("Owner payout wallet is not identity-verified."),St||Me.push("Admin wallet is not identity-verified."),jn||Me.push("Treasury wallet is not identity-verified."),nt&&Me.push("Owner payout wallet is frozen."),jt&&Me.push("Admin wallet is frozen."),ar&&Me.push("Treasury wallet is frozen."),Os||Me.push("Connected admin wallet is not an agent on this token."),{ok:Me.length===0,issues:Me,ownerWallet:ze,treasuryWallet:Fe,adminWallet:gt,tokenAddress:kt,suiteId:et,ownerVerified:on,adminVerified:St,treasuryVerified:jn,ownerFrozen:nt,adminFrozen:jt,treasuryFrozen:ar,adminIsAgent:Os}}catch(on){return{ok:!1,issues:[OP(on)],ownerWallet:ze,treasuryWallet:Fe,adminWallet:gt,tokenAddress:kt,suiteId:et}}},Ze=async ge=>{de(!0),ae(null),z(null);try{const Me=await Te(ge);j(Bt=>({...Bt,[ge.id]:Me})),z(Me.ok?"Preflight passed. Ready to settle GLST.":"Preflight found issues.")}finally{de(!1)}},Le=async ge=>{if(!n)return;const Me=r.find(Ee=>Ee.id===ge.hectareId),Bt=Ni(Number(ge.consumedFraction??0)),et=Ni(1-Bt);if(et<=0){ae("This listing is fully allocated already.");return}const an=D[ge.id]??"",kt=Number(an),ze=Number(Y[ge.id]??"100"),Fe=Ni(ze/100);if(!Number.isFinite(ze)||ze<=0){ae("Enter a valid allocation percentage between 0 and 100.");return}if(Fe>et+1e-4){ae(`Allocation exceeds remaining availability (${(et*100).toFixed(2)}%).`);return}if(!Number.isFinite(kt)||kt<=0){ae("Enter a valid positive yearly GLV price before simulating payment.");return}de(!0),ae(null),z(null);try{const Ee=Vt(kt*Fe),gt=Vt(Ee*.65),on=Vt(Ee*.3),St=Vt(Ee-gt-on),jn=Vt((Me?.areaHa??0)*Fe),nt=Vt(ab(Me)*Fe),jt=Rp(Ne),ar=pt(tt(Ne,"ledger")),Os=pt(tt(Ne,"ledger")),Fi=pt(tt(Ne,"ledger")),Ds={type:"PAYOUT",fromUid:"rent_pool",assetSymbol:"GLV",status:"simulated",ref:{hectareId:ge.hectareId,landId:ge.landId,listingId:ge.id,allocationFraction:Fe,allocatedAreaHa:jn,allocatedCarbonTonPerYear:nt},createdAt:Rt()};jt.set(ar,{...Ds,toUid:ge.ownerUid,amountGlv:gt}),jt.set(Os,{...Ds,toUid:n.uid,amountGlv:on}),jt.set(Fi,{...Ds,toUid:op,amountGlv:St});const or=new Map;or.set(ge.ownerUid,gt),or.set(n.uid,(or.get(n.uid)??0)+on),or.set(op,(or.get(op)??0)+St),or.forEach((Un,fn)=>{jt.set(pt(Ne,"wallets",fn),{balances:{GLV:d5(Un)},updatedAt:Rt()},{merge:!0})}),await jt.commit(),z(`Simulated yearly payment for ${(Fe*100).toFixed(2)}% hectare (${jn.toFixed(2)} ha, ${nt.toFixed(2)} tCO2/y): owner ${gt.toFixed(2)} GLV, admin ${on.toFixed(2)} GLV, treasury ${St.toFixed(2)} GLV.`),F(Un=>({...Un,[ge.id]:""})),await we()}catch(Ee){const gt=Ee instanceof Error?Ee.message:"Failed to simulate payment.";ae(gt)}finally{de(!1)}},Bn=async ge=>{if(!n)return;const Me=r.find(Ee=>Ee.id===ge.hectareId),Bt=Ni(Number(ge.consumedFraction??0)),et=Ni(1-Bt);if(et<=0){ae("This listing is fully allocated already.");return}const an=U[ge.id]??"",kt=Number(an),ze=Number(Y[ge.id]??"100"),Fe=Ni(ze/100);if(!Number.isFinite(ze)||ze<=0){ae("Enter a valid allocation percentage between 0 and 100.");return}if(Fe>et+1e-4){ae(`Allocation exceeds remaining availability (${(et*100).toFixed(2)}%).`);return}if(!Number.isFinite(kt)||kt<=0){ae("Enter a valid positive yearly GLST price before settlement.");return}de(!0),ae(null),z(null);try{const Ee=await Te(ge);if(j(Ft=>({...Ft,[ge.id]:Ee})),!Ee.ok||!Ee.tokenAddress||!Ee.suiteId||!Ee.ownerWallet||!Ee.treasuryWallet||!Ee.adminWallet){ae(`Cannot settle GLST: ${Ee.issues.join(" | ")}`);return}const gt=Vt(kt*Fe),on=Vt(gt*.65),St=Vt(gt*.3),jn=Vt(gt-on-St),nt=Vt((Me?.areaHa??0)*Fe),jt=Vt(ab(Me)*Fe),ar=await Ru(tt(Ne,"payout_jobs"),{listingId:ge.id,landId:ge.landId,hectareId:ge.hectareId,suiteId:Ee.suiteId,tokenAddress:Ee.tokenAddress,ownerUid:ge.ownerUid,ownerWallet:Ee.ownerWallet,adminWallet:Ee.adminWallet,treasuryWallet:Ee.treasuryWallet,amountInput:gt,allocationFraction:Fe,allocatedAreaHa:nt,allocatedCarbonTonPerYear:jt,ownerAmount:on,adminAmount:St,treasuryAmount:jn,status:"pending",txHashes:{},createdAt:Rt(),updatedAt:Rt()}),Os=pt(tt(Ne,"ledger")),Fi=pt(tt(Ne,"ledger")),Ds=pt(tt(Ne,"ledger")),or=Rp(Ne),Un={type:"PAYOUT",fromUid:"rent_pool",chainId:Ta,suiteId:Ee.suiteId,tokenAddress:Ee.tokenAddress,assetSymbol:"GLST",status:"pending",ref:{hectareId:ge.hectareId,landId:ge.landId,listingId:ge.id,payoutJobId:ar.id,renterUid:T[ge.id]??"",allocationFraction:Fe,allocatedAreaHa:nt,allocatedCarbonTonPerYear:jt},createdAt:Rt()};or.set(Os,{...Un,toUid:ge.ownerUid,amountGlv:on}),or.set(Fi,{...Un,toUid:n.uid,amountGlv:St}),or.set(Ds,{...Un,toUid:op,amountGlv:jn}),await or.commit();const fn=d.find(Ft=>Ft.id===Ee.suiteId)?.decimals??18,pr=await NG(Ee.tokenAddress,fn,[{label:"owner",recipient:Ee.ownerWallet,amount:on.toString()},{label:"admin",recipient:Ee.adminWallet,amount:St.toString()},{label:"treasury",recipient:Ee.treasuryWallet,amount:jn.toString()}]),Zt={owner:Os,admin:Fi,treasury:Ds},La=Rp(Ne),Hi={};let Ms=!1;pr.forEach(Ft=>{Ft.status==="confirmed"&&Ft.txHash&&(Hi[Ft.label]=Ft.txHash),Ft.status==="failed"&&(Ms=!0),La.update(Zt[Ft.label],{status:Ft.status,txHash:Ft.txHash??"",blockNumber:Ft.blockNumber??null,errorMessage:Ft.errorMessage??""})}),La.update(pt(Ne,"payout_jobs",ar.id),{status:Ms?"failed":"confirmed",txHashes:Hi,updatedAt:Rt()}),await La.commit();const lr=Ni(Bt+Fe);Ms||await Ts(pt(Ne,"market_listings",ge.id),{consumedFraction:lr,status:lr>=.9999?"allocated_full":"available",updatedAt:Rt()}),!Ms&&P[ge.id]&&lr>=.9999&&await Promise.all([Ts(pt(Ne,"lands",ge.landId),{ownerUid:hq,status:"rented_simulation",rentedByUid:T[ge.id]??"",rentedAt:Rt()}),Ts(pt(Ne,"market_listings",ge.id),{status:"rented_simulation"})]),!Ms&&P[ge.id]&&lr<.9999&&z("GLST yearly settlement confirmed. Ownership was not released because allocation is below 100%."),ye(Ft=>({...Ft,[ge.id]:pr})),Ms?ae("GLST settlement partially failed. See receipt row for details."):(!P[ge.id]||lr>=.9999)&&z("GLST yearly settlement confirmed for owner/admin/treasury."),$(Ft=>({...Ft,[ge.id]:""})),await we()}catch(Ee){const gt=Ee instanceof Error?Ee.message:"Failed to settle GLST payout.";ae(gt)}finally{de(!1)}},Ps=I.useMemo(()=>{const ge=(ee-1)*ib;return o.slice(ge,ge+ib)},[ee,o]),hn=Math.max(1,Math.ceil(o.length/ib));return g.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-14 md:px-8",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--primary)]",children:"Admin Route"}),g.jsx("h1",{className:"mt-3 font-syne text-4xl tracking-[-0.02em] text-[var(--text-main)]",children:"Rent Settlement"}),g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-[var(--text-muted)]",children:"Admin Wallet Context"}),g.jsxs("p",{className:"mt-1 font-syne text-4xl text-[var(--text-main)]",children:[b.toFixed(2)," GLV"]}),g.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[g.jsx(ii,{wallet:S,onConnected:k}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Network: ",N??"-"," ",N===Ta?"(Sepolia)":"(switch to Sepolia)"]})]})]}),V&&g.jsx("p",{className:"mt-4 rounded-xl border border-emerald-500/35 bg-emerald-500/12 px-3 py-2 text-sm text-emerald-200",children:V}),oe&&g.jsx("p",{className:"mt-4 rounded-xl border border-red-400/35 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:oe}),!se&&g.jsxs("article",{className:"mt-6 rounded-3xl border border-[var(--edge)] bg-[var(--card-soft)] p-5",children:[g.jsx("h2",{className:"font-syne text-3xl text-[var(--text-main)]",children:"Yearly Listings Settlement"}),g.jsx("p",{className:"mt-2 text-sm text-[var(--text-muted)]",children:"Settle yearly rent in GLST with 65/30/5 split. You can allocate partial hectare capacity (for example 50%) and settle only that carbon share."}),g.jsx("div",{className:"mt-4 overflow-x-auto",children:g.jsxs("table",{className:"min-w-full border-collapse text-left text-xs text-[var(--text-muted)]",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Listing"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Land / Hectare"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Yearly Price"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Status"}),g.jsx("th",{className:"border-b border-[var(--edge)] px-3 py-2",children:"Settlement Actions"})]})}),g.jsx("tbody",{children:Ps.map(ge=>{const Me=e.find(nt=>nt.id===ge.landId),Bt=r.find(nt=>nt.id===ge.hectareId),et=B[ge.id],an=M[ge.id]??[],kt=Ni(Number(ge.consumedFraction??0)),ze=Ni(1-kt),Fe=Number(Y[ge.id]??"100"),Ee=Ni((Number.isFinite(Fe)?Fe:0)/100),gt=Number(Bt?.areaHa??0),on=ab(Bt),St=Vt(gt*Ee),jn=Vt(on*Ee);return g.jsxs("tr",{children:[g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2 align-top",children:ge.id.slice(0,8)}),g.jsxs("td",{className:"border-b border-[var(--edge)] px-3 py-2 align-top",children:[g.jsx("p",{className:"text-[var(--text-main)]",children:Me?.title??"-"}),g.jsxs("p",{className:"text-[10px]",children:["H#",Bt?.index??"-"," | Owner UID: ",ge.ownerUid]}),g.jsxs("p",{className:"text-[10px]",children:["Hectare Area: ",gt.toFixed(2)," ha"]}),g.jsxs("p",{className:"text-[10px]",children:["Carbon Absorption: ",on.toFixed(2)," tCO2/year"]}),g.jsxs("p",{className:"text-[10px]",children:["Available Capacity: ",(ze*100).toFixed(2),"%"]}),g.jsxs("p",{className:"text-[10px]",children:["LO payout wallet: ",m[ge.ownerUid]??"-"]})]}),g.jsxs("td",{className:"border-b border-[var(--edge)] px-3 py-2 align-top",children:[ge.pricePerMonthGlv," GLV/year"]}),g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2 uppercase align-top",children:ge.status}),g.jsx("td",{className:"border-b border-[var(--edge)] px-3 py-2 align-top",children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"rounded-lg border border-[var(--edge)] bg-[var(--card-hard)] p-2",children:[g.jsx("p",{className:"text-[10px] uppercase tracking-[0.1em] text-[var(--primary)]",children:"Allocation"}),g.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"number",min:.01,max:100,step:.01,placeholder:"%",value:Y[ge.id]??"100",onChange:nt=>te(jt=>({...jt,[ge.id]:nt.target.value})),className:"w-28 rounded-md border border-[var(--edge)] bg-[var(--card-soft)] px-2 py-1 text-xs text-[var(--text-main)]"}),g.jsxs("p",{className:"text-[10px] text-[var(--text-muted)]",children:["Requested: ",St.toFixed(2)," ha | ",jn.toFixed(2)," tCO2/year"]})]})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"number",min:0,step:.01,placeholder:"GLV yearly price (full hectare)",value:D[ge.id]??"",onChange:nt=>F(jt=>({...jt,[ge.id]:nt.target.value})),className:"w-32 rounded-md border border-[var(--edge)] bg-[var(--card-hard)] px-2 py-1 text-xs text-[var(--text-main)]"}),g.jsx("button",{type:"button",onClick:()=>{Le(ge)},disabled:ve||ze<=0,className:"rounded-md border border-[var(--edge)] px-2 py-1 text-[10px] uppercase tracking-[0.1em] text-[var(--text-main)] disabled:opacity-60",children:"Simulate GLV"})]}),g.jsxs("div",{className:"rounded-lg border border-[var(--edge)] bg-[var(--card-hard)] p-2",children:[g.jsx("p",{className:"text-[10px] uppercase tracking-[0.1em] text-[var(--primary)]",children:"Settle Yearly Rent (GLST)"}),g.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[g.jsx("input",{type:"number",min:0,step:.01,placeholder:"GLST yearly price (full hectare)",value:U[ge.id]??"",onChange:nt=>$(jt=>({...jt,[ge.id]:nt.target.value})),className:"w-32 rounded-md border border-[var(--edge)] bg-[var(--card-soft)] px-2 py-1 text-xs text-[var(--text-main)]"}),g.jsx("input",{type:"text",placeholder:"Renter UID (optional)",value:T[ge.id]??"",onChange:nt=>_(jt=>({...jt,[ge.id]:nt.target.value})),className:"w-48 rounded-md border border-[var(--edge)] bg-[var(--card-soft)] px-2 py-1 text-xs text-[var(--text-main)]"})]}),g.jsxs("label",{className:"mt-2 flex items-center gap-2 text-[10px] text-[var(--text-muted)]",children:[g.jsx("input",{type:"checkbox",checked:P[ge.id]??!1,onChange:nt=>L(jt=>({...jt,[ge.id]:nt.target.checked}))}),"Delete ownership after settlement (simulation only)"]}),g.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[g.jsx("button",{type:"button",onClick:()=>{Ze(ge)},disabled:ve,className:"rounded-md border border-[var(--edge)] px-2 py-1 text-[10px] uppercase tracking-[0.1em] text-[var(--text-main)] disabled:opacity-60",children:"Preflight"}),g.jsx("button",{type:"button",onClick:()=>{Bn(ge)},disabled:ve||ze<=0,className:"rounded-md border border-emerald-400/40 px-2 py-1 text-[10px] uppercase tracking-[0.1em] text-emerald-200 disabled:opacity-60",children:"Settle GLST"})]})]}),et&&g.jsxs("div",{className:`rounded-lg border p-2 ${et.ok?"border-emerald-500/40 bg-emerald-500/10":"border-red-500/40 bg-red-500/10"}`,children:[g.jsxs("p",{className:"text-[10px] uppercase tracking-[0.1em] text-[var(--text-main)]",children:["Preflight: ",et.ok?"PASS":"FAIL"]}),g.jsxs("p",{className:"text-[10px] text-[var(--text-muted)]",children:["Verified owner/admin/treasury: ",String(et.ownerVerified)," / ",String(et.adminVerified)," / ",String(et.treasuryVerified)]}),g.jsxs("p",{className:"text-[10px] text-[var(--text-muted)]",children:["Admin agent: ",String(et.adminIsAgent)]}),et.issues.length>0&&g.jsx("p",{className:"mt-1 text-[10px] text-red-200",children:et.issues.join(" | ")})]}),an.length>0&&g.jsxs("div",{className:"rounded-lg border border-[var(--edge)] bg-[var(--card-soft)] p-2",children:[g.jsx("p",{className:"text-[10px] uppercase tracking-[0.1em] text-[var(--primary)]",children:"Settlement Receipt"}),g.jsx("div",{className:"mt-1 space-y-1",children:an.map(nt=>g.jsxs("div",{className:"text-[10px] text-[var(--text-muted)]",children:[g.jsx("span",{className:"uppercase",children:nt.label}),": ",nt.amount," GLST | ",nt.status,nt.txHash&&g.jsx("a",{href:qx(nt.txHash),target:"_blank",rel:"noreferrer",className:"ml-2 underline text-[var(--text-main)]",children:"tx"}),nt.errorMessage&&g.jsx("span",{className:"ml-2 text-red-200",children:nt.errorMessage})]},`${ge.id}-${nt.label}`))})]})]})})]},ge.id)})})]})}),g.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[g.jsx("button",{type:"button",disabled:ee<=1,onClick:()=>G(ge=>Math.max(1,ge-1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Prev"}),g.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Page ",ee," / ",hn]}),g.jsx("button",{type:"button",disabled:ee>=hn,onClick:()=>G(ge=>Math.min(hn,ge+1)),className:"rounded-lg border border-[var(--edge)] px-3 py-2 text-xs uppercase tracking-[0.12em] text-[var(--text-main)] disabled:opacity-50",children:"Next"})]})]})]})};function mq(){return g.jsx(E5,{children:g.jsxs(x3,{children:[g.jsxs(en,{element:g.jsx(_5,{}),children:[g.jsx(en,{index:!0,element:g.jsx(P5,{})}),g.jsx(en,{path:"about",element:g.jsx(R5,{})}),g.jsx(en,{path:"auth",element:g.jsx(k5,{})}),g.jsx(en,{path:"register-land",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["LO"],children:g.jsx(dq,{})})})}),g.jsx(en,{path:"dashboard",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["LO"],children:g.jsx(uq,{})})})}),g.jsx(en,{path:"dashboard/land/:landId",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["LO"],children:g.jsx(C9,{})})})}),g.jsx(en,{path:"my-lands",element:g.jsx(jp,{to:"/dashboard",replace:!0})}),g.jsx(en,{path:"land_admin",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(A9,{})})})}),g.jsx(en,{path:"admin/rent-settlement",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(fq,{})})})}),g.jsx(en,{path:"admin/tokens",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(rq,{})})})}),g.jsx(en,{path:"admin/tokens/:suiteId",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx($G,{})})})}),g.jsx(en,{path:"admin/tokens/:suiteId/attach",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(qG,{})})})}),g.jsx(en,{path:"admin/tokens/:suiteId/mint",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(tq,{})})})}),g.jsx(en,{path:"admin/tokens/:suiteId/burn",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(QG,{})})})}),g.jsx(en,{path:"admin/tokens/:suiteId/wallets",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(nq,{})})})}),g.jsx(en,{path:"admin/tokens/:suiteId/agents",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(VG,{})})})}),g.jsx(en,{path:"admin/tokens/:suiteId/claims",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(KG,{})})})}),g.jsx(en,{path:"admin/tokens/:suiteId/events",element:g.jsx(Or,{children:g.jsx(Dr,{roles:["ADMIN"],children:g.jsx(eq,{})})})}),g.jsx(en,{path:"marketplace-preview",element:g.jsx(cq,{})}),g.jsx(en,{path:"marketplace-preview/:landId",element:g.jsx(iq,{})})]}),g.jsx(en,{path:"*",element:g.jsx(jp,{to:"/",replace:!0})})]})})}xD.createRoot(document.getElementById("root")).render(g.jsx(I.StrictMode,{children:g.jsx(q3,{children:g.jsx(mq,{})})}));
